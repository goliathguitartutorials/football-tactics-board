(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function e(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=e(l);fetch(l.href,c)}})();var T2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var h1={exports:{}},ig={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function n6(){if(b2)return ig;b2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(a,l,c){var h=null;if(c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:i,type:a,key:h,ref:l!==void 0?l:null,props:c}}return ig.Fragment=t,ig.jsx=e,ig.jsxs=e,ig}var A2;function i6(){return A2||(A2=1,h1.exports=n6()),h1.exports}var tt=i6(),f1={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function a6(){if(C2)return De;C2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function D(Q){return Q===null||typeof Q!="object"?null:(Q=A&&Q[A]||Q["@@iterator"],typeof Q=="function"?Q:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,P={};function U(Q,rt,bt){this.props=Q,this.context=rt,this.refs=P,this.updater=bt||C}U.prototype.isReactComponent={},U.prototype.setState=function(Q,rt){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,rt,"setState")},U.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function H(){}H.prototype=U.prototype;function N(Q,rt,bt){this.props=Q,this.context=rt,this.refs=P,this.updater=bt||C}var x=N.prototype=new H;x.constructor=N,R(x,U.prototype),x.isPureReactComponent=!0;var L=Array.isArray,F={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function j(Q,rt,bt,lt,dt,Nt){return bt=Nt.ref,{$$typeof:i,type:Q,key:rt,ref:bt!==void 0?bt:null,props:Nt}}function M(Q,rt){return j(Q.type,rt,void 0,void 0,void 0,Q.props)}function I(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===i}function V(Q){var rt={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(bt){return rt[bt]})}var B=/\/+/g;function Y(Q,rt){return typeof Q=="object"&&Q!==null&&Q.key!=null?V(""+Q.key):rt.toString(36)}function b(){}function q(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(b,b):(Q.status="pending",Q.then(function(rt){Q.status==="pending"&&(Q.status="fulfilled",Q.value=rt)},function(rt){Q.status==="pending"&&(Q.status="rejected",Q.reason=rt)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function G(Q,rt,bt,lt,dt){var Nt=typeof Q;(Nt==="undefined"||Nt==="boolean")&&(Q=null);var Vt=!1;if(Q===null)Vt=!0;else switch(Nt){case"bigint":case"string":case"number":Vt=!0;break;case"object":switch(Q.$$typeof){case i:case t:Vt=!0;break;case E:return Vt=Q._init,G(Vt(Q._payload),rt,bt,lt,dt)}}if(Vt)return dt=dt(Q),Vt=lt===""?"."+Y(Q,0):lt,L(dt)?(bt="",Vt!=null&&(bt=Vt.replace(B,"$&/")+"/"),G(dt,rt,bt,"",function(Dt){return Dt})):dt!=null&&(I(dt)&&(dt=M(dt,bt+(dt.key==null||Q&&Q.key===dt.key?"":(""+dt.key).replace(B,"$&/")+"/")+Vt)),rt.push(dt)),1;Vt=0;var nt=lt===""?".":lt+":";if(L(Q))for(var ht=0;ht<Q.length;ht++)lt=Q[ht],Nt=nt+Y(lt,ht),Vt+=G(lt,rt,bt,Nt,dt);else if(ht=D(Q),typeof ht=="function")for(Q=ht.call(Q),ht=0;!(lt=Q.next()).done;)lt=lt.value,Nt=nt+Y(lt,ht++),Vt+=G(lt,rt,bt,Nt,dt);else if(Nt==="object"){if(typeof Q.then=="function")return G(q(Q),rt,bt,lt,dt);throw rt=String(Q),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return Vt}function X(Q,rt,bt){if(Q==null)return Q;var lt=[],dt=0;return G(Q,lt,"","",function(Nt){return rt.call(bt,Nt,dt++)}),lt}function et(Q){if(Q._status===-1){var rt=Q._result;rt=rt(),rt.then(function(bt){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=bt)},function(bt){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=bt)}),Q._status===-1&&(Q._status=0,Q._result=rt)}if(Q._status===1)return Q._result.default;throw Q._result}var st=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function pt(){}return De.Children={map:X,forEach:function(Q,rt,bt){X(Q,function(){rt.apply(this,arguments)},bt)},count:function(Q){var rt=0;return X(Q,function(){rt++}),rt},toArray:function(Q){return X(Q,function(rt){return rt})||[]},only:function(Q){if(!I(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},De.Component=U,De.Fragment=e,De.Profiler=l,De.PureComponent=N,De.StrictMode=a,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,De.act=function(){throw Error("act(...) is not supported in production builds of React.")},De.cache=function(Q){return function(){return Q.apply(null,arguments)}},De.cloneElement=function(Q,rt,bt){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var lt=R({},Q.props),dt=Q.key,Nt=void 0;if(rt!=null)for(Vt in rt.ref!==void 0&&(Nt=void 0),rt.key!==void 0&&(dt=""+rt.key),rt)!K.call(rt,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&rt.ref===void 0||(lt[Vt]=rt[Vt]);var Vt=arguments.length-2;if(Vt===1)lt.children=bt;else if(1<Vt){for(var nt=Array(Vt),ht=0;ht<Vt;ht++)nt[ht]=arguments[ht+2];lt.children=nt}return j(Q.type,dt,void 0,void 0,Nt,lt)},De.createContext=function(Q){return Q={$$typeof:h,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},De.createElement=function(Q,rt,bt){var lt,dt={},Nt=null;if(rt!=null)for(lt in rt.key!==void 0&&(Nt=""+rt.key),rt)K.call(rt,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(dt[lt]=rt[lt]);var Vt=arguments.length-2;if(Vt===1)dt.children=bt;else if(1<Vt){for(var nt=Array(Vt),ht=0;ht<Vt;ht++)nt[ht]=arguments[ht+2];dt.children=nt}if(Q&&Q.defaultProps)for(lt in Vt=Q.defaultProps,Vt)dt[lt]===void 0&&(dt[lt]=Vt[lt]);return j(Q,Nt,void 0,void 0,null,dt)},De.createRef=function(){return{current:null}},De.forwardRef=function(Q){return{$$typeof:g,render:Q}},De.isValidElement=I,De.lazy=function(Q){return{$$typeof:E,_payload:{_status:-1,_result:Q},_init:et}},De.memo=function(Q,rt){return{$$typeof:_,type:Q,compare:rt===void 0?null:rt}},De.startTransition=function(Q){var rt=F.T,bt={};F.T=bt;try{var lt=Q(),dt=F.S;dt!==null&&dt(bt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(pt,st)}catch(Nt){st(Nt)}finally{F.T=rt}},De.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},De.use=function(Q){return F.H.use(Q)},De.useActionState=function(Q,rt,bt){return F.H.useActionState(Q,rt,bt)},De.useCallback=function(Q,rt){return F.H.useCallback(Q,rt)},De.useContext=function(Q){return F.H.useContext(Q)},De.useDebugValue=function(){},De.useDeferredValue=function(Q,rt){return F.H.useDeferredValue(Q,rt)},De.useEffect=function(Q,rt){return F.H.useEffect(Q,rt)},De.useId=function(){return F.H.useId()},De.useImperativeHandle=function(Q,rt,bt){return F.H.useImperativeHandle(Q,rt,bt)},De.useInsertionEffect=function(Q,rt){return F.H.useInsertionEffect(Q,rt)},De.useLayoutEffect=function(Q,rt){return F.H.useLayoutEffect(Q,rt)},De.useMemo=function(Q,rt){return F.H.useMemo(Q,rt)},De.useOptimistic=function(Q,rt){return F.H.useOptimistic(Q,rt)},De.useReducer=function(Q,rt,bt){return F.H.useReducer(Q,rt,bt)},De.useRef=function(Q){return F.H.useRef(Q)},De.useState=function(Q){return F.H.useState(Q)},De.useSyncExternalStore=function(Q,rt,bt){return F.H.useSyncExternalStore(Q,rt,bt)},De.useTransition=function(){return F.H.useTransition()},De.version="19.0.0",De}var R2;function ny(){return R2||(R2=1,f1.exports=a6()),f1.exports}var Gt=ny();const Ja=N_(Gt);var d1={exports:{}},ag={},g1={exports:{}},m1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2;function r6(){return w2||(w2=1,function(i){function t(X,et){var st=X.length;X.push(et);t:for(;0<st;){var pt=st-1>>>1,Q=X[pt];if(0<l(Q,et))X[pt]=et,X[st]=Q,st=pt;else break t}}function e(X){return X.length===0?null:X[0]}function a(X){if(X.length===0)return null;var et=X[0],st=X.pop();if(st!==et){X[0]=st;t:for(var pt=0,Q=X.length,rt=Q>>>1;pt<rt;){var bt=2*(pt+1)-1,lt=X[bt],dt=bt+1,Nt=X[dt];if(0>l(lt,st))dt<Q&&0>l(Nt,lt)?(X[pt]=Nt,X[dt]=st,pt=dt):(X[pt]=lt,X[bt]=st,pt=bt);else if(dt<Q&&0>l(Nt,st))X[pt]=Nt,X[dt]=st,pt=dt;else break t}}return et}function l(X,et){var st=X.sortIndex-et.sortIndex;return st!==0?st:X.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var m=[],_=[],E=1,A=null,D=3,C=!1,R=!1,P=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function x(X){for(var et=e(_);et!==null;){if(et.callback===null)a(_);else if(et.startTime<=X)a(_),et.sortIndex=et.expirationTime,t(m,et);else break;et=e(_)}}function L(X){if(P=!1,x(X),!R)if(e(m)!==null)R=!0,q();else{var et=e(_);et!==null&&G(L,et.startTime-X)}}var F=!1,K=-1,j=5,M=-1;function I(){return!(i.unstable_now()-M<j)}function V(){if(F){var X=i.unstable_now();M=X;var et=!0;try{t:{R=!1,P&&(P=!1,H(K),K=-1),C=!0;var st=D;try{e:{for(x(X),A=e(m);A!==null&&!(A.expirationTime>X&&I());){var pt=A.callback;if(typeof pt=="function"){A.callback=null,D=A.priorityLevel;var Q=pt(A.expirationTime<=X);if(X=i.unstable_now(),typeof Q=="function"){A.callback=Q,x(X),et=!0;break e}A===e(m)&&a(m),x(X)}else a(m);A=e(m)}if(A!==null)et=!0;else{var rt=e(_);rt!==null&&G(L,rt.startTime-X),et=!1}}break t}finally{A=null,D=st,C=!1}et=void 0}}finally{et?B():F=!1}}}var B;if(typeof N=="function")B=function(){N(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,b=Y.port2;Y.port1.onmessage=V,B=function(){b.postMessage(null)}}else B=function(){U(V,0)};function q(){F||(F=!0,B())}function G(X,et){K=U(function(){X(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){R||C||(R=!0,q())},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_getFirstCallbackNode=function(){return e(m)},i.unstable_next=function(X){switch(D){case 1:case 2:case 3:var et=3;break;default:et=D}var st=D;D=et;try{return X()}finally{D=st}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,et){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var st=D;D=X;try{return et()}finally{D=st}},i.unstable_scheduleCallback=function(X,et,st){var pt=i.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?pt+st:pt):st=pt,X){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=st+Q,X={id:E++,callback:et,priorityLevel:X,startTime:st,expirationTime:Q,sortIndex:-1},st>pt?(X.sortIndex=st,t(_,X),e(m)===null&&X===e(_)&&(P?(H(K),K=-1):P=!0,G(L,st-pt))):(X.sortIndex=Q,t(m,X),R||C||(R=!0,q())),X},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(X){var et=D;return function(){var st=D;D=et;try{return X.apply(this,arguments)}finally{D=st}}}}(m1)),m1}var N2;function x_(){return N2||(N2=1,g1.exports=r6()),g1.exports}var p1={exports:{}},Za={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function s6(){if(x2)return Za;x2=1;var i=ny();function t(m){var _="https://react.dev/errors/"+m;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var a={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,_,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:m,containerInfo:_,implementation:E}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,_){if(m==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Za.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Za.createPortal=function(m,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(m,_,null,E)},Za.flushSync=function(m){var _=h.T,E=a.p;try{if(h.T=null,a.p=2,m)return m()}finally{h.T=_,a.p=E,a.d.f()}},Za.preconnect=function(m,_){typeof m=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(m,_))},Za.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Za.preinit=function(m,_){if(typeof m=="string"&&_&&typeof _.as=="string"){var E=_.as,A=g(E,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,C=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?a.d.S(m,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:D,fetchPriority:C}):E==="script"&&a.d.X(m,{crossOrigin:A,integrity:D,fetchPriority:C,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Za.preinitModule=function(m,_){if(typeof m=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=g(_.as,_.crossOrigin);a.d.M(m,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(m)},Za.preload=function(m,_){if(typeof m=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,A=g(E,_.crossOrigin);a.d.L(m,E,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Za.preloadModule=function(m,_){if(typeof m=="string")if(_){var E=g(_.as,_.crossOrigin);a.d.m(m,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(m)},Za.requestFormReset=function(m){a.d.r(m)},Za.unstable_batchedUpdates=function(m,_){return m(_)},Za.useFormState=function(m,_,E){return h.H.useFormState(m,_,E)},Za.useFormStatus=function(){return h.H.useHostTransitionStatus()},Za.version="19.0.0",Za}var D2;function l6(){if(D2)return p1.exports;D2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),p1.exports=s6(),p1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function o6(){if(I2)return ag;I2=1;var i=x_(),t=ny(),e=l6();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var c=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function K(n){return n===null||typeof n!="object"?null:(n=F&&n[F]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function M(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case g:return"Portal";case E:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case U:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case C:return(n.displayName||"Context")+".Provider";case D:return(n._context.displayName||"Context")+".Consumer";case R:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return r=n.displayName||null,r!==null?r:M(n.type)||"Memo";case N:r=n._payload,n=n._init;try{return M(n(r))}catch{}}return null}var I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.assign,B,Y;function b(n){if(B===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);B=r&&r[1]||"",Y=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+n+Y}var q=!1;function G(n,r){if(!n||q)return"";q=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(Ct){var St=Ct}Reflect.construct(n,[],Ut)}else{try{Ut.call()}catch(Ct){St=Ct}n.call(Ut.prototype)}}else{try{throw Error()}catch(Ct){St=Ct}(Ut=n())&&typeof Ut.catch=="function"&&Ut.catch(function(){})}}catch(Ct){if(Ct&&St&&typeof Ct.stack=="string")return[Ct.stack,St.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),k=S[0],Z=S[1];if(k&&Z){var it=k.split(`
`),ut=Z.split(`
`);for(y=f=0;f<it.length&&!it[f].includes("DetermineComponentFrameRoot");)f++;for(;y<ut.length&&!ut[y].includes("DetermineComponentFrameRoot");)y++;if(f===it.length||y===ut.length)for(f=it.length-1,y=ut.length-1;1<=f&&0<=y&&it[f]!==ut[y];)y--;for(;1<=f&&0<=y;f--,y--)if(it[f]!==ut[y]){if(f!==1||y!==1)do if(f--,y--,0>y||it[f]!==ut[y]){var wt=`
`+it[f].replace(" at new "," at ");return n.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",n.displayName)),wt}while(1<=f&&0<=y);break}}}finally{q=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?b(u):""}function X(n){switch(n.tag){case 26:case 27:case 5:return b(n.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 15:return n=G(n.type,!1),n;case 11:return n=G(n.type.render,!1),n;case 1:return n=G(n.type,!0),n;default:return""}}function et(n){try{var r="";do r+=X(n),n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function st(n){var r=n,u=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(u=r.return),n=r.return;while(n)}return r.tag===3?u:null}function pt(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Q(n){if(st(n)!==n)throw Error(a(188))}function rt(n){var r=n.alternate;if(!r){if(r=st(n),r===null)throw Error(a(188));return r!==n?null:n}for(var u=n,f=r;;){var y=u.return;if(y===null)break;var S=y.alternate;if(S===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===u)return Q(y),n;if(S===f)return Q(y),r;S=S.sibling}throw Error(a(188))}if(u.return!==f.return)u=y,f=S;else{for(var k=!1,Z=y.child;Z;){if(Z===u){k=!0,u=y,f=S;break}if(Z===f){k=!0,f=y,u=S;break}Z=Z.sibling}if(!k){for(Z=S.child;Z;){if(Z===u){k=!0,u=S,f=y;break}if(Z===f){k=!0,f=S,u=y;break}Z=Z.sibling}if(!k)throw Error(a(189))}}if(u.alternate!==f)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:r}function bt(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=bt(n),r!==null)return r;n=n.sibling}return null}var lt=Array.isArray,dt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nt={pending:!1,data:null,method:null,action:null},Vt=[],nt=-1;function ht(n){return{current:n}}function Dt(n){0>nt||(n.current=Vt[nt],Vt[nt]=null,nt--)}function It(n,r){nt++,Vt[nt]=n.current,n.current=r}var qt=ht(null),Yt=ht(null),ce=ht(null),pe=ht(null);function ae(n,r){switch(It(ce,r),It(Yt,n),It(qt,null),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?Wv(r):0;break;default:if(n=n===8?r.parentNode:r,r=n.tagName,n=n.namespaceURI)n=Wv(n),r=Jv(n,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Dt(qt),It(qt,r)}function Ke(){Dt(qt),Dt(Yt),Dt(ce)}function ve(n){n.memoizedState!==null&&It(pe,n);var r=qt.current,u=Jv(r,n.type);r!==u&&(It(Yt,n),It(qt,u))}function Je(n){Yt.current===n&&(Dt(qt),Dt(Yt)),pe.current===n&&(Dt(pe),Jd._currentValue=Nt)}var Gi=Object.prototype.hasOwnProperty,un=i.unstable_scheduleCallback,Oi=i.unstable_cancelCallback,He=i.unstable_shouldYield,Fn=i.unstable_requestPaint,Ie=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Re=i.unstable_ImmediatePriority,Ye=i.unstable_UserBlockingPriority,Zn=i.unstable_NormalPriority,ji=i.unstable_LowPriority,we=i.unstable_IdlePriority,Wn=i.log,Sn=i.unstable_setDisableYieldValue,$e=null,Ve=null;function Ji(n){if(Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot($e,n,void 0,(n.current.flags&128)===128)}catch{}}function wi(n){if(typeof Wn=="function"&&Sn(n),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode($e,n)}catch{}}var jn=Math.clz32?Math.clz32:Zs,Yr=Math.log,Xs=Math.LN2;function Zs(n){return n>>>=0,n===0?32:31-(Yr(n)/Xs|0)|0}var $i=128,vr=4194304;function ta(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Jn(n,r){var u=n.pendingLanes;if(u===0)return 0;var f=0,y=n.suspendedLanes,S=n.pingedLanes,k=n.warmLanes;n=n.finishedLanes!==0;var Z=u&134217727;return Z!==0?(u=Z&~y,u!==0?f=ta(u):(S&=Z,S!==0?f=ta(S):n||(k=Z&~k,k!==0&&(f=ta(k))))):(Z=u&~y,Z!==0?f=ta(Z):S!==0?f=ta(S):n||(k=u&~k,k!==0&&(f=ta(k)))),f===0?0:r!==0&&r!==f&&(r&y)===0&&(y=f&-f,k=r&-r,y>=k||y===32&&(k&4194176)!==0)?r:f}function Hi(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Hn(n,r){switch(n){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ya(){var n=$i;return $i<<=1,($i&4194176)===0&&($i=128),n}function Mi(){var n=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),n}function Ma(n){for(var r=[],u=0;31>u;u++)r.push(n);return r}function Ce(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Qr(n,r,u,f,y,S){var k=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var Z=n.entanglements,it=n.expirationTimes,ut=n.hiddenUpdates;for(u=k&~u;0<u;){var wt=31-jn(u),Ut=1<<wt;Z[wt]=0,it[wt]=-1;var St=ut[wt];if(St!==null)for(ut[wt]=null,wt=0;wt<St.length;wt++){var Ct=St[wt];Ct!==null&&(Ct.lane&=-536870913)}u&=~Ut}f!==0&&nr(n,f,0),S!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=S&~(k&~r))}function nr(n,r,u){n.pendingLanes|=r,n.suspendedLanes&=~r;var f=31-jn(r);n.entangledLanes|=r,n.entanglements[f]=n.entanglements[f]|1073741824|u&4194218}function qi(n,r){var u=n.entangledLanes|=r;for(n=n.entanglements;u;){var f=31-jn(u),y=1<<f;y&r|n[f]&r&&(n[f]|=r),u&=~y}}function Va(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ps(){var n=dt.p;return n!==0?n:(n=window.event,n===void 0?32:p2(n.type))}function $n(n,r){var u=dt.p;try{return dt.p=n,r()}finally{dt.p=u}}var ti=Math.random().toString(36).slice(2),rn="__reactFiber$"+ti,ye="__reactProps$"+ti,ir="__reactContainer$"+ti,Pa="__reactEvents$"+ti,Ws="__reactListeners$"+ti,Ua="__reactHandles$"+ti,ys="__reactResources$"+ti,_a="__reactMarker$"+ti;function kn(n){delete n[rn],delete n[ye],delete n[Pa],delete n[Ws],delete n[Ua]}function ea(n){var r=n[rn];if(r)return r;for(var u=n.parentNode;u;){if(r=u[ir]||u[rn]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(n=e2(n);n!==null;){if(u=n[rn])return u;n=e2(n)}return r}n=u,u=n.parentNode}return null}function Tn(n){if(n=n[rn]||n[ir]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function dn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function La(n){var r=n[ys];return r||(r=n[ys]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function cn(n){n[_a]=!0}var va=new Set,na={};function Wt(n,r){Jt(n,r),Jt(n+"Capture",r)}function Jt(n,r){for(na[n]=r,n=0;n<r.length;n++)va.add(r[n])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_s={},Er={};function Eo(n){return Gi.call(Er,n)?!0:Gi.call(_s,n)?!1:du.test(n)?Er[n]=!0:(_s[n]=!0,!1)}function mi(n,r,u){if(Eo(r))if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+u)}}function Sr(n,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+u)}}function Vn(n,r,u,f){if(f===null)n.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(r,u,""+f)}}function Ni(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function So(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function To(n){var r=So(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),f=""+n[r];if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,S=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return y.call(this)},set:function(k){f=""+k,S.call(this,k)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function vs(n){n._valueTracker||(n._valueTracker=To(n))}function Es(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var u=r.getValue(),f="";return n&&(f=So(n)?n.checked?"true":"false":n.value),n=f,n!==u?(r.setValue(n),!0):!1}function Ki(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vi=/[\n"\\]/g;function wn(n){return n.replace(Vi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xr(n,r,u,f,y,S,k,Z){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),r!=null?k==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Ni(r)):n.value!==""+Ni(r)&&(n.value=""+Ni(r)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),r!=null?Js(n,k,Ni(r)):u!=null?Js(n,k,Ni(u)):f!=null&&n.removeAttribute("value"),y==null&&S!=null&&(n.defaultChecked=!!S),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?n.name=""+Ni(Z):n.removeAttribute("name")}function Ss(n,r,u,f,y,S,k,Z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.type=S),r!=null||u!=null){if(!(S!=="submit"&&S!=="reset"||r!=null))return;u=u!=null?""+Ni(u):"",r=r!=null?""+Ni(r):u,Z||r===n.value||(n.value=r),n.defaultValue=r}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,n.checked=Z?n.checked:!!f,n.defaultChecked=!!f,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k)}function Js(n,r,u){r==="number"&&Ki(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function Qe(n,r,u,f){if(n=n.options,r){r={};for(var y=0;y<u.length;y++)r["$"+u[y]]=!0;for(u=0;u<n.length;u++)y=r.hasOwnProperty("$"+n[u].value),n[u].selected!==y&&(n[u].selected=y),y&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Ni(u),r=null,y=0;y<n.length;y++){if(n[y].value===u){n[y].selected=!0,f&&(n[y].defaultSelected=!0);return}r!==null||n[y].disabled||(r=n[y])}r!==null&&(r.selected=!0)}}function Ts(n,r,u){if(r!=null&&(r=""+Ni(r),r!==n.value&&(n.value=r),u==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=u!=null?""+Ni(u):""}function Ea(n,r,u,f){if(r==null){if(f!=null){if(u!=null)throw Error(a(92));if(lt(f)){if(1<f.length)throw Error(a(93));f=f[0]}u=f}u==null&&(u=""),r=u}u=Ni(r),n.defaultValue=u,f=n.textContent,f===u&&f!==""&&f!==null&&(n.value=f)}function Sa(n,r){if(r){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=r;return}}n.textContent=r}var Il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bs(n,r,u){var f=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":f?n.setProperty(r,u):typeof u!="number"||u===0||Il.has(r)?r==="float"?n.cssFloat=u:n[r]=(""+u).trim():n[r]=u+"px"}function bo(n,r,u){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?n.setProperty(f,""):f==="float"?n.cssFloat="":n[f]="");for(var y in r)f=r[y],r.hasOwnProperty(y)&&u[y]!==f&&bs(n,y,f)}else for(var S in r)r.hasOwnProperty(S)&&bs(n,S,r[S])}function $s(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(n){return mu.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ta=null;function Zr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ar=null,rr=null;function sr(n){var r=Tn(n);if(r&&(n=r.stateNode)){var u=n[ye]||null;t:switch(n=r.stateNode,r.type){case"input":if(Xr(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+wn(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var f=u[r];if(f!==n&&f.form===n.form){var y=f[ye]||null;if(!y)throw Error(a(90));Xr(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<u.length;r++)f=u[r],f.form===n.form&&Es(f)}break t;case"textarea":Ts(n,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&Qe(n,!!u.multiple,r,!1)}}}var Ol=!1;function Ao(n,r,u){if(Ol)return n(r,u);Ol=!0;try{var f=n(r);return f}finally{if(Ol=!1,(ar!==null||rr!==null)&&(Yo(),ar&&(r=ar,n=rr,rr=ar=null,sr(r),n)))for(r=0;r<n.length;r++)sr(n[r])}}function Tr(n,r){var u=n.stateNode;if(u===null)return null;var f=u[ye]||null;if(f===null)return null;u=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break t;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,r,typeof u));return u}var Yi=!1;if(ei)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Yi=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Yi=!1}var ka=null,As=null,Wr=null;function Ml(){if(Wr)return Wr;var n,r=As,u=r.length,f,y="value"in ka?ka.value:ka.textContent,S=y.length;for(n=0;n<u&&r[n]===y[n];n++);var k=u-n;for(f=1;f<=k&&r[u-f]===y[S-f];f++);return Wr=y.slice(n,1<f?1-f:void 0)}function ia(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function aa(){return!0}function Cs(){return!1}function qn(n){function r(u,f,y,S,k){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=S,this.target=k,this.currentTarget=null;for(var Z in n)n.hasOwnProperty(Z)&&(u=n[Z],this[Z]=u?u(S):S[Z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?aa:Cs,this.isPropagationStopped=Cs,this}return V(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),r}var tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=qn(tn),Rs=V({},tn,{view:0,detail:0}),Co=qn(Rs),Ba,Jr,or,$=V({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==or&&(or&&n.type==="mousemove"?(Ba=n.screenX-or.screenX,Jr=n.screenY-or.screenY):Jr=Ba=0,or=n),Ba)},movementY:function(n){return"movementY"in n?n.movementY:Jr}}),yt=qn($),Lt=V({},$,{dataTransfer:0}),Ot=qn(Lt),Pt=V({},Rs,{relatedTarget:0}),ue=qn(Pt),zt=V({},tn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ht=qn(zt),re=V({},tn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ge=qn(re),ni=V({},tn,{data:0}),$r=qn(ni),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=wc[n])?!!r[n]:!1}function tl(){return Ro}var Nc=V({},Rs,{key:function(n){if(n.key){var r=Vl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ia(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tl,charCode:function(n){return n.type==="keypress"?ia(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ia(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pl=qn(Nc),pu=V({},$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wo=qn(pu),ws=V({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tl}),yu=qn(ws),xc=V({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ar=qn(xc),_u=V({},$,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vu=qn(_u),ra=V({},tn,{newState:0,oldState:0}),ts=qn(ra),Cr=[9,13,27,32],Rr=ei&&"CompositionEvent"in window,p=null;ei&&"documentMode"in document&&(p=document.documentMode);var w=ei&&"TextEvent"in window&&!p,z=ei&&(!Rr||p&&8<p&&11>=p),J=" ",ct=!1;function At(n,r){switch(n){case"keyup":return Cr.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Be=!1;function Bn(n,r){switch(n){case"compositionend":return Kt(r);case"keypress":return r.which!==32?null:(ct=!0,J);case"textInput":return n=r.data,n===J&&ct?null:n;default:return null}}function Ge(n,r){if(Be)return n==="compositionend"||!Rr&&At(n,r)?(n=Ml(),Wr=As=ka=null,Be=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pi(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!ii[n.type]:r==="textarea"}function ai(n,r,u,f){ar?rr?rr.push(f):rr=[f]:ar=f,r=j0(r,"onChange"),0<r.length&&(u=new br("onChange","change",null,u,f),n.push({event:u,listeners:r}))}var Pi=null,wr=null;function Eu(n){Kv(n,0)}function Dc(n){var r=dn(n);if(Es(r))return n}function Ph(n,r){if(n==="change")return r}var Uh=!1;if(ei){var Lh;if(ei){var Su="oninput"in document;if(!Su){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),Su=typeof Tu.oninput=="function"}Lh=Su}else Lh=!1;Uh=Lh&&(!document.documentMode||9<document.documentMode)}function Pn(){Pi&&(Pi.detachEvent("onpropertychange",qm),wr=Pi=null)}function qm(n){if(n.propertyName==="value"&&Dc(wr)){var r=[];ai(r,wr,n,Zr(n)),Ao(Eu,r)}}function Oy(n,r,u){n==="focusin"?(Pn(),Pi=r,wr=u,Pi.attachEvent("onpropertychange",qm)):n==="focusout"&&Pn()}function Km(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dc(wr)}function Ic(n,r){if(n==="click")return Dc(r)}function Ul(n,r){if(n==="input"||n==="change")return Dc(r)}function Ym(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ga=typeof Object.is=="function"?Object.is:Ym;function es(n,r){if(Ga(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var u=Object.keys(n),f=Object.keys(r);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var y=u[f];if(!Gi.call(r,y)||!Ga(n[y],r[y]))return!1}return!0}function Fa(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rd(n,r){var u=Fa(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=r&&f>=r)return{node:u,offset:r-n};n=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Fa(u)}}function sd(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?sd(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function ld(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ki(n.document);r instanceof n.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)n=r.contentWindow;else break;r=Ki(n.document)}return r}function Oc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function od(n,r){var u=ld(r);r=n.focusedElem;var f=n.selectionRange;if(u!==r&&r&&r.ownerDocument&&sd(r.ownerDocument.documentElement,r)){if(f!==null&&Oc(r)){if(n=f.start,u=f.end,u===void 0&&(u=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(u,r.value.length);else if(u=(n=r.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var y=r.textContent.length,S=Math.min(f.start,y);f=f.end===void 0?S:Math.min(f.end,y),!u.extend&&S>f&&(y=f,f=S,S=y),y=rd(r,S);var k=rd(r,f);y&&k&&(u.rangeCount!==1||u.anchorNode!==y.node||u.anchorOffset!==y.offset||u.focusNode!==k.node||u.focusOffset!==k.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),u.removeAllRanges(),S>f?(u.addRange(n),u.extend(k.node,k.offset)):(n.setEnd(k.node,k.offset),u.addRange(n)))}}for(n=[],u=r;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)u=n[r],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var zh=ei&&"documentMode"in document&&11>=document.documentMode,No=null,ud=null,bu=null,kh=!1;function Nr(n,r,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;kh||No==null||No!==Ki(f)||(f=No,"selectionStart"in f&&Oc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),bu&&es(bu,f)||(bu=f,f=j0(ud,"onSelect"),0<f.length&&(r=new br("onSelect","select",null,r,u),n.push({event:r,listeners:f}),r.target=No)))}function el(n,r){var u={};return u[n.toLowerCase()]=r.toLowerCase(),u["Webkit"+n]="webkit"+r,u["Moz"+n]="moz"+r,u}var xo={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionrun:el("Transition","TransitionRun"),transitionstart:el("Transition","TransitionStart"),transitioncancel:el("Transition","TransitionCancel"),transitionend:el("Transition","TransitionEnd")},cd={},Bh={};ei&&(Bh=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function yi(n){if(cd[n])return cd[n];if(!xo[n])return n;var r=xo[n],u;for(u in r)if(r.hasOwnProperty(u)&&u in Bh)return cd[n]=r[u];return n}var hd=yi("animationend"),ja=yi("animationiteration"),fd=yi("animationstart"),nl=yi("transitionrun"),Au=yi("transitionstart"),Ll=yi("transitioncancel"),Gh=yi("transitionend"),Fh=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function xr(n,r){Fh.set(n,r),Wt(r,[n])}var Qi=[],Ns=0,al=0;function Mc(){for(var n=Ns,r=al=Ns=0;r<n;){var u=Qi[r];Qi[r++]=null;var f=Qi[r];Qi[r++]=null;var y=Qi[r];Qi[r++]=null;var S=Qi[r];if(Qi[r++]=null,f!==null&&y!==null){var k=f.pending;k===null?y.next=y:(y.next=k.next,k.next=y),f.pending=y}S!==0&&Pc(u,y,S)}}function Vc(n,r,u,f){Qi[Ns++]=n,Qi[Ns++]=r,Qi[Ns++]=u,Qi[Ns++]=f,al|=f,n.lanes|=f,n=n.alternate,n!==null&&(n.lanes|=f)}function Do(n,r,u,f){return Vc(n,r,u,f),Uc(n)}function rl(n,r){return Vc(n,null,null,r),Uc(n)}function Pc(n,r,u){n.lanes|=u;var f=n.alternate;f!==null&&(f.lanes|=u);for(var y=!1,S=n.return;S!==null;)S.childLanes|=u,f=S.alternate,f!==null&&(f.childLanes|=u),S.tag===22&&(n=S.stateNode,n===null||n._visibility&1||(y=!0)),n=S,S=S.return;y&&r!==null&&n.tag===3&&(S=n.stateNode,y=31-jn(u),S=S.hiddenUpdates,n=S[y],n===null?S[y]=[r]:n.push(r),r.lane=u|536870912)}function Uc(n){if(50<kr)throw kr=0,Rl=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var zl={},jh=new WeakMap;function Ha(n,r){if(typeof n=="object"&&n!==null){var u=jh.get(n);return u!==void 0?u:(r={value:n,source:r,stack:et(r)},jh.set(n,r),r)}return{value:n,source:r,stack:et(r)}}var Io=[],kl=0,sa=null,Lc=0,Nn=[],ur=0,sl=null,xs=1,ll="";function ba(n,r){Io[kl++]=Lc,Io[kl++]=sa,sa=n,Lc=r}function dd(n,r,u){Nn[ur++]=xs,Nn[ur++]=ll,Nn[ur++]=sl,sl=n;var f=xs;n=ll;var y=32-jn(f)-1;f&=~(1<<y),u+=1;var S=32-jn(r)+y;if(30<S){var k=y-y%5;S=(f&(1<<k)-1).toString(32),f>>=k,y-=k,xs=1<<32-jn(r)+y|u<<y|f,ll=S+n}else xs=1<<S|u<<y|f,ll=n}function zc(n){n.return!==null&&(ba(n,1),dd(n,1,0))}function Bl(n){for(;n===sa;)sa=Io[--kl],Io[kl]=null,Lc=Io[--kl],Io[kl]=null;for(;n===sl;)sl=Nn[--ur],Nn[ur]=null,ll=Nn[--ur],Nn[ur]=null,xs=Nn[--ur],Nn[ur]=null}var la=null,Ui=null,en=!1,Dr=null,Ir=!1,kc=Error(a(519));function Oo(n){var r=Error(a(418,""));throw Ds(Ha(r,n)),kc}function Qm(n){var r=n.stateNode,u=n.type,f=n.memoizedProps;switch(r[rn]=n,r[ye]=f,u){case"dialog":an("cancel",r),an("close",r);break;case"iframe":case"object":case"embed":an("load",r);break;case"video":case"audio":for(u=0;u<Yd.length;u++)an(Yd[u],r);break;case"source":an("error",r);break;case"img":case"image":case"link":an("error",r),an("load",r);break;case"details":an("toggle",r);break;case"input":an("invalid",r),Ss(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),vs(r);break;case"select":an("invalid",r);break;case"textarea":an("invalid",r),Ea(r,f.value,f.defaultValue,f.children),vs(r)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||f.suppressHydrationWarning===!0||Zv(r.textContent,u)?(f.popover!=null&&(an("beforetoggle",r),an("toggle",r)),f.onScroll!=null&&an("scroll",r),f.onScrollEnd!=null&&an("scrollend",r),f.onClick!=null&&(r.onclick=H0),r=!0):r=!1,r||Oo(n)}function Xm(n){for(la=n.return;la;)switch(la.tag){case 3:case 27:Ir=!0;return;case 5:case 13:Ir=!1;return;default:la=la.return}}function Cu(n){if(n!==la)return!1;if(!en)return Xm(n),en=!0,!1;var r=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||Jy(n.type,n.memoizedProps)),u=!u),u&&(r=!0),r&&Ui&&Oo(n),Xm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));t:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(r===0){Ui=Nl(n.nextSibling);break t}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++;n=n.nextSibling}Ui=null}}else Ui=la?Nl(n.stateNode.nextSibling):null;return!0}function Ru(){Ui=la=null,en=!1}function Ds(n){Dr===null?Dr=[n]:Dr.push(n)}var Gl=Error(a(460)),gd=Error(a(474)),Hh={then:function(){}};function Zm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Bc(){}function Fl(n,r,u){switch(u=n[u],u===void 0?n.push(r):u!==r&&(r.then(Bc,Bc),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===Gl?Error(a(483)):n;default:if(typeof r.status=="string")r.then(Bc,Bc);else{if(n=yn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(f){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=f}},function(f){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===Gl?Error(a(483)):n}throw wu=r,Gl}}var wu=null;function hn(){if(wu===null)throw Error(a(459));var n=wu;return wu=null,n}var jl=null,Gc=0;function Fc(n){var r=Gc;return Gc+=1,jl===null&&(jl=[]),Fl(jl,n,r)}function jc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function qh(n,r){throw r.$$typeof===c?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Wm(n){var r=n._init;return r(n._payload)}function Jm(n){function r(gt,ot){if(n){var vt=gt.deletions;vt===null?(gt.deletions=[ot],gt.flags|=16):vt.push(ot)}}function u(gt,ot){if(!n)return null;for(;ot!==null;)r(gt,ot),ot=ot.sibling;return null}function f(gt){for(var ot=new Map;gt!==null;)gt.key!==null?ot.set(gt.key,gt):ot.set(gt.index,gt),gt=gt.sibling;return ot}function y(gt,ot){return gt=wa(gt,ot),gt.index=0,gt.sibling=null,gt}function S(gt,ot,vt){return gt.index=vt,n?(vt=gt.alternate,vt!==null?(vt=vt.index,vt<ot?(gt.flags|=33554434,ot):vt):(gt.flags|=33554434,ot)):(gt.flags|=1048576,ot)}function k(gt){return n&&gt.alternate===null&&(gt.flags|=33554434),gt}function Z(gt,ot,vt,Mt){return ot===null||ot.tag!==6?(ot=Si(vt,gt.mode,Mt),ot.return=gt,ot):(ot=y(ot,vt),ot.return=gt,ot)}function it(gt,ot,vt,Mt){var $t=vt.type;return $t===m?wt(gt,ot,vt.props.children,Mt,vt.key):ot!==null&&(ot.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===N&&Wm($t)===ot.type)?(ot=y(ot,vt.props),jc(ot,vt),ot.return=gt,ot):(ot=Fu(vt.type,vt.key,vt.props,null,gt.mode,Mt),jc(ot,vt),ot.return=gt,ot)}function ut(gt,ot,vt,Mt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==vt.containerInfo||ot.stateNode.implementation!==vt.implementation?(ot=eh(vt,gt.mode,Mt),ot.return=gt,ot):(ot=y(ot,vt.children||[]),ot.return=gt,ot)}function wt(gt,ot,vt,Mt,$t){return ot===null||ot.tag!==7?(ot=oo(vt,gt.mode,Mt,$t),ot.return=gt,ot):(ot=y(ot,vt),ot.return=gt,ot)}function Ut(gt,ot,vt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=Si(""+ot,gt.mode,vt),ot.return=gt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case h:return vt=Fu(ot.type,ot.key,ot.props,null,gt.mode,vt),jc(vt,ot),vt.return=gt,vt;case g:return ot=eh(ot,gt.mode,vt),ot.return=gt,ot;case N:var Mt=ot._init;return ot=Mt(ot._payload),Ut(gt,ot,vt)}if(lt(ot)||K(ot))return ot=oo(ot,gt.mode,vt,null),ot.return=gt,ot;if(typeof ot.then=="function")return Ut(gt,Fc(ot),vt);if(ot.$$typeof===C)return Ut(gt,uf(gt,ot),vt);qh(gt,ot)}return null}function St(gt,ot,vt,Mt){var $t=ot!==null?ot.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return $t!==null?null:Z(gt,ot,""+vt,Mt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case h:return vt.key===$t?it(gt,ot,vt,Mt):null;case g:return vt.key===$t?ut(gt,ot,vt,Mt):null;case N:return $t=vt._init,vt=$t(vt._payload),St(gt,ot,vt,Mt)}if(lt(vt)||K(vt))return $t!==null?null:wt(gt,ot,vt,Mt,null);if(typeof vt.then=="function")return St(gt,ot,Fc(vt),Mt);if(vt.$$typeof===C)return St(gt,ot,uf(gt,vt),Mt);qh(gt,vt)}return null}function Ct(gt,ot,vt,Mt,$t){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return gt=gt.get(vt)||null,Z(ot,gt,""+Mt,$t);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case h:return gt=gt.get(Mt.key===null?vt:Mt.key)||null,it(ot,gt,Mt,$t);case g:return gt=gt.get(Mt.key===null?vt:Mt.key)||null,ut(ot,gt,Mt,$t);case N:var je=Mt._init;return Mt=je(Mt._payload),Ct(gt,ot,vt,Mt,$t)}if(lt(Mt)||K(Mt))return gt=gt.get(vt)||null,wt(ot,gt,Mt,$t,null);if(typeof Mt.then=="function")return Ct(gt,ot,vt,Fc(Mt),$t);if(Mt.$$typeof===C)return Ct(gt,ot,vt,uf(ot,Mt),$t);qh(ot,Mt)}return null}function ne(gt,ot,vt,Mt){for(var $t=null,je=null,se=ot,de=ot=0,ga=null;se!==null&&de<vt.length;de++){se.index>de?(ga=se,se=null):ga=se.sibling;var fn=St(gt,se,vt[de],Mt);if(fn===null){se===null&&(se=ga);break}n&&se&&fn.alternate===null&&r(gt,se),ot=S(fn,ot,de),je===null?$t=fn:je.sibling=fn,je=fn,se=ga}if(de===vt.length)return u(gt,se),en&&ba(gt,de),$t;if(se===null){for(;de<vt.length;de++)se=Ut(gt,vt[de],Mt),se!==null&&(ot=S(se,ot,de),je===null?$t=se:je.sibling=se,je=se);return en&&ba(gt,de),$t}for(se=f(se);de<vt.length;de++)ga=Ct(se,gt,de,vt[de],Mt),ga!==null&&(n&&ga.alternate!==null&&se.delete(ga.key===null?de:ga.key),ot=S(ga,ot,de),je===null?$t=ga:je.sibling=ga,je=ga);return n&&se.forEach(function(Wu){return r(gt,Wu)}),en&&ba(gt,de),$t}function Ae(gt,ot,vt,Mt){if(vt==null)throw Error(a(151));for(var $t=null,je=null,se=ot,de=ot=0,ga=null,fn=vt.next();se!==null&&!fn.done;de++,fn=vt.next()){se.index>de?(ga=se,se=null):ga=se.sibling;var Wu=St(gt,se,fn.value,Mt);if(Wu===null){se===null&&(se=ga);break}n&&se&&Wu.alternate===null&&r(gt,se),ot=S(Wu,ot,de),je===null?$t=Wu:je.sibling=Wu,je=Wu,se=ga}if(fn.done)return u(gt,se),en&&ba(gt,de),$t;if(se===null){for(;!fn.done;de++,fn=vt.next())fn=Ut(gt,fn.value,Mt),fn!==null&&(ot=S(fn,ot,de),je===null?$t=fn:je.sibling=fn,je=fn);return en&&ba(gt,de),$t}for(se=f(se);!fn.done;de++,fn=vt.next())fn=Ct(se,gt,de,fn.value,Mt),fn!==null&&(n&&fn.alternate!==null&&se.delete(fn.key===null?de:fn.key),ot=S(fn,ot,de),je===null?$t=fn:je.sibling=fn,je=fn);return n&&se.forEach(function(e6){return r(gt,e6)}),en&&ba(gt,de),$t}function Ai(gt,ot,vt,Mt){if(typeof vt=="object"&&vt!==null&&vt.type===m&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case h:t:{for(var $t=vt.key;ot!==null;){if(ot.key===$t){if($t=vt.type,$t===m){if(ot.tag===7){u(gt,ot.sibling),Mt=y(ot,vt.props.children),Mt.return=gt,gt=Mt;break t}}else if(ot.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===N&&Wm($t)===ot.type){u(gt,ot.sibling),Mt=y(ot,vt.props),jc(Mt,vt),Mt.return=gt,gt=Mt;break t}u(gt,ot);break}else r(gt,ot);ot=ot.sibling}vt.type===m?(Mt=oo(vt.props.children,gt.mode,Mt,vt.key),Mt.return=gt,gt=Mt):(Mt=Fu(vt.type,vt.key,vt.props,null,gt.mode,Mt),jc(Mt,vt),Mt.return=gt,gt=Mt)}return k(gt);case g:t:{for($t=vt.key;ot!==null;){if(ot.key===$t)if(ot.tag===4&&ot.stateNode.containerInfo===vt.containerInfo&&ot.stateNode.implementation===vt.implementation){u(gt,ot.sibling),Mt=y(ot,vt.children||[]),Mt.return=gt,gt=Mt;break t}else{u(gt,ot);break}else r(gt,ot);ot=ot.sibling}Mt=eh(vt,gt.mode,Mt),Mt.return=gt,gt=Mt}return k(gt);case N:return $t=vt._init,vt=$t(vt._payload),Ai(gt,ot,vt,Mt)}if(lt(vt))return ne(gt,ot,vt,Mt);if(K(vt)){if($t=K(vt),typeof $t!="function")throw Error(a(150));return vt=$t.call(vt),Ae(gt,ot,vt,Mt)}if(typeof vt.then=="function")return Ai(gt,ot,Fc(vt),Mt);if(vt.$$typeof===C)return Ai(gt,ot,uf(gt,vt),Mt);qh(gt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,ot!==null&&ot.tag===6?(u(gt,ot.sibling),Mt=y(ot,vt),Mt.return=gt,gt=Mt):(u(gt,ot),Mt=Si(vt,gt.mode,Mt),Mt.return=gt,gt=Mt),k(gt)):u(gt,ot)}return function(gt,ot,vt,Mt){try{Gc=0;var $t=Ai(gt,ot,vt,Mt);return jl=null,$t}catch(se){if(se===Gl)throw se;var je=hi(29,se,null,gt.mode);return je.lanes=Mt,je.return=gt,je}finally{}}}var ol=Jm(!0),ul=Jm(!1),Mo=ht(null),Vo=ht(0);function Hl(n,r){n=Cl,It(Vo,n),It(Mo,r),Cl=n|r.baseLanes}function Kh(){It(Vo,Cl),It(Mo,Mo.current)}function Hc(){Cl=Vo.current,Dt(Mo),Dt(Vo)}var qa=ht(null),Is=null;function cl(n){var r=n.alternate;It(_i,_i.current&1),It(qa,n),Is===null&&(r===null||Mo.current!==null||r.memoizedState!==null)&&(Is=n)}function md(n){if(n.tag===22){if(It(_i,_i.current),It(qa,n),Is===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Is=n)}}else hl()}function hl(){It(_i,_i.current),It(qa,qa.current)}function Os(n){Dt(qa),Is===n&&(Is=null),Dt(_i)}var _i=ht(0);function Nu(n){for(var r=n;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Pe=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(u,f){n.push(f)}};this.abort=function(){r.aborted=!0,n.forEach(function(u){return u()})}},My=i.unstable_scheduleCallback,cr=i.unstable_NormalPriority,ri={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pd(){return{controller:new Pe,data:new Map,refCount:0}}function ql(n){n.refCount--,n.refCount===0&&My(cr,function(){n.controller.abort()})}var Ms=null,Kl=0,Po=0,Yl=null;function Vy(n,r){if(Ms===null){var u=Ms=[];Kl=0,Po=jy(),Yl={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Kl++,r.then(yd,yd),r}function yd(){if(--Kl===0&&Ms!==null){Yl!==null&&(Yl.status="fulfilled");var n=Ms;Ms=null,Po=0,Yl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Ql(n,r){var u=[],f={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return n.then(function(){f.status="fulfilled",f.value=r;for(var y=0;y<u.length;y++)(0,u[y])(r)},function(y){for(f.status="rejected",f.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),f}var Yh=I.S;I.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Vy(n,r),Yh!==null&&Yh(n,r)};var fl=ht(null);function qc(){var n=fl.current;return n!==null?n:yn.pooledCache}function xu(n,r){r===null?It(fl,fl.current):It(fl,r.pool)}function dl(){var n=qc();return n===null?null:{parent:ri._currentValue,pool:n}}var gl=0,Ne=null,gn=null,vi=null,fe=!1,Xl=!1,Zl=!1,Du=0,Wl=0,Iu=null,Py=0;function Kn(){throw Error(a(321))}function Uo(n,r){if(r===null)return!1;for(var u=0;u<r.length&&u<n.length;u++)if(!Ga(n[u],r[u]))return!1;return!0}function _d(n,r,u,f,y,S){return gl=S,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=n===null||n.memoizedState===null?$l:pl,Zl=!1,S=u(f,y),Zl=!1,Xl&&(S=t0(r,u,f,y)),$m(n),S}function $m(n){I.H=Ps;var r=gn!==null&&gn.next!==null;if(gl=0,vi=gn=Ne=null,fe=!1,Wl=0,Iu=null,r)throw Error(a(300));n===null||xi||(n=n.dependencies,n!==null&&Uu(n)&&(xi=!0))}function t0(n,r,u,f){Ne=n;var y=0;do{if(Xl&&(Iu=null),Wl=0,Xl=!1,25<=y)throw Error(a(301));if(y+=1,vi=gn=null,n.updateQueue!=null){var S=n.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}I.H=ko,S=r(u,f)}while(Xl);return S}function Uy(){var n=I.H,r=n.useState()[0];return r=typeof r.then=="function"?Yc(r):r,n=n.useState()[0],(gn!==null?gn.memoizedState:null)!==n&&(Ne.flags|=1024),r}function vd(){var n=Du!==0;return Du=0,n}function Kc(n,r,u){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~u}function Qh(n){if(fe){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}fe=!1}gl=0,vi=gn=Ne=null,Xl=!1,Wl=Du=0,Iu=null}function Xi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Ne.memoizedState=vi=n:vi=vi.next=n,vi}function si(){if(gn===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=gn.next;var r=vi===null?Ne.memoizedState:vi.next;if(r!==null)vi=r,gn=n;else{if(n===null)throw Ne.alternate===null?Error(a(467)):Error(a(310));gn=n,n={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},vi===null?Ne.memoizedState=vi=n:vi=vi.next=n}return vi}var Xh;Xh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Yc(n){var r=Wl;return Wl+=1,Iu===null&&(Iu=[]),n=Fl(Iu,n,r),r=Ne,(vi===null?r.memoizedState:vi.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?$l:pl),n}function Ou(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yc(n);if(n.$$typeof===C)return oa(n)}throw Error(a(438,String(n)))}function ns(n){var r=null,u=Ne.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var f=Ne.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=Xh(),Ne.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(n),f=0;f<n;f++)u[f]=L;return r.index++,u}function Un(n,r){return typeof r=="function"?r(n):r}function is(n){var r=si();return Ka(r,gn,n)}function Ka(n,r,u){var f=n.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=u;var y=n.baseQueue,S=f.pending;if(S!==null){if(y!==null){var k=y.next;y.next=S.next,S.next=k}r.baseQueue=y=S,f.pending=null}if(S=n.baseState,y===null)n.memoizedState=S;else{r=y.next;var Z=k=null,it=null,ut=r,wt=!1;do{var Ut=ut.lane&-536870913;if(Ut!==ut.lane?(oe&Ut)===Ut:(gl&Ut)===Ut){var St=ut.revertLane;if(St===0)it!==null&&(it=it.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),Ut===Po&&(wt=!0);else if((gl&St)===St){ut=ut.next,St===Po&&(wt=!0);continue}else Ut={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},it===null?(Z=it=Ut,k=S):it=it.next=Ut,Ne.lanes|=St,cs|=St;Ut=ut.action,Zl&&u(S,Ut),S=ut.hasEagerState?ut.eagerState:u(S,Ut)}else St={lane:Ut,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},it===null?(Z=it=St,k=S):it=it.next=St,Ne.lanes|=Ut,cs|=Ut;ut=ut.next}while(ut!==null&&ut!==r);if(it===null?k=S:it.next=Z,!Ga(S,n.memoizedState)&&(xi=!0,wt&&(u=Yl,u!==null)))throw u;n.memoizedState=S,n.baseState=k,n.baseQueue=it,f.lastRenderedState=S}return y===null&&(f.lanes=0),[n.memoizedState,f.dispatch]}function Zh(n){var r=si(),u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var f=u.dispatch,y=u.pending,S=r.memoizedState;if(y!==null){u.pending=null;var k=y=y.next;do S=n(S,k.action),k=k.next;while(k!==y);Ga(S,r.memoizedState)||(xi=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),u.lastRenderedState=S}return[S,f]}function e0(n,r,u){var f=Ne,y=si(),S=en;if(S){if(u===void 0)throw Error(a(407));u=u()}else u=r();var k=!Ga((gn||y).memoizedState,u);if(k&&(y.memoizedState=u,xi=!0),y=y.queue,bd(n0.bind(null,f,y,n),[n]),y.getSnapshot!==r||k||vi!==null&&vi.memoizedState.tag&1){if(f.flags|=2048,Vs(9,Jl.bind(null,f,y,u,r),{destroy:void 0},null),yn===null)throw Error(a(349));S||(gl&60)!==0||Aa(f,r,u)}return u}function Aa(n,r,u){n.flags|=16384,n={getSnapshot:r,value:u},r=Ne.updateQueue,r===null?(r=Xh(),Ne.updateQueue=r,r.stores=[n]):(u=r.stores,u===null?r.stores=[n]:u.push(n))}function Jl(n,r,u,f){r.value=u,r.getSnapshot=f,i0(r)&&a0(n)}function n0(n,r,u){return u(function(){i0(r)&&a0(n)})}function i0(n){var r=n.getSnapshot;n=n.value;try{var u=r();return!Ga(n,u)}catch{return!0}}function a0(n){var r=rl(n,2);r!==null&&bi(r,n,2)}function Ed(n){var r=Xi();if(typeof n=="function"){var u=n;if(n=u(),Zl){wi(!0);try{u()}finally{wi(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:n},r}function Sd(n,r,u,f){return n.baseState=u,Ka(n,gn,typeof f=="function"?f:Un)}function Ly(n,r,u,f,y){if(ef(n))throw Error(a(485));if(n=r.action,n!==null){var S={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){S.listeners.push(k)}};I.T!==null?u(!0):S.isTransition=!1,f(S),u=r.pending,u===null?(S.next=r.pending=S,Td(r,S)):(S.next=u.next,r.pending=u.next=S)}}function Td(n,r){var u=r.action,f=r.payload,y=n.state;if(r.isTransition){var S=I.T,k={};I.T=k;try{var Z=u(y,f),it=I.S;it!==null&&it(k,Z),r0(n,r,Z)}catch(ut){ml(n,r,ut)}finally{I.T=S}}else try{S=u(y,f),r0(n,r,S)}catch(ut){ml(n,r,ut)}}function r0(n,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Lo(n,r,f)},function(f){return ml(n,r,f)}):Lo(n,r,u)}function Lo(n,r,u){r.status="fulfilled",r.value=u,s0(r),n.state=u,r=n.pending,r!==null&&(u=r.next,u===r?n.pending=null:(u=u.next,r.next=u,Td(n,u)))}function ml(n,r,u){var f=n.pending;if(n.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=u,s0(r),r=r.next;while(r!==f)}n.action=null}function s0(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function l0(n,r){return r}function o0(n,r){if(en){var u=yn.formState;if(u!==null){t:{var f=Ne;if(en){if(Ui){e:{for(var y=Ui,S=Ir;y.nodeType!==8;){if(!S){y=null;break e}if(y=Nl(y.nextSibling),y===null){y=null;break e}}S=y.data,y=S==="F!"||S==="F"?y:null}if(y){Ui=Nl(y.nextSibling),f=y.data==="F!";break t}}Oo(f)}f=!1}f&&(r=u[0])}}return u=Xi(),u.memoizedState=u.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l0,lastRenderedState:r},u.queue=f,u=wd.bind(null,Ne,f),f.dispatch=u,f=Ed(!1),S=Qc.bind(null,Ne,!1,f.queue),f=Xi(),y={state:r,dispatch:null,action:n,pending:null},f.queue=y,u=Ly.bind(null,Ne,y,S,u),y.dispatch=u,f.memoizedState=n,[r,u,!1]}function Mu(n){var r=si();return u0(r,gn,n)}function u0(n,r,u){r=Ka(n,r,l0)[0],n=is(Un)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?Yc(r):r;var f=si(),y=f.queue,S=y.dispatch;return u!==f.memoizedState&&(Ne.flags|=2048,Vs(9,zy.bind(null,y,u),{destroy:void 0},null)),[r,S,n]}function zy(n,r){n.action=r}function c0(n){var r=si(),u=gn;if(u!==null)return u0(r,u,n);si(),r=r.memoizedState,u=si();var f=u.queue.dispatch;return u.memoizedState=n,[r,f,!1]}function Vs(n,r,u,f){return n={tag:n,create:r,inst:u,deps:f,next:null},r=Ne.updateQueue,r===null&&(r=Xh(),Ne.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,r.lastEffect=n),n}function h0(){return si().memoizedState}function Wh(n,r,u,f){var y=Xi();Ne.flags|=n,y.memoizedState=Vs(1|r,u,{destroy:void 0},f===void 0?null:f)}function Jh(n,r,u,f){var y=si();f=f===void 0?null:f;var S=y.memoizedState.inst;gn!==null&&f!==null&&Uo(f,gn.memoizedState.deps)?y.memoizedState=Vs(r,u,S,f):(Ne.flags|=n,y.memoizedState=Vs(1|r,u,S,f))}function f0(n,r){Wh(8390656,8,n,r)}function bd(n,r){Jh(2048,8,n,r)}function d0(n,r){return Jh(4,2,n,r)}function g0(n,r){return Jh(4,4,n,r)}function m0(n,r){if(typeof r=="function"){n=n();var u=r(n);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function p0(n,r,u){u=u!=null?u.concat([n]):null,Jh(4,4,m0.bind(null,r,n),u)}function Ad(){}function y0(n,r){var u=si();r=r===void 0?null:r;var f=u.memoizedState;return r!==null&&Uo(r,f[1])?f[0]:(u.memoizedState=[n,r],n)}function _0(n,r){var u=si();r=r===void 0?null:r;var f=u.memoizedState;if(r!==null&&Uo(r,f[1]))return f[0];if(f=n(),Zl){wi(!0);try{n()}finally{wi(!1)}}return u.memoizedState=[f,r],f}function $h(n,r,u){return u===void 0||(gl&1073741824)!==0?n.memoizedState=r:(n.memoizedState=u,n=mr(),Ne.lanes|=n,cs|=n,u)}function v0(n,r,u,f){return Ga(u,r)?u:Mo.current!==null?(n=$h(n,u,f),Ga(n,r)||(xi=!0),n):(gl&42)===0?(xi=!0,n.memoizedState=u):(n=mr(),Ne.lanes|=n,cs|=n,r)}function E0(n,r,u,f,y){var S=dt.p;dt.p=S!==0&&8>S?S:8;var k=I.T,Z={};I.T=Z,Qc(n,!1,r,u);try{var it=y(),ut=I.S;if(ut!==null&&ut(Z,it),it!==null&&typeof it=="object"&&typeof it.then=="function"){var wt=Ql(it,f);zo(n,r,wt,xa(n))}else zo(n,r,f,xa(n))}catch(Ut){zo(n,r,{then:function(){},status:"rejected",reason:Ut},xa())}finally{dt.p=S,I.T=k}}function ky(){}function Cd(n,r,u,f){if(n.tag!==5)throw Error(a(476));var y=S0(n).queue;E0(n,y,r,Nt,u===null?ky:function(){return T0(n),u(f)})}function S0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Nt,baseState:Nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:Nt},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:u},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function T0(n){var r=S0(n).next.queue;zo(n,r,{},xa())}function tf(){return oa(Jd)}function Rd(){return si().memoizedState}function b0(){return si().memoizedState}function A0(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var u=xa();n=dr(u);var f=gr(r,n,u);f!==null&&(bi(f,r,u),no(f,r,u)),r={cache:pd()},n.payload=r;return}r=r.return}}function C0(n,r,u){var f=xa();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ef(n)?R0(r,u):(u=Do(n,r,u,f),u!==null&&(bi(u,n,f),w0(u,r,f)))}function wd(n,r,u){var f=xa();zo(n,r,u,f)}function zo(n,r,u,f){var y={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ef(n))R0(r,y);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var k=r.lastRenderedState,Z=S(k,u);if(y.hasEagerState=!0,y.eagerState=Z,Ga(Z,k))return Vc(n,r,y,0),yn===null&&Mc(),!1}catch{}finally{}if(u=Do(n,r,y,f),u!==null)return bi(u,n,f),w0(u,r,f),!0}return!1}function Qc(n,r,u,f){if(f={lane:2,revertLane:jy(),action:f,hasEagerState:!1,eagerState:null,next:null},ef(n)){if(r)throw Error(a(479))}else r=Do(n,u,f,2),r!==null&&bi(r,n,2)}function ef(n){var r=n.alternate;return n===Ne||r!==null&&r===Ne}function R0(n,r){Xl=fe=!0;var u=n.pending;u===null?r.next=r:(r.next=u.next,u.next=r),n.pending=r}function w0(n,r,u){if((u&4194176)!==0){var f=r.lanes;f&=n.pendingLanes,u|=f,r.lanes=u,qi(n,u)}}var Ps={readContext:oa,use:Ou,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn};Ps.useCacheRefresh=Kn,Ps.useMemoCache=Kn,Ps.useHostTransitionStatus=Kn,Ps.useFormState=Kn,Ps.useActionState=Kn,Ps.useOptimistic=Kn;var $l={readContext:oa,use:Ou,useCallback:function(n,r){return Xi().memoizedState=[n,r===void 0?null:r],n},useContext:oa,useEffect:f0,useImperativeHandle:function(n,r,u){u=u!=null?u.concat([n]):null,Wh(4194308,4,m0.bind(null,r,n),u)},useLayoutEffect:function(n,r){return Wh(4194308,4,n,r)},useInsertionEffect:function(n,r){Wh(4,2,n,r)},useMemo:function(n,r){var u=Xi();r=r===void 0?null:r;var f=n();if(Zl){wi(!0);try{n()}finally{wi(!1)}}return u.memoizedState=[f,r],f},useReducer:function(n,r,u){var f=Xi();if(u!==void 0){var y=u(r);if(Zl){wi(!0);try{u(r)}finally{wi(!1)}}}else y=r;return f.memoizedState=f.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},f.queue=n,n=n.dispatch=C0.bind(null,Ne,n),[f.memoizedState,n]},useRef:function(n){var r=Xi();return n={current:n},r.memoizedState=n},useState:function(n){n=Ed(n);var r=n.queue,u=wd.bind(null,Ne,r);return r.dispatch=u,[n.memoizedState,u]},useDebugValue:Ad,useDeferredValue:function(n,r){var u=Xi();return $h(u,n,r)},useTransition:function(){var n=Ed(!1);return n=E0.bind(null,Ne,n.queue,!0,!1),Xi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,u){var f=Ne,y=Xi();if(en){if(u===void 0)throw Error(a(407));u=u()}else{if(u=r(),yn===null)throw Error(a(349));(oe&60)!==0||Aa(f,r,u)}y.memoizedState=u;var S={value:u,getSnapshot:r};return y.queue=S,f0(n0.bind(null,f,S,n),[n]),f.flags|=2048,Vs(9,Jl.bind(null,f,S,u,r),{destroy:void 0},null),u},useId:function(){var n=Xi(),r=yn.identifierPrefix;if(en){var u=ll,f=xs;u=(f&~(1<<32-jn(f)-1)).toString(32)+u,r=":"+r+"R"+u,u=Du++,0<u&&(r+="H"+u.toString(32)),r+=":"}else u=Py++,r=":"+r+"r"+u.toString(32)+":";return n.memoizedState=r},useCacheRefresh:function(){return Xi().memoizedState=A0.bind(null,Ne)}};$l.useMemoCache=ns,$l.useHostTransitionStatus=tf,$l.useFormState=o0,$l.useActionState=o0,$l.useOptimistic=function(n){var r=Xi();r.memoizedState=r.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=Qc.bind(null,Ne,!0,u),u.dispatch=r,[n,r]};var pl={readContext:oa,use:Ou,useCallback:y0,useContext:oa,useEffect:bd,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:g0,useMemo:_0,useReducer:is,useRef:h0,useState:function(){return is(Un)},useDebugValue:Ad,useDeferredValue:function(n,r){var u=si();return v0(u,gn.memoizedState,n,r)},useTransition:function(){var n=is(Un)[0],r=si().memoizedState;return[typeof n=="boolean"?n:Yc(n),r]},useSyncExternalStore:e0,useId:Rd};pl.useCacheRefresh=b0,pl.useMemoCache=ns,pl.useHostTransitionStatus=tf,pl.useFormState=Mu,pl.useActionState=Mu,pl.useOptimistic=function(n,r){var u=si();return Sd(u,gn,n,r)};var ko={readContext:oa,use:Ou,useCallback:y0,useContext:oa,useEffect:bd,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:g0,useMemo:_0,useReducer:Zh,useRef:h0,useState:function(){return Zh(Un)},useDebugValue:Ad,useDeferredValue:function(n,r){var u=si();return gn===null?$h(u,n,r):v0(u,gn.memoizedState,n,r)},useTransition:function(){var n=Zh(Un)[0],r=si().memoizedState;return[typeof n=="boolean"?n:Yc(n),r]},useSyncExternalStore:e0,useId:Rd};ko.useCacheRefresh=b0,ko.useMemoCache=ns,ko.useHostTransitionStatus=tf,ko.useFormState=c0,ko.useActionState=c0,ko.useOptimistic=function(n,r){var u=si();return gn!==null?Sd(u,gn,n,r):(u.baseState=n,[n,u.queue.dispatch])};function Nd(n,r,u,f){r=n.memoizedState,u=u(f,r),u=u==null?r:V({},r,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var xd={isMounted:function(n){return(n=n._reactInternals)?st(n)===n:!1},enqueueSetState:function(n,r,u){n=n._reactInternals;var f=xa(),y=dr(f);y.payload=r,u!=null&&(y.callback=u),r=gr(n,y,f),r!==null&&(bi(r,n,f),no(r,n,f))},enqueueReplaceState:function(n,r,u){n=n._reactInternals;var f=xa(),y=dr(f);y.tag=1,y.payload=r,u!=null&&(y.callback=u),r=gr(n,y,f),r!==null&&(bi(r,n,f),no(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var u=xa(),f=dr(u);f.tag=2,r!=null&&(f.callback=r),r=gr(n,f,u),r!==null&&(bi(r,n,u),no(r,n,u))}};function N0(n,r,u,f,y,S,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,S,k):r.prototype&&r.prototype.isPureReactComponent?!es(u,f)||!es(y,S):!0}function x0(n,r,u,f){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,f),r.state!==n&&xd.enqueueReplaceState(r,r.state,null)}function Bo(n,r){var u=r;if("ref"in r){u={};for(var f in r)f!=="ref"&&(u[f]=r[f])}if(n=n.defaultProps){u===r&&(u=V({},u));for(var y in n)u[y]===void 0&&(u[y]=n[y])}return u}var nf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function D0(n){nf(n)}function I0(n){console.error(n)}function O0(n){nf(n)}function af(n,r){try{var u=n.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function M0(n,r,u){try{var f=n.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Dd(n,r,u){return u=dr(u),u.tag=3,u.payload={element:null},u.callback=function(){af(n,r)},u}function Id(n){return n=dr(n),n.tag=3,n}function V0(n,r,u,f){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var S=f.value;n.payload=function(){return y(S)},n.callback=function(){M0(r,u,f)}}var k=u.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){M0(r,u,f),typeof y!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var Z=f.stack;this.componentDidCatch(f.value,{componentStack:Z!==null?Z:""})})}function By(n,r,u,f,y){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=u.alternate,r!==null&&Zc(r,u,y,!0),u=qa.current,u!==null){switch(u.tag){case 13:return Is===null?ah():u.alternate===null&&Mn===0&&(Mn=3),u.flags&=-257,u.flags|=65536,u.lanes=y,f===Hh?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([f]):r.add(f),Te(n,f,y)),!1;case 22:return u.flags|=65536,f===Hh?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([f]):u.add(f)),Te(n,f,y)),!1}throw Error(a(435,u.tag))}return Te(n,f,y),ah(),!1}if(en)return r=qa.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,f!==kc&&(n=Error(a(422),{cause:f}),Ds(Ha(n,u)))):(f!==kc&&(r=Error(a(423),{cause:f}),Ds(Ha(r,u))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,f=Ha(f,u),y=Dd(n.stateNode,f,y),zu(n,y),Mn!==4&&(Mn=2)),!1;var S=Error(a(520),{cause:f});if(S=Ha(S,u),ih===null?ih=[S]:ih.push(S),Mn!==4&&(Mn=2),r===null)return!0;f=Ha(f,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,n=y&-y,u.lanes|=n,n=Dd(u.stateNode,f,n),zu(u,n),!1;case 1:if(r=u.type,S=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ti===null||!Ti.has(S))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Id(y),V0(y,n,u,f),zu(u,y),!1}u=u.return}while(u!==null);return!1}var hr=Error(a(461)),xi=!1;function Di(n,r,u,f){r.child=n===null?ul(r,null,u,f):ol(r,n.child,u,f)}function Od(n,r,u,f,y){u=u.render;var S=r.ref;if("ref"in f){var k={};for(var Z in f)Z!=="ref"&&(k[Z]=f[Z])}else k=f;return Fo(r),f=_d(n,r,u,k,S,y),Z=vd(),n!==null&&!xi?(Kc(n,r,y),li(n,r,y)):(en&&Z&&zc(r),r.flags|=1,Di(n,r,f,y),r.child)}function Md(n,r,u,f,y){if(n===null){var S=u.type;return typeof S=="function"&&!bl(S)&&S.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=S,Vd(n,r,S,f,y)):(n=Fu(u.type,null,f,r,r.mode,y),n.ref=r.ref,n.return=r,r.child=n)}if(S=n.child,!Gd(n,y)){var k=S.memoizedProps;if(u=u.compare,u=u!==null?u:es,u(k,f)&&n.ref===r.ref)return li(n,r,y)}return r.flags|=1,n=wa(S,f),n.ref=r.ref,n.return=r,r.child=n}function Vd(n,r,u,f,y){if(n!==null){var S=n.memoizedProps;if(es(S,f)&&n.ref===r.ref)if(xi=!1,r.pendingProps=f=S,Gd(n,y))(n.flags&131072)!==0&&(xi=!0);else return r.lanes=n.lanes,li(n,r,y)}return Ud(n,r,u,f,y)}function P0(n,r,u){var f=r.pendingProps,y=f.children,S=(r.stateNode._pendingVisibility&2)!==0,k=n!==null?n.memoizedState:null;if(Vu(n,r),f.mode==="hidden"||S){if((r.flags&128)!==0){if(f=k!==null?k.baseLanes|u:u,n!==null){for(y=r.child=n.child,S=0;y!==null;)S=S|y.lanes|y.childLanes,y=y.sibling;r.childLanes=S&~f}else r.childLanes=0,r.child=null;return Pd(n,r,f,u)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&xu(r,k!==null?k.cachePool:null),k!==null?Hl(r,k):Kh(),md(r);else return r.lanes=r.childLanes=536870912,Pd(n,r,k!==null?k.baseLanes|u:u,u)}else k!==null?(xu(r,k.cachePool),Hl(r,k),hl(),r.memoizedState=null):(n!==null&&xu(r,null),Kh(),hl());return Di(n,r,y,u),r.child}function Pd(n,r,u,f){var y=qc();return y=y===null?null:{parent:ri._currentValue,pool:y},r.memoizedState={baseLanes:u,cachePool:y},n!==null&&xu(r,null),Kh(),md(r),n!==null&&Zc(n,r,f,!0),null}function Vu(n,r){var u=r.ref;if(u===null)n!==null&&n.ref!==null&&(r.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(r.flags|=2097664)}}function Ud(n,r,u,f,y){return Fo(r),u=_d(n,r,u,f,void 0,y),f=vd(),n!==null&&!xi?(Kc(n,r,y),li(n,r,y)):(en&&f&&zc(r),r.flags|=1,Di(n,r,u,y),r.child)}function U0(n,r,u,f,y,S){return Fo(r),r.updateQueue=null,u=t0(r,f,u,y),$m(n),f=vd(),n!==null&&!xi?(Kc(n,r,S),li(n,r,S)):(en&&f&&zc(r),r.flags|=1,Di(n,r,u,S),r.child)}function L0(n,r,u,f,y){if(Fo(r),r.stateNode===null){var S=zl,k=u.contextType;typeof k=="object"&&k!==null&&(S=oa(k)),S=new u(f,S),r.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=xd,r.stateNode=S,S._reactInternals=r,S=r.stateNode,S.props=f,S.state=r.memoizedState,S.refs={},Ca(r),k=u.contextType,S.context=typeof k=="object"&&k!==null?oa(k):zl,S.state=r.memoizedState,k=u.getDerivedStateFromProps,typeof k=="function"&&(Nd(r,u,k,f),S.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(k=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),k!==S.state&&xd.enqueueReplaceState(S,S.state,null),rs(r,f,S,y),ua(),S.state=r.memoizedState),typeof S.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(n===null){S=r.stateNode;var Z=r.memoizedProps,it=Bo(u,Z);S.props=it;var ut=S.context,wt=u.contextType;k=zl,typeof wt=="object"&&wt!==null&&(k=oa(wt));var Ut=u.getDerivedStateFromProps;wt=typeof Ut=="function"||typeof S.getSnapshotBeforeUpdate=="function",Z=r.pendingProps!==Z,wt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Z||ut!==k)&&x0(r,S,f,k),Ei=!1;var St=r.memoizedState;S.state=St,rs(r,f,S,y),ua(),ut=r.memoizedState,Z||St!==ut||Ei?(typeof Ut=="function"&&(Nd(r,u,Ut,f),ut=r.memoizedState),(it=Ei||N0(r,u,it,f,St,ut,k))?(wt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=ut),S.props=f,S.state=ut,S.context=k,f=it):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{S=r.stateNode,cf(n,r),k=r.memoizedProps,wt=Bo(u,k),S.props=wt,Ut=r.pendingProps,St=S.context,ut=u.contextType,it=zl,typeof ut=="object"&&ut!==null&&(it=oa(ut)),Z=u.getDerivedStateFromProps,(ut=typeof Z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(k!==Ut||St!==it)&&x0(r,S,f,it),Ei=!1,St=r.memoizedState,S.state=St,rs(r,f,S,y),ua();var Ct=r.memoizedState;k!==Ut||St!==Ct||Ei||n!==null&&n.dependencies!==null&&Uu(n.dependencies)?(typeof Z=="function"&&(Nd(r,u,Z,f),Ct=r.memoizedState),(wt=Ei||N0(r,u,wt,f,St,Ct,it)||n!==null&&n.dependencies!==null&&Uu(n.dependencies))?(ut||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ct,it),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ct,it)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||k===n.memoizedProps&&St===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&St===n.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=Ct),S.props=f,S.state=Ct,S.context=it,f=wt):(typeof S.componentDidUpdate!="function"||k===n.memoizedProps&&St===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&St===n.memoizedState||(r.flags|=1024),f=!1)}return S=f,Vu(n,r),f=(r.flags&128)!==0,S||f?(S=r.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:S.render(),r.flags|=1,n!==null&&f?(r.child=ol(r,n.child,null,y),r.child=ol(r,null,u,y)):Di(n,r,u,y),r.memoizedState=S.state,n=r.child):n=li(n,r,y),n}function Ld(n,r,u,f){return Ru(),r.flags|=256,Di(n,r,u,f),r.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Li(n){return{baseLanes:n,cachePool:dl()}}function rf(n,r,u){return n=n!==null?n.childLanes&~u:0,r&&(n|=Na),n}function z0(n,r,u){var f=r.pendingProps,y=!1,S=(r.flags&128)!==0,k;if((k=S)||(k=n!==null&&n.memoizedState===null?!1:(_i.current&2)!==0),k&&(y=!0,r.flags&=-129),k=(r.flags&32)!==0,r.flags&=-33,n===null){if(en){if(y?cl(r):hl(),en){var Z=Ui,it;if(it=Z){t:{for(it=Z,Z=Ir;it.nodeType!==8;){if(!Z){Z=null;break t}if(it=Nl(it.nextSibling),it===null){Z=null;break t}}Z=it}Z!==null?(r.memoizedState={dehydrated:Z,treeContext:sl!==null?{id:xs,overflow:ll}:null,retryLane:536870912},it=hi(18,null,null,0),it.stateNode=Z,it.return=r,r.child=it,la=r,Ui=null,it=!0):it=!1}it||Oo(r)}if(Z=r.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Z.data==="$!"?r.lanes=16:r.lanes=536870912,null;Os(r)}return Z=f.children,f=f.fallback,y?(hl(),y=r.mode,Z=Bd({mode:"hidden",children:Z},y),f=oo(f,y,u,null),Z.return=r,f.return=r,Z.sibling=f,r.child=Z,y=r.child,y.memoizedState=Li(u),y.childLanes=rf(n,k,u),r.memoizedState=zd,f):(cl(r),kd(r,Z))}if(it=n.memoizedState,it!==null&&(Z=it.dehydrated,Z!==null)){if(S)r.flags&256?(cl(r),r.flags&=-257,r=sf(n,r,u)):r.memoizedState!==null?(hl(),r.child=n.child,r.flags|=128,r=null):(hl(),y=f.fallback,Z=r.mode,f=Bd({mode:"visible",children:f.children},Z),y=oo(y,Z,u,null),y.flags|=2,f.return=r,y.return=r,f.sibling=y,r.child=f,ol(r,n.child,null,u),f=r.child,f.memoizedState=Li(u),f.childLanes=rf(n,k,u),r.memoizedState=zd,r=y);else if(cl(r),Z.data==="$!"){if(k=Z.nextSibling&&Z.nextSibling.dataset,k)var ut=k.dgst;k=ut,f=Error(a(419)),f.stack="",f.digest=k,Ds({value:f,source:null,stack:null}),r=sf(n,r,u)}else if(xi||Zc(n,r,u,!1),k=(u&n.childLanes)!==0,xi||k){if(k=yn,k!==null){if(f=u&-u,(f&42)!==0)f=1;else switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=64;break;case 268435456:f=134217728;break;default:f=0}if(f=(f&(k.suspendedLanes|u))!==0?0:f,f!==0&&f!==it.retryLane)throw it.retryLane=f,rl(n,f),bi(k,n,f),hr}Z.data==="$?"||ah(),r=sf(n,r,u)}else Z.data==="$?"?(r.flags|=128,r.child=n.child,r=Xo.bind(null,n),Z._reactRetry=r,r=null):(n=it.treeContext,Ui=Nl(Z.nextSibling),la=r,en=!0,Dr=null,Ir=!1,n!==null&&(Nn[ur++]=xs,Nn[ur++]=ll,Nn[ur++]=sl,xs=n.id,ll=n.overflow,sl=r),r=kd(r,f.children),r.flags|=4096);return r}return y?(hl(),y=f.fallback,Z=r.mode,it=n.child,ut=it.sibling,f=wa(it,{mode:"hidden",children:f.children}),f.subtreeFlags=it.subtreeFlags&31457280,ut!==null?y=wa(ut,y):(y=oo(y,Z,u,null),y.flags|=2),y.return=r,f.return=r,f.sibling=y,r.child=f,f=y,y=r.child,Z=n.child.memoizedState,Z===null?Z=Li(u):(it=Z.cachePool,it!==null?(ut=ri._currentValue,it=it.parent!==ut?{parent:ut,pool:ut}:it):it=dl(),Z={baseLanes:Z.baseLanes|u,cachePool:it}),y.memoizedState=Z,y.childLanes=rf(n,k,u),r.memoizedState=zd,f):(cl(r),u=n.child,n=u.sibling,u=wa(u,{mode:"visible",children:f.children}),u.return=r,u.sibling=null,n!==null&&(k=r.deletions,k===null?(r.deletions=[n],r.flags|=16):k.push(n)),r.child=u,r.memoizedState=null,u)}function kd(n,r){return r=Bd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Bd(n,r){return jd(n,r,0,null)}function sf(n,r,u){return ol(r,n.child,null,u),n=kd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function lf(n,r,u){n.lanes|=r;var f=n.alternate;f!==null&&(f.lanes|=r),fr(n.return,r,u)}function to(n,r,u,f,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=u,S.tailMode=y)}function Go(n,r,u){var f=r.pendingProps,y=f.revealOrder,S=f.tail;if(Di(n,r,f.children,u),f=_i.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lf(n,u,r);else if(n.tag===19)lf(n,u,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}switch(It(_i,f),y){case"forwards":for(u=r.child,y=null;u!==null;)n=u.alternate,n!==null&&Nu(n)===null&&(y=u),u=u.sibling;u=y,u===null?(y=r.child,r.child=null):(y=u.sibling,u.sibling=null),to(r,!1,y,u,S);break;case"backwards":for(u=null,y=r.child,r.child=null;y!==null;){if(n=y.alternate,n!==null&&Nu(n)===null){r.child=y;break}n=y.sibling,y.sibling=u,u=y,y=n}to(r,!0,u,null,S);break;case"together":to(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function li(n,r,u){if(n!==null&&(r.dependencies=n.dependencies),cs|=r.lanes,(u&r.childLanes)===0)if(n!==null){if(Zc(n,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,u=wa(n,n.pendingProps),r.child=u,u.return=r;n.sibling!==null;)n=n.sibling,u=u.sibling=wa(n,n.pendingProps),u.return=r;u.sibling=null}return r.child}function Gd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Uu(n)))}function Gy(n,r,u){switch(r.tag){case 3:ae(r,r.stateNode.containerInfo),eo(r,ri,n.memoizedState.cache),Ru();break;case 27:case 5:ve(r);break;case 4:ae(r,r.stateNode.containerInfo);break;case 10:eo(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(cl(r),r.flags|=128,null):(u&r.child.childLanes)!==0?z0(n,r,u):(cl(r),n=li(n,r,u),n!==null?n.sibling:null);cl(r);break;case 19:var y=(n.flags&128)!==0;if(f=(u&r.childLanes)!==0,f||(Zc(n,r,u,!1),f=(u&r.childLanes)!==0),y){if(f)return Go(n,r,u);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),It(_i,_i.current),f)break;return null;case 22:case 23:return r.lanes=0,P0(n,r,u);case 24:eo(r,ri,n.memoizedState.cache)}return li(n,r,u)}function Xc(n,r,u){if(n!==null)if(n.memoizedProps!==r.pendingProps)xi=!0;else{if(!Gd(n,u)&&(r.flags&128)===0)return xi=!1,Gy(n,r,u);xi=(n.flags&131072)!==0}else xi=!1,en&&(r.flags&1048576)!==0&&dd(r,Lc,r.index);switch(r.lanes=0,r.tag){case 16:t:{n=r.pendingProps;var f=r.elementType,y=f._init;if(f=y(f._payload),r.type=f,typeof f=="function")bl(f)?(n=Bo(f,n),r.tag=1,r=L0(null,r,f,n,u)):(r.tag=0,r=Ud(null,r,f,n,u));else{if(f!=null){if(y=f.$$typeof,y===R){r.tag=11,r=Od(null,r,f,n,u);break t}else if(y===H){r.tag=14,r=Md(null,r,f,n,u);break t}}throw r=M(f)||f,Error(a(306,r,""))}}return r;case 0:return Ud(n,r,r.type,r.pendingProps,u);case 1:return f=r.type,y=Bo(f,r.pendingProps),L0(n,r,f,y,u);case 3:t:{if(ae(r,r.stateNode.containerInfo),n===null)throw Error(a(387));var S=r.pendingProps;y=r.memoizedState,f=y.element,cf(n,r),rs(r,S,null,u);var k=r.memoizedState;if(S=k.cache,eo(r,ri,S),S!==y.cache&&of(r,[ri],u,!0),ua(),S=k.element,y.isDehydrated)if(y={element:S,isDehydrated:!1,cache:k.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=Ld(n,r,S,u);break t}else if(S!==f){f=Ha(Error(a(424)),r),Ds(f),r=Ld(n,r,S,u);break t}else for(Ui=Nl(r.stateNode.containerInfo.firstChild),la=r,en=!0,Dr=null,Ir=!0,u=ul(r,null,S,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ru(),S===f){r=li(n,r,u);break t}Di(n,r,S,u)}r=r.child}return r;case 26:return Vu(n,r),n===null?(u=r2(r.type,null,r.pendingProps,null))?r.memoizedState=u:en||(u=r.type,n=r.pendingProps,f=q0(ce.current).createElement(u),f[rn]=r,f[ye]=n,Da(f,u,n),cn(f),r.stateNode=f):r.memoizedState=r2(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ve(r),n===null&&en&&(f=r.stateNode=n2(r.type,r.pendingProps,ce.current),la=r,Ir=!0,Ui=Nl(f.firstChild)),f=r.pendingProps.children,n!==null||en?Di(n,r,f,u):r.child=ol(r,null,f,u),Vu(n,r),r.child;case 5:return n===null&&en&&((y=f=Ui)&&(f=Ib(f,r.type,r.pendingProps,Ir),f!==null?(r.stateNode=f,la=r,Ui=Nl(f.firstChild),Ir=!1,y=!0):y=!1),y||Oo(r)),ve(r),y=r.type,S=r.pendingProps,k=n!==null?n.memoizedProps:null,f=S.children,Jy(y,S)?f=null:k!==null&&Jy(y,k)&&(r.flags|=32),r.memoizedState!==null&&(y=_d(n,r,Uy,null,null,u),Jd._currentValue=y),Vu(n,r),Di(n,r,f,u),r.child;case 6:return n===null&&en&&((n=u=Ui)&&(u=Ob(u,r.pendingProps,Ir),u!==null?(r.stateNode=u,la=r,Ui=null,n=!0):n=!1),n||Oo(r)),null;case 13:return z0(n,r,u);case 4:return ae(r,r.stateNode.containerInfo),f=r.pendingProps,n===null?r.child=ol(r,null,f,u):Di(n,r,f,u),r.child;case 11:return Od(n,r,r.type,r.pendingProps,u);case 7:return Di(n,r,r.pendingProps,u),r.child;case 8:return Di(n,r,r.pendingProps.children,u),r.child;case 12:return Di(n,r,r.pendingProps.children,u),r.child;case 10:return f=r.pendingProps,eo(r,r.type,f.value),Di(n,r,f.children,u),r.child;case 9:return y=r.type._context,f=r.pendingProps.children,Fo(r),y=oa(y),f=f(y),r.flags|=1,Di(n,r,f,u),r.child;case 14:return Md(n,r,r.type,r.pendingProps,u);case 15:return Vd(n,r,r.type,r.pendingProps,u);case 19:return Go(n,r,u);case 22:return P0(n,r,u);case 24:return Fo(r),f=oa(ri),n===null?(y=qc(),y===null&&(y=yn,S=pd(),y.pooledCache=S,S.refCount++,S!==null&&(y.pooledCacheLanes|=u),y=S),r.memoizedState={parent:f,cache:y},Ca(r),eo(r,ri,y)):((n.lanes&u)!==0&&(cf(n,r),rs(r,null,null,u),ua()),y=n.memoizedState,S=r.memoizedState,y.parent!==f?(y={parent:f,cache:f},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),eo(r,ri,f)):(f=S.cache,eo(r,ri,f),f!==y.cache&&of(r,[ri],u,!0))),Di(n,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}var Pu=ht(null),Us=null,as=null;function eo(n,r,u){It(Pu,r._currentValue),r._currentValue=u}function yl(n){n._currentValue=Pu.current,Dt(Pu)}function fr(n,r,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),n===u)break;n=n.return}}function of(n,r,u,f){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var S=y.dependencies;if(S!==null){var k=y.child;S=S.firstContext;t:for(;S!==null;){var Z=S;S=y;for(var it=0;it<r.length;it++)if(Z.context===r[it]){S.lanes|=u,Z=S.alternate,Z!==null&&(Z.lanes|=u),fr(S.return,u,n),f||(k=null);break t}S=Z.next}}else if(y.tag===18){if(k=y.return,k===null)throw Error(a(341));k.lanes|=u,S=k.alternate,S!==null&&(S.lanes|=u),fr(k,u,n),k=null}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===n){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}}function Zc(n,r,u,f){n=null;for(var y=r,S=!1;y!==null;){if(!S){if((y.flags&524288)!==0)S=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var k=y.alternate;if(k===null)throw Error(a(387));if(k=k.memoizedProps,k!==null){var Z=y.type;Ga(y.pendingProps.value,k.value)||(n!==null?n.push(Z):n=[Z])}}else if(y===pe.current){if(k=y.alternate,k===null)throw Error(a(387));k.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(Jd):n=[Jd])}y=y.return}n!==null&&of(r,n,u,f),r.flags|=262144}function Uu(n){for(n=n.firstContext;n!==null;){if(!Ga(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fo(n){Us=n,as=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function oa(n){return Lu(Us,n)}function uf(n,r){return Us===null&&Fo(n),Lu(n,r)}function Lu(n,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},as===null){if(n===null)throw Error(a(308));as=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else as=as.next=r;return u}var Ei=!1;function Ca(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function dr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gr(n,r,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(Se&2)!==0){var y=f.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),f.pending=r,r=Uc(n),Pc(n,null,u),r}return Vc(n,f,r,u),Uc(n)}function no(n,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194176)!==0)){var f=r.lanes;f&=n.pendingLanes,u|=f,r.lanes=u,qi(n,u)}}function zu(n,r){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var k={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};S===null?y=S=k:S=S.next=k,u=u.next}while(u!==null);S===null?y=S=r:S=S.next=r}else y=S=r;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=r:n.next=r,u.lastBaseUpdate=r}var Ya=!1;function ua(){if(Ya){var n=Yl;if(n!==null)throw n}}function rs(n,r,u,f){Ya=!1;var y=n.updateQueue;Ei=!1;var S=y.firstBaseUpdate,k=y.lastBaseUpdate,Z=y.shared.pending;if(Z!==null){y.shared.pending=null;var it=Z,ut=it.next;it.next=null,k===null?S=ut:k.next=ut,k=it;var wt=n.alternate;wt!==null&&(wt=wt.updateQueue,Z=wt.lastBaseUpdate,Z!==k&&(Z===null?wt.firstBaseUpdate=ut:Z.next=ut,wt.lastBaseUpdate=it))}if(S!==null){var Ut=y.baseState;k=0,wt=ut=it=null,Z=S;do{var St=Z.lane&-536870913,Ct=St!==Z.lane;if(Ct?(oe&St)===St:(f&St)===St){St!==0&&St===Po&&(Ya=!0),wt!==null&&(wt=wt.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});t:{var ne=n,Ae=Z;St=r;var Ai=u;switch(Ae.tag){case 1:if(ne=Ae.payload,typeof ne=="function"){Ut=ne.call(Ai,Ut,St);break t}Ut=ne;break t;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=Ae.payload,St=typeof ne=="function"?ne.call(Ai,Ut,St):ne,St==null)break t;Ut=V({},Ut,St);break t;case 2:Ei=!0}}St=Z.callback,St!==null&&(n.flags|=64,Ct&&(n.flags|=8192),Ct=y.callbacks,Ct===null?y.callbacks=[St]:Ct.push(St))}else Ct={lane:St,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},wt===null?(ut=wt=Ct,it=Ut):wt=wt.next=Ct,k|=St;if(Z=Z.next,Z===null){if(Z=y.shared.pending,Z===null)break;Ct=Z,Z=Ct.next,Ct.next=null,y.lastBaseUpdate=Ct,y.shared.pending=null}}while(!0);wt===null&&(it=Ut),y.baseState=it,y.firstBaseUpdate=ut,y.lastBaseUpdate=wt,S===null&&(y.shared.lanes=0),cs|=k,n.lanes=k,n.memoizedState=Ut}}function Ls(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function zs(n,r){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)Ls(u[n],r)}function oi(n,r){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&n)===n){f=void 0;var S=u.create,k=u.inst;f=S(),k.destroy=f}u=u.next}while(u!==y)}}catch(Z){Bt(r,r.return,Z)}}function Or(n,r,u){try{var f=r.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var S=y.next;f=S;do{if((f.tag&n)===n){var k=f.inst,Z=k.destroy;if(Z!==void 0){k.destroy=void 0,y=r;var it=u;try{Z()}catch(ut){Bt(y,it,ut)}}}f=f.next}while(f!==S)}}catch(ut){Bt(r,r.return,ut)}}function _l(n){var r=n.updateQueue;if(r!==null){var u=n.stateNode;try{zs(r,u)}catch(f){Bt(n,n.return,f)}}}function Wc(n,r,u){u.props=Bo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(f){Bt(n,r,f)}}function ui(n,r){try{var u=n.ref;if(u!==null){var f=n.stateNode;switch(n.tag){case 26:case 27:case 5:var y=f;break;default:y=f}typeof u=="function"?n.refCleanup=u(y):u.current=y}}catch(S){Bt(n,r,S)}}function pn(n,r){var u=n.ref,f=n.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(y){Bt(n,r,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Bt(n,r,y)}else u.current=null}function nn(n){var r=n.type,u=n.memoizedProps,f=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(y){Bt(n,n.return,y)}}function Mr(n,r,u){try{var f=n.stateNode;Rb(f,n.type,u,r),f[ye]=r}catch(y){Bt(n,n.return,y)}}function ss(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Jc(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||ss(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qa(n,r,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?u.nodeType===8?u.parentNode.insertBefore(n,r):u.insertBefore(n,r):(u.nodeType===8?(r=u.parentNode,r.insertBefore(n,u)):(r=u,r.appendChild(n)),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=H0));else if(f!==4&&f!==27&&(n=n.child,n!==null))for(Qa(n,r,u),n=n.sibling;n!==null;)Qa(n,r,u),n=n.sibling}function vl(n,r,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?u.insertBefore(n,r):u.appendChild(n);else if(f!==4&&f!==27&&(n=n.child,n!==null))for(vl(n,r,u),n=n.sibling;n!==null;)vl(n,r,u),n=n.sibling}var ls=!1,In=!1,io=!1,hf=typeof WeakSet=="function"?WeakSet:Set,ci=null,ff=!1;function ku(n,r){if(n=n.containerInfo,Zy=W0,n=ld(n),Oc(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else t:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var y=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break t}var k=0,Z=-1,it=-1,ut=0,wt=0,Ut=n,St=null;e:for(;;){for(var Ct;Ut!==u||y!==0&&Ut.nodeType!==3||(Z=k+y),Ut!==S||f!==0&&Ut.nodeType!==3||(it=k+f),Ut.nodeType===3&&(k+=Ut.nodeValue.length),(Ct=Ut.firstChild)!==null;)St=Ut,Ut=Ct;for(;;){if(Ut===n)break e;if(St===u&&++ut===y&&(Z=k),St===S&&++wt===f&&(it=k),(Ct=Ut.nextSibling)!==null)break;Ut=St,St=Ut.parentNode}Ut=Ct}u=Z===-1||it===-1?null:{start:Z,end:it}}else u=null}u=u||{start:0,end:0}}else u=null;for(Wy={focusedElem:n,selectionRange:u},W0=!1,ci=r;ci!==null;)if(r=ci,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ci=n;else for(;ci!==null;){switch(r=ci,S=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&S!==null){n=void 0,u=r,y=S.memoizedProps,S=S.memoizedState,f=u.stateNode;try{var ne=Bo(u.type,y,u.elementType===u.type);n=f.getSnapshotBeforeUpdate(ne,S),f.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){Bt(u,u.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,u=n.nodeType,u===9)e1(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":e1(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,ci=n;break}ci=r.return}return ne=ff,ff=!1,ne}function Bu(n,r,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ks(n,u),f&4&&oi(5,u);break;case 1:if(ks(n,u),f&4)if(n=u.stateNode,r===null)try{n.componentDidMount()}catch(Z){Bt(u,u.return,Z)}else{var y=Bo(u.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(y,r,n.__reactInternalSnapshotBeforeUpdate)}catch(Z){Bt(u,u.return,Z)}}f&64&&_l(u),f&512&&ui(u,u.return);break;case 3:if(ks(n,u),f&64&&(f=u.updateQueue,f!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{zs(f,n)}catch(Z){Bt(u,u.return,Z)}}break;case 26:ks(n,u),f&512&&ui(u,u.return);break;case 27:case 5:ks(n,u),r===null&&f&4&&nn(u),f&512&&ui(u,u.return);break;case 12:ks(n,u);break;case 13:ks(n,u),f&4&&k0(n,u);break;case 22:if(y=u.memoizedState!==null||ls,!y){r=r!==null&&r.memoizedState!==null||In;var S=ls,k=In;ls=y,(In=r)&&!k?us(n,u,(u.subtreeFlags&8772)!==0):ks(n,u),ls=S,In=k}f&512&&(u.memoizedProps.mode==="manual"?ui(u,u.return):pn(u,u.return));break;default:ks(n,u)}}function df(n){var r=n.alternate;r!==null&&(n.alternate=null,df(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&kn(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var On=null,zi=!1;function ca(n,r,u){for(u=u.child;u!==null;)gf(n,r,u),u=u.sibling}function gf(n,r,u){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount($e,u)}catch{}switch(u.tag){case 26:In||pn(u,r),ca(n,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:In||pn(u,r);var f=On,y=zi;for(On=u.stateNode,ca(n,r,u),u=u.stateNode,r=u.attributes;r.length;)u.removeAttributeNode(r[0]);kn(u),On=f,zi=y;break;case 5:In||pn(u,r);case 6:y=On;var S=zi;if(On=null,ca(n,r,u),On=y,zi=S,On!==null)if(zi)try{n=On,f=u.stateNode,n.nodeType===8?n.parentNode.removeChild(f):n.removeChild(f)}catch(k){Bt(u,r,k)}else try{On.removeChild(u.stateNode)}catch(k){Bt(u,r,k)}break;case 18:On!==null&&(zi?(r=On,u=u.stateNode,r.nodeType===8?t1(r.parentNode,u):r.nodeType===1&&t1(r,u),ng(r)):t1(On,u.stateNode));break;case 4:f=On,y=zi,On=u.stateNode.containerInfo,zi=!0,ca(n,r,u),On=f,zi=y;break;case 0:case 11:case 14:case 15:In||Or(2,u,r),In||Or(4,u,r),ca(n,r,u);break;case 1:In||(pn(u,r),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Wc(u,r,f)),ca(n,r,u);break;case 21:ca(n,r,u);break;case 22:In||pn(u,r),In=(f=In)||u.memoizedState!==null,ca(n,r,u),In=f;break;default:ca(n,r,u)}}function k0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ng(n)}catch(u){Bt(r,r.return,u)}}function $c(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new hf),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new hf),r;default:throw Error(a(435,n.tag))}}function th(n,r){var u=$c(n);r.forEach(function(f){var y=Et.bind(null,n,f);u.has(f)||(u.add(f),f.then(y,y))})}function Ra(n,r){var u=r.deletions;if(u!==null)for(var f=0;f<u.length;f++){var y=u[f],S=n,k=r,Z=k;t:for(;Z!==null;){switch(Z.tag){case 27:case 5:On=Z.stateNode,zi=!1;break t;case 3:On=Z.stateNode.containerInfo,zi=!0;break t;case 4:On=Z.stateNode.containerInfo,zi=!0;break t}Z=Z.return}if(On===null)throw Error(a(160));gf(S,k,y),On=null,zi=!1,S=y.alternate,S!==null&&(S.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)jo(r,n),r=r.sibling}var ha=null;function jo(n,r){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ra(r,n),fa(n),f&4&&(Or(3,n,n.return),oi(3,n),Or(5,n,n.return));break;case 1:Ra(r,n),fa(n),f&512&&(In||u===null||pn(u,u.return)),f&64&&ls&&(n=n.updateQueue,n!==null&&(f=n.callbacks,f!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var y=ha;if(Ra(r,n),fa(n),f&512&&(In||u===null||pn(u,u.return)),f&4){var S=u!==null?u.memoizedState:null;if(f=n.memoizedState,u===null)if(f===null)if(n.stateNode===null){t:{f=n.type,u=n.memoizedProps,y=y.ownerDocument||y;e:switch(f){case"title":S=y.getElementsByTagName("title")[0],(!S||S[_a]||S[rn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=y.createElement(f),y.head.insertBefore(S,y.querySelector("head > title"))),Da(S,f,u),S[rn]=n,cn(S),f=S;break t;case"link":var k=o2("link","href",y).get(f+(u.href||""));if(k){for(var Z=0;Z<k.length;Z++)if(S=k[Z],S.getAttribute("href")===(u.href==null?null:u.href)&&S.getAttribute("rel")===(u.rel==null?null:u.rel)&&S.getAttribute("title")===(u.title==null?null:u.title)&&S.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){k.splice(Z,1);break e}}S=y.createElement(f),Da(S,f,u),y.head.appendChild(S);break;case"meta":if(k=o2("meta","content",y).get(f+(u.content||""))){for(Z=0;Z<k.length;Z++)if(S=k[Z],S.getAttribute("content")===(u.content==null?null:""+u.content)&&S.getAttribute("name")===(u.name==null?null:u.name)&&S.getAttribute("property")===(u.property==null?null:u.property)&&S.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&S.getAttribute("charset")===(u.charSet==null?null:u.charSet)){k.splice(Z,1);break e}}S=y.createElement(f),Da(S,f,u),y.head.appendChild(S);break;default:throw Error(a(468,f))}S[rn]=n,cn(S),f=S}n.stateNode=f}else u2(y,n.type,n.stateNode);else n.stateNode=l2(y,f,n.memoizedProps);else S!==f?(S===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):S.count--,f===null?u2(y,n.type,n.stateNode):l2(y,f,n.memoizedProps)):f===null&&n.stateNode!==null&&Mr(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(f&4&&n.alternate===null){y=n.stateNode,S=n.memoizedProps;try{for(var it=y.firstChild;it;){var ut=it.nextSibling,wt=it.nodeName;it[_a]||wt==="HEAD"||wt==="BODY"||wt==="SCRIPT"||wt==="STYLE"||wt==="LINK"&&it.rel.toLowerCase()==="stylesheet"||y.removeChild(it),it=ut}for(var Ut=n.type,St=y.attributes;St.length;)y.removeAttributeNode(St[0]);Da(y,Ut,S),y[rn]=n,y[ye]=S}catch(ne){Bt(n,n.return,ne)}}case 5:if(Ra(r,n),fa(n),f&512&&(In||u===null||pn(u,u.return)),n.flags&32){y=n.stateNode;try{Sa(y,"")}catch(ne){Bt(n,n.return,ne)}}f&4&&n.stateNode!=null&&(y=n.memoizedProps,Mr(n,y,u!==null?u.memoizedProps:y)),f&1024&&(io=!0);break;case 6:if(Ra(r,n),fa(n),f&4){if(n.stateNode===null)throw Error(a(162));f=n.memoizedProps,u=n.stateNode;try{u.nodeValue=f}catch(ne){Bt(n,n.return,ne)}}break;case 3:if(Q0=null,y=ha,ha=K0(r.containerInfo),Ra(r,n),ha=y,fa(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{ng(r.containerInfo)}catch(ne){Bt(n,n.return,ne)}io&&(io=!1,ao(n));break;case 4:f=ha,ha=K0(n.stateNode.containerInfo),Ra(r,n),fa(n),ha=f;break;case 12:Ra(r,n),fa(n);break;case 13:Ra(r,n),fa(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(xe=Ie()),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,th(n,f)));break;case 22:if(f&512&&(In||u===null||pn(u,u.return)),it=n.memoizedState!==null,ut=u!==null&&u.memoizedState!==null,wt=ls,Ut=In,ls=wt||it,In=Ut||ut,Ra(r,n),In=Ut,ls=wt,fa(n),r=n.stateNode,r._current=n,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,f&8192&&(r._visibility=it?r._visibility&-2:r._visibility|1,it&&(r=ls||In,u===null||ut||r||os(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))t:for(u=null,r=n;;){if(r.tag===5||r.tag===26||r.tag===27){if(u===null){ut=u=r;try{if(y=ut.stateNode,it)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=ut.stateNode,Z=ut.memoizedProps.style;var Ct=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;k.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(ne){Bt(ut,ut.return,ne)}}}else if(r.tag===6){if(u===null){ut=r;try{ut.stateNode.nodeValue=it?"":ut.memoizedProps}catch(ne){Bt(ut,ut.return,ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=n.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,th(n,u))));break;case 19:Ra(r,n),fa(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,th(n,f)));break;case 21:break;default:Ra(r,n),fa(n)}}function fa(n){var r=n.flags;if(r&2){try{if(n.tag!==27){t:{for(var u=n.return;u!==null;){if(ss(u)){var f=u;break t}u=u.return}throw Error(a(160))}switch(f.tag){case 27:var y=f.stateNode,S=Jc(n);vl(n,S,y);break;case 5:var k=f.stateNode;f.flags&32&&(Sa(k,""),f.flags&=-33);var Z=Jc(n);vl(n,Z,k);break;case 3:case 4:var it=f.stateNode.containerInfo,ut=Jc(n);Qa(n,ut,it);break;default:throw Error(a(161))}}}catch(wt){Bt(n,n.return,wt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ao(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;ao(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ks(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Bu(n,r.alternate,r),r=r.sibling}function os(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Or(4,r,r.return),os(r);break;case 1:pn(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&Wc(r,r.return,u),os(r);break;case 26:case 27:case 5:pn(r,r.return),os(r);break;case 22:pn(r,r.return),r.memoizedState===null&&os(r);break;default:os(r)}n=n.sibling}}function us(n,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,y=n,S=r,k=S.flags;switch(S.tag){case 0:case 11:case 15:us(y,S,u),oi(4,S);break;case 1:if(us(y,S,u),f=S,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ut){Bt(f,f.return,ut)}if(f=S,y=f.updateQueue,y!==null){var Z=f.stateNode;try{var it=y.shared.hiddenCallbacks;if(it!==null)for(y.shared.hiddenCallbacks=null,y=0;y<it.length;y++)Ls(it[y],Z)}catch(ut){Bt(f,f.return,ut)}}u&&k&64&&_l(S),ui(S,S.return);break;case 26:case 27:case 5:us(y,S,u),u&&f===null&&k&4&&nn(S),ui(S,S.return);break;case 12:us(y,S,u);break;case 13:us(y,S,u),u&&k&4&&k0(y,S);break;case 22:S.memoizedState===null&&us(y,S,u),ui(S,S.return);break;default:us(y,S,u)}r=r.sibling}}function Xa(n,r){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&ql(u))}function Vr(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ql(n))}function xn(n,r,u,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)El(n,r,u,f),r=r.sibling}function El(n,r,u,f){var y=r.flags;switch(r.tag){case 0:case 11:case 15:xn(n,r,u,f),y&2048&&oi(9,r);break;case 3:xn(n,r,u,f),y&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ql(n)));break;case 12:if(y&2048){xn(n,r,u,f),n=r.stateNode;try{var S=r.memoizedProps,k=S.id,Z=S.onPostCommit;typeof Z=="function"&&Z(k,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(it){Bt(r,r.return,it)}}else xn(n,r,u,f);break;case 23:break;case 22:S=r.stateNode,r.memoizedState!==null?S._visibility&4?xn(n,r,u,f):sn(n,r):S._visibility&4?xn(n,r,u,f):(S._visibility|=4,Ee(n,r,u,f,(r.subtreeFlags&10256)!==0)),y&2048&&Xa(r.alternate,r);break;case 24:xn(n,r,u,f),y&2048&&Vr(r.alternate,r);break;default:xn(n,r,u,f)}}function Ee(n,r,u,f,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var S=n,k=r,Z=u,it=f,ut=k.flags;switch(k.tag){case 0:case 11:case 15:Ee(S,k,Z,it,y),oi(8,k);break;case 23:break;case 22:var wt=k.stateNode;k.memoizedState!==null?wt._visibility&4?Ee(S,k,Z,it,y):sn(S,k):(wt._visibility|=4,Ee(S,k,Z,it,y)),y&&ut&2048&&Xa(k.alternate,k);break;case 24:Ee(S,k,Z,it,y),y&&ut&2048&&Vr(k.alternate,k);break;default:Ee(S,k,Z,it,y)}r=r.sibling}}function sn(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=n,f=r,y=f.flags;switch(f.tag){case 22:sn(u,f),y&2048&&Xa(f.alternate,f);break;case 24:sn(u,f),y&2048&&Vr(f.alternate,f);break;default:sn(u,f)}r=r.sibling}}var Ln=8192;function Sl(n){if(n.subtreeFlags&Ln)for(n=n.child;n!==null;)Ho(n),n=n.sibling}function Ho(n){switch(n.tag){case 26:Sl(n),n.flags&Ln&&n.memoizedState!==null&&qb(ha,n.memoizedState,n.memoizedProps);break;case 5:Sl(n);break;case 3:case 4:var r=ha;ha=K0(n.stateNode.containerInfo),Sl(n),ha=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Ln,Ln=16777216,Sl(n),Ln=r):Sl(n));break;default:Sl(n)}}function ro(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function so(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];ci=f,B0(f,n)}ro(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gu(n),n=n.sibling}function Gu(n){switch(n.tag){case 0:case 11:case 15:so(n),n.flags&2048&&Or(9,n,n.return);break;case 3:so(n);break;case 12:so(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&4&&(n.return===null||n.return.tag!==13)?(r._visibility&=-5,Tl(n)):so(n);break;default:so(n)}}function Tl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];ci=f,B0(f,n)}ro(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Or(8,r,r.return),Tl(r);break;case 22:u=r.stateNode,u._visibility&4&&(u._visibility&=-5,Tl(r));break;default:Tl(r)}n=n.sibling}}function B0(n,r){for(;ci!==null;){var u=ci;switch(u.tag){case 0:case 11:case 15:Or(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ql(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,ci=f;else t:for(u=n;ci!==null;){f=ci;var y=f.sibling,S=f.return;if(df(f),f===u){ci=null;break t}if(y!==null){y.return=S,ci=y;break t}ci=S}}}function Fd(n,r,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(n,r,u,f){return new Fd(n,r,u,f)}function bl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wa(n,r){var u=n.alternate;return u===null?(u=hi(n.tag,r,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=r,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,r=n.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function lo(n,r){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,r=u.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Fu(n,r,u,f,y,S){var k=0;if(f=n,typeof n=="function")bl(n)&&(k=1);else if(typeof n=="string")k=jb(n,u,qt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case m:return oo(u.children,y,S,r);case _:k=8,y|=24;break;case E:return n=hi(12,u,r,y|2),n.elementType=E,n.lanes=S,n;case P:return n=hi(13,u,r,y),n.elementType=P,n.lanes=S,n;case U:return n=hi(19,u,r,y),n.elementType=U,n.lanes=S,n;case x:return jd(u,y,S,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case C:k=10;break t;case D:k=9;break t;case R:k=11;break t;case H:k=14;break t;case N:k=16,f=null;break t}k=29,u=Error(a(130,n===null?"null":typeof n,"")),f=null}return r=hi(k,u,r,y),r.elementType=n,r.type=f,r.lanes=S,r}function oo(n,r,u,f){return n=hi(7,n,f,r),n.lanes=u,n}function jd(n,r,u,f){n=hi(22,n,f,r),n.elementType=x,n.lanes=u;var y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var S=y._current;if(S===null)throw Error(a(456));if((y._pendingVisibility&2)===0){var k=rl(S,2);k!==null&&(y._pendingVisibility|=2,bi(k,S,2))}},attach:function(){var S=y._current;if(S===null)throw Error(a(456));if((y._pendingVisibility&2)!==0){var k=rl(S,2);k!==null&&(y._pendingVisibility&=-3,bi(k,S,2))}}};return n.stateNode=y,n}function Si(n,r,u){return n=hi(6,n,null,r),n.lanes=u,n}function eh(n,r,u){return r=hi(4,n.children!==null?n.children:[],n.key,r),r.lanes=u,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Pr(n){n.flags|=4}function uo(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!c2(r)){if(r=qa.current,r!==null&&((oe&4194176)===oe?Is!==null:(oe&62914560)!==oe&&(oe&536870912)===0||r!==Is))throw wu=Hh,gd;n.flags|=8192}}function Ur(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Mi():536870912,n.lanes|=r,Gs|=r)}function nh(n,r){if(!en)switch(n.tailMode){case"hidden":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Gn(n){var r=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(r)for(var y=n.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags&31457280,f|=y.flags&31457280,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=f,n.childLanes=u,r}function Fy(n,r,u){var f=r.pendingProps;switch(Bl(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(r),null;case 1:return Gn(r),null;case 3:return u=r.stateNode,f=null,n!==null&&(f=n.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),yl(ri),Ke(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(Cu(r)?Pr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dr!==null&&(Br(Dr),Dr=null))),Gn(r),null;case 26:return u=r.memoizedState,n===null?(Pr(r),u!==null?(Gn(r),uo(r,u)):(Gn(r),r.flags&=-16777217)):u?u!==n.memoizedState?(Pr(r),Gn(r),uo(r,u)):(Gn(r),r.flags&=-16777217):(n.memoizedProps!==f&&Pr(r),Gn(r),r.flags&=-16777217),null;case 27:Je(r),u=ce.current;var y=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==f&&Pr(r);else{if(!f){if(r.stateNode===null)throw Error(a(166));return Gn(r),null}n=qt.current,Cu(r)?Qm(r):(n=n2(y,f,u),r.stateNode=n,Pr(r))}return Gn(r),null;case 5:if(Je(r),u=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==f&&Pr(r);else{if(!f){if(r.stateNode===null)throw Error(a(166));return Gn(r),null}if(n=qt.current,Cu(r))Qm(r);else{switch(y=q0(ce.current),n){case 1:n=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=y.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof f.is=="string"?y.createElement("select",{is:f.is}):y.createElement("select"),f.multiple?n.multiple=!0:f.size&&(n.size=f.size);break;default:n=typeof f.is=="string"?y.createElement(u,{is:f.is}):y.createElement(u)}}n[rn]=r,n[ye]=f;t:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)n.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break t;for(;y.sibling===null;){if(y.return===null||y.return===r)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=n;t:switch(Da(n,u,f),u){case"button":case"input":case"select":case"textarea":n=!!f.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Pr(r)}}return Gn(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==f&&Pr(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(a(166));if(n=ce.current,Cu(r)){if(n=r.stateNode,u=r.memoizedProps,f=null,y=la,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}n[rn]=r,n=!!(n.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Zv(n.nodeValue,u)),n||Oo(r)}else n=q0(n).createTextNode(f),n[rn]=r,r.stateNode=n}return Gn(r),null;case 13:if(f=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=Cu(r),f!==null&&f.dehydrated!==null){if(n===null){if(!y)throw Error(a(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));y[rn]=r}else Ru(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Gn(r),y=!1}else Dr!==null&&(Br(Dr),Dr=null),y=!0;if(!y)return r.flags&256?(Os(r),r):(Os(r),null)}if(Os(r),(r.flags&128)!==0)return r.lanes=u,r;if(u=f!==null,n=n!==null&&n.memoizedState!==null,u){f=r.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool);var S=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048)}return u!==n&&u&&(r.child.flags|=8192),Ur(r,r.updateQueue),Gn(r),null;case 4:return Ke(),n===null&&Yy(r.stateNode.containerInfo),Gn(r),null;case 10:return yl(r.type),Gn(r),null;case 19:if(Dt(_i),y=r.memoizedState,y===null)return Gn(r),null;if(f=(r.flags&128)!==0,S=y.rendering,S===null)if(f)nh(y,!1);else{if(Mn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(S=Nu(n),S!==null){for(r.flags|=128,nh(y,!1),n=S.updateQueue,r.updateQueue=n,Ur(r,n),r.subtreeFlags=0,n=u,u=r.child;u!==null;)lo(u,n),u=u.sibling;return It(_i,_i.current&1|2),r.child}n=n.sibling}y.tail!==null&&Ie()>Le&&(r.flags|=128,f=!0,nh(y,!1),r.lanes=4194304)}else{if(!f)if(n=Nu(S),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Ur(r,n),nh(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!en)return Gn(r),null}else 2*Ie()-y.renderingStartTime>Le&&u!==536870912&&(r.flags|=128,f=!0,nh(y,!1),r.lanes=4194304);y.isBackwards?(S.sibling=r.child,r.child=S):(n=y.last,n!==null?n.sibling=S:r.child=S,y.last=S)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Ie(),r.sibling=null,n=_i.current,It(_i,f?n&1|2:n&1),r):(Gn(r),null);case 22:case 23:return Os(r),Hc(),f=r.memoizedState!==null,n!==null?n.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(u&536870912)!==0&&(r.flags&128)===0&&(Gn(r),r.subtreeFlags&6&&(r.flags|=8192)):Gn(r),u=r.updateQueue,u!==null&&Ur(r,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==u&&(r.flags|=2048),n!==null&&Dt(fl),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),yl(ri),Gn(r),null;case 25:return null}throw Error(a(156,r.tag))}function Yn(n,r){switch(Bl(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return yl(ri),Ke(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Je(r),null;case 13:if(Os(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ru()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Dt(_i),null;case 4:return Ke(),null;case 10:return yl(r.type),null;case 22:case 23:return Os(r),Hc(),n!==null&&Dt(fl),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return yl(ri),null;case 25:return null;default:return null}}function Hd(n,r){switch(Bl(r),r.tag){case 3:yl(ri),Ke();break;case 26:case 27:case 5:Je(r);break;case 4:Ke();break;case 13:Os(r);break;case 19:Dt(_i);break;case 10:yl(r.type);break;case 22:case 23:Os(r),Hc(),n!==null&&Dt(fl);break;case 24:yl(ri)}}var qo={getCacheForType:function(n){var r=oa(ri),u=r.data.get(n);return u===void 0&&(u=n(),r.data.set(n,u)),u}},Al=typeof WeakMap=="function"?WeakMap:Map,Se=0,yn=null,Oe=null,oe=0,bn=0,ln=null,fi=!1,da=!1,co=!1,Cl=0,Mn=0,cs=0,Bs=0,ju=0,Na=0,Gs=0,ih=null,Ue=null,_n=!1,xe=0,Le=1/0,mn=null,Ti=null,Lr=!1,zr=null,Ko=0,hs=0,zn=null,kr=0,Rl=null;function xa(){if((Se&2)!==0&&oe!==0)return oe&-oe;if(I.T!==null){var n=Po;return n!==0?n:jy()}return ps()}function mr(){Na===0&&(Na=(oe&536870912)===0||en?ya():536870912);var n=qa.current;return n!==null&&(n.flags|=32),Na}function bi(n,r,u){(n===yn&&bn===2||n.cancelPendingCommit!==null)&&(wl(n,0),pr(n,oe,Na,!1)),Ce(n,u),((Se&2)===0||n!==yn)&&(n===yn&&((Se&2)===0&&(Bs|=u),Mn===4&&pr(n,oe,Na,!1)),An(n))}function Hu(n,r,u){if((Se&6)!==0)throw Error(a(327));var f=!u&&(r&60)===0&&(r&n.expiredLanes)===0||Hi(n,r),y=f?s(n,r):Qo(n,r,!0),S=f;do{if(y===0){da&&!f&&pr(n,r,0,!1);break}else if(y===6)pr(n,r,0,!fi);else{if(u=n.current.alternate,S&&!qd(u)){y=Qo(n,r,!1),S=!1;continue}if(y===2){if(S=r,n.errorRecoveryDisabledLanes&S)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){r=k;t:{var Z=n;y=ih;var it=Z.current.memoizedState.isDehydrated;if(it&&(wl(Z,k).flags|=256),k=Qo(Z,k,!1),k!==2){if(co&&!it){Z.errorRecoveryDisabledLanes|=S,Bs|=S,y=4;break t}S=Ue,Ue=y,S!==null&&Br(S)}y=k}if(S=!1,y!==2)continue}}if(y===1){wl(n,0),pr(n,r,0,!0);break}t:{switch(f=n,y){case 0:case 1:throw Error(a(345));case 4:if((r&4194176)===r){pr(f,r,Na,!fi);break t}break;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(a(329))}if(f.finishedWork=u,f.finishedLanes=r,(r&62914560)===r&&(S=xe+300-Ie(),10<S)){if(pr(f,r,Na,!fi),Jn(f,0)!==0)break t;f.timeoutHandle=$v(mf.bind(null,f,u,Ue,mn,_n,r,Na,Bs,Gs,fi,2,-0,0),S);break t}mf(f,u,Ue,mn,_n,r,Na,Bs,Gs,fi,0,-0,0)}}break}while(!0);An(n)}function Br(n){Ue===null?Ue=n:Ue.push.apply(Ue,n)}function mf(n,r,u,f,y,S,k,Z,it,ut,wt,Ut,St){var Ct=r.subtreeFlags;if((Ct&8192||(Ct&16785408)===16785408)&&(Wd={stylesheets:null,count:0,unsuspend:Hb},Ho(r),r=Kb(),r!==null)){n.cancelPendingCommit=r(at.bind(null,n,u,f,y,k,Z,it,1,Ut,St)),pr(n,S,k,!ut);return}at(n,u,f,y,k,Z,it,wt,Ut,St)}function qd(n){for(var r=n;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var y=u[f],S=y.getSnapshot;y=y.value;try{if(!Ga(S(),y))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function pr(n,r,u,f){r&=~ju,r&=~Bs,n.suspendedLanes|=r,n.pingedLanes&=~r,f&&(n.warmLanes|=r),f=n.expirationTimes;for(var y=r;0<y;){var S=31-jn(y),k=1<<S;f[S]=-1,y&=~k}u!==0&&nr(n,u,r)}function Yo(){return(Se&6)===0?(Fe(0),!1):!0}function Fs(){if(Oe!==null){if(bn===0)var n=Oe.return;else n=Oe,as=Us=null,Qh(n),jl=null,Gc=0,n=Oe;for(;n!==null;)Hd(n.alternate,n),n=n.return;Oe=null}}function wl(n,r){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,Nb(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),Fs(),yn=n,Oe=u=wa(n.current,null),oe=r,bn=0,ln=null,fi=!1,da=Hi(n,r),co=!1,Gs=Na=ju=Bs=cs=Mn=0,Ue=ih=null,_n=!1,(r&8)!==0&&(r|=r&32);var f=n.entangledLanes;if(f!==0)for(n=n.entanglements,f&=r;0<f;){var y=31-jn(f),S=1<<y;r|=n[y],f&=~S}return Cl=r,Mc(),u}function ho(n,r){Ne=null,I.H=Ps,r===Gl?(r=hn(),bn=3):r===gd?(r=hn(),bn=4):bn=r===hr?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ln=r,Oe===null&&(Mn=1,af(n,Ha(r,n.current)))}function qu(){var n=I.H;return I.H=Ps,n===null?Ps:n}function pf(){var n=I.A;return I.A=qo,n}function ah(){Mn=4,fi||(oe&4194176)!==oe&&qa.current!==null||(da=!0),(cs&134217727)===0&&(Bs&134217727)===0||yn===null||pr(yn,oe,Na,!1)}function Qo(n,r,u){var f=Se;Se|=2;var y=qu(),S=pf();(yn!==n||oe!==r)&&(mn=null,wl(n,r)),r=!1;var k=Mn;t:do try{if(bn!==0&&Oe!==null){var Z=Oe,it=ln;switch(bn){case 8:Fs(),k=6;break t;case 3:case 2:case 6:qa.current===null&&(r=!0);var ut=bn;if(bn=0,ln=null,T(n,Z,it,ut),u&&da){k=0;break t}break;default:ut=bn,bn=0,ln=null,T(n,Z,it,ut)}}Kd(),k=Mn;break}catch(wt){ho(n,wt)}while(!0);return r&&n.shellSuspendCounter++,as=Us=null,Se=f,I.H=y,I.A=S,Oe===null&&(yn=null,oe=0,Mc()),k}function Kd(){for(;Oe!==null;)d(Oe)}function s(n,r){var u=Se;Se|=2;var f=qu(),y=pf();yn!==n||oe!==r?(mn=null,Le=Ie()+500,wl(n,r)):da=Hi(n,r);t:do try{if(bn!==0&&Oe!==null){r=Oe;var S=ln;e:switch(bn){case 1:bn=0,ln=null,T(n,r,S,1);break;case 2:if(Zm(S)){bn=0,ln=null,v(r);break}r=function(){bn===2&&yn===n&&(bn=7),An(n)},S.then(r,r);break t;case 3:bn=7;break t;case 4:bn=5;break t;case 7:Zm(S)?(bn=0,ln=null,v(r)):(bn=0,ln=null,T(n,r,S,7));break;case 5:var k=null;switch(Oe.tag){case 26:k=Oe.memoizedState;case 5:case 27:var Z=Oe;if(!k||c2(k)){bn=0,ln=null;var it=Z.sibling;if(it!==null)Oe=it;else{var ut=Z.return;ut!==null?(Oe=ut,O(ut)):Oe=null}break e}}bn=0,ln=null,T(n,r,S,5);break;case 6:bn=0,ln=null,T(n,r,S,6);break;case 8:Fs(),Mn=6;break t;default:throw Error(a(462))}}o();break}catch(wt){ho(n,wt)}while(!0);return as=Us=null,I.H=f,I.A=y,Se=u,Oe!==null?0:(yn=null,oe=0,Mc(),Mn)}function o(){for(;Oe!==null&&!He();)d(Oe)}function d(n){var r=Xc(n.alternate,n,Cl);n.memoizedProps=n.pendingProps,r===null?O(n):Oe=r}function v(n){var r=n,u=r.alternate;switch(r.tag){case 15:case 0:r=U0(u,r,r.pendingProps,r.type,void 0,oe);break;case 11:r=U0(u,r,r.pendingProps,r.type.render,r.ref,oe);break;case 5:Qh(r);default:Hd(u,r),r=Oe=lo(r,Cl),r=Xc(u,r,Cl)}n.memoizedProps=n.pendingProps,r===null?O(n):Oe=r}function T(n,r,u,f){as=Us=null,Qh(r),jl=null,Gc=0;var y=r.return;try{if(By(n,y,r,u,oe)){Mn=1,af(n,Ha(u,n.current)),Oe=null;return}}catch(S){if(y!==null)throw Oe=y,S;Mn=1,af(n,Ha(u,n.current)),Oe=null;return}r.flags&32768?(en||f===1?n=!0:da||(oe&536870912)!==0?n=!1:(fi=n=!0,(f===2||f===3||f===6)&&(f=qa.current,f!==null&&f.tag===13&&(f.flags|=16384))),W(r,n)):O(r)}function O(n){var r=n;do{if((r.flags&32768)!==0){W(r,fi);return}n=r.return;var u=Fy(r.alternate,r,Cl);if(u!==null){Oe=u;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);Mn===0&&(Mn=5)}function W(n,r){do{var u=Yn(n.alternate,n);if(u!==null){u.flags&=32767,Oe=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=u}while(n!==null);Mn=6,Oe=null}function at(n,r,u,f,y,S,k,Z,it,ut){var wt=I.T,Ut=dt.p;try{dt.p=2,I.T=null,mt(n,r,u,f,Ut,y,S,k,Z,it,ut)}finally{I.T=wt,dt.p=Ut}}function mt(n,r,u,f,y,S,k,Z){do Ft();while(zr!==null);if((Se&6)!==0)throw Error(a(327));var it=n.finishedWork;if(f=n.finishedLanes,it===null)return null;if(n.finishedWork=null,n.finishedLanes=0,it===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var ut=it.lanes|it.childLanes;if(ut|=al,Qr(n,f,ut,S,k,Z),n===yn&&(Oe=yn=null,oe=0),(it.subtreeFlags&10256)===0&&(it.flags&10256)===0||Lr||(Lr=!0,hs=ut,zn=u,ft(Zn,function(){return Ft(),null})),u=(it.flags&15990)!==0,(it.subtreeFlags&15990)!==0||u?(u=I.T,I.T=null,S=dt.p,dt.p=2,k=Se,Se|=4,ku(n,it),jo(it,n),od(Wy,n.containerInfo),W0=!!Zy,Wy=Zy=null,n.current=it,Bu(n,it.alternate,it),Fn(),Se=k,dt.p=S,I.T=u):n.current=it,Lr?(Lr=!1,zr=n,Ko=f):Rt(n,ut),ut=n.pendingLanes,ut===0&&(Ti=null),Ji(it.stateNode),An(n),r!==null)for(y=n.onRecoverableError,it=0;it<r.length;it++)ut=r[it],y(ut.value,{componentStack:ut.stack});return(Ko&3)!==0&&Ft(),ut=n.pendingLanes,(f&4194218)!==0&&(ut&42)!==0?n===Rl?kr++:(kr=0,Rl=n):kr=0,Fe(0),null}function Rt(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,ql(r)))}function Ft(){if(zr!==null){var n=zr,r=hs;hs=0;var u=Va(Ko),f=I.T,y=dt.p;try{if(dt.p=32>u?32:u,I.T=null,zr===null)var S=!1;else{u=zn,zn=null;var k=zr,Z=Ko;if(zr=null,Ko=0,(Se&6)!==0)throw Error(a(331));var it=Se;if(Se|=4,Gu(k.current),El(k,k.current,Z,u),Se=it,Fe(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot($e,k)}catch{}S=!0}return S}finally{dt.p=y,I.T=f,Rt(n,r)}}return!1}function Qt(n,r,u){r=Ha(u,r),r=Dd(n.stateNode,r,2),n=gr(n,r,2),n!==null&&(Ce(n,2),An(n))}function Bt(n,r,u){if(n.tag===3)Qt(n,n,u);else for(;r!==null;){if(r.tag===3){Qt(r,n,u);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ti===null||!Ti.has(f))){n=Ha(u,n),u=Id(2),f=gr(r,u,2),f!==null&&(V0(u,f,r,n),Ce(f,2),An(f));break}}r=r.return}}function Te(n,r,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Al;var y=new Set;f.set(r,y)}else y=f.get(r),y===void 0&&(y=new Set,f.set(r,y));y.has(u)||(co=!0,y.add(u),n=Gr.bind(null,n,r,u),r.then(n,n))}function Gr(n,r,u){var f=n.pingCache;f!==null&&f.delete(r),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,yn===n&&(oe&u)===u&&(Mn===4||Mn===3&&(oe&62914560)===oe&&300>Ie()-xe?(Se&2)===0&&wl(n,0):ju|=u,Gs===oe&&(Gs=0)),An(n)}function Ku(n,r){r===0&&(r=Mi()),n=rl(n,r),n!==null&&(Ce(n,r),An(n))}function Xo(n){var r=n.memoizedState,u=0;r!==null&&(u=r.retryLane),Ku(n,u)}function Et(n,r){var u=0;switch(n.tag){case 13:var f=n.stateNode,y=n.memoizedState;y!==null&&(u=y.retryLane);break;case 19:f=n.stateNode;break;case 22:f=n.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(r),Ku(n,u)}function ft(n,r){return un(n,r)}var Tt=null,kt=null,ee=!1,vn=!1,he=!1,Me=0;function An(n){n!==kt&&n.next===null&&(kt===null?Tt=kt=n:kt=kt.next=n),vn=!0,ee||(ee=!0,vb(fo))}function Fe(n,r){if(!he&&vn){he=!0;do for(var u=!1,f=Tt;f!==null;){if(n!==0){var y=f.pendingLanes;if(y===0)var S=0;else{var k=f.suspendedLanes,Z=f.pingedLanes;S=(1<<31-jn(42|n)+1)-1,S&=y&~(k&~Z),S=S&201326677?S&201326677|1:S?S|2:0}S!==0&&(u=!0,jv(f,S))}else S=oe,S=Jn(f,f===yn?S:0),(S&3)===0||Hi(f,S)||(u=!0,jv(f,S));f=f.next}while(u);he=!1}}function fo(){vn=ee=!1;var n=0;Me!==0&&(wb()&&(n=Me),Me=0);for(var r=Ie(),u=null,f=Tt;f!==null;){var y=f.next,S=G0(f,r);S===0?(f.next=null,u===null?Tt=y:u.next=y,y===null&&(kt=u)):(u=f,(n!==0||(S&3)!==0)&&(vn=!0)),f=y}Fe(n)}function G0(n,r){for(var u=n.suspendedLanes,f=n.pingedLanes,y=n.expirationTimes,S=n.pendingLanes&-62914561;0<S;){var k=31-jn(S),Z=1<<k,it=y[k];it===-1?((Z&u)===0||(Z&f)!==0)&&(y[k]=Hn(Z,r)):it<=r&&(n.expiredLanes|=Z),S&=~Z}if(r=yn,u=oe,u=Jn(n,n===r?u:0),f=n.callbackNode,u===0||n===r&&bn===2||n.cancelPendingCommit!==null)return f!==null&&f!==null&&Oi(f),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||Hi(n,u)){if(r=u&-u,r===n.callbackPriority)return r;switch(f!==null&&Oi(f),Va(u)){case 2:case 8:u=Ye;break;case 32:u=Zn;break;case 268435456:u=we;break;default:u=Zn}return f=Fv.bind(null,n),u=un(u,f),n.callbackPriority=r,n.callbackNode=u,r}return f!==null&&f!==null&&Oi(f),n.callbackPriority=2,n.callbackNode=null,2}function Fv(n,r){var u=n.callbackNode;if(Ft()&&n.callbackNode!==u)return null;var f=oe;return f=Jn(n,n===yn?f:0),f===0?null:(Hu(n,f,r),G0(n,Ie()),n.callbackNode!=null&&n.callbackNode===u?Fv.bind(null,n):null)}function jv(n,r){if(Ft())return null;Hu(n,r,!0)}function vb(n){xb(function(){(Se&6)!==0?un(Re,n):n()})}function jy(){return Me===0&&(Me=ya()),Me}function Hv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:za(""+n)}function qv(n,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,n.id&&u.setAttribute("form",n.id),r.parentNode.insertBefore(u,r),n=new FormData(n),u.parentNode.removeChild(u),n}function Eb(n,r,u,f,y){if(r==="submit"&&u&&u.stateNode===y){var S=Hv((y[ye]||null).action),k=f.submitter;k&&(r=(r=k[ye]||null)?Hv(r.formAction):k.getAttribute("formAction"),r!==null&&(S=r,k=null));var Z=new br("action","action",null,f,y);n.push({event:Z,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Me!==0){var it=k?qv(y,k):new FormData(y);Cd(u,{pending:!0,data:it,method:y.method,action:S},null,it)}}else typeof S=="function"&&(Z.preventDefault(),it=k?qv(y,k):new FormData(y),Cd(u,{pending:!0,data:it,method:y.method,action:S},S,it))},currentTarget:y}]})}}for(var Hy=0;Hy<il.length;Hy++){var qy=il[Hy],Sb=qy.toLowerCase(),Tb=qy[0].toUpperCase()+qy.slice(1);xr(Sb,"on"+Tb)}xr(hd,"onAnimationEnd"),xr(ja,"onAnimationIteration"),xr(fd,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(nl,"onTransitionRun"),xr(Au,"onTransitionStart"),xr(Ll,"onTransitionCancel"),xr(Gh,"onTransitionEnd"),Jt("onMouseEnter",["mouseout","mouseover"]),Jt("onMouseLeave",["mouseout","mouseover"]),Jt("onPointerEnter",["pointerout","pointerover"]),Jt("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yd));function Kv(n,r){r=(r&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],y=f.event;f=f.listeners;t:{var S=void 0;if(r)for(var k=f.length-1;0<=k;k--){var Z=f[k],it=Z.instance,ut=Z.currentTarget;if(Z=Z.listener,it!==S&&y.isPropagationStopped())break t;S=Z,y.currentTarget=ut;try{S(y)}catch(wt){nf(wt)}y.currentTarget=null,S=it}else for(k=0;k<f.length;k++){if(Z=f[k],it=Z.instance,ut=Z.currentTarget,Z=Z.listener,it!==S&&y.isPropagationStopped())break t;S=Z,y.currentTarget=ut;try{S(y)}catch(wt){nf(wt)}y.currentTarget=null,S=it}}}}function an(n,r){var u=r[Pa];u===void 0&&(u=r[Pa]=new Set);var f=n+"__bubble";u.has(f)||(Yv(r,n,2,!1),u.add(f))}function Ky(n,r,u){var f=0;r&&(f|=4),Yv(u,n,f,r)}var F0="_reactListening"+Math.random().toString(36).slice(2);function Yy(n){if(!n[F0]){n[F0]=!0,va.forEach(function(u){u!=="selectionchange"&&(bb.has(u)||Ky(u,!1,n),Ky(u,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[F0]||(r[F0]=!0,Ky("selectionchange",!1,r))}}function Yv(n,r,u,f){switch(p2(r)){case 2:var y=Xb;break;case 8:y=Zb;break;default:y=s1}u=y.bind(null,r,u,n),y=void 0,!Yi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),f?y!==void 0?n.addEventListener(r,u,{capture:!0,passive:y}):n.addEventListener(r,u,!0):y!==void 0?n.addEventListener(r,u,{passive:y}):n.addEventListener(r,u,!1)}function Qy(n,r,u,f,y){var S=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var Z=f.stateNode.containerInfo;if(Z===y||Z.nodeType===8&&Z.parentNode===y)break;if(k===4)for(k=f.return;k!==null;){var it=k.tag;if((it===3||it===4)&&(it=k.stateNode.containerInfo,it===y||it.nodeType===8&&it.parentNode===y))return;k=k.return}for(;Z!==null;){if(k=ea(Z),k===null)return;if(it=k.tag,it===5||it===6||it===26||it===27){f=S=k;continue t}Z=Z.parentNode}}f=f.return}Ao(function(){var ut=S,wt=Zr(u),Ut=[];t:{var St=Fh.get(n);if(St!==void 0){var Ct=br,ne=n;switch(n){case"keypress":if(ia(u)===0)break t;case"keydown":case"keyup":Ct=Pl;break;case"focusin":ne="focus",Ct=ue;break;case"focusout":ne="blur",Ct=ue;break;case"beforeblur":case"afterblur":Ct=ue;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ct=yt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ct=Ot;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ct=yu;break;case hd:case ja:case fd:Ct=Ht;break;case Gh:Ct=Ar;break;case"scroll":case"scrollend":Ct=Co;break;case"wheel":Ct=vu;break;case"copy":case"cut":case"paste":Ct=ge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ct=wo;break;case"toggle":case"beforetoggle":Ct=ts}var Ae=(r&4)!==0,Ai=!Ae&&(n==="scroll"||n==="scrollend"),gt=Ae?St!==null?St+"Capture":null:St;Ae=[];for(var ot=ut,vt;ot!==null;){var Mt=ot;if(vt=Mt.stateNode,Mt=Mt.tag,Mt!==5&&Mt!==26&&Mt!==27||vt===null||gt===null||(Mt=Tr(ot,gt),Mt!=null&&Ae.push(Qd(ot,Mt,vt))),Ai)break;ot=ot.return}0<Ae.length&&(St=new Ct(St,ne,null,u,wt),Ut.push({event:St,listeners:Ae}))}}if((r&7)===0){t:{if(St=n==="mouseover"||n==="pointerover",Ct=n==="mouseout"||n==="pointerout",St&&u!==Ta&&(ne=u.relatedTarget||u.fromElement)&&(ea(ne)||ne[ir]))break t;if((Ct||St)&&(St=wt.window===wt?wt:(St=wt.ownerDocument)?St.defaultView||St.parentWindow:window,Ct?(ne=u.relatedTarget||u.toElement,Ct=ut,ne=ne?ea(ne):null,ne!==null&&(Ai=st(ne),Ae=ne.tag,ne!==Ai||Ae!==5&&Ae!==27&&Ae!==6)&&(ne=null)):(Ct=null,ne=ut),Ct!==ne)){if(Ae=yt,Mt="onMouseLeave",gt="onMouseEnter",ot="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=wo,Mt="onPointerLeave",gt="onPointerEnter",ot="pointer"),Ai=Ct==null?St:dn(Ct),vt=ne==null?St:dn(ne),St=new Ae(Mt,ot+"leave",Ct,u,wt),St.target=Ai,St.relatedTarget=vt,Mt=null,ea(wt)===ut&&(Ae=new Ae(gt,ot+"enter",ne,u,wt),Ae.target=vt,Ae.relatedTarget=Ai,Mt=Ae),Ai=Mt,Ct&&ne)e:{for(Ae=Ct,gt=ne,ot=0,vt=Ae;vt;vt=yf(vt))ot++;for(vt=0,Mt=gt;Mt;Mt=yf(Mt))vt++;for(;0<ot-vt;)Ae=yf(Ae),ot--;for(;0<vt-ot;)gt=yf(gt),vt--;for(;ot--;){if(Ae===gt||gt!==null&&Ae===gt.alternate)break e;Ae=yf(Ae),gt=yf(gt)}Ae=null}else Ae=null;Ct!==null&&Qv(Ut,St,Ct,Ae,!1),ne!==null&&Ai!==null&&Qv(Ut,Ai,ne,Ae,!0)}}t:{if(St=ut?dn(ut):window,Ct=St.nodeName&&St.nodeName.toLowerCase(),Ct==="select"||Ct==="input"&&St.type==="file")var $t=Ph;else if(pi(St))if(Uh)$t=Ul;else{$t=Km;var je=Oy}else Ct=St.nodeName,!Ct||Ct.toLowerCase()!=="input"||St.type!=="checkbox"&&St.type!=="radio"?ut&&$s(ut.elementType)&&($t=Ph):$t=Ic;if($t&&($t=$t(n,ut))){ai(Ut,$t,u,wt);break t}je&&je(n,St,ut),n==="focusout"&&ut&&St.type==="number"&&ut.memoizedProps.value!=null&&Js(St,"number",St.value)}switch(je=ut?dn(ut):window,n){case"focusin":(pi(je)||je.contentEditable==="true")&&(No=je,ud=ut,bu=null);break;case"focusout":bu=ud=No=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,Nr(Ut,u,wt);break;case"selectionchange":if(zh)break;case"keydown":case"keyup":Nr(Ut,u,wt)}var se;if(Rr)t:{switch(n){case"compositionstart":var de="onCompositionStart";break t;case"compositionend":de="onCompositionEnd";break t;case"compositionupdate":de="onCompositionUpdate";break t}de=void 0}else Be?At(n,u)&&(de="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(de="onCompositionStart");de&&(z&&u.locale!=="ko"&&(Be||de!=="onCompositionStart"?de==="onCompositionEnd"&&Be&&(se=Ml()):(ka=wt,As="value"in ka?ka.value:ka.textContent,Be=!0)),je=j0(ut,de),0<je.length&&(de=new $r(de,n,null,u,wt),Ut.push({event:de,listeners:je}),se?de.data=se:(se=Kt(u),se!==null&&(de.data=se)))),(se=w?Bn(n,u):Ge(n,u))&&(de=j0(ut,"onBeforeInput"),0<de.length&&(je=new $r("onBeforeInput","beforeinput",null,u,wt),Ut.push({event:je,listeners:de}),je.data=se)),Eb(Ut,n,ut,u,wt)}Kv(Ut,r)})}function Qd(n,r,u){return{instance:n,listener:r,currentTarget:u}}function j0(n,r){for(var u=r+"Capture",f=[];n!==null;){var y=n,S=y.stateNode;y=y.tag,y!==5&&y!==26&&y!==27||S===null||(y=Tr(n,u),y!=null&&f.unshift(Qd(n,y,S)),y=Tr(n,r),y!=null&&f.push(Qd(n,y,S))),n=n.return}return f}function yf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Qv(n,r,u,f,y){for(var S=r._reactName,k=[];u!==null&&u!==f;){var Z=u,it=Z.alternate,ut=Z.stateNode;if(Z=Z.tag,it!==null&&it===f)break;Z!==5&&Z!==26&&Z!==27||ut===null||(it=ut,y?(ut=Tr(u,S),ut!=null&&k.unshift(Qd(u,ut,it))):y||(ut=Tr(u,S),ut!=null&&k.push(Qd(u,ut,it)))),u=u.return}k.length!==0&&n.push({event:r,listeners:k})}var Ab=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function Xv(n){return(typeof n=="string"?n:""+n).replace(Ab,`
`).replace(Cb,"")}function Zv(n,r){return r=Xv(r),Xv(n)===r}function H0(){}function Dn(n,r,u,f,y,S){switch(u){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||Sa(n,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&Sa(n,""+f);break;case"className":Sr(n,"class",f);break;case"tabIndex":Sr(n,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(n,u,f);break;case"style":bo(n,f,S);break;case"data":if(r!=="object"){Sr(n,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||u!=="href")){n.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(u);break}f=za(""+f),n.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(u==="formAction"?(r!=="input"&&Dn(n,r,"name",y.name,y,null),Dn(n,r,"formEncType",y.formEncType,y,null),Dn(n,r,"formMethod",y.formMethod,y,null),Dn(n,r,"formTarget",y.formTarget,y,null)):(Dn(n,r,"encType",y.encType,y,null),Dn(n,r,"method",y.method,y,null),Dn(n,r,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(u);break}f=za(""+f),n.setAttribute(u,f);break;case"onClick":f!=null&&(n.onclick=H0);break;case"onScroll":f!=null&&an("scroll",n);break;case"onScrollEnd":f!=null&&an("scrollend",n);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":n.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){n.removeAttribute("xlink:href");break}u=za(""+f),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,""+f):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":f===!0?n.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,f):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?n.setAttribute(u,f):n.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?n.removeAttribute(u):n.setAttribute(u,f);break;case"popover":an("beforetoggle",n),an("toggle",n),mi(n,"popover",f);break;case"xlinkActuate":Vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Vn(n,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Vn(n,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Vn(n,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Vn(n,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":mi(n,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=gu.get(u)||u,mi(n,u,f))}}function Xy(n,r,u,f,y,S){switch(u){case"style":bo(n,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof f=="string"?Sa(n,f):(typeof f=="number"||typeof f=="bigint")&&Sa(n,""+f);break;case"onScroll":f!=null&&an("scroll",n);break;case"onScrollEnd":f!=null&&an("scrollend",n);break;case"onClick":f!=null&&(n.onclick=H0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!na.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),r=u.slice(2,y?u.length-7:void 0),S=n[ye]||null,S=S!=null?S[u]:null,typeof S=="function"&&n.removeEventListener(r,S,y),typeof f=="function")){typeof S!="function"&&S!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(r,f,y);break t}u in n?n[u]=f:f===!0?n.setAttribute(u,""):mi(n,u,f)}}}function Da(n,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":an("error",n),an("load",n);var f=!1,y=!1,S;for(S in u)if(u.hasOwnProperty(S)){var k=u[S];if(k!=null)switch(S){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Dn(n,r,S,k,u,null)}}y&&Dn(n,r,"srcSet",u.srcSet,u,null),f&&Dn(n,r,"src",u.src,u,null);return;case"input":an("invalid",n);var Z=S=k=y=null,it=null,ut=null;for(f in u)if(u.hasOwnProperty(f)){var wt=u[f];if(wt!=null)switch(f){case"name":y=wt;break;case"type":k=wt;break;case"checked":it=wt;break;case"defaultChecked":ut=wt;break;case"value":S=wt;break;case"defaultValue":Z=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(a(137,r));break;default:Dn(n,r,f,wt,u,null)}}Ss(n,S,Z,it,ut,k,y,!1),vs(n);return;case"select":an("invalid",n),f=k=S=null;for(y in u)if(u.hasOwnProperty(y)&&(Z=u[y],Z!=null))switch(y){case"value":S=Z;break;case"defaultValue":k=Z;break;case"multiple":f=Z;default:Dn(n,r,y,Z,u,null)}r=S,u=k,n.multiple=!!f,r!=null?Qe(n,!!f,r,!1):u!=null&&Qe(n,!!f,u,!0);return;case"textarea":an("invalid",n),S=y=f=null;for(k in u)if(u.hasOwnProperty(k)&&(Z=u[k],Z!=null))switch(k){case"value":f=Z;break;case"defaultValue":y=Z;break;case"children":S=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(91));break;default:Dn(n,r,k,Z,u,null)}Ea(n,f,y,S),vs(n);return;case"option":for(it in u)if(u.hasOwnProperty(it)&&(f=u[it],f!=null))switch(it){case"selected":n.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Dn(n,r,it,f,u,null)}return;case"dialog":an("cancel",n),an("close",n);break;case"iframe":case"object":an("load",n);break;case"video":case"audio":for(f=0;f<Yd.length;f++)an(Yd[f],n);break;case"image":an("error",n),an("load",n);break;case"details":an("toggle",n);break;case"embed":case"source":case"link":an("error",n),an("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in u)if(u.hasOwnProperty(ut)&&(f=u[ut],f!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Dn(n,r,ut,f,u,null)}return;default:if($s(r)){for(wt in u)u.hasOwnProperty(wt)&&(f=u[wt],f!==void 0&&Xy(n,r,wt,f,u,void 0));return}}for(Z in u)u.hasOwnProperty(Z)&&(f=u[Z],f!=null&&Dn(n,r,Z,f,u,null))}function Rb(n,r,u,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,S=null,k=null,Z=null,it=null,ut=null,wt=null;for(Ct in u){var Ut=u[Ct];if(u.hasOwnProperty(Ct)&&Ut!=null)switch(Ct){case"checked":break;case"value":break;case"defaultValue":it=Ut;default:f.hasOwnProperty(Ct)||Dn(n,r,Ct,null,f,Ut)}}for(var St in f){var Ct=f[St];if(Ut=u[St],f.hasOwnProperty(St)&&(Ct!=null||Ut!=null))switch(St){case"type":S=Ct;break;case"name":y=Ct;break;case"checked":ut=Ct;break;case"defaultChecked":wt=Ct;break;case"value":k=Ct;break;case"defaultValue":Z=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(a(137,r));break;default:Ct!==Ut&&Dn(n,r,St,Ct,f,Ut)}}Xr(n,k,Z,it,ut,wt,S,y);return;case"select":Ct=k=Z=St=null;for(S in u)if(it=u[S],u.hasOwnProperty(S)&&it!=null)switch(S){case"value":break;case"multiple":Ct=it;default:f.hasOwnProperty(S)||Dn(n,r,S,null,f,it)}for(y in f)if(S=f[y],it=u[y],f.hasOwnProperty(y)&&(S!=null||it!=null))switch(y){case"value":St=S;break;case"defaultValue":Z=S;break;case"multiple":k=S;default:S!==it&&Dn(n,r,y,S,f,it)}r=Z,u=k,f=Ct,St!=null?Qe(n,!!u,St,!1):!!f!=!!u&&(r!=null?Qe(n,!!u,r,!0):Qe(n,!!u,u?[]:"",!1));return;case"textarea":Ct=St=null;for(Z in u)if(y=u[Z],u.hasOwnProperty(Z)&&y!=null&&!f.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Dn(n,r,Z,null,f,y)}for(k in f)if(y=f[k],S=u[k],f.hasOwnProperty(k)&&(y!=null||S!=null))switch(k){case"value":St=y;break;case"defaultValue":Ct=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:y!==S&&Dn(n,r,k,y,f,S)}Ts(n,St,Ct);return;case"option":for(var ne in u)if(St=u[ne],u.hasOwnProperty(ne)&&St!=null&&!f.hasOwnProperty(ne))switch(ne){case"selected":n.selected=!1;break;default:Dn(n,r,ne,null,f,St)}for(it in f)if(St=f[it],Ct=u[it],f.hasOwnProperty(it)&&St!==Ct&&(St!=null||Ct!=null))switch(it){case"selected":n.selected=St&&typeof St!="function"&&typeof St!="symbol";break;default:Dn(n,r,it,St,f,Ct)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in u)St=u[Ae],u.hasOwnProperty(Ae)&&St!=null&&!f.hasOwnProperty(Ae)&&Dn(n,r,Ae,null,f,St);for(ut in f)if(St=f[ut],Ct=u[ut],f.hasOwnProperty(ut)&&St!==Ct&&(St!=null||Ct!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(a(137,r));break;default:Dn(n,r,ut,St,f,Ct)}return;default:if($s(r)){for(var Ai in u)St=u[Ai],u.hasOwnProperty(Ai)&&St!==void 0&&!f.hasOwnProperty(Ai)&&Xy(n,r,Ai,void 0,f,St);for(wt in f)St=f[wt],Ct=u[wt],!f.hasOwnProperty(wt)||St===Ct||St===void 0&&Ct===void 0||Xy(n,r,wt,St,f,Ct);return}}for(var gt in u)St=u[gt],u.hasOwnProperty(gt)&&St!=null&&!f.hasOwnProperty(gt)&&Dn(n,r,gt,null,f,St);for(Ut in f)St=f[Ut],Ct=u[Ut],!f.hasOwnProperty(Ut)||St===Ct||St==null&&Ct==null||Dn(n,r,Ut,St,f,Ct)}var Zy=null,Wy=null;function q0(n){return n.nodeType===9?n:n.ownerDocument}function Wv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Jy(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $y=null;function wb(){var n=window.event;return n&&n.type==="popstate"?n===$y?!1:($y=n,!0):($y=null,!1)}var $v=typeof setTimeout=="function"?setTimeout:void 0,Nb=typeof clearTimeout=="function"?clearTimeout:void 0,t2=typeof Promise=="function"?Promise:void 0,xb=typeof queueMicrotask=="function"?queueMicrotask:typeof t2<"u"?function(n){return t2.resolve(null).then(n).catch(Db)}:$v;function Db(n){setTimeout(function(){throw n})}function t1(n,r){var u=r,f=0;do{var y=u.nextSibling;if(n.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(f===0){n.removeChild(y),ng(r);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=y}while(u);ng(r)}function e1(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":e1(u),kn(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function Ib(n,r,u,f){for(;n.nodeType===1;){var y=u;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(f){if(!n[_a])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(S=n.getAttribute("rel"),S==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(S!==y.rel||n.getAttribute("href")!==(y.href==null?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(S=n.getAttribute("src"),(S!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&S&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var S=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===S)return n}else return n;if(n=Nl(n.nextSibling),n===null)break}return null}function Ob(n,r,u){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=Nl(n.nextSibling),n===null))return null;return n}function Nl(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}function e2(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return n;r--}else u==="/$"&&r++}n=n.previousSibling}return null}function n2(n,r,u){switch(r=q0(u),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var js=new Map,i2=new Set;function K0(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Zo=dt.d;dt.d={f:Mb,r:Vb,D:Pb,C:Ub,L:Lb,m:zb,X:Bb,S:kb,M:Gb};function Mb(){var n=Zo.f(),r=Yo();return n||r}function Vb(n){var r=Tn(n);r!==null&&r.tag===5&&r.type==="form"?T0(r):Zo.r(n)}var _f=typeof document>"u"?null:document;function a2(n,r,u){var f=_f;if(f&&typeof r=="string"&&r){var y=wn(r);y='link[rel="'+n+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),i2.has(y)||(i2.add(y),n={rel:n,crossOrigin:u,href:r},f.querySelector(y)===null&&(r=f.createElement("link"),Da(r,"link",n),cn(r),f.head.appendChild(r)))}}function Pb(n){Zo.D(n),a2("dns-prefetch",n,null)}function Ub(n,r){Zo.C(n,r),a2("preconnect",n,r)}function Lb(n,r,u){Zo.L(n,r,u);var f=_f;if(f&&n&&r){var y='link[rel="preload"][as="'+wn(r)+'"]';r==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+wn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+wn(u.imageSizes)+'"]')):y+='[href="'+wn(n)+'"]';var S=y;switch(r){case"style":S=vf(n);break;case"script":S=Ef(n)}js.has(S)||(n=V({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:n,as:r},u),js.set(S,n),f.querySelector(y)!==null||r==="style"&&f.querySelector(Xd(S))||r==="script"&&f.querySelector(Zd(S))||(r=f.createElement("link"),Da(r,"link",n),cn(r),f.head.appendChild(r)))}}function zb(n,r){Zo.m(n,r);var u=_f;if(u&&n){var f=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+wn(f)+'"][href="'+wn(n)+'"]',S=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ef(n)}if(!js.has(S)&&(n=V({rel:"modulepreload",href:n},r),js.set(S,n),u.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Zd(S)))return}f=u.createElement("link"),Da(f,"link",n),cn(f),u.head.appendChild(f)}}}function kb(n,r,u){Zo.S(n,r,u);var f=_f;if(f&&n){var y=La(f).hoistableStyles,S=vf(n);r=r||"default";var k=y.get(S);if(!k){var Z={loading:0,preload:null};if(k=f.querySelector(Xd(S)))Z.loading=5;else{n=V({rel:"stylesheet",href:n,"data-precedence":r},u),(u=js.get(S))&&n1(n,u);var it=k=f.createElement("link");cn(it),Da(it,"link",n),it._p=new Promise(function(ut,wt){it.onload=ut,it.onerror=wt}),it.addEventListener("load",function(){Z.loading|=1}),it.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Y0(k,r,f)}k={type:"stylesheet",instance:k,count:1,state:Z},y.set(S,k)}}}function Bb(n,r){Zo.X(n,r);var u=_f;if(u&&n){var f=La(u).hoistableScripts,y=Ef(n),S=f.get(y);S||(S=u.querySelector(Zd(y)),S||(n=V({src:n,async:!0},r),(r=js.get(y))&&i1(n,r),S=u.createElement("script"),cn(S),Da(S,"link",n),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(y,S))}}function Gb(n,r){Zo.M(n,r);var u=_f;if(u&&n){var f=La(u).hoistableScripts,y=Ef(n),S=f.get(y);S||(S=u.querySelector(Zd(y)),S||(n=V({src:n,async:!0,type:"module"},r),(r=js.get(y))&&i1(n,r),S=u.createElement("script"),cn(S),Da(S,"link",n),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(y,S))}}function r2(n,r,u,f){var y=(y=ce.current)?K0(y):null;if(!y)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=vf(u.href),u=La(y).hoistableStyles,f=u.get(r),f||(f={type:"style",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=vf(u.href);var S=La(y).hoistableStyles,k=S.get(n);if(k||(y=y.ownerDocument||y,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(n,k),(S=y.querySelector(Xd(n)))&&!S._p&&(k.instance=S,k.state.loading=5),js.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},js.set(n,u),S||Fb(y,n,u,k.state))),r&&f===null)throw Error(a(528,""));return k}if(r&&f!==null)throw Error(a(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ef(u),u=La(y).hoistableScripts,f=u.get(r),f||(f={type:"script",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function vf(n){return'href="'+wn(n)+'"'}function Xd(n){return'link[rel="stylesheet"]['+n+"]"}function s2(n){return V({},n,{"data-precedence":n.precedence,precedence:null})}function Fb(n,r,u,f){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=n.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Da(r,"link",u),cn(r),n.head.appendChild(r))}function Ef(n){return'[src="'+wn(n)+'"]'}function Zd(n){return"script[async]"+n}function l2(n,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var f=n.querySelector('style[data-href~="'+wn(u.href)+'"]');if(f)return r.instance=f,cn(f),f;var y=V({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(n.ownerDocument||n).createElement("style"),cn(f),Da(f,"style",y),Y0(f,u.precedence,n),r.instance=f;case"stylesheet":y=vf(u.href);var S=n.querySelector(Xd(y));if(S)return r.state.loading|=4,r.instance=S,cn(S),S;f=s2(u),(y=js.get(y))&&n1(f,y),S=(n.ownerDocument||n).createElement("link"),cn(S);var k=S;return k._p=new Promise(function(Z,it){k.onload=Z,k.onerror=it}),Da(S,"link",f),r.state.loading|=4,Y0(S,u.precedence,n),r.instance=S;case"script":return S=Ef(u.src),(y=n.querySelector(Zd(S)))?(r.instance=y,cn(y),y):(f=u,(y=js.get(S))&&(f=V({},u),i1(f,y)),n=n.ownerDocument||n,y=n.createElement("script"),cn(y),Da(y,"link",f),n.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Y0(f,u.precedence,n));return r.instance}function Y0(n,r,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,S=y,k=0;k<f.length;k++){var Z=f[k];if(Z.dataset.precedence===r)S=Z;else if(S!==y)break}S?S.parentNode.insertBefore(n,S.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(n,r.firstChild))}function n1(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function i1(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Q0=null;function o2(n,r,u){if(Q0===null){var f=new Map,y=Q0=new Map;y.set(u,f)}else y=Q0,f=y.get(u),f||(f=new Map,y.set(u,f));if(f.has(n))return f;for(f.set(n,null),u=u.getElementsByTagName(n),y=0;y<u.length;y++){var S=u[y];if(!(S[_a]||S[rn]||n==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var k=S.getAttribute(r)||"";k=n+k;var Z=f.get(k);Z?Z.push(S):f.set(k,[S])}}return f}function u2(n,r,u){n=n.ownerDocument||n,n.head.insertBefore(u,r==="title"?n.querySelector("head > title"):null)}function jb(n,r,u){if(u===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function c2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Wd=null;function Hb(){}function qb(n,r,u){if(Wd===null)throw Error(a(475));var f=Wd;if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=vf(u.href),S=n.querySelector(Xd(y));if(S){n=S._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(f.count++,f=X0.bind(f),n.then(f,f)),r.state.loading|=4,r.instance=S,cn(S);return}S=n.ownerDocument||n,u=s2(u),(y=js.get(y))&&n1(u,y),S=S.createElement("link"),cn(S);var k=S;k._p=new Promise(function(Z,it){k.onload=Z,k.onerror=it}),Da(S,"link",u),r.instance=S}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=X0.bind(f),n.addEventListener("load",r),n.addEventListener("error",r))}}function Kb(){if(Wd===null)throw Error(a(475));var n=Wd;return n.stylesheets&&n.count===0&&a1(n,n.stylesheets),0<n.count?function(r){var u=setTimeout(function(){if(n.stylesheets&&a1(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u)}}:null}function X0(){if(this.count--,this.count===0){if(this.stylesheets)a1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Z0=null;function a1(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Z0=new Map,r.forEach(Yb,n),Z0=null,X0.call(n))}function Yb(n,r){if(!(r.state.loading&4)){var u=Z0.get(n);if(u)var f=u.get(null);else{u=new Map,Z0.set(n,u);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<y.length;S++){var k=y[S];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(u.set(k.dataset.precedence,k),f=k)}f&&u.set(null,f)}y=r.instance,k=y.getAttribute("data-precedence"),S=u.get(k)||f,S===f&&u.set(null,y),u.set(k,y),this.count++,f=X0.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),S?S.parentNode.insertBefore(y,S.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),r.state.loading|=4}}var Jd={$$typeof:C,Provider:null,Consumer:null,_currentValue:Nt,_currentValue2:Nt,_threadCount:0};function Qb(n,r,u,f,y,S,k,Z){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.hiddenUpdates=Ma(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=S,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function h2(n,r,u,f,y,S,k,Z,it,ut,wt,Ut){return n=new Qb(n,r,u,k,Z,it,ut,Ut),r=1,S===!0&&(r|=24),S=hi(3,null,null,r),n.current=S,S.stateNode=n,r=pd(),r.refCount++,n.pooledCache=r,r.refCount++,S.memoizedState={element:f,isDehydrated:u,cache:r},Ca(S),n}function f2(n){return n?(n=zl,n):zl}function d2(n,r,u,f,y,S){y=f2(y),f.context===null?f.context=y:f.pendingContext=y,f=dr(r),f.payload={element:u},S=S===void 0?null:S,S!==null&&(f.callback=S),u=gr(n,f,r),u!==null&&(bi(u,n,r),no(u,n,r))}function g2(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<r?u:r}}function r1(n,r){g2(n,r),(n=n.alternate)&&g2(n,r)}function m2(n){if(n.tag===13){var r=rl(n,67108864);r!==null&&bi(r,n,67108864),r1(n,67108864)}}var W0=!0;function Xb(n,r,u,f){var y=I.T;I.T=null;var S=dt.p;try{dt.p=2,s1(n,r,u,f)}finally{dt.p=S,I.T=y}}function Zb(n,r,u,f){var y=I.T;I.T=null;var S=dt.p;try{dt.p=8,s1(n,r,u,f)}finally{dt.p=S,I.T=y}}function s1(n,r,u,f){if(W0){var y=l1(f);if(y===null)Qy(n,r,f,J0,u),y2(n,f);else if(Jb(y,n,r,u,f))f.stopPropagation();else if(y2(n,f),r&4&&-1<Wb.indexOf(n)){for(;y!==null;){var S=Tn(y);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var k=ta(S.pendingLanes);if(k!==0){var Z=S;for(Z.pendingLanes|=2,Z.entangledLanes|=2;k;){var it=1<<31-jn(k);Z.entanglements[1]|=it,k&=~it}An(S),(Se&6)===0&&(Le=Ie()+500,Fe(0))}}break;case 13:Z=rl(S,2),Z!==null&&bi(Z,S,2),Yo(),r1(S,2)}if(S=l1(f),S===null&&Qy(n,r,f,J0,u),S===y)break;y=S}y!==null&&f.stopPropagation()}else Qy(n,r,f,null,u)}}function l1(n){return n=Zr(n),o1(n)}var J0=null;function o1(n){if(J0=null,n=ea(n),n!==null){var r=st(n);if(r===null)n=null;else{var u=r.tag;if(u===13){if(n=pt(r),n!==null)return n;n=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return J0=n,null}function p2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Re:return 2;case Ye:return 8;case Zn:case ji:return 32;case we:return 268435456;default:return 32}default:return 32}}var u1=!1,Yu=null,Qu=null,Xu=null,$d=new Map,tg=new Map,Zu=[],Wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y2(n,r){switch(n){case"focusin":case"focusout":Yu=null;break;case"dragenter":case"dragleave":Qu=null;break;case"mouseover":case"mouseout":Xu=null;break;case"pointerover":case"pointerout":$d.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tg.delete(r.pointerId)}}function eg(n,r,u,f,y,S){return n===null||n.nativeEvent!==S?(n={blockedOn:r,domEventName:u,eventSystemFlags:f,nativeEvent:S,targetContainers:[y]},r!==null&&(r=Tn(r),r!==null&&m2(r)),n):(n.eventSystemFlags|=f,r=n.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),n)}function Jb(n,r,u,f,y){switch(r){case"focusin":return Yu=eg(Yu,n,r,u,f,y),!0;case"dragenter":return Qu=eg(Qu,n,r,u,f,y),!0;case"mouseover":return Xu=eg(Xu,n,r,u,f,y),!0;case"pointerover":var S=y.pointerId;return $d.set(S,eg($d.get(S)||null,n,r,u,f,y)),!0;case"gotpointercapture":return S=y.pointerId,tg.set(S,eg(tg.get(S)||null,n,r,u,f,y)),!0}return!1}function _2(n){var r=ea(n.target);if(r!==null){var u=st(r);if(u!==null){if(r=u.tag,r===13){if(r=pt(u),r!==null){n.blockedOn=r,$n(n.priority,function(){if(u.tag===13){var f=xa(),y=rl(u,f);y!==null&&bi(y,u,f),r1(u,f)}});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $0(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var u=l1(n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);Ta=f,u.target.dispatchEvent(f),Ta=null}else return r=Tn(u),r!==null&&m2(r),n.blockedOn=u,!1;r.shift()}return!0}function v2(n,r,u){$0(n)&&u.delete(r)}function $b(){u1=!1,Yu!==null&&$0(Yu)&&(Yu=null),Qu!==null&&$0(Qu)&&(Qu=null),Xu!==null&&$0(Xu)&&(Xu=null),$d.forEach(v2),tg.forEach(v2)}function tp(n,r){n.blockedOn===r&&(n.blockedOn=null,u1||(u1=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$b)))}var ep=null;function E2(n){ep!==n&&(ep=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ep===n&&(ep=null);for(var r=0;r<n.length;r+=3){var u=n[r],f=n[r+1],y=n[r+2];if(typeof f!="function"){if(o1(f||u)===null)continue;break}var S=Tn(u);S!==null&&(n.splice(r,3),r-=3,Cd(S,{pending:!0,data:y,method:u.method,action:f},f,y))}}))}function ng(n){function r(it){return tp(it,n)}Yu!==null&&tp(Yu,n),Qu!==null&&tp(Qu,n),Xu!==null&&tp(Xu,n),$d.forEach(r),tg.forEach(r);for(var u=0;u<Zu.length;u++){var f=Zu[u];f.blockedOn===n&&(f.blockedOn=null)}for(;0<Zu.length&&(u=Zu[0],u.blockedOn===null);)_2(u),u.blockedOn===null&&Zu.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var y=u[f],S=u[f+1],k=y[ye]||null;if(typeof S=="function")k||E2(u);else if(k){var Z=null;if(S&&S.hasAttribute("formAction")){if(y=S,k=S[ye]||null)Z=k.formAction;else if(o1(y)!==null)continue}else Z=k.action;typeof Z=="function"?u[f+1]=Z:(u.splice(f,3),f-=3),E2(u)}}}function c1(n){this._internalRoot=n}np.prototype.render=c1.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var u=r.current,f=xa();d2(u,f,n,r,null,null)},np.prototype.unmount=c1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;n.tag===0&&Ft(),d2(n.current,2,null,n,null,null),Yo(),r[ir]=null}};function np(n){this._internalRoot=n}np.prototype.unstable_scheduleHydration=function(n){if(n){var r=ps();n={blockedOn:null,target:n,priority:r};for(var u=0;u<Zu.length&&r!==0&&r<Zu[u].priority;u++);Zu.splice(u,0,n),u===0&&_2(n)}};var S2=t.version;if(S2!=="19.0.0")throw Error(a(527,S2,"19.0.0"));dt.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=rt(r),n=n!==null?bt(n):null,n=n===null?null:n.stateNode,n};var t6={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:ea,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ip=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ip.isDisabled&&ip.supportsFiber)try{$e=ip.inject(t6),Ve=ip}catch{}}return ag.createRoot=function(n,r){if(!l(n))throw Error(a(299));var u=!1,f="",y=D0,S=I0,k=O0,Z=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(k=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(Z=r.unstable_transitionCallbacks)),r=h2(n,1,!1,null,null,u,f,y,S,k,Z,null),n[ir]=r.current,Yy(n.nodeType===8?n.parentNode:n),new c1(r)},ag.hydrateRoot=function(n,r,u){if(!l(n))throw Error(a(299));var f=!1,y="",S=D0,k=I0,Z=O0,it=null,ut=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(k=u.onCaughtError),u.onRecoverableError!==void 0&&(Z=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(it=u.unstable_transitionCallbacks),u.formState!==void 0&&(ut=u.formState)),r=h2(n,1,!0,r,u??null,f,y,S,k,Z,it,ut),r.context=f2(null),u=r.current,f=xa(),y=dr(f),y.callback=null,gr(u,y,f),r.current.lanes=f,Ce(r,f),An(r),n[ir]=r.current,Yy(n),new np(r)},ag.version="19.0.0",ag}var O2;function u6(){if(O2)return d1.exports;O2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),d1.exports=o6(),d1.exports}var c6=u6(),gp={exports:{}},rg={},y1={},_1={},M2;function ke(){return M2||(M2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const t=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof T2<"u"?T2:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.20",isBrowser:e(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle(l){return i.Konva.angleDeg?l*t:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var l;return(l=i.Konva.Transformer)===null||l===void 0?void 0:l.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(l){i.glob.Konva=l}};const a=l=>{i.Konva[l.prototype.getClassName()]=l};i._registerNode=a,i.Konva._injectGlobal(i.Konva)}(_1)),_1}var v1={},V2;function Ri(){return V2||(V2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const t=ke();class e{constructor(L=[1,0,0,1,0,0]){this.dirty=!1,this.m=L&&L.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(L){L.m[0]=this.m[0],L.m[1]=this.m[1],L.m[2]=this.m[2],L.m[3]=this.m[3],L.m[4]=this.m[4],L.m[5]=this.m[5]}point(L){const F=this.m;return{x:F[0]*L.x+F[2]*L.y+F[4],y:F[1]*L.x+F[3]*L.y+F[5]}}translate(L,F){return this.m[4]+=this.m[0]*L+this.m[2]*F,this.m[5]+=this.m[1]*L+this.m[3]*F,this}scale(L,F){return this.m[0]*=L,this.m[1]*=L,this.m[2]*=F,this.m[3]*=F,this}rotate(L){const F=Math.cos(L),K=Math.sin(L),j=this.m[0]*F+this.m[2]*K,M=this.m[1]*F+this.m[3]*K,I=this.m[0]*-K+this.m[2]*F,V=this.m[1]*-K+this.m[3]*F;return this.m[0]=j,this.m[1]=M,this.m[2]=I,this.m[3]=V,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(L,F){const K=this.m[0]+this.m[2]*F,j=this.m[1]+this.m[3]*F,M=this.m[2]+this.m[0]*L,I=this.m[3]+this.m[1]*L;return this.m[0]=K,this.m[1]=j,this.m[2]=M,this.m[3]=I,this}multiply(L){const F=this.m[0]*L.m[0]+this.m[2]*L.m[1],K=this.m[1]*L.m[0]+this.m[3]*L.m[1],j=this.m[0]*L.m[2]+this.m[2]*L.m[3],M=this.m[1]*L.m[2]+this.m[3]*L.m[3],I=this.m[0]*L.m[4]+this.m[2]*L.m[5]+this.m[4],V=this.m[1]*L.m[4]+this.m[3]*L.m[5]+this.m[5];return this.m[0]=F,this.m[1]=K,this.m[2]=j,this.m[3]=M,this.m[4]=I,this.m[5]=V,this}invert(){const L=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),F=this.m[3]*L,K=-this.m[1]*L,j=-this.m[2]*L,M=this.m[0]*L,I=L*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),V=L*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=F,this.m[1]=K,this.m[2]=j,this.m[3]=M,this.m[4]=I,this.m[5]=V,this}getMatrix(){return this.m}decompose(){const L=this.m[0],F=this.m[1],K=this.m[2],j=this.m[3],M=this.m[4],I=this.m[5],V=L*j-F*K,B={x:M,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(L!=0||F!=0){const Y=Math.sqrt(L*L+F*F);B.rotation=F>0?Math.acos(L/Y):-Math.acos(L/Y),B.scaleX=Y,B.scaleY=V/Y,B.skewX=(L*K+F*j)/V,B.skewY=0}else if(K!=0||j!=0){const Y=Math.sqrt(K*K+j*j);B.rotation=Math.PI/2-(j>0?Math.acos(-K/Y):-Math.acos(K/Y)),B.scaleX=V/Y,B.scaleY=Y,B.skewX=0,B.skewY=(L*K+F*j)/V}return B.rotation=i.Util._getRotation(B.rotation),B}}i.Transform=e;const a="[object Array]",l="[object Number]",c="[object String]",h="[object Boolean]",g=Math.PI/180,m=180/Math.PI,_="#",E="",A="0",D="Konva warning: ",C="Konva error: ",R="rgb(",P={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},U=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let H=[];const N=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};i.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===a},_isNumber(x){return Object.prototype.toString.call(x)===l&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===c},_isBoolean(x){return Object.prototype.toString.call(x)===h},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const L=x[0];return L==="#"||L==="."||L===L.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){H.push(x),H.length===1&&N(function(){const L=H;H=[],L.forEach(function(F){F()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,L){const F=i.Util.createImageElement();F.onload=function(){L(F)},F.src=x},_rgbToHex(x,L,F){return((1<<24)+(x<<16)+(L<<8)+F).toString(16).slice(1)},_hexToRgb(x){x=x.replace(_,E);const L=parseInt(x,16);return{r:L>>16&255,g:L>>8&255,b:L&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=A+x;return _+x},getRGB(x){let L;return x in P?(L=P[x],{r:L[0],g:L[1],b:L[2]}):x[0]===_?this._hexToRgb(x.substring(1)):x.substr(0,4)===R?(L=U.exec(x.replace(/ /g,"")),{r:parseInt(L[1],10),g:parseInt(L[2],10),b:parseInt(L[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",i.Util._namedColorToRBA(x)||i.Util._hex3ColorToRGBA(x)||i.Util._hex4ColorToRGBA(x)||i.Util._hex6ColorToRGBA(x)||i.Util._hex8ColorToRGBA(x)||i.Util._rgbColorToRGBA(x)||i.Util._rgbaColorToRGBA(x)||i.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const L=P[x.toLowerCase()];return L?{r:L[0],g:L[1],b:L[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const L=x.split(/ *, */).map(Number);return{r:L[0],g:L[1],b:L[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const L=x.split(/ *, */).map((F,K)=>F.slice(-1)==="%"?K===3?parseInt(F)/100:parseInt(F)/100*255:Number(F));return{r:L[0],g:L[1],b:L[2],a:L[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[L,...F]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),K=Number(F[0])/360,j=Number(F[1])/100,M=Number(F[2])/100;let I,V,B;if(j===0)return B=M*255,{r:Math.round(B),g:Math.round(B),b:Math.round(B),a:1};M<.5?I=M*(1+j):I=M+j-M*j;const Y=2*M-I,b=[0,0,0];for(let q=0;q<3;q++)V=K+1/3*-(q-1),V<0&&V++,V>1&&V--,6*V<1?B=Y+(I-Y)*6*V:2*V<1?B=I:3*V<2?B=Y+(I-Y)*(2/3-V)*6:B=Y,b[q]=B*255;return{r:Math.round(b[0]),g:Math.round(b[1]),b:Math.round(b[2]),a:1}}},haveIntersection(x,L){return!(L.x>x.x+x.width||L.x+L.width<x.x||L.y>x.y+x.height||L.y+L.height<x.y)},cloneObject(x){const L={};for(const F in x)this._isPlainObject(x[F])?L[F]=this.cloneObject(x[F]):this._isArray(x[F])?L[F]=this.cloneArray(x[F]):L[F]=x[F];return L},cloneArray(x){return x.slice(0)},degToRad(x){return x*g},radToDeg(x){return x*m},_degToRad(x){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(x)},_radToDeg(x){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?i.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(C+x)},error(x){console.error(C+x)},warn(x){t.Konva.showWarnings&&console.warn(D+x)},each(x,L){for(const F in x)L(F,x[F])},_inRange(x,L,F){return L<=x&&x<F},_getProjectionToSegment(x,L,F,K,j,M){let I,V,B;const Y=(x-F)*(x-F)+(L-K)*(L-K);if(Y==0)I=x,V=L,B=(j-F)*(j-F)+(M-K)*(M-K);else{const b=((j-x)*(F-x)+(M-L)*(K-L))/Y;b<0?(I=x,V=L,B=(x-j)*(x-j)+(L-M)*(L-M)):b>1?(I=F,V=K,B=(F-j)*(F-j)+(K-M)*(K-M)):(I=x+b*(F-x),V=L+b*(K-L),B=(I-j)*(I-j)+(V-M)*(V-M))}return[I,V,B]},_getProjectionToLine(x,L,F){const K=i.Util.cloneObject(x);let j=Number.MAX_VALUE;return L.forEach(function(M,I){if(!F&&I===L.length-1)return;const V=L[(I+1)%L.length],B=i.Util._getProjectionToSegment(M.x,M.y,V.x,V.y,x.x,x.y),Y=B[0],b=B[1],q=B[2];q<j&&(K.x=Y,K.y=b,j=q)}),K},_prepareArrayForTween(x,L,F){const K=[],j=[];if(x.length>L.length){const I=L;L=x,x=I}for(let I=0;I<x.length;I+=2)K.push({x:x[I],y:x[I+1]});for(let I=0;I<L.length;I+=2)j.push({x:L[I],y:L[I+1]});const M=[];return j.forEach(function(I){const V=i.Util._getProjectionToLine(I,K,F);M.push(V.x),M.push(V.y)}),M},_prepareToStringify(x){let L;x.visitedByCircularReferenceRemoval=!0;for(const F in x)if(x.hasOwnProperty(F)&&x[F]&&typeof x[F]=="object"){if(L=Object.getOwnPropertyDescriptor(x,F),x[F].visitedByCircularReferenceRemoval||i.Util._isElement(x[F]))if(L.configurable)delete x[F];else return null;else if(i.Util._prepareToStringify(x[F])===null)if(L.configurable)delete x[F];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,L){for(const F in L)x[F]=L[F];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(L=>{L.width=0,L.height=0})},drawRoundedRectPath(x,L,F,K){let j=0,M=0,I=0,V=0;typeof K=="number"?j=M=I=V=Math.min(K,L/2,F/2):(j=Math.min(K[0]||0,L/2,F/2),M=Math.min(K[1]||0,L/2,F/2),V=Math.min(K[2]||0,L/2,F/2),I=Math.min(K[3]||0,L/2,F/2)),x.moveTo(j,0),x.lineTo(L-M,0),x.arc(L-M,M,M,Math.PI*3/2,0,!1),x.lineTo(L,F-V),x.arc(L-V,F-V,V,0,Math.PI/2,!1),x.lineTo(I,F),x.arc(I,F-I,I,Math.PI/2,Math.PI,!1),x.lineTo(0,j),x.arc(j,j,j,Math.PI,Math.PI*3/2,!1)}}}(v1)),v1}var sg={},E1={},Fr={},P2;function We(){if(P2)return Fr;P2=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.RGBComponent=a,Fr.alphaComponent=l,Fr.getNumberValidator=c,Fr.getNumberOrArrayOfNumbersValidator=h,Fr.getNumberOrAutoValidator=g,Fr.getStringValidator=m,Fr.getStringOrGradientValidator=_,Fr.getFunctionValidator=E,Fr.getNumberArrayValidator=A,Fr.getBooleanValidator=D,Fr.getComponentValidator=C;const i=ke(),t=Ri();function e(R){return t.Util._isString(R)?'"'+R+'"':Object.prototype.toString.call(R)==="[object Number]"||t.Util._isBoolean(R)?R:Object.prototype.toString.call(R)}function a(R){return R>255?255:R<0?0:Math.round(R)}function l(R){return R>1?1:R<1e-4?1e-4:R}function c(){if(i.Konva.isUnminified)return function(R,P){return t.Util._isNumber(R)||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a number.'),R}}function h(R){if(i.Konva.isUnminified)return function(P,U){let H=t.Util._isNumber(P),N=t.Util._isArray(P)&&P.length==R;return!H&&!N&&t.Util.warn(e(P)+' is a not valid value for "'+U+'" attribute. The value should be a number or Array<number>('+R+")"),P}}function g(){if(i.Konva.isUnminified)return function(R,P){var U=t.Util._isNumber(R),H=R==="auto";return U||H||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a number or "auto".'),R}}function m(){if(i.Konva.isUnminified)return function(R,P){return t.Util._isString(R)||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a string.'),R}}function _(){if(i.Konva.isUnminified)return function(R,P){const U=t.Util._isString(R),H=Object.prototype.toString.call(R)==="[object CanvasGradient]"||R&&R.addColorStop;return U||H||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a string or a native gradient.'),R}}function E(){if(i.Konva.isUnminified)return function(R,P){return t.Util._isFunction(R)||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a function.'),R}}function A(){if(i.Konva.isUnminified)return function(R,P){const U=Int8Array?Object.getPrototypeOf(Int8Array):null;return U&&R instanceof U||(t.Util._isArray(R)?R.forEach(function(H){t.Util._isNumber(H)||t.Util.warn('"'+P+'" attribute has non numeric element '+H+". Make sure that all elements are numbers.")}):t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a array of numbers.')),R}}function D(){if(i.Konva.isUnminified)return function(R,P){var U=R===!0||R===!1;return U||t.Util.warn(e(R)+' is a not valid value for "'+P+'" attribute. The value should be a boolean.'),R}}function C(R){if(i.Konva.isUnminified)return function(P,U){return P==null||t.Util.isObject(P)||t.Util.warn(e(P)+' is a not valid value for "'+U+'" attribute. The value should be an object with properties '+R),P}}return Fr}var U2;function qe(){return U2||(U2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const t=Ri(),e=We(),a="get",l="set";i.Factory={addGetterSetter(c,h,g,m,_){i.Factory.addGetter(c,h,g),i.Factory.addSetter(c,h,m,_),i.Factory.addOverloadedGetterSetter(c,h)},addGetter(c,h,g){var m=a+t.Util._capitalize(h);c.prototype[m]=c.prototype[m]||function(){const _=this.attrs[h];return _===void 0?g:_}},addSetter(c,h,g,m){var _=l+t.Util._capitalize(h);c.prototype[_]||i.Factory.overWriteSetter(c,h,g,m)},overWriteSetter(c,h,g,m){var _=l+t.Util._capitalize(h);c.prototype[_]=function(E){return g&&E!==void 0&&E!==null&&(E=g.call(this,E,h)),this._setAttr(h,E),m&&m.call(this),this}},addComponentsGetterSetter(c,h,g,m,_){const E=g.length,A=t.Util._capitalize,D=a+A(h),C=l+A(h);c.prototype[D]=function(){const P={};for(let U=0;U<E;U++){const H=g[U];P[H]=this.getAttr(h+A(H))}return P};const R=(0,e.getComponentValidator)(g);c.prototype[C]=function(P){const U=this.attrs[h];m&&(P=m.call(this,P,h)),R&&R.call(this,P,h);for(const H in P)P.hasOwnProperty(H)&&this._setAttr(h+A(H),P[H]);return P||g.forEach(H=>{this._setAttr(h+A(H),void 0)}),this._fireChangeEvent(h,U,P),_&&_.call(this),this},i.Factory.addOverloadedGetterSetter(c,h)},addOverloadedGetterSetter(c,h){var g=t.Util._capitalize(h),m=l+g,_=a+g;c.prototype[h]=function(){return arguments.length?(this[m](arguments[0]),this):this[_]()}},addDeprecatedGetterSetter(c,h,g,m){t.Util.error("Adding deprecated "+h);const _=a+t.Util._capitalize(h),E=h+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[_]=function(){t.Util.error(E);const A=this.attrs[h];return A===void 0?g:A},i.Factory.addSetter(c,h,m,function(){t.Util.error(E)}),i.Factory.addOverloadedGetterSetter(c,h)},backCompat(c,h){t.Util.each(h,function(g,m){const _=c.prototype[m],E=a+t.Util._capitalize(g),A=l+t.Util._capitalize(g);function D(){_.apply(this,arguments),t.Util.error('"'+g+'" method is deprecated and will be removed soon. Use ""'+m+'" instead.')}c.prototype[g]=D,c.prototype[E]=D,c.prototype[A]=D})},afterSetFilter(){this._filterUpToDate=!1}}}(E1)),E1}var Wo={},Jo={},L2;function jS(){if(L2)return Jo;L2=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.HitContext=Jo.SceneContext=Jo.Context=void 0;const i=Ri(),t=ke();function e(H){const N=[],x=H.length,L=i.Util;for(let F=0;F<x;F++){let K=H[F];L._isNumber(K)?K=Math.round(K*1e3)/1e3:L._isString(K)||(K=K+""),N.push(K)}return N}const a=",",l="(",c=")",h="([",g="])",m=";",_="()",E="=",A=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],D=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],C=100;let R=class{constructor(N){this.canvas=N,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(N){N.fillEnabled()&&this._fill(N)}_fill(N){}strokeShape(N){N.hasStroke()&&this._stroke(N)}_stroke(N){}fillStrokeShape(N){N.attrs.fillAfterStrokeEnabled?(this.strokeShape(N),this.fillShape(N)):(this.fillShape(N),this.strokeShape(N))}getTrace(N,x){let L=this.traceArr,F=L.length,K="",j,M,I,V;for(j=0;j<F;j++)M=L[j],I=M.method,I?(V=M.args,K+=I,N?K+=_:i.Util._isArray(V[0])?K+=h+V.join(a)+g:(x&&(V=V.map(B=>typeof B=="number"?Math.floor(B):B)),K+=l+V.join(a)+c)):(K+=M.property,N||(K+=E+M.val)),K+=m;return K}clearTrace(){this.traceArr=[]}_trace(N){let x=this.traceArr,L;x.push(N),L=x.length,L>=C&&x.shift()}reset(){const N=this.getCanvas().getPixelRatio();this.setTransform(1*N,0,0,1*N,0,0)}getCanvas(){return this.canvas}clear(N){const x=this.getCanvas();N?this.clearRect(N.x||0,N.y||0,N.width||0,N.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(N){const x=N.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(N){const x=N.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(N){const x=N.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(N,x){this._context[N]=x}arc(N,x,L,F,K,j){this._context.arc(N,x,L,F,K,j)}arcTo(N,x,L,F,K){this._context.arcTo(N,x,L,F,K)}beginPath(){this._context.beginPath()}bezierCurveTo(N,x,L,F,K,j){this._context.bezierCurveTo(N,x,L,F,K,j)}clearRect(N,x,L,F){this._context.clearRect(N,x,L,F)}clip(...N){this._context.clip.apply(this._context,N)}closePath(){this._context.closePath()}createImageData(N,x){const L=arguments;if(L.length===2)return this._context.createImageData(N,x);if(L.length===1)return this._context.createImageData(N)}createLinearGradient(N,x,L,F){return this._context.createLinearGradient(N,x,L,F)}createPattern(N,x){return this._context.createPattern(N,x)}createRadialGradient(N,x,L,F,K,j){return this._context.createRadialGradient(N,x,L,F,K,j)}drawImage(N,x,L,F,K,j,M,I,V){const B=arguments,Y=this._context;B.length===3?Y.drawImage(N,x,L):B.length===5?Y.drawImage(N,x,L,F,K):B.length===9&&Y.drawImage(N,x,L,F,K,j,M,I,V)}ellipse(N,x,L,F,K,j,M,I){this._context.ellipse(N,x,L,F,K,j,M,I)}isPointInPath(N,x,L,F){return L?this._context.isPointInPath(L,N,x,F):this._context.isPointInPath(N,x,F)}fill(...N){this._context.fill.apply(this._context,N)}fillRect(N,x,L,F){this._context.fillRect(N,x,L,F)}strokeRect(N,x,L,F){this._context.strokeRect(N,x,L,F)}fillText(N,x,L,F){F?this._context.fillText(N,x,L,F):this._context.fillText(N,x,L)}measureText(N){return this._context.measureText(N)}getImageData(N,x,L,F){return this._context.getImageData(N,x,L,F)}lineTo(N,x){this._context.lineTo(N,x)}moveTo(N,x){this._context.moveTo(N,x)}rect(N,x,L,F){this._context.rect(N,x,L,F)}roundRect(N,x,L,F,K){this._context.roundRect(N,x,L,F,K)}putImageData(N,x,L){this._context.putImageData(N,x,L)}quadraticCurveTo(N,x,L,F){this._context.quadraticCurveTo(N,x,L,F)}restore(){this._context.restore()}rotate(N){this._context.rotate(N)}save(){this._context.save()}scale(N,x){this._context.scale(N,x)}setLineDash(N){this._context.setLineDash?this._context.setLineDash(N):"mozDash"in this._context?this._context.mozDash=N:"webkitLineDash"in this._context&&(this._context.webkitLineDash=N)}getLineDash(){return this._context.getLineDash()}setTransform(N,x,L,F,K,j){this._context.setTransform(N,x,L,F,K,j)}stroke(N){N?this._context.stroke(N):this._context.stroke()}strokeText(N,x,L,F){this._context.strokeText(N,x,L,F)}transform(N,x,L,F,K,j){this._context.transform(N,x,L,F,K,j)}translate(N,x){this._context.translate(N,x)}_enableTrace(){let N=this,x=A.length,L=this.setAttr,F,K;const j=function(M){let I=N[M],V;N[M]=function(){return K=e(Array.prototype.slice.call(arguments,0)),V=I.apply(N,arguments),N._trace({method:M,args:K}),V}};for(F=0;F<x;F++)j(A[F]);N.setAttr=function(){L.apply(N,arguments);const M=arguments[0];let I=arguments[1];(M==="shadowOffsetX"||M==="shadowOffsetY"||M==="shadowBlur")&&(I=I/this.canvas.getPixelRatio()),N._trace({property:M,val:I})}}_applyGlobalCompositeOperation(N){const x=N.attrs.globalCompositeOperation;!x||x==="source-over"||this.setAttr("globalCompositeOperation",x)}};Jo.Context=R,D.forEach(function(H){Object.defineProperty(R.prototype,H,{get(){return this._context[H]},set(N){this._context[H]=N}})});class P extends R{constructor(N,{willReadFrequently:x=!1}={}){super(N),this._context=N._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(N){const x=N.fill();this.setAttr("fillStyle",x),N._fillFunc(this)}_fillPattern(N){this.setAttr("fillStyle",N._getFillPattern()),N._fillFunc(this)}_fillLinearGradient(N){const x=N._getLinearGradient();x&&(this.setAttr("fillStyle",x),N._fillFunc(this))}_fillRadialGradient(N){const x=N._getRadialGradient();x&&(this.setAttr("fillStyle",x),N._fillFunc(this))}_fill(N){const x=N.fill(),L=N.getFillPriority();if(x&&L==="color"){this._fillColor(N);return}const F=N.getFillPatternImage();if(F&&L==="pattern"){this._fillPattern(N);return}const K=N.getFillLinearGradientColorStops();if(K&&L==="linear-gradient"){this._fillLinearGradient(N);return}const j=N.getFillRadialGradientColorStops();if(j&&L==="radial-gradient"){this._fillRadialGradient(N);return}x?this._fillColor(N):F?this._fillPattern(N):K?this._fillLinearGradient(N):j&&this._fillRadialGradient(N)}_strokeLinearGradient(N){const x=N.getStrokeLinearGradientStartPoint(),L=N.getStrokeLinearGradientEndPoint(),F=N.getStrokeLinearGradientColorStops(),K=this.createLinearGradient(x.x,x.y,L.x,L.y);if(F){for(let j=0;j<F.length;j+=2)K.addColorStop(F[j],F[j+1]);this.setAttr("strokeStyle",K)}}_stroke(N){const x=N.dash(),L=N.getStrokeScaleEnabled();if(N.hasStroke()){if(!L){this.save();const K=this.getCanvas().getPixelRatio();this.setTransform(K,0,0,K,0,0)}this._applyLineCap(N),x&&N.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",N.dashOffset())),this.setAttr("lineWidth",N.strokeWidth()),N.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),N.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(N):this.setAttr("strokeStyle",N.stroke()),N._strokeFunc(this),L||this.restore()}}_applyShadow(N){var x,L,F;const K=(x=N.getShadowRGBA())!==null&&x!==void 0?x:"black",j=(L=N.getShadowBlur())!==null&&L!==void 0?L:5,M=(F=N.getShadowOffset())!==null&&F!==void 0?F:{x:0,y:0},I=N.getAbsoluteScale(),V=this.canvas.getPixelRatio(),B=I.x*V,Y=I.y*V;this.setAttr("shadowColor",K),this.setAttr("shadowBlur",j*Math.min(Math.abs(B),Math.abs(Y))),this.setAttr("shadowOffsetX",M.x*B),this.setAttr("shadowOffsetY",M.y*Y)}}Jo.SceneContext=P;class U extends R{constructor(N){super(N),this._context=N._canvas.getContext("2d",{willReadFrequently:!0})}_fill(N){this.save(),this.setAttr("fillStyle",N.colorKey),N._fillFuncHit(this),this.restore()}strokeShape(N){N.hasHitStroke()&&this._stroke(N)}_stroke(N){if(N.hasHitStroke()){const x=N.getStrokeScaleEnabled();if(!x){this.save();const K=this.getCanvas().getPixelRatio();this.setTransform(K,0,0,K,0,0)}this._applyLineCap(N);const L=N.hitStrokeWidth(),F=L==="auto"?N.strokeWidth():L;this.setAttr("lineWidth",F),this.setAttr("strokeStyle",N.colorKey),N._strokeFuncHit(this),x||this.restore()}}}return Jo.HitContext=U,Jo}var z2;function iy(){if(z2)return Wo;z2=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.HitCanvas=Wo.SceneCanvas=Wo.Canvas=void 0;const i=Ri(),t=jS(),e=ke();let a;function l(){if(a)return a;const m=i.Util.createCanvasElement(),_=m.getContext("2d");return a=function(){const E=e.Konva._global.devicePixelRatio||1,A=_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1;return E/A}(),i.Util.releaseCanvas(m),a}let c=class{constructor(_){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const A=(_||{}).pixelRatio||e.Konva.pixelRatio||l();this.pixelRatio=A,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(_){const E=this.pixelRatio;this.pixelRatio=_,this.setSize(this.getWidth()/E,this.getHeight()/E)}setWidth(_){this.width=this._canvas.width=_*this.pixelRatio,this._canvas.style.width=_+"px";const E=this.pixelRatio;this.getContext()._context.scale(E,E)}setHeight(_){this.height=this._canvas.height=_*this.pixelRatio,this._canvas.style.height=_+"px";const E=this.pixelRatio;this.getContext()._context.scale(E,E)}getWidth(){return this.width}getHeight(){return this.height}setSize(_,E){this.setWidth(_||0),this.setHeight(E||0)}toDataURL(_,E){try{return this._canvas.toDataURL(_,E)}catch{try{return this._canvas.toDataURL()}catch(D){return i.Util.error("Unable to get data URL. "+D.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Wo.Canvas=c;class h extends c{constructor(_={width:0,height:0,willReadFrequently:!1}){super(_),this.context=new t.SceneContext(this,{willReadFrequently:_.willReadFrequently}),this.setSize(_.width,_.height)}}Wo.SceneCanvas=h;class g extends c{constructor(_={width:0,height:0}){super(_),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(_.width,_.height)}}return Wo.HitCanvas=g,Wo}var S1={},k2;function D_(){return k2||(k2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const t=ke(),e=Ri();i.DD={get isDragging(){let a=!1;return i.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(a=!0)}),a},justDragged:!1,get node(){let a;return i.DD._dragElements.forEach(l=>{a=l.node}),a},_dragElements:new Map,_drag(a){const l=[];i.DD._dragElements.forEach((c,h)=>{const{node:g}=c,m=g.getStage();m.setPointersPositions(a),c.pointerId===void 0&&(c.pointerId=e.Util._getFirstPointerId(a));const _=m._changedPointerPositions.find(E=>E.id===c.pointerId);if(_){if(c.dragStatus!=="dragging"){const E=g.dragDistance();if(Math.max(Math.abs(_.x-c.startPointerPos.x),Math.abs(_.y-c.startPointerPos.y))<E||(g.startDrag({evt:a}),!g.isDragging()))return}g._setDragPosition(a,c),l.push(g)}}),l.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:a},!0)})},_endDragBefore(a){const l=[];i.DD._dragElements.forEach(c=>{const{node:h}=c,g=h.getStage();if(a&&g.setPointersPositions(a),!g._changedPointerPositions.find(E=>E.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(i.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const _=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;_&&l.indexOf(_)===-1&&l.push(_)}),l.forEach(c=>{c.draw()})},_endDragAfter(a){i.DD._dragElements.forEach((l,c)=>{l.dragStatus==="stopped"&&l.node.fire("dragend",{type:"dragend",target:l.node,evt:a},!0),l.dragStatus!=="dragging"&&i.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("touchcancel",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1),window.addEventListener("touchcancel",i.DD._endDragAfter,!1))}(S1)),S1}var B2;function Ii(){if(B2)return sg;B2=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.Node=void 0;const i=Ri(),t=qe(),e=iy(),a=ke(),l=D_(),c=We(),h="absoluteOpacity",g="allEventListeners",m="absoluteTransform",_="absoluteScale",E="canvas",A="Change",D="children",C="konva",R="listening",P="mouseenter",U="mouseleave",H="set",N="Shape",x=" ",L="stage",F="transform",K="Stage",j="visible",M=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let I=1,V=class q1{constructor(b){this._id=I++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(b),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(b){(b===F||b===m)&&this._cache.get(b)?this._cache.get(b).dirty=!0:b?this._cache.delete(b):this._cache.clear()}_getCache(b,q){let G=this._cache.get(b);return(G===void 0||(b===F||b===m)&&G.dirty===!0)&&(G=q.call(this),this._cache.set(b,G)),G}_calculate(b,q,G){if(!this._attachedDepsListeners.get(b)){const X=q.map(et=>et+"Change.konva").join(x);this.on(X,()=>{this._clearCache(b)}),this._attachedDepsListeners.set(b,!0)}return this._getCache(b,G)}_getCanvasCache(){return this._cache.get(E)}_clearSelfAndDescendantCache(b){this._clearCache(b),b===m&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(E)){const{scene:b,filter:q,hit:G}=this._cache.get(E);i.Util.releaseCanvas(b,q,G),this._cache.delete(E)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(b){const q=b||{};let G={};(q.x===void 0||q.y===void 0||q.width===void 0||q.height===void 0)&&(G=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let X=Math.ceil(q.width||G.width),et=Math.ceil(q.height||G.height),st=q.pixelRatio,pt=q.x===void 0?Math.floor(G.x):q.x,Q=q.y===void 0?Math.floor(G.y):q.y,rt=q.offset||0,bt=q.drawBorder||!1,lt=q.hitCanvasPixelRatio||1;if(!X||!et){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const dt=Math.abs(Math.round(G.x)-pt)>.5?1:0,Nt=Math.abs(Math.round(G.y)-Q)>.5?1:0;X+=rt*2+dt,et+=rt*2+Nt,pt-=rt,Q-=rt;const Vt=new e.SceneCanvas({pixelRatio:st,width:X,height:et}),nt=new e.SceneCanvas({pixelRatio:st,width:0,height:0,willReadFrequently:!0}),ht=new e.HitCanvas({pixelRatio:lt,width:X,height:et}),Dt=Vt.getContext(),It=ht.getContext();return ht.isCache=!0,Vt.isCache=!0,this._cache.delete(E),this._filterUpToDate=!1,q.imageSmoothingEnabled===!1&&(Vt.getContext()._context.imageSmoothingEnabled=!1,nt.getContext()._context.imageSmoothingEnabled=!1),Dt.save(),It.save(),Dt.translate(-pt,-Q),It.translate(-pt,-Q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(_),this.drawScene(Vt,this),this.drawHit(ht,this),this._isUnderCache=!1,Dt.restore(),It.restore(),bt&&(Dt.save(),Dt.beginPath(),Dt.rect(0,0,X,et),Dt.closePath(),Dt.setAttr("strokeStyle","red"),Dt.setAttr("lineWidth",5),Dt.stroke(),Dt.restore()),this._cache.set(E,{scene:Vt,filter:nt,hit:ht,x:pt,y:Q}),this._requestDraw(),this}isCached(){return this._cache.has(E)}getClientRect(b){throw new Error('abstract "getClientRect" method call')}_transformedRect(b,q){const G=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];let X=1/0,et=1/0,st=-1/0,pt=-1/0;const Q=this.getAbsoluteTransform(q);return G.forEach(function(rt){const bt=Q.point(rt);X===void 0&&(X=st=bt.x,et=pt=bt.y),X=Math.min(X,bt.x),et=Math.min(et,bt.y),st=Math.max(st,bt.x),pt=Math.max(pt,bt.y)}),{x:X,y:et,width:st-X,height:pt-et}}_drawCachedSceneCanvas(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);const q=this._getCanvasCache();b.translate(q.x,q.y);const G=this._getCachedSceneCanvas(),X=G.pixelRatio;b.drawImage(G._canvas,0,0,G.width/X,G.height/X),b.restore()}_drawCachedHitCanvas(b){const q=this._getCanvasCache(),G=q.hit;b.save(),b.translate(q.x,q.y),b.drawImage(G._canvas,0,0,G.width/G.pixelRatio,G.height/G.pixelRatio),b.restore()}_getCachedSceneCanvas(){let b=this.filters(),q=this._getCanvasCache(),G=q.scene,X=q.filter,et=X.getContext(),st,pt,Q,rt;if(b){if(!this._filterUpToDate){const bt=G.pixelRatio;X.setSize(G.width/G.pixelRatio,G.height/G.pixelRatio);try{for(st=b.length,et.clear(),et.drawImage(G._canvas,0,0,G.getWidth()/bt,G.getHeight()/bt),pt=et.getImageData(0,0,X.getWidth(),X.getHeight()),Q=0;Q<st;Q++){if(rt=b[Q],typeof rt!="function"){i.Util.error("Filter should be type of function, but got "+typeof rt+" instead. Please check correct filters");continue}rt.call(this,pt),et.putImageData(pt,0,0)}}catch(lt){i.Util.error("Unable to apply filter. "+lt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return X}return G}on(b,q){if(this._cache&&this._cache.delete(g),arguments.length===3)return this._delegate.apply(this,arguments);let G=b.split(x),X=G.length,et,st,pt,Q,rt;for(et=0;et<X;et++)st=G[et],pt=st.split("."),Q=pt[0],rt=pt[1]||"",this.eventListeners[Q]||(this.eventListeners[Q]=[]),this.eventListeners[Q].push({name:rt,handler:q});return this}off(b,q){let G=(b||"").split(x),X=G.length,et,st,pt,Q,rt,bt;if(this._cache&&this._cache.delete(g),!b)for(st in this.eventListeners)this._off(st);for(et=0;et<X;et++)if(pt=G[et],Q=pt.split("."),rt=Q[0],bt=Q[1],rt)this.eventListeners[rt]&&this._off(rt,bt,q);else for(st in this.eventListeners)this._off(st,bt,q);return this}dispatchEvent(b){const q={target:this,type:b.type,evt:b};return this.fire(b.type,q),this}addEventListener(b,q){return this.on(b,function(G){q.call(this,G.evt)}),this}removeEventListener(b){return this.off(b),this}_delegate(b,q,G){const X=this;this.on(b,function(et){const st=et.target.findAncestors(q,!0,X);for(let pt=0;pt<st.length;pt++)et=i.Util.cloneObject(et),et.currentTarget=st[pt],G.call(st[pt],et)})}remove(){return this.isDragging()&&this.stopDrag(),l.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(R)}_remove(){this._clearCaches();const b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(b){const q="get"+i.Util._capitalize(b);return i.Util._isFunction(this[q])?this[q]():this.attrs[b]}getAncestors(){let b=this.getParent(),q=[];for(;b;)q.push(b),b=b.getParent();return q}getAttrs(){return this.attrs||{}}setAttrs(b){return this._batchTransformChanges(()=>{let q,G;if(!b)return this;for(q in b)q!==D&&(G=H+i.Util._capitalize(q),i.Util._isFunction(this[G])?this[G](b[q]):this._setAttr(q,b[q]))}),this}isListening(){return this._getCache(R,this._isListening)}_isListening(b){if(!this.listening())return!1;const G=this.getParent();return G&&G!==b&&this!==b?G._isListening(b):!0}isVisible(){return this._getCache(j,this._isVisible)}_isVisible(b){if(!this.visible())return!1;const G=this.getParent();return G&&G!==b&&this!==b?G._isVisible(b):!0}shouldDrawHit(b,q=!1){if(b)return this._isVisible(b)&&this._isListening(b);const G=this.getLayer();let X=!1;l.DD._dragElements.forEach(st=>{st.dragStatus==="dragging"&&(st.node.nodeType==="Stage"||st.node.getLayer()===G)&&(X=!0)});const et=!q&&!a.Konva.hitOnDragEnabled&&(X||a.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!et}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let b=this.getDepth(),q=this,G=0,X,et,st,pt;function Q(bt){for(X=[],et=bt.length,st=0;st<et;st++)pt=bt[st],G++,pt.nodeType!==N&&(X=X.concat(pt.getChildren().slice())),pt._id===q._id&&(st=et);X.length>0&&X[0].getDepth()<=b&&Q(X)}const rt=this.getStage();return q.nodeType!==K&&rt&&Q(rt.getChildren()),G}getDepth(){let b=0,q=this.parent;for(;q;)b++,q=q.parent;return b}_batchTransformChanges(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(F),this._clearSelfAndDescendantCache(m)),this._needClearTransformCache=!1}setPosition(b){return this._batchTransformChanges(()=>{this.x(b.x),this.y(b.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const b=this.getStage();if(!b)return null;const q=b.getPointerPosition();if(!q)return null;const G=this.getAbsoluteTransform().copy();return G.invert(),G.point(q)}getAbsolutePosition(b){let q=!1,G=this.parent;for(;G;){if(G.isCached()){q=!0;break}G=G.parent}q&&!b&&(b=!0);const X=this.getAbsoluteTransform(b).getMatrix(),et=new i.Transform,st=this.offset();return et.m=X.slice(),et.translate(st.x,st.y),et.getTranslation()}setAbsolutePosition(b){const{x:q,y:G,...X}=this._clearTransform();this.attrs.x=q,this.attrs.y=G,this._clearCache(F);const et=this._getAbsoluteTransform().copy();return et.invert(),et.translate(b.x,b.y),b={x:this.attrs.x+et.getTranslation().x,y:this.attrs.y+et.getTranslation().y},this._setTransform(X),this.setPosition({x:b.x,y:b.y}),this._clearCache(F),this._clearSelfAndDescendantCache(m),this}_setTransform(b){let q;for(q in b)this.attrs[q]=b[q]}_clearTransform(){const b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b}move(b){let q=b.x,G=b.y,X=this.x(),et=this.y();return q!==void 0&&(X+=q),G!==void 0&&(et+=G),this.setPosition({x:X,y:et}),this}_eachAncestorReverse(b,q){let G=[],X=this.getParent(),et,st;if(!(q&&q._id===this._id)){for(G.unshift(this);X&&(!q||X._id!==q._id);)G.unshift(X),X=X.parent;for(et=G.length,st=0;st<et;st++)b(G[st])}}rotate(b){return this.rotation(this.rotation()+b),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const b=this.index,q=this.parent.getChildren().length;return b<q-1?(this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;const b=this.index,q=this.parent.getChildren().length;return b<q-1?(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(b){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(b<0||b>=this.parent.children.length)&&i.Util.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const q=this.index;return this.parent.children.splice(q,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let b=this.opacity();const q=this.getParent();return q&&!q._isUnderCache&&(b*=q.getAbsoluteOpacity()),b}moveTo(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this}toObject(){let b=this.getAttrs(),q,G,X,et,st;const pt={attrs:{},className:this.getClassName()};for(q in b)G=b[q],st=i.Util.isObject(G)&&!i.Util._isPlainObject(G)&&!i.Util._isArray(G),!st&&(X=typeof this[q]=="function"&&this[q],delete b[q],et=X?X.call(this):null,b[q]=G,et!==G&&(pt.attrs[q]=G));return i.Util._prepareToStringify(pt)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(b,q,G){const X=[];q&&this._isMatch(b)&&X.push(this);let et=this.parent;for(;et;){if(et===G)return X;et._isMatch(b)&&X.push(et),et=et.parent}return X}isAncestorOf(b){return!1}findAncestor(b,q,G){return this.findAncestors(b,q,G)[0]}_isMatch(b){if(!b)return!1;if(typeof b=="function")return b(this);let q=b.replace(/ /g,"").split(","),G=q.length,X,et;for(X=0;X<G;X++)if(et=q[X],i.Util.isValidSelector(et)||(i.Util.warn('Selector "'+et+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),et.charAt(0)==="#"){if(this.id()===et.slice(1))return!0}else if(et.charAt(0)==="."){if(this.hasName(et.slice(1)))return!0}else if(this.className===et||this.nodeType===et)return!0;return!1}getLayer(){const b=this.getParent();return b?b.getLayer():null}getStage(){return this._getCache(L,this._getStage)}_getStage(){const b=this.getParent();return b?b.getStage():null}fire(b,q={},G){return q.target=q.target||this,G?this._fireAndBubble(b,q):this._fire(b,q),this}getAbsoluteTransform(b){return b?this._getAbsoluteTransform(b):this._getCache(m,this._getAbsoluteTransform)}_getAbsoluteTransform(b){let q;if(b)return q=new i.Transform,this._eachAncestorReverse(function(G){const X=G.transformsEnabled();X==="all"?q.multiply(G.getTransform()):X==="position"&&q.translate(G.x()-G.offsetX(),G.y()-G.offsetY())},b),q;{q=this._cache.get(m)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(q):q.reset();const G=this.transformsEnabled();if(G==="all")q.multiply(this.getTransform());else if(G==="position"){const X=this.attrs.x||0,et=this.attrs.y||0,st=this.attrs.offsetX||0,pt=this.attrs.offsetY||0;q.translate(X-st,et-pt)}return q.dirty=!1,q}}getAbsoluteScale(b){let q=this;for(;q;)q._isUnderCache&&(b=q),q=q.getParent();const X=this.getAbsoluteTransform(b).decompose();return{x:X.scaleX,y:X.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(F,this._getTransform)}_getTransform(){var b,q;const G=this._cache.get(F)||new i.Transform;G.reset();const X=this.x(),et=this.y(),st=a.Konva.getAngle(this.rotation()),pt=(b=this.attrs.scaleX)!==null&&b!==void 0?b:1,Q=(q=this.attrs.scaleY)!==null&&q!==void 0?q:1,rt=this.attrs.skewX||0,bt=this.attrs.skewY||0,lt=this.attrs.offsetX||0,dt=this.attrs.offsetY||0;return(X!==0||et!==0)&&G.translate(X,et),st!==0&&G.rotate(st),(rt!==0||bt!==0)&&G.skew(rt,bt),(pt!==1||Q!==1)&&G.scale(pt,Q),(lt!==0||dt!==0)&&G.translate(-1*lt,-1*dt),G.dirty=!1,G}clone(b){let q=i.Util.cloneObject(this.attrs),G,X,et,st,pt;for(G in b)q[G]=b[G];const Q=new this.constructor(q);for(G in this.eventListeners)for(X=this.eventListeners[G],et=X.length,st=0;st<et;st++)pt=X[st],pt.name.indexOf(C)<0&&(Q.eventListeners[G]||(Q.eventListeners[G]=[]),Q.eventListeners[G].push(pt));return Q}_toKonvaCanvas(b){b=b||{};const q=this.getClientRect(),G=this.getStage(),X=b.x!==void 0?b.x:Math.floor(q.x),et=b.y!==void 0?b.y:Math.floor(q.y),st=b.pixelRatio||1,pt=new e.SceneCanvas({width:b.width||Math.ceil(q.width)||(G?G.width():0),height:b.height||Math.ceil(q.height)||(G?G.height():0),pixelRatio:st}),Q=pt.getContext(),rt=new e.SceneCanvas({width:pt.width/pt.pixelRatio+Math.abs(X),height:pt.height/pt.pixelRatio+Math.abs(et),pixelRatio:pt.pixelRatio});return b.imageSmoothingEnabled===!1&&(Q._context.imageSmoothingEnabled=!1),Q.save(),(X||et)&&Q.translate(-1*X,-1*et),this.drawScene(pt,void 0,rt),Q.restore(),pt}toCanvas(b){return this._toKonvaCanvas(b)._canvas}toDataURL(b){b=b||{};const q=b.mimeType||null,G=b.quality||null,X=this._toKonvaCanvas(b).toDataURL(q,G);return b.callback&&b.callback(X),X}toImage(b){return new Promise((q,G)=>{try{const X=b==null?void 0:b.callback;X&&delete b.callback,i.Util._urlToImage(this.toDataURL(b),function(et){q(et),X==null||X(et)})}catch(X){G(X)}})}toBlob(b){return new Promise((q,G)=>{try{const X=b==null?void 0:b.callback;X&&delete b.callback,this.toCanvas(b).toBlob(et=>{q(et),X==null||X(et)},b==null?void 0:b.mimeType,b==null?void 0:b.quality)}catch(X){G(X)}})}setSize(b){return this.width(b.width),this.height(b.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance}_off(b,q,G){let X=this.eventListeners[b],et,st,pt;for(et=0;et<X.length;et++)if(st=X[et].name,pt=X[et].handler,(st!=="konva"||q==="konva")&&(!q||st===q)&&(!G||G===pt)){if(X.splice(et,1),X.length===0){delete this.eventListeners[b];break}et--}}_fireChangeEvent(b,q,G){this._fire(b+A,{oldVal:q,newVal:G})}addName(b){if(!this.hasName(b)){const q=this.name(),G=q?q+" "+b:b;this.name(G)}return this}hasName(b){if(!b)return!1;const q=this.name();return q?(q||"").split(/\s/g).indexOf(b)!==-1:!1}removeName(b){const q=(this.name()||"").split(/\s/g),G=q.indexOf(b);return G!==-1&&(q.splice(G,1),this.name(q.join(" "))),this}setAttr(b,q){const G=this[H+i.Util._capitalize(b)];return i.Util._isFunction(G)?G.call(this,q):this._setAttr(b,q),this}_requestDraw(){if(a.Konva.autoDrawEnabled){const b=this.getLayer()||this.getStage();b==null||b.batchDraw()}}_setAttr(b,q){const G=this.attrs[b];G===q&&!i.Util.isObject(q)||(q==null?delete this.attrs[b]:this.attrs[b]=q,this._shouldFireChangeEvents&&this._fireChangeEvent(b,G,q),this._requestDraw())}_setComponentAttr(b,q,G){let X;G!==void 0&&(X=this.attrs[b],X||(this.attrs[b]=this.getAttr(b)),this.attrs[b][q]=G,this._fireChangeEvent(b,X,G))}_fireAndBubble(b,q,G){if(q&&this.nodeType===N&&(q.target=this),!((b===P||b===U)&&(G&&(this===G||this.isAncestorOf&&this.isAncestorOf(G))||this.nodeType==="Stage"&&!G))){this._fire(b,q);const et=(b===P||b===U)&&G&&G.isAncestorOf&&G.isAncestorOf(this)&&!G.isAncestorOf(this.parent);(q&&!q.cancelBubble||!q)&&this.parent&&this.parent.isListening()&&!et&&(G&&G.parent?this._fireAndBubble.call(this.parent,b,q,G):this._fireAndBubble.call(this.parent,b,q))}}_getProtoListeners(b){var q,G,X;const et=(q=this._cache.get(g))!==null&&q!==void 0?q:{};let st=et==null?void 0:et[b];if(st===void 0){st=[];let pt=Object.getPrototypeOf(this);for(;pt;){const Q=(X=(G=pt.eventListeners)===null||G===void 0?void 0:G[b])!==null&&X!==void 0?X:[];st.push(...Q),pt=Object.getPrototypeOf(pt)}et[b]=st,this._cache.set(g,et)}return st}_fire(b,q){q=q||{},q.currentTarget=this,q.type=b;const G=this._getProtoListeners(b);if(G)for(var X=0;X<G.length;X++)G[X].handler.call(this,q);const et=this.eventListeners[b];if(et)for(var X=0;X<et.length;X++)et[X].handler.call(this,q)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(b){const q=b?b.pointerId:void 0,G=this.getStage(),X=this.getAbsolutePosition();if(!G)return;const et=G._getPointerById(q)||G._changedPointerPositions[0]||X;l.DD._dragElements.set(this._id,{node:this,startPointerPos:et,offset:{x:et.x-X.x,y:et.y-X.y},dragStatus:"ready",pointerId:q})}startDrag(b,q=!0){l.DD._dragElements.has(this._id)||this._createDragElement(b);const G=l.DD._dragElements.get(this._id);G.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},q)}_setDragPosition(b,q){const G=this.getStage()._getPointerById(q.pointerId);if(!G)return;let X={x:G.x-q.offset.x,y:G.y-q.offset.y};const et=this.dragBoundFunc();if(et!==void 0){const st=et.call(this,X,b);st?X=st:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==X.x||this._lastPos.y!==X.y)&&(this.setAbsolutePosition(X),this._requestDraw()),this._lastPos=X}stopDrag(b){const q=l.DD._dragElements.get(this._id);q&&(q.dragStatus="stopped"),l.DD._endDragBefore(b),l.DD._endDragAfter(b)}setDraggable(b){this._setAttr("draggable",b),this._dragChange()}isDragging(){const b=l.DD._dragElements.get(this._id);return b?b.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){if(!(!(b.evt.button!==void 0)||a.Konva.dragButtons.indexOf(b.evt.button)>=0)||this.isDragging())return;let X=!1;l.DD._dragElements.forEach(et=>{this.isAncestorOf(et.node)&&(X=!0)}),X||this._createDragElement(b)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const q=l.DD._dragElements.get(this._id),G=q&&q.dragStatus==="dragging",X=q&&q.dragStatus==="ready";G?this.stopDrag():X&&l.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(b={x:0,y:0}){const q=this.getStage();if(!q)return!1;const G={x:-b.x,y:-b.y,width:q.width()+2*b.x,height:q.height()+2*b.y};return i.Util.haveIntersection(G,this.getClientRect())}static create(b,q){return i.Util._isString(b)&&(b=JSON.parse(b)),this._createNode(b,q)}static _createNode(b,q){let G=q1.prototype.getClassName.call(b),X=b.children,et,st,pt;q&&(b.attrs.container=q),a.Konva[G]||(i.Util.warn('Can not find a node with class name "'+G+'". Fallback to "Shape".'),G="Shape");const Q=a.Konva[G];if(et=new Q(b.attrs),X)for(st=X.length,pt=0;pt<st;pt++)et.add(q1._createNode(X[pt]));return et}};sg.Node=V,V.prototype.nodeType="Node",V.prototype._attrsAffectingSize=[],V.prototype.eventListeners={},V.prototype.on.call(V.prototype,M,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(F),this._clearSelfAndDescendantCache(m)}),V.prototype.on.call(V.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(j)}),V.prototype.on.call(V.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(R)}),V.prototype.on.call(V.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(h)});const B=t.Factory.addGetterSetter;return B(V,"zIndex"),B(V,"absolutePosition"),B(V,"position"),B(V,"x",0,(0,c.getNumberValidator)()),B(V,"y",0,(0,c.getNumberValidator)()),B(V,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),B(V,"opacity",1,(0,c.getNumberValidator)()),B(V,"name","",(0,c.getStringValidator)()),B(V,"id","",(0,c.getStringValidator)()),B(V,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"scale",["x","y"]),B(V,"scaleX",1,(0,c.getNumberValidator)()),B(V,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"skew",["x","y"]),B(V,"skewX",0,(0,c.getNumberValidator)()),B(V,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"offset",["x","y"]),B(V,"offsetX",0,(0,c.getNumberValidator)()),B(V,"offsetY",0,(0,c.getNumberValidator)()),B(V,"dragDistance",void 0,(0,c.getNumberValidator)()),B(V,"width",0,(0,c.getNumberValidator)()),B(V,"height",0,(0,c.getNumberValidator)()),B(V,"listening",!0,(0,c.getBooleanValidator)()),B(V,"preventDefault",!0,(0,c.getBooleanValidator)()),B(V,"filters",void 0,function(Y){return this._filterUpToDate=!1,Y}),B(V,"visible",!0,(0,c.getBooleanValidator)()),B(V,"transformsEnabled","all",(0,c.getStringValidator)()),B(V,"size"),B(V,"dragBoundFunc"),B(V,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(V,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),sg}var lg={},G2;function ay(){if(G2)return lg;G2=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.Container=void 0;const i=qe(),t=Ii(),e=We();let a=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const h=this.children||[],g=[];return h.forEach(function(m){c(m)&&g.push(m)}),g}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let g=0;g<c.length;g++)this.add(c[g]);return this}const h=c[0];return h.getParent()?(h.moveTo(this),this):(this._validateAdd(h),h.index=this.getChildren().length,h.parent=this,h._clearCaches(),this.getChildren().push(h),this._fire("add",{child:h}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const h=this._generalFind(c,!0);return h.length>0?h[0]:void 0}_generalFind(c,h){const g=[];return this._descendants(m=>{const _=m._isMatch(c);return _&&g.push(m),!!(_&&h)}),g}_descendants(c){let h=!1;const g=this.getChildren();for(const m of g){if(h=c(m),h)return!0;if(m.hasChildren()&&(h=m._descendants(c),h))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(h=>{c.children.push(h.toObject())}),c}isAncestorOf(c){let h=c.getParent();for(;h;){if(h._id===this._id)return!0;h=h.getParent()}return!1}clone(c){const h=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(g){h.add(g.clone())}),h}getAllIntersections(c){const h=[];return this.find("Shape").forEach(g=>{g.isVisible()&&g.intersects(c)&&h.push(g)}),h}_clearSelfAndDescendantCache(c){var h;super._clearSelfAndDescendantCache(c),!this.isCached()&&((h=this.children)===null||h===void 0||h.forEach(function(g){g._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(h,g){h.index=g}),this._requestDraw()}drawScene(c,h,g){const m=this.getLayer(),_=c||m&&m.getCanvas(),E=_&&_.getContext(),A=this._getCanvasCache(),D=A&&A.scene,C=_&&_.isCache;if(!this.isVisible()&&!C)return this;if(D){E.save();const R=this.getAbsoluteTransform(h).getMatrix();E.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedSceneCanvas(E),E.restore()}else this._drawChildren("drawScene",_,h,g);return this}drawHit(c,h){if(!this.shouldDrawHit(h))return this;const g=this.getLayer(),m=c||g&&g.hitCanvas,_=m&&m.getContext(),E=this._getCanvasCache();if(E&&E.hit){_.save();const D=this.getAbsoluteTransform(h).getMatrix();_.transform(D[0],D[1],D[2],D[3],D[4],D[5]),this._drawCachedHitCanvas(_),_.restore()}else this._drawChildren("drawHit",m,h);return this}_drawChildren(c,h,g,m){var _;const E=h&&h.getContext(),A=this.clipWidth(),D=this.clipHeight(),C=this.clipFunc(),R=typeof A=="number"&&typeof D=="number"||C,P=g===this;if(R){E.save();const H=this.getAbsoluteTransform(g);let N=H.getMatrix();E.transform(N[0],N[1],N[2],N[3],N[4],N[5]),E.beginPath();let x;if(C)x=C.call(this,E,this);else{const L=this.clipX(),F=this.clipY();E.rect(L||0,F||0,A,D)}E.clip.apply(E,x),N=H.copy().invert().getMatrix(),E.transform(N[0],N[1],N[2],N[3],N[4],N[5])}const U=!P&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";U&&(E.save(),E._applyGlobalCompositeOperation(this)),(_=this.children)===null||_===void 0||_.forEach(function(H){H[c](h,g,m)}),U&&E.restore(),R&&E.restore()}getClientRect(c={}){var h;const g=c.skipTransform,m=c.relativeTo;let _,E,A,D,C={x:1/0,y:1/0,width:0,height:0};const R=this;(h=this.children)===null||h===void 0||h.forEach(function(H){if(!H.visible())return;const N=H.getClientRect({relativeTo:R,skipShadow:c.skipShadow,skipStroke:c.skipStroke});N.width===0&&N.height===0||(_===void 0?(_=N.x,E=N.y,A=N.x+N.width,D=N.y+N.height):(_=Math.min(_,N.x),E=Math.min(E,N.y),A=Math.max(A,N.x+N.width),D=Math.max(D,N.y+N.height)))});const P=this.find("Shape");let U=!1;for(let H=0;H<P.length;H++)if(P[H]._isVisible(this)){U=!0;break}return U&&_!==void 0?C={x:_,y:E,width:A-_,height:D-E}:C={x:0,y:0,width:0,height:0},g?C:this._transformedRect(C,m)}};return lg.Container=a,i.Factory.addComponentsGetterSetter(a,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(a,"clipX",void 0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipY",void 0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipWidth",void 0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipHeight",void 0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipFunc"),lg}var T1={},Ju={},F2;function HS(){if(F2)return Ju;F2=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.getCapturedShape=a,Ju.createEvent=l,Ju.hasPointerCapture=c,Ju.setPointerCapture=h,Ju.releaseCapture=g;const i=ke(),t=new Map,e=i.Konva._global.PointerEvent!==void 0;function a(m){return t.get(m)}function l(m){return{evt:m,pointerId:m.pointerId}}function c(m,_){return t.get(m)===_}function h(m,_){g(m),_.getStage()&&(t.set(m,_),e&&_._fire("gotpointercapture",l(new PointerEvent("gotpointercapture"))))}function g(m,_){const E=t.get(m);if(!E)return;const A=E.getStage();A&&A.content,t.delete(m),e&&E._fire("lostpointercapture",l(new PointerEvent("lostpointercapture")))}return Ju}var j2;function h6(){return j2||(j2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const t=Ri(),e=qe(),a=ay(),l=ke(),c=iy(),h=D_(),g=ke(),m=HS(),_="Stage",E="string",A="px",D="mouseout",C="mouseleave",R="mouseover",P="mouseenter",U="mousemove",H="mousedown",N="mouseup",x="pointermove",L="pointerdown",F="pointerup",K="pointercancel",j="lostpointercapture",M="pointerout",I="pointerleave",V="pointerover",B="pointerenter",Y="contextmenu",b="touchstart",q="touchend",G="touchmove",X="touchcancel",et="wheel",st=5,pt=[[P,"_pointerenter"],[H,"_pointerdown"],[U,"_pointermove"],[N,"_pointerup"],[C,"_pointerleave"],[b,"_pointerdown"],[G,"_pointermove"],[q,"_pointerup"],[X,"_pointercancel"],[R,"_pointerover"],[et,"_wheel"],[Y,"_contextmenu"],[L,"_pointerdown"],[x,"_pointermove"],[F,"_pointerup"],[K,"_pointercancel"],[j,"_lostpointercapture"]],Q={mouse:{[M]:D,[I]:C,[V]:R,[B]:P,[x]:U,[L]:H,[F]:N,[K]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[M]:"touchout",[I]:"touchleave",[V]:"touchover",[B]:"touchenter",[x]:G,[L]:b,[F]:q,[K]:X,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[M]:M,[I]:I,[V]:V,[B]:B,[x]:x,[L]:L,[F]:F,[K]:K,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},rt=Vt=>Vt.indexOf("pointer")>=0?"pointer":Vt.indexOf("touch")>=0?"touch":"mouse",bt=Vt=>{const nt=rt(Vt);if(nt==="pointer")return l.Konva.pointerEventsEnabled&&Q.pointer;if(nt==="touch")return Q.touch;if(nt==="mouse")return Q.mouse};function lt(Vt={}){return(Vt.clipFunc||Vt.clipWidth||Vt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Vt}const dt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class Nt extends a.Container{constructor(nt){super(lt(nt)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{lt(this.attrs)}),this._checkVisibility()}_validateAdd(nt){const ht=nt.getType()==="Layer",Dt=nt.getType()==="FastLayer";ht||Dt||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const nt=this.visible()?"":"none";this.content.style.display=nt}setContainer(nt){if(typeof nt===E){if(nt.charAt(0)==="."){const Dt=nt.slice(1);nt=document.getElementsByClassName(Dt)[0]}else{var ht;nt.charAt(0)!=="#"?ht=nt:ht=nt.slice(1),nt=document.getElementById(ht)}if(!nt)throw"Can not find container in document with id "+ht}return this._setAttr("container",nt),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),nt.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const nt=this.children,ht=nt.length;for(let Dt=0;Dt<ht;Dt++)nt[Dt].clear();return this}clone(nt){return nt||(nt={}),nt.container=typeof document<"u"&&document.createElement("div"),a.Container.prototype.clone.call(this,nt)}destroy(){super.destroy();const nt=this.content;nt&&t.Util._isInDocument(nt)&&this.container().removeChild(nt);const ht=i.stages.indexOf(this);return ht>-1&&i.stages.splice(ht,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const nt=this._pointerPositions[0]||this._changedPointerPositions[0];return nt?{x:nt.x,y:nt.y}:(t.Util.warn(dt),null)}_getPointerById(nt){return this._pointerPositions.find(ht=>ht.id===nt)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(nt){nt=nt||{},nt.x=nt.x||0,nt.y=nt.y||0,nt.width=nt.width||this.width(),nt.height=nt.height||this.height();const ht=new c.SceneCanvas({width:nt.width,height:nt.height,pixelRatio:nt.pixelRatio||1}),Dt=ht.getContext()._context,It=this.children;return(nt.x||nt.y)&&Dt.translate(-1*nt.x,-1*nt.y),It.forEach(function(qt){if(!qt.isVisible())return;const Yt=qt._toKonvaCanvas(nt);Dt.drawImage(Yt._canvas,nt.x,nt.y,Yt.getWidth()/Yt.getPixelRatio(),Yt.getHeight()/Yt.getPixelRatio())}),ht}getIntersection(nt){if(!nt)return null;const ht=this.children,Dt=ht.length,It=Dt-1;for(let qt=It;qt>=0;qt--){const Yt=ht[qt].getIntersection(nt);if(Yt)return Yt}return null}_resizeDOM(){const nt=this.width(),ht=this.height();this.content&&(this.content.style.width=nt+A,this.content.style.height=ht+A),this.bufferCanvas.setSize(nt,ht),this.bufferHitCanvas.setSize(nt,ht),this.children.forEach(Dt=>{Dt.setSize({width:nt,height:ht}),Dt.draw()})}add(nt,...ht){if(arguments.length>1){for(let It=0;It<arguments.length;It++)this.add(arguments[It]);return this}super.add(nt);const Dt=this.children.length;return Dt>st&&t.Util.warn("The stage has "+Dt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),nt.setSize({width:this.width(),height:this.height()}),nt.draw(),l.Konva.isBrowser&&this.content.appendChild(nt.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(nt){return m.hasPointerCapture(nt,this)}setPointerCapture(nt){m.setPointerCapture(nt,this)}releaseCapture(nt){m.releaseCapture(nt,this)}getLayers(){return this.children}_bindContentEvents(){l.Konva.isBrowser&&pt.forEach(([nt,ht])=>{this.content.addEventListener(nt,Dt=>{this[ht](Dt)},{passive:!1})})}_pointerenter(nt){this.setPointersPositions(nt);const ht=bt(nt.type);ht&&this._fire(ht.pointerenter,{evt:nt,target:this,currentTarget:this})}_pointerover(nt){this.setPointersPositions(nt);const ht=bt(nt.type);ht&&this._fire(ht.pointerover,{evt:nt,target:this,currentTarget:this})}_getTargetShape(nt){let ht=this[nt+"targetShape"];return ht&&!ht.getStage()&&(ht=null),ht}_pointerleave(nt){const ht=bt(nt.type),Dt=rt(nt.type);if(!ht)return;this.setPointersPositions(nt);const It=this._getTargetShape(Dt),qt=!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled;It&&qt?(It._fireAndBubble(ht.pointerout,{evt:nt}),It._fireAndBubble(ht.pointerleave,{evt:nt}),this._fire(ht.pointerleave,{evt:nt,target:this,currentTarget:this}),this[Dt+"targetShape"]=null):qt&&(this._fire(ht.pointerleave,{evt:nt,target:this,currentTarget:this}),this._fire(ht.pointerout,{evt:nt,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(nt){const ht=bt(nt.type),Dt=rt(nt.type);if(!ht)return;this.setPointersPositions(nt);let It=!1;this._changedPointerPositions.forEach(qt=>{const Yt=this.getIntersection(qt);if(h.DD.justDragged=!1,l.Konva["_"+Dt+"ListenClick"]=!0,!Yt||!Yt.isListening()){this[Dt+"ClickStartShape"]=void 0;return}l.Konva.capturePointerEventsEnabled&&Yt.setPointerCapture(qt.id),this[Dt+"ClickStartShape"]=Yt,Yt._fireAndBubble(ht.pointerdown,{evt:nt,pointerId:qt.id}),It=!0;const ce=nt.type.indexOf("touch")>=0;Yt.preventDefault()&&nt.cancelable&&ce&&nt.preventDefault()}),It||this._fire(ht.pointerdown,{evt:nt,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(nt){const ht=bt(nt.type),Dt=rt(nt.type);if(!ht||(l.Konva.isDragging()&&h.DD.node.preventDefault()&&nt.cancelable&&nt.preventDefault(),this.setPointersPositions(nt),!(!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled)))return;const qt={};let Yt=!1;const ce=this._getTargetShape(Dt);this._changedPointerPositions.forEach(pe=>{const ae=m.getCapturedShape(pe.id)||this.getIntersection(pe),Ke=pe.id,ve={evt:nt,pointerId:Ke},Je=ce!==ae;if(Je&&ce&&(ce._fireAndBubble(ht.pointerout,{...ve},ae),ce._fireAndBubble(ht.pointerleave,{...ve},ae)),ae){if(qt[ae._id])return;qt[ae._id]=!0}ae&&ae.isListening()?(Yt=!0,Je&&(ae._fireAndBubble(ht.pointerover,{...ve},ce),ae._fireAndBubble(ht.pointerenter,{...ve},ce),this[Dt+"targetShape"]=ae),ae._fireAndBubble(ht.pointermove,{...ve})):ce&&(this._fire(ht.pointerover,{evt:nt,target:this,currentTarget:this,pointerId:Ke}),this[Dt+"targetShape"]=null)}),Yt||this._fire(ht.pointermove,{evt:nt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(nt){const ht=bt(nt.type),Dt=rt(nt.type);if(!ht)return;this.setPointersPositions(nt);const It=this[Dt+"ClickStartShape"],qt=this[Dt+"ClickEndShape"],Yt={};let ce=!1;this._changedPointerPositions.forEach(pe=>{const ae=m.getCapturedShape(pe.id)||this.getIntersection(pe);if(ae){if(ae.releaseCapture(pe.id),Yt[ae._id])return;Yt[ae._id]=!0}const Ke=pe.id,ve={evt:nt,pointerId:Ke};let Je=!1;l.Konva["_"+Dt+"InDblClickWindow"]?(Je=!0,clearTimeout(this[Dt+"DblTimeout"])):h.DD.justDragged||(l.Konva["_"+Dt+"InDblClickWindow"]=!0,clearTimeout(this[Dt+"DblTimeout"])),this[Dt+"DblTimeout"]=setTimeout(function(){l.Konva["_"+Dt+"InDblClickWindow"]=!1},l.Konva.dblClickWindow),ae&&ae.isListening()?(ce=!0,this[Dt+"ClickEndShape"]=ae,ae._fireAndBubble(ht.pointerup,{...ve}),l.Konva["_"+Dt+"ListenClick"]&&It&&It===ae&&(ae._fireAndBubble(ht.pointerclick,{...ve}),Je&&qt&&qt===ae&&ae._fireAndBubble(ht.pointerdblclick,{...ve}))):(this[Dt+"ClickEndShape"]=null,l.Konva["_"+Dt+"ListenClick"]&&this._fire(ht.pointerclick,{evt:nt,target:this,currentTarget:this,pointerId:Ke}),Je&&this._fire(ht.pointerdblclick,{evt:nt,target:this,currentTarget:this,pointerId:Ke}))}),ce||this._fire(ht.pointerup,{evt:nt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva["_"+Dt+"ListenClick"]=!1,nt.cancelable&&Dt!=="touch"&&Dt!=="pointer"&&nt.preventDefault()}_contextmenu(nt){this.setPointersPositions(nt);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble(Y,{evt:nt}):this._fire(Y,{evt:nt,target:this,currentTarget:this})}_wheel(nt){this.setPointersPositions(nt);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble(et,{evt:nt}):this._fire(et,{evt:nt,target:this,currentTarget:this})}_pointercancel(nt){this.setPointersPositions(nt);const ht=m.getCapturedShape(nt.pointerId)||this.getIntersection(this.getPointerPosition());ht&&ht._fireAndBubble(F,m.createEvent(nt)),m.releaseCapture(nt.pointerId)}_lostpointercapture(nt){m.releaseCapture(nt.pointerId)}setPointersPositions(nt){const ht=this._getContentPosition();let Dt=null,It=null;nt=nt||window.event,nt.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(nt.touches,qt=>{this._pointerPositions.push({id:qt.identifier,x:(qt.clientX-ht.left)/ht.scaleX,y:(qt.clientY-ht.top)/ht.scaleY})}),Array.prototype.forEach.call(nt.changedTouches||nt.touches,qt=>{this._changedPointerPositions.push({id:qt.identifier,x:(qt.clientX-ht.left)/ht.scaleX,y:(qt.clientY-ht.top)/ht.scaleY})})):(Dt=(nt.clientX-ht.left)/ht.scaleX,It=(nt.clientY-ht.top)/ht.scaleY,this.pointerPos={x:Dt,y:It},this._pointerPositions=[{x:Dt,y:It,id:t.Util._getFirstPointerId(nt)}],this._changedPointerPositions=[{x:Dt,y:It,id:t.Util._getFirstPointerId(nt)}])}_setPointerPosition(nt){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(nt)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const nt=this.content.getBoundingClientRect();return{top:nt.top,left:nt.left,scaleX:nt.width/this.content.clientWidth||1,scaleY:nt.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!l.Konva.isBrowser)return;const nt=this.container();if(!nt)throw"Stage has no container. A container is required.";nt.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),nt.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(nt){nt.batchDraw()}),this}}i.Stage=Nt,Nt.prototype.nodeType=_,(0,g._registerNode)(Nt),e.Factory.addGetterSetter(Nt,"container"),l.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(Vt=>{Vt.batchDraw()})})}(T1)),T1}var og={},b1={},H2;function pa(){return H2||(H2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const t=ke(),e=Ri(),a=qe(),l=Ii(),c=We(),h=ke(),g=HS(),m="hasShadow",_="shadowRGBA",E="patternImage",A="linearGradient",D="radialGradient";let C;function R(){return C||(C=e.Util.createCanvasElement().getContext("2d"),C)}i.shapes={};function P(I){const V=this.attrs.fillRule;V?I.fill(V):I.fill()}function U(I){I.stroke()}function H(I){const V=this.attrs.fillRule;V?I.fill(V):I.fill()}function N(I){I.stroke()}function x(){this._clearCache(m)}function L(){this._clearCache(_)}function F(){this._clearCache(E)}function K(){this._clearCache(A)}function j(){this._clearCache(D)}class M extends l.Node{constructor(V){super(V);let B;for(;B=e.Util.getRandomColor(),!(B&&!(B in i.shapes)););this.colorKey=B,i.shapes[B]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(m,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(E,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const B=R().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(B&&B.setTransform){const Y=new e.Transform;Y.translate(this.fillPatternX(),this.fillPatternY()),Y.rotate(t.Konva.getAngle(this.fillPatternRotation())),Y.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Y.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const b=Y.getMatrix(),q=typeof DOMMatrix>"u"?{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}:new DOMMatrix(b);B.setTransform(q)}return B}}_getLinearGradient(){return this._getCache(A,this.__getLinearGradient)}__getLinearGradient(){const V=this.fillLinearGradientColorStops();if(V){const B=R(),Y=this.fillLinearGradientStartPoint(),b=this.fillLinearGradientEndPoint(),q=B.createLinearGradient(Y.x,Y.y,b.x,b.y);for(let G=0;G<V.length;G+=2)q.addColorStop(V[G],V[G+1]);return q}}_getRadialGradient(){return this._getCache(D,this.__getRadialGradient)}__getRadialGradient(){const V=this.fillRadialGradientColorStops();if(V){const B=R(),Y=this.fillRadialGradientStartPoint(),b=this.fillRadialGradientEndPoint(),q=B.createRadialGradient(Y.x,Y.y,this.fillRadialGradientStartRadius(),b.x,b.y,this.fillRadialGradientEndRadius());for(let G=0;G<V.length;G+=2)q.addColorStop(V[G],V[G+1]);return q}}getShadowRGBA(){return this._getCache(_,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const V=e.Util.colorToRGBA(this.shadowColor());if(V)return"rgba("+V.r+","+V.g+","+V.b+","+V.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const V=this.hitStrokeWidth();return V==="auto"?this.hasStroke():this.strokeEnabled()&&!!V}intersects(V){const B=this.getStage();if(!B)return!1;const Y=B.bufferHitCanvas;return Y.getContext().clear(),this.drawHit(Y,void 0,!0),Y.context.getImageData(Math.round(V.x),Math.round(V.y),1,1).data[3]>0}destroy(){return l.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(V){var B;if(!((B=this.attrs.perfectDrawEnabled)!==null&&B!==void 0?B:!0))return!1;const b=V||this.hasFill(),q=this.hasStroke(),G=this.getAbsoluteOpacity()!==1;if(b&&q&&G)return!0;const X=this.hasShadow(),et=this.shadowForStrokeEnabled();return!!(b&&q&&X&&et)}setStrokeHitEnabled(V){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),V?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const V=this.size();return{x:this._centroid?-V.width/2:0,y:this._centroid?-V.height/2:0,width:V.width,height:V.height}}getClientRect(V={}){let B=!1,Y=this.getParent();for(;Y;){if(Y.isCached()){B=!0;break}Y=Y.getParent()}const b=V.skipTransform,q=V.relativeTo||B&&this.getStage()||void 0,G=this.getSelfRect(),et=!V.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,st=G.width+et,pt=G.height+et,Q=!V.skipShadow&&this.hasShadow(),rt=Q?this.shadowOffsetX():0,bt=Q?this.shadowOffsetY():0,lt=st+Math.abs(rt),dt=pt+Math.abs(bt),Nt=Q&&this.shadowBlur()||0,Vt=lt+Nt*2,nt=dt+Nt*2,ht={width:Vt,height:nt,x:-(et/2+Nt)+Math.min(rt,0)+G.x,y:-(et/2+Nt)+Math.min(bt,0)+G.y};return b?ht:this._transformedRect(ht,q)}drawScene(V,B,Y){const b=this.getLayer();let q=V||b.getCanvas(),G=q.getContext(),X=this._getCanvasCache(),et=this.getSceneFunc(),st=this.hasShadow(),pt,Q;const rt=q.isCache,bt=B===this;if(!this.isVisible()&&!bt)return this;if(X){G.save();const dt=this.getAbsoluteTransform(B).getMatrix();return G.transform(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!et)return this;if(G.save(),this._useBufferCanvas()&&!rt){pt=this.getStage();const dt=Y||pt.bufferCanvas;Q=dt.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var lt=this.getAbsoluteTransform(B).getMatrix();Q.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),et.call(this,Q,this),Q.restore();const Nt=dt.pixelRatio;st&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(dt._canvas,0,0,dt.width/Nt,dt.height/Nt)}else{if(G._applyLineJoin(this),!bt){var lt=this.getAbsoluteTransform(B).getMatrix();G.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}st&&G._applyShadow(this),et.call(this,G,this)}return G.restore(),this}drawHit(V,B,Y=!1){if(!this.shouldDrawHit(B,Y))return this;const b=this.getLayer(),q=V||b.hitCanvas,G=q&&q.getContext(),X=this.hitFunc()||this.sceneFunc(),et=this._getCanvasCache(),st=et&&et.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),st){G.save();const Q=this.getAbsoluteTransform(B).getMatrix();return G.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!X)return this;if(G.save(),G._applyLineJoin(this),!(this===B)){const Q=this.getAbsoluteTransform(B).getMatrix();G.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return X.call(this,G,this),G.restore(),this}drawHitFromCache(V=0){const B=this._getCanvasCache(),Y=this._getCachedSceneCanvas(),b=B.hit,q=b.getContext(),G=b.getWidth(),X=b.getHeight();q.clear(),q.drawImage(Y._canvas,0,0,G,X);try{const et=q.getImageData(0,0,G,X),st=et.data,pt=st.length,Q=e.Util._hexToRgb(this.colorKey);for(let rt=0;rt<pt;rt+=4)st[rt+3]>V?(st[rt]=Q.r,st[rt+1]=Q.g,st[rt+2]=Q.b,st[rt+3]=255):st[rt+3]=0;q.putImageData(et,0,0)}catch(et){e.Util.error("Unable to draw hit graph from cached scene canvas. "+et.message)}return this}hasPointerCapture(V){return g.hasPointerCapture(V,this)}setPointerCapture(V){g.setPointerCapture(V,this)}releaseCapture(V){g.releaseCapture(V,this)}}i.Shape=M,M.prototype._fillFunc=P,M.prototype._strokeFunc=U,M.prototype._fillFuncHit=H,M.prototype._strokeFuncHit=N,M.prototype._centroid=!1,M.prototype.nodeType="Shape",(0,h._registerNode)(M),M.prototype.eventListeners={},M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",L),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",F),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",K),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",j),a.Factory.addGetterSetter(M,"stroke",void 0,(0,c.getStringOrGradientValidator)()),a.Factory.addGetterSetter(M,"strokeWidth",2,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(M,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(M,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),a.Factory.addGetterSetter(M,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),a.Factory.addGetterSetter(M,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),a.Factory.addGetterSetter(M,"lineJoin"),a.Factory.addGetterSetter(M,"lineCap"),a.Factory.addGetterSetter(M,"sceneFunc"),a.Factory.addGetterSetter(M,"hitFunc"),a.Factory.addGetterSetter(M,"dash"),a.Factory.addGetterSetter(M,"dashOffset",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"shadowColor",void 0,(0,c.getStringValidator)()),a.Factory.addGetterSetter(M,"shadowBlur",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"shadowOpacity",1,(0,c.getNumberValidator)()),a.Factory.addComponentsGetterSetter(M,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(M,"shadowOffsetX",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"shadowOffsetY",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillPatternImage"),a.Factory.addGetterSetter(M,"fill",void 0,(0,c.getStringOrGradientValidator)()),a.Factory.addGetterSetter(M,"fillPatternX",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillPatternY",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(M,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(M,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(M,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(M,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(M,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(M,"fillEnabled",!0),a.Factory.addGetterSetter(M,"strokeEnabled",!0),a.Factory.addGetterSetter(M,"shadowEnabled",!0),a.Factory.addGetterSetter(M,"dashEnabled",!0),a.Factory.addGetterSetter(M,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(M,"fillPriority","color"),a.Factory.addComponentsGetterSetter(M,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(M,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),a.Factory.addComponentsGetterSetter(M,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(M,"fillPatternScaleX",1,(0,c.getNumberValidator)()),a.Factory.addGetterSetter(M,"fillPatternScaleY",1,(0,c.getNumberValidator)()),a.Factory.addComponentsGetterSetter(M,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(M,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(M,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(M,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(M,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(M,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(M,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(M,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(M,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(M,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(M,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(M,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(M,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(M,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(M,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(M,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(M,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(M,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(M,"fillPatternRotation",0),a.Factory.addGetterSetter(M,"fillRule",void 0,(0,c.getStringValidator)()),a.Factory.backCompat(M,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(b1)),b1}var q2;function qS(){if(q2)return og;q2=1,Object.defineProperty(og,"__esModule",{value:!0}),og.Layer=void 0;const i=Ri(),t=ay(),e=Ii(),a=qe(),l=iy(),c=We(),h=pa(),g=ke(),m="#",_="beforeDraw",E="draw",A=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],D=A.length;class C extends t.Container{constructor(P){super(P),this.canvas=new l.SceneCanvas,this.hitCanvas=new l.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(P){return this.getContext().clear(P),this.getHitCanvas().getContext().clear(P),this}setZIndex(P){super.setZIndex(P);const U=this.getStage();return U&&U.content&&(U.content.removeChild(this.getNativeCanvasElement()),P<U.children.length-1?U.content.insertBefore(this.getNativeCanvasElement(),U.children[P+1].getCanvas()._canvas):U.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){e.Node.prototype.moveToTop.call(this);const P=this.getStage();return P&&P.content&&(P.content.removeChild(this.getNativeCanvasElement()),P.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!e.Node.prototype.moveUp.call(this))return!1;const U=this.getStage();return!U||!U.content?!1:(U.content.removeChild(this.getNativeCanvasElement()),this.index<U.children.length-1?U.content.insertBefore(this.getNativeCanvasElement(),U.children[this.index+1].getCanvas()._canvas):U.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(e.Node.prototype.moveDown.call(this)){const P=this.getStage();if(P){const U=P.children;P.content&&(P.content.removeChild(this.getNativeCanvasElement()),P.content.insertBefore(this.getNativeCanvasElement(),U[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(e.Node.prototype.moveToBottom.call(this)){const P=this.getStage();if(P){const U=P.children;P.content&&(P.content.removeChild(this.getNativeCanvasElement()),P.content.insertBefore(this.getNativeCanvasElement(),U[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const P=this.getNativeCanvasElement();return e.Node.prototype.remove.call(this),P&&P.parentNode&&i.Util._isInDocument(P)&&P.parentNode.removeChild(P),this}getStage(){return this.parent}setSize({width:P,height:U}){return this.canvas.setSize(P,U),this.hitCanvas.setSize(P,U),this._setSmoothEnabled(),this}_validateAdd(P){const U=P.getType();U!=="Group"&&U!=="Shape"&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(P){return P=P||{},P.width=P.width||this.getWidth(),P.height=P.height||this.getHeight(),P.x=P.x!==void 0?P.x:this.x(),P.y=P.y!==void 0?P.y:this.y(),e.Node.prototype._toKonvaCanvas.call(this,P)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(P){if(!this.isListening()||!this.isVisible())return null;let U=1,H=!1;for(;;){for(let N=0;N<D;N++){const x=A[N],L=this._getIntersection({x:P.x+x.x*U,y:P.y+x.y*U}),F=L.shape;if(F)return F;if(H=!!L.antialiased,!L.antialiased)break}if(H)U+=1;else return null}}_getIntersection(P){const U=this.hitCanvas.pixelRatio,H=this.hitCanvas.context.getImageData(Math.round(P.x*U),Math.round(P.y*U),1,1).data,N=H[3];if(N===255){const x=i.Util._rgbToHex(H[0],H[1],H[2]),L=h.shapes[m+x];return L?{shape:L}:{antialiased:!0}}else if(N>0)return{antialiased:!0};return{}}drawScene(P,U){const H=this.getLayer(),N=P||H&&H.getCanvas();return this._fire(_,{node:this}),this.clearBeforeDraw()&&N.getContext().clear(),t.Container.prototype.drawScene.call(this,N,U),this._fire(E,{node:this}),this}drawHit(P,U){const H=this.getLayer(),N=P||H&&H.hitCanvas;return H&&H.clearBeforeDraw()&&H.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,N,U),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(P){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(P)}getHitGraphEnabled(P){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const P=this.parent;!!this.hitCanvas._canvas.parentNode?P.content.removeChild(this.hitCanvas._canvas):P.content.appendChild(this.hitCanvas._canvas)}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return og.Layer=C,C.prototype.nodeType="Layer",(0,g._registerNode)(C),a.Factory.addGetterSetter(C,"imageSmoothingEnabled",!0),a.Factory.addGetterSetter(C,"clearBeforeDraw",!0),a.Factory.addGetterSetter(C,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),og}var ug={},K2;function f6(){if(K2)return ug;K2=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.FastLayer=void 0;const i=Ri(),t=qS(),e=ke();let a=class extends t.Layer{constructor(c){super(c),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return ug.FastLayer=a,a.prototype.nodeType="FastLayer",(0,e._registerNode)(a),ug}var cg={},Y2;function I_(){if(Y2)return cg;Y2=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.Group=void 0;const i=Ri(),t=ay(),e=ke();class a extends t.Container{_validateAdd(c){const h=c.getType();h!=="Group"&&h!=="Shape"&&i.Util.throw("You may only add groups and shapes to groups.")}}return cg.Group=a,a.prototype.nodeType="Group",(0,e._registerNode)(a),cg}var hg={},Q2;function O_(){if(Q2)return hg;Q2=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.Animation=void 0;const i=ke(),t=Ri(),e=function(){return i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()}}();let a=class Nf{constructor(c,h){this.id=Nf.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=c,this.setLayers(h)}setLayers(c){let h=[];return c&&(h=Array.isArray(c)?c:[c]),this.layers=h,this}getLayers(){return this.layers}addLayer(c){const h=this.layers,g=h.length;for(let m=0;m<g;m++)if(h[m]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const h=Nf.animations,g=h.length;for(let m=0;m<g;m++)if(h[m].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),Nf._addAnimation(this),this}stop(){return Nf._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const h=c.id,g=this.animations,m=g.length;for(let _=0;_<m;_++)if(g[_].id===h){this.animations.splice(_,1);break}}static _runFrames(){const c={},h=this.animations;for(let g=0;g<h.length;g++){const m=h[g],_=m.layers,E=m.func;m._updateFrameObject(e());const A=_.length;let D;if(E?D=E.call(m,m.frame)!==!1:D=!0,!!D)for(let C=0;C<A;C++){const R=_[C];R._id!==void 0&&(c[R._id]=R)}}for(const g in c)c.hasOwnProperty(g)&&c[g].batchDraw()}static _animationLoop(){const c=Nf;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return hg.Animation=a,a.animations=[],a.animIdCounter=0,a.animRunning=!1,hg}var A1={},X2;function d6(){return X2||(X2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const t=Ri(),e=O_(),a=Ii(),l=ke(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=1,g=2,m=3,_=["fill","stroke","shadowColor"];let E=0;class A{constructor(R,P,U,H,N,x,L){this.prop=R,this.propFunc=P,this.begin=H,this._pos=H,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=L,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=U,this._change=N-this.begin,this.pause()}fire(R){const P=this[R];P&&P()}setTime(R){R>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():R<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=R,this.update())}getTime(){return this._time}setPosition(R){this.prevPos=this._pos,this.propFunc(R),this._pos=R}getPosition(R){return R===void 0&&(R=this._time),this.func(R,this.begin,this._change,this.duration)}play(){this.state=g,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=m,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(R){this.pause(),this._time=R,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const R=this.getTimer()-this._startTime;this.state===g?this.setTime(R):this.state===m&&this.setTime(this.duration-R)}pause(){this.state=h,this.fire("onPause")}getTimer(){return new Date().getTime()}}class D{constructor(R){const P=this,U=R.node,H=U._id,N=R.easing||i.Easings.Linear,x=!!R.yoyo;let L,F;typeof R.duration>"u"?L=.3:R.duration===0?L=.001:L=R.duration,this.node=U,this._id=E++;const K=U.getLayer()||(U instanceof l.Konva.Stage?U.getLayers():null);K||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){P.tween.onEnterFrame()},K),this.tween=new A(F,function(j){P._tweenFunc(j)},N,0,1,L*1e3,x),this._addListeners(),D.attrs[H]||(D.attrs[H]={}),D.attrs[H][this._id]||(D.attrs[H][this._id]={}),D.tweens[H]||(D.tweens[H]={});for(F in R)c[F]===void 0&&this._addAttr(F,R[F]);this.reset(),this.onFinish=R.onFinish,this.onReset=R.onReset,this.onUpdate=R.onUpdate}_addAttr(R,P){const U=this.node,H=U._id;let N,x,L,F,K;const j=D.tweens[H][R];j&&delete D.attrs[H][j][R];let M=U.getAttr(R);if(t.Util._isArray(P))if(N=[],x=Math.max(P.length,M.length),R==="points"&&P.length!==M.length&&(P.length>M.length?(F=M,M=t.Util._prepareArrayForTween(M,P,U.closed())):(L=P,P=t.Util._prepareArrayForTween(P,M,U.closed()))),R.indexOf("fill")===0)for(let I=0;I<x;I++)if(I%2===0)N.push(P[I]-M[I]);else{const V=t.Util.colorToRGBA(M[I]);K=t.Util.colorToRGBA(P[I]),M[I]=V,N.push({r:K.r-V.r,g:K.g-V.g,b:K.b-V.b,a:K.a-V.a})}else for(let I=0;I<x;I++)N.push(P[I]-M[I]);else _.indexOf(R)!==-1?(M=t.Util.colorToRGBA(M),K=t.Util.colorToRGBA(P),N={r:K.r-M.r,g:K.g-M.g,b:K.b-M.b,a:K.a-M.a}):N=P-M;D.attrs[H][this._id][R]={start:M,diff:N,end:P,trueEnd:L,trueStart:F},D.tweens[H][R]=this._id}_tweenFunc(R){const P=this.node,U=D.attrs[P._id][this._id];let H,N,x,L,F,K,j,M;for(H in U){if(N=U[H],x=N.start,L=N.diff,M=N.end,t.Util._isArray(x))if(F=[],j=Math.max(x.length,M.length),H.indexOf("fill")===0)for(K=0;K<j;K++)K%2===0?F.push((x[K]||0)+L[K]*R):F.push("rgba("+Math.round(x[K].r+L[K].r*R)+","+Math.round(x[K].g+L[K].g*R)+","+Math.round(x[K].b+L[K].b*R)+","+(x[K].a+L[K].a*R)+")");else for(K=0;K<j;K++)F.push((x[K]||0)+L[K]*R);else _.indexOf(H)!==-1?F="rgba("+Math.round(x.r+L.r*R)+","+Math.round(x.g+L.g*R)+","+Math.round(x.b+L.b*R)+","+(x.a+L.a*R)+")":F=x+L*R;P.setAttr(H,F)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const R=this.node,P=D.attrs[R._id][this._id];P.points&&P.points.trueEnd&&R.setAttr("points",P.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const R=this.node,P=D.attrs[R._id][this._id];P.points&&P.points.trueStart&&R.points(P.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(R){return this.tween.seek(R*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const R=this.node._id,P=this._id,U=D.tweens[R];this.pause();for(const H in U)delete D.tweens[R][H];delete D.attrs[R][P]}}i.Tween=D,D.attrs={},D.tweens={},a.Node.prototype.to=function(C){const R=C.onFinish;C.node=this,C.onFinish=function(){this.destroy(),R&&R()},new D(C).play()},i.Easings={BackEaseIn(C,R,P,U){return P*(C/=U)*C*((1.70158+1)*C-1.70158)+R},BackEaseOut(C,R,P,U){return P*((C=C/U-1)*C*((1.70158+1)*C+1.70158)+1)+R},BackEaseInOut(C,R,P,U){let H=1.70158;return(C/=U/2)<1?P/2*(C*C*(((H*=1.525)+1)*C-H))+R:P/2*((C-=2)*C*(((H*=1.525)+1)*C+H)+2)+R},ElasticEaseIn(C,R,P,U,H,N){let x=0;return C===0?R:(C/=U)===1?R+P:(N||(N=U*.3),!H||H<Math.abs(P)?(H=P,x=N/4):x=N/(2*Math.PI)*Math.asin(P/H),-(H*Math.pow(2,10*(C-=1))*Math.sin((C*U-x)*(2*Math.PI)/N))+R)},ElasticEaseOut(C,R,P,U,H,N){let x=0;return C===0?R:(C/=U)===1?R+P:(N||(N=U*.3),!H||H<Math.abs(P)?(H=P,x=N/4):x=N/(2*Math.PI)*Math.asin(P/H),H*Math.pow(2,-10*C)*Math.sin((C*U-x)*(2*Math.PI)/N)+P+R)},ElasticEaseInOut(C,R,P,U,H,N){let x=0;return C===0?R:(C/=U/2)===2?R+P:(N||(N=U*(.3*1.5)),!H||H<Math.abs(P)?(H=P,x=N/4):x=N/(2*Math.PI)*Math.asin(P/H),C<1?-.5*(H*Math.pow(2,10*(C-=1))*Math.sin((C*U-x)*(2*Math.PI)/N))+R:H*Math.pow(2,-10*(C-=1))*Math.sin((C*U-x)*(2*Math.PI)/N)*.5+P+R)},BounceEaseOut(C,R,P,U){return(C/=U)<1/2.75?P*(7.5625*C*C)+R:C<2/2.75?P*(7.5625*(C-=1.5/2.75)*C+.75)+R:C<2.5/2.75?P*(7.5625*(C-=2.25/2.75)*C+.9375)+R:P*(7.5625*(C-=2.625/2.75)*C+.984375)+R},BounceEaseIn(C,R,P,U){return P-i.Easings.BounceEaseOut(U-C,0,P,U)+R},BounceEaseInOut(C,R,P,U){return C<U/2?i.Easings.BounceEaseIn(C*2,0,P,U)*.5+R:i.Easings.BounceEaseOut(C*2-U,0,P,U)*.5+P*.5+R},EaseIn(C,R,P,U){return P*(C/=U)*C+R},EaseOut(C,R,P,U){return-P*(C/=U)*(C-2)+R},EaseInOut(C,R,P,U){return(C/=U/2)<1?P/2*C*C+R:-P/2*(--C*(C-2)-1)+R},StrongEaseIn(C,R,P,U){return P*(C/=U)*C*C*C*C+R},StrongEaseOut(C,R,P,U){return P*((C=C/U-1)*C*C*C*C+1)+R},StrongEaseInOut(C,R,P,U){return(C/=U/2)<1?P/2*C*C*C*C*C+R:P/2*((C-=2)*C*C*C*C+2)+R},Linear(C,R,P,U){return P*C/U+R}}}(A1)),A1}var Z2;function K1(){return Z2||(Z2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const t=ke(),e=Ri(),a=Ii(),l=ay(),c=h6(),h=qS(),g=f6(),m=I_(),_=D_(),E=pa(),A=O_(),D=d6(),C=jS(),R=iy();i.Konva=e.Util._assign(t.Konva,{Util:e.Util,Transform:e.Transform,Node:a.Node,Container:l.Container,Stage:c.Stage,stages:c.stages,Layer:h.Layer,FastLayer:g.FastLayer,Group:m.Group,DD:_.DD,Shape:E.Shape,shapes:E.shapes,Animation:A.Animation,Tween:D.Tween,Easings:D.Easings,Context:C.Context,Canvas:R.Canvas}),i.default=i.Konva}(y1)),y1}var fg={},W2;function g6(){if(W2)return fg;W2=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.Arc=void 0;const i=qe(),t=pa(),e=ke(),a=We(),l=ke();class c extends t.Shape{_sceneFunc(g){const m=e.Konva.getAngle(this.angle()),_=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,m,_),g.arc(0,0,this.innerRadius(),m,0,!_),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),m=this.outerRadius(),_=this.clockwise(),E=e.Konva.getAngle(_?360-this.angle():this.angle()),A=Math.cos(Math.min(E,Math.PI)),D=1,C=Math.sin(Math.min(Math.max(Math.PI,E),3*Math.PI/2)),R=Math.sin(Math.min(E,Math.PI/2)),P=A*(A>0?g:m),U=D*m,H=C*(C>0?g:m),N=R*(R>0?m:g);return{x:P,y:_?-1*N:H,width:U-P,height:N-H}}}return fg.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,l._registerNode)(c),i.Factory.addGetterSetter(c,"innerRadius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"outerRadius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"angle",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"clockwise",!1,(0,a.getBooleanValidator)()),fg}var dg={},gg={},J2;function KS(){if(J2)return gg;J2=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.Line=void 0;const i=qe(),t=ke(),e=pa(),a=We();function l(g,m,_,E,A,D,C){const R=Math.sqrt(Math.pow(_-g,2)+Math.pow(E-m,2)),P=Math.sqrt(Math.pow(A-_,2)+Math.pow(D-E,2)),U=C*R/(R+P),H=C*P/(R+P),N=_-U*(A-g),x=E-U*(D-m),L=_+H*(A-g),F=E+H*(D-m);return[N,x,L,F]}function c(g,m){const _=g.length,E=[];for(let A=2;A<_-2;A+=2){const D=l(g[A-2],g[A-1],g[A],g[A+1],g[A+2],g[A+3],m);isNaN(D[0])||(E.push(D[0]),E.push(D[1]),E.push(g[A]),E.push(g[A+1]),E.push(D[2]),E.push(D[3]))}return E}class h extends e.Shape{constructor(m){super(m),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(m){let _=this.points(),E=_.length,A=this.tension(),D=this.closed(),C=this.bezier(),R,P,U;if(E){if(m.beginPath(),m.moveTo(_[0],_[1]),A!==0&&E>4){for(R=this.getTensionPoints(),P=R.length,U=D?0:4,D||m.quadraticCurveTo(R[0],R[1],R[2],R[3]);U<P-2;)m.bezierCurveTo(R[U++],R[U++],R[U++],R[U++],R[U++],R[U++]);D||m.quadraticCurveTo(R[P-2],R[P-1],_[E-2],_[E-1])}else if(C)for(U=2;U<E;)m.bezierCurveTo(_[U++],_[U++],_[U++],_[U++],_[U++],_[U++]);else for(U=2;U<E;U+=2)m.lineTo(_[U],_[U+1]);D?(m.closePath(),m.fillStrokeShape(this)):m.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const m=this.points(),_=m.length,E=this.tension(),A=l(m[_-2],m[_-1],m[0],m[1],m[2],m[3],E),D=l(m[_-4],m[_-3],m[_-2],m[_-1],m[0],m[1],E),C=c(m,E);return[A[2],A[3]].concat(C).concat([D[0],D[1],m[_-2],m[_-1],D[2],D[3],A[0],A[1],m[0],m[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let m=this.points();if(m.length<4)return{x:m[0]||0,y:m[1]||0,width:0,height:0};this.tension()!==0?m=[m[0],m[1],...this._getTensionPoints(),m[m.length-2],m[m.length-1]]:m=this.points();let _=m[0],E=m[0],A=m[1],D=m[1],C,R;for(let P=0;P<m.length/2;P++)C=m[P*2],R=m[P*2+1],_=Math.min(_,C),E=Math.max(E,C),A=Math.min(A,R),D=Math.max(D,R);return{x:_,y:A,width:E-_,height:D-A}}}return gg.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(h),i.Factory.addGetterSetter(h,"closed",!1),i.Factory.addGetterSetter(h,"bezier",!1),i.Factory.addGetterSetter(h,"tension",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(h,"points",[],(0,a.getNumberArrayValidator)()),gg}var mg={},C1={},$2;function m6(){return $2||($2=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(h,g,m)=>{let _,E;const D=m/2;_=0;for(let C=0;C<20;C++)E=D*i.tValues[20][C]+D,_+=i.cValues[20][C]*a(h,g,E);return D*_};i.getCubicArcLength=t;const e=(h,g,m)=>{m===void 0&&(m=1);const _=h[0]-2*h[1]+h[2],E=g[0]-2*g[1]+g[2],A=2*h[1]-2*h[0],D=2*g[1]-2*g[0],C=4*(_*_+E*E),R=4*(_*A+E*D),P=A*A+D*D;if(C===0)return m*Math.sqrt(Math.pow(h[2]-h[0],2)+Math.pow(g[2]-g[0],2));const U=R/(2*C),H=P/C,N=m+U,x=H-U*U,L=N*N+x>0?Math.sqrt(N*N+x):0,F=U*U+x>0?Math.sqrt(U*U+x):0,K=U+Math.sqrt(U*U+x)!==0?x*Math.log(Math.abs((N+L)/(U+F))):0;return Math.sqrt(C)/2*(N*L-U*F+K)};i.getQuadraticArcLength=e;function a(h,g,m){const _=l(1,m,h),E=l(1,m,g),A=_*_+E*E;return Math.sqrt(A)}const l=(h,g,m)=>{const _=m.length-1;let E,A;if(_===0)return 0;if(h===0){A=0;for(let D=0;D<=_;D++)A+=i.binomialCoefficients[_][D]*Math.pow(1-g,_-D)*Math.pow(g,D)*m[D];return A}else{E=new Array(_);for(let D=0;D<_;D++)E[D]=_*(m[D+1]-m[D]);return l(h-1,g,E)}},c=(h,g,m)=>{let _=1,E=h/g,A=(h-m(E))/g,D=0;for(;_>.001;){const C=m(E+A),R=Math.abs(h-C)/g;if(R<_)_=R,E+=A;else{const P=m(E-A),U=Math.abs(h-P)/g;U<_?(_=U,E-=A):A/=2}if(D++,D>500)break}return E};i.t2length=c}(C1)),C1}var tE;function M_(){if(tE)return mg;tE=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Path=void 0;const i=qe(),t=pa(),e=ke(),a=m6();let l=class jr extends t.Shape{constructor(h){super(h),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jr.parsePathData(this.data()),this.pathLength=jr.getPathLength(this.dataArray)}_sceneFunc(h){const g=this.dataArray;h.beginPath();let m=!1;for(let L=0;L<g.length;L++){const F=g[L].command,K=g[L].points;switch(F){case"L":h.lineTo(K[0],K[1]);break;case"M":h.moveTo(K[0],K[1]);break;case"C":h.bezierCurveTo(K[0],K[1],K[2],K[3],K[4],K[5]);break;case"Q":h.quadraticCurveTo(K[0],K[1],K[2],K[3]);break;case"A":var _=K[0],E=K[1],A=K[2],D=K[3],C=K[4],R=K[5],P=K[6],U=K[7],H=A>D?A:D,N=A>D?1:A/D,x=A>D?D/A:1;h.translate(_,E),h.rotate(P),h.scale(N,x),h.arc(0,0,H,C,C+R,1-U),h.scale(1/N,1/x),h.rotate(-P),h.translate(-_,-E);break;case"z":m=!0,h.closePath();break}}!m&&!this.hasFill()?h.strokeShape(this):h.fillStrokeShape(this)}getSelfRect(){let h=[];this.dataArray.forEach(function(C){if(C.command==="A"){const R=C.points[4],P=C.points[5],U=C.points[4]+P;let H=Math.PI/180;if(Math.abs(R-U)<H&&(H=Math.abs(R-U)),P<0)for(let N=R-H;N>U;N-=H){const x=jr.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],N,0);h.push(x.x,x.y)}else for(let N=R+H;N<U;N+=H){const x=jr.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],N,0);h.push(x.x,x.y)}}else if(C.command==="C")for(let R=0;R<=1;R+=.01){const P=jr.getPointOnCubicBezier(R,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);h.push(P.x,P.y)}else h=h.concat(C.points)});let g=h[0],m=h[0],_=h[1],E=h[1],A,D;for(let C=0;C<h.length/2;C++)A=h[C*2],D=h[C*2+1],isNaN(A)||(g=Math.min(g,A),m=Math.max(m,A)),isNaN(D)||(_=Math.min(_,D),E=Math.max(E,D));return{x:g,y:_,width:m-g,height:E-_}}getLength(){return this.pathLength}getPointAtLength(h){return jr.getPointAtLengthOfDataArray(h,this.dataArray)}static getLineLength(h,g,m,_){return Math.sqrt((m-h)*(m-h)+(_-g)*(_-g))}static getPathLength(h){let g=0;for(let m=0;m<h.length;++m)g+=h[m].pathLength;return g}static getPointAtLengthOfDataArray(h,g){let m,_=0,E=g.length;if(!E)return null;for(;_<E&&h>g[_].pathLength;)h-=g[_].pathLength,++_;if(_===E)return m=g[_-1].points.slice(-2),{x:m[0],y:m[1]};if(h<.01)return m=g[_].points.slice(0,2),{x:m[0],y:m[1]};const A=g[_],D=A.points;switch(A.command){case"L":return jr.getPointOnLine(h,A.start.x,A.start.y,D[0],D[1]);case"C":return jr.getPointOnCubicBezier((0,a.t2length)(h,jr.getPathLength(g),L=>(0,a.getCubicArcLength)([A.start.x,D[0],D[2],D[4]],[A.start.y,D[1],D[3],D[5]],L)),A.start.x,A.start.y,D[0],D[1],D[2],D[3],D[4],D[5]);case"Q":return jr.getPointOnQuadraticBezier((0,a.t2length)(h,jr.getPathLength(g),L=>(0,a.getQuadraticArcLength)([A.start.x,D[0],D[2]],[A.start.y,D[1],D[3]],L)),A.start.x,A.start.y,D[0],D[1],D[2],D[3]);case"A":var C=D[0],R=D[1],P=D[2],U=D[3],H=D[4],N=D[5],x=D[6];return H+=N*h/A.pathLength,jr.getPointOnEllipticalArc(C,R,P,U,H,x)}return null}static getPointOnLine(h,g,m,_,E,A,D){A=A??g,D=D??m;const C=this.getLineLength(g,m,_,E);if(C<1e-10)return{x:g,y:m};if(_===g)return{x:A,y:D+(E>m?h:-h)};const R=(E-m)/(_-g),P=Math.sqrt(h*h/(1+R*R))*(_<g?-1:1),U=R*P;if(Math.abs(D-m-R*(A-g))<1e-10)return{x:A+P,y:D+U};const H=((A-g)*(_-g)+(D-m)*(E-m))/(C*C),N=g+H*(_-g),x=m+H*(E-m),L=this.getLineLength(A,D,N,x),F=Math.sqrt(h*h-L*L),K=Math.sqrt(F*F/(1+R*R))*(_<g?-1:1),j=R*K;return{x:N+K,y:x+j}}static getPointOnCubicBezier(h,g,m,_,E,A,D,C,R){function P(F){return F*F*F}function U(F){return 3*F*F*(1-F)}function H(F){return 3*F*(1-F)*(1-F)}function N(F){return(1-F)*(1-F)*(1-F)}const x=C*P(h)+A*U(h)+_*H(h)+g*N(h),L=R*P(h)+D*U(h)+E*H(h)+m*N(h);return{x,y:L}}static getPointOnQuadraticBezier(h,g,m,_,E,A,D){function C(N){return N*N}function R(N){return 2*N*(1-N)}function P(N){return(1-N)*(1-N)}const U=A*C(h)+_*R(h)+g*P(h),H=D*C(h)+E*R(h)+m*P(h);return{x:U,y:H}}static getPointOnEllipticalArc(h,g,m,_,E,A){const D=Math.cos(A),C=Math.sin(A),R={x:m*Math.cos(E),y:_*Math.sin(E)};return{x:h+(R.x*D-R.y*C),y:g+(R.x*C+R.y*D)}}static parsePathData(h){if(!h)return[];let g=h;const m=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];g=g.replace(new RegExp(" ","g"),",");for(var _=0;_<m.length;_++)g=g.replace(new RegExp(m[_],"g"),"|"+m[_]);const E=g.split("|"),A=[],D=[];let C=0,R=0;const P=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let U;for(_=1;_<E.length;_++){let b=E[_],q=b.charAt(0);for(b=b.slice(1),D.length=0;U=P.exec(b);)D.push(U[0]);const G=[];for(let X=0,et=D.length;X<et;X++){if(D[X]==="00"){G.push(0,0);continue}const st=parseFloat(D[X]);isNaN(st)?G.push(0):G.push(st)}for(;G.length>0&&!isNaN(G[0]);){let X="",et=[];const st=C,pt=R;var H,N,x,L,F,K,j,M,I,V;switch(q){case"l":C+=G.shift(),R+=G.shift(),X="L",et.push(C,R);break;case"L":C=G.shift(),R=G.shift(),et.push(C,R);break;case"m":var B=G.shift(),Y=G.shift();if(C+=B,R+=Y,X="M",A.length>2&&A[A.length-1].command==="z"){for(let Q=A.length-2;Q>=0;Q--)if(A[Q].command==="M"){C=A[Q].points[0]+B,R=A[Q].points[1]+Y;break}}et.push(C,R),q="l";break;case"M":C=G.shift(),R=G.shift(),X="M",et.push(C,R),q="L";break;case"h":C+=G.shift(),X="L",et.push(C,R);break;case"H":C=G.shift(),X="L",et.push(C,R);break;case"v":R+=G.shift(),X="L",et.push(C,R);break;case"V":R=G.shift(),X="L",et.push(C,R);break;case"C":et.push(G.shift(),G.shift(),G.shift(),G.shift()),C=G.shift(),R=G.shift(),et.push(C,R);break;case"c":et.push(C+G.shift(),R+G.shift(),C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),X="C",et.push(C,R);break;case"S":N=C,x=R,H=A[A.length-1],H.command==="C"&&(N=C+(C-H.points[2]),x=R+(R-H.points[3])),et.push(N,x,G.shift(),G.shift()),C=G.shift(),R=G.shift(),X="C",et.push(C,R);break;case"s":N=C,x=R,H=A[A.length-1],H.command==="C"&&(N=C+(C-H.points[2]),x=R+(R-H.points[3])),et.push(N,x,C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),X="C",et.push(C,R);break;case"Q":et.push(G.shift(),G.shift()),C=G.shift(),R=G.shift(),et.push(C,R);break;case"q":et.push(C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),X="Q",et.push(C,R);break;case"T":N=C,x=R,H=A[A.length-1],H.command==="Q"&&(N=C+(C-H.points[0]),x=R+(R-H.points[1])),C=G.shift(),R=G.shift(),X="Q",et.push(N,x,C,R);break;case"t":N=C,x=R,H=A[A.length-1],H.command==="Q"&&(N=C+(C-H.points[0]),x=R+(R-H.points[1])),C+=G.shift(),R+=G.shift(),X="Q",et.push(N,x,C,R);break;case"A":L=G.shift(),F=G.shift(),K=G.shift(),j=G.shift(),M=G.shift(),I=C,V=R,C=G.shift(),R=G.shift(),X="A",et=this.convertEndpointToCenterParameterization(I,V,C,R,j,M,L,F,K);break;case"a":L=G.shift(),F=G.shift(),K=G.shift(),j=G.shift(),M=G.shift(),I=C,V=R,C+=G.shift(),R+=G.shift(),X="A",et=this.convertEndpointToCenterParameterization(I,V,C,R,j,M,L,F,K);break}A.push({command:X||q,points:et,start:{x:st,y:pt},pathLength:this.calcLength(st,pt,X||q,et)})}(q==="z"||q==="Z")&&A.push({command:"z",points:[],start:void 0,pathLength:0})}return A}static calcLength(h,g,m,_){let E,A,D,C;const R=jr;switch(m){case"L":return R.getLineLength(h,g,_[0],_[1]);case"C":return(0,a.getCubicArcLength)([h,_[0],_[2],_[4]],[g,_[1],_[3],_[5]],1);case"Q":return(0,a.getQuadraticArcLength)([h,_[0],_[2]],[g,_[1],_[3]],1);case"A":E=0;var P=_[4],U=_[5],H=_[4]+U,N=Math.PI/180;if(Math.abs(P-H)<N&&(N=Math.abs(P-H)),A=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],P,0),U<0)for(C=P-N;C>H;C-=N)D=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],C,0),E+=R.getLineLength(A.x,A.y,D.x,D.y),A=D;else for(C=P+N;C<H;C+=N)D=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],C,0),E+=R.getLineLength(A.x,A.y,D.x,D.y),A=D;return D=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],H,0),E+=R.getLineLength(A.x,A.y,D.x,D.y),E}return 0}static convertEndpointToCenterParameterization(h,g,m,_,E,A,D,C,R){const P=R*(Math.PI/180),U=Math.cos(P)*(h-m)/2+Math.sin(P)*(g-_)/2,H=-1*Math.sin(P)*(h-m)/2+Math.cos(P)*(g-_)/2,N=U*U/(D*D)+H*H/(C*C);N>1&&(D*=Math.sqrt(N),C*=Math.sqrt(N));let x=Math.sqrt((D*D*(C*C)-D*D*(H*H)-C*C*(U*U))/(D*D*(H*H)+C*C*(U*U)));E===A&&(x*=-1),isNaN(x)&&(x=0);const L=x*D*H/C,F=x*-C*U/D,K=(h+m)/2+Math.cos(P)*L-Math.sin(P)*F,j=(g+_)/2+Math.sin(P)*L+Math.cos(P)*F,M=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},I=function(G,X){return(G[0]*X[0]+G[1]*X[1])/(M(G)*M(X))},V=function(G,X){return(G[0]*X[1]<G[1]*X[0]?-1:1)*Math.acos(I(G,X))},B=V([1,0],[(U-L)/D,(H-F)/C]),Y=[(U-L)/D,(H-F)/C],b=[(-1*U-L)/D,(-1*H-F)/C];let q=V(Y,b);return I(Y,b)<=-1&&(q=Math.PI),I(Y,b)>=1&&(q=0),A===0&&q>0&&(q=q-2*Math.PI),A===1&&q<0&&(q=q+2*Math.PI),[K,j,D,C,B,q,P,A]}};return mg.Path=l,l.prototype.className="Path",l.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(l),i.Factory.addGetterSetter(l,"data"),mg}var eE;function p6(){if(eE)return dg;eE=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.Arrow=void 0;const i=qe(),t=KS(),e=We(),a=ke(),l=M_();class c extends t.Line{_sceneFunc(g){super._sceneFunc(g);const m=Math.PI*2,_=this.points();let E=_;const A=this.tension()!==0&&_.length>4;A&&(E=this.getTensionPoints());const D=this.pointerLength(),C=_.length;let R,P;if(A){const N=[E[E.length-4],E[E.length-3],E[E.length-2],E[E.length-1],_[C-2],_[C-1]],x=l.Path.calcLength(E[E.length-4],E[E.length-3],"C",N),L=l.Path.getPointOnQuadraticBezier(Math.min(1,1-D/x),N[0],N[1],N[2],N[3],N[4],N[5]);R=_[C-2]-L.x,P=_[C-1]-L.y}else R=_[C-2]-_[C-4],P=_[C-1]-_[C-3];const U=(Math.atan2(P,R)+m)%m,H=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(_[C-2],_[C-1]),g.rotate(U),g.moveTo(0,0),g.lineTo(-D,H/2),g.lineTo(-D,-H/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(_[0],_[1]),A?(R=(E[0]+E[2])/2-_[0],P=(E[1]+E[3])/2-_[1]):(R=_[2]-_[0],P=_[3]-_[1]),g.rotate((Math.atan2(-P,-R)+m)%m),g.moveTo(0,0),g.lineTo(-D,H/2),g.lineTo(-D,-H/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const m=this.dashEnabled();m&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),m&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),m=this.pointerWidth()/2;return{x:g.x,y:g.y-m,width:g.width,height:g.height+m*2}}}return dg.Arrow=c,c.prototype.className="Arrow",(0,a._registerNode)(c),i.Factory.addGetterSetter(c,"pointerLength",10,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(c,"pointerWidth",10,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(c,"pointerAtBeginning",!1),i.Factory.addGetterSetter(c,"pointerAtEnding",!0),dg}var pg={},nE;function y6(){if(nE)return pg;nE=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.Circle=void 0;const i=qe(),t=pa(),e=We(),a=ke();class l extends t.Shape{_sceneFunc(h){h.beginPath(),h.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius()!==h/2&&this.radius(h/2)}setHeight(h){this.radius()!==h/2&&this.radius(h/2)}}return pg.Circle=l,l.prototype._centroid=!0,l.prototype.className="Circle",l.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(l),i.Factory.addGetterSetter(l,"radius",0,(0,e.getNumberValidator)()),pg}var yg={},iE;function _6(){if(iE)return yg;iE=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.Ellipse=void 0;const i=qe(),t=pa(),e=We(),a=ke();class l extends t.Shape{_sceneFunc(h){const g=this.radiusX(),m=this.radiusY();h.beginPath(),h.save(),g!==m&&h.scale(1,m/g),h.arc(0,0,g,0,Math.PI*2,!1),h.restore(),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(h){this.radiusX(h/2)}setHeight(h){this.radiusY(h/2)}}return yg.Ellipse=l,l.prototype.className="Ellipse",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,a._registerNode)(l),i.Factory.addComponentsGetterSetter(l,"radius",["x","y"]),i.Factory.addGetterSetter(l,"radiusX",0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(l,"radiusY",0,(0,e.getNumberValidator)()),yg}var _g={},aE;function v6(){if(aE)return _g;aE=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Image=void 0;const i=Ri(),t=qe(),e=pa(),a=ke(),l=We();class c extends e.Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",m=>{this._removeImageLoad(m.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),m=this.hasShadow();return g&&m?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const m=this.getWidth(),_=this.getHeight(),E=this.cornerRadius(),A=this.attrs.image;let D;if(A){const C=this.attrs.cropWidth,R=this.attrs.cropHeight;C&&R?D=[A,this.cropX(),this.cropY(),C,R,0,0,m,_]:D=[A,0,0,m,_]}(this.hasFill()||this.hasStroke()||E)&&(g.beginPath(),E?i.Util.drawRoundedRectPath(g,m,_,E):g.rect(0,0,m,_),g.closePath(),g.fillStrokeShape(this)),A&&(E&&g.clip(),g.drawImage.apply(g,D))}_hitFunc(g){const m=this.width(),_=this.height(),E=this.cornerRadius();g.beginPath(),E?i.Util.drawRoundedRectPath(g,m,_,E):g.rect(0,0,m,_),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,m;return(g=this.attrs.width)!==null&&g!==void 0?g:(m=this.image())===null||m===void 0?void 0:m.width}getHeight(){var g,m;return(g=this.attrs.height)!==null&&g!==void 0?g:(m=this.image())===null||m===void 0?void 0:m.height}static fromURL(g,m,_=null){const E=i.Util.createImageElement();E.onload=function(){const A=new c({image:E});m(A)},E.onerror=_,E.crossOrigin="Anonymous",E.src=g}}return _g.Image=c,c.prototype.className="Image",(0,a._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,l.getNumberValidator)()),_g}var rh={},rE;function E6(){if(rE)return rh;rE=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.Tag=rh.Label=void 0;const i=qe(),t=pa(),e=I_(),a=We(),l=ke(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],h="Change.konva",g="none",m="up",_="right",E="down",A="left",D=c.length;let C=class extends e.Group{constructor(U){super(U),this.on("add.konva",function(H){this._addListeners(H.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(U){let H=this,N;const x=function(){H._sync()};for(N=0;N<D;N++)U.on(c[N]+h,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let U=this.getText(),H=this.getTag(),N,x,L,F,K,j,M;if(U&&H){switch(N=U.width(),x=U.height(),L=H.pointerDirection(),F=H.pointerWidth(),M=H.pointerHeight(),K=0,j=0,L){case m:K=N/2,j=-1*M;break;case _:K=N+F,j=x/2;break;case E:K=N/2,j=x+M;break;case A:K=-1*F,j=x/2;break}H.setAttrs({x:-1*K,y:-1*j,width:N,height:x}),U.setAttrs({x:-1*K,y:-1*j})}}};rh.Label=C,C.prototype.className="Label",(0,l._registerNode)(C);class R extends t.Shape{_sceneFunc(U){const H=this.width(),N=this.height(),x=this.pointerDirection(),L=this.pointerWidth(),F=this.pointerHeight(),K=this.cornerRadius();let j=0,M=0,I=0,V=0;typeof K=="number"?j=M=I=V=Math.min(K,H/2,N/2):(j=Math.min(K[0]||0,H/2,N/2),M=Math.min(K[1]||0,H/2,N/2),V=Math.min(K[2]||0,H/2,N/2),I=Math.min(K[3]||0,H/2,N/2)),U.beginPath(),U.moveTo(j,0),x===m&&(U.lineTo((H-L)/2,0),U.lineTo(H/2,-1*F),U.lineTo((H+L)/2,0)),U.lineTo(H-M,0),U.arc(H-M,M,M,Math.PI*3/2,0,!1),x===_&&(U.lineTo(H,(N-F)/2),U.lineTo(H+L,N/2),U.lineTo(H,(N+F)/2)),U.lineTo(H,N-V),U.arc(H-V,N-V,V,0,Math.PI/2,!1),x===E&&(U.lineTo((H+L)/2,N),U.lineTo(H/2,N+F),U.lineTo((H-L)/2,N)),U.lineTo(I,N),U.arc(I,N-I,I,Math.PI/2,Math.PI,!1),x===A&&(U.lineTo(0,(N+F)/2),U.lineTo(-1*L,N/2),U.lineTo(0,(N-F)/2)),U.lineTo(0,j),U.arc(j,j,j,Math.PI,Math.PI*3/2,!1),U.closePath(),U.fillStrokeShape(this)}getSelfRect(){let U=0,H=0,N=this.pointerWidth(),x=this.pointerHeight(),L=this.pointerDirection(),F=this.width(),K=this.height();return L===m?(H-=x,K+=x):L===E?K+=x:L===A?(U-=N*1.5,F+=N):L===_&&(F+=N*1.5),{x:U,y:H,width:F,height:K}}}return rh.Tag=R,R.prototype.className="Tag",(0,l._registerNode)(R),i.Factory.addGetterSetter(R,"pointerDirection",g),i.Factory.addGetterSetter(R,"pointerWidth",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(R,"pointerHeight",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(R,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),rh}var vg={},sE;function YS(){if(sE)return vg;sE=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.Rect=void 0;const i=qe(),t=pa(),e=ke(),a=Ri(),l=We();class c extends t.Shape{_sceneFunc(g){const m=this.cornerRadius(),_=this.width(),E=this.height();g.beginPath(),m?a.Util.drawRoundedRectPath(g,_,E,m):g.rect(0,0,_,E),g.closePath(),g.fillStrokeShape(this)}}return vg.Rect=c,c.prototype.className="Rect",(0,e._registerNode)(c),i.Factory.addGetterSetter(c,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),vg}var Eg={},lE;function S6(){if(lE)return Eg;lE=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.RegularPolygon=void 0;const i=qe(),t=pa(),e=We(),a=ke();let l=class extends t.Shape{_sceneFunc(h){const g=this._getPoints();h.beginPath(),h.moveTo(g[0].x,g[0].y);for(let m=1;m<g.length;m++)h.lineTo(g[m].x,g[m].y);h.closePath(),h.fillStrokeShape(this)}_getPoints(){const h=this.attrs.sides,g=this.attrs.radius||0,m=[];for(let _=0;_<h;_++)m.push({x:g*Math.sin(_*2*Math.PI/h),y:-1*g*Math.cos(_*2*Math.PI/h)});return m}getSelfRect(){const h=this._getPoints();let g=h[0].x,m=h[0].y,_=h[0].x,E=h[0].y;return h.forEach(A=>{g=Math.min(g,A.x),m=Math.max(m,A.x),_=Math.min(_,A.y),E=Math.max(E,A.y)}),{x:g,y:_,width:m-g,height:E-_}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius(h/2)}setHeight(h){this.radius(h/2)}};return Eg.RegularPolygon=l,l.prototype.className="RegularPolygon",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(l),i.Factory.addGetterSetter(l,"radius",0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(l,"sides",0,(0,e.getNumberValidator)()),Eg}var Sg={},oE;function T6(){if(oE)return Sg;oE=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.Ring=void 0;const i=qe(),t=pa(),e=We(),a=ke(),l=Math.PI*2;let c=class extends t.Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,l,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),l,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}};return Sg.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(c),i.Factory.addGetterSetter(c,"innerRadius",0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(c,"outerRadius",0,(0,e.getNumberValidator)()),Sg}var Tg={},uE;function b6(){if(uE)return Tg;uE=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.Sprite=void 0;const i=qe(),t=pa(),e=O_(),a=We(),l=ke();let c=class extends t.Shape{constructor(g){super(g),this._updated=!0,this.anim=new e.Animation(()=>{const m=this._updated;return this._updated=!1,m}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const m=this.animation(),_=this.frameIndex(),E=_*4,A=this.animations()[m],D=this.frameOffsets(),C=A[E+0],R=A[E+1],P=A[E+2],U=A[E+3],H=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,P,U),g.closePath(),g.fillStrokeShape(this)),H)if(D){const N=D[m],x=_*2;g.drawImage(H,C,R,P,U,N[x+0],N[x+1],P,U)}else g.drawImage(H,C,R,P,U,0,0,P,U)}_hitFunc(g){const m=this.animation(),_=this.frameIndex(),E=_*4,A=this.animations()[m],D=this.frameOffsets(),C=A[E+2],R=A[E+3];if(g.beginPath(),D){const P=D[m],U=_*2;g.rect(P[U+0],P[U+1],C,R)}else g.rect(0,0,C,R);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),m=this.animation(),_=this.animations(),E=_[m],A=E.length/4;g<A-1?this.frameIndex(g+1):this.frameIndex(0)}};return Tg.Sprite=c,c.prototype.className="Sprite",(0,l._registerNode)(c),i.Factory.addGetterSetter(c,"animation"),i.Factory.addGetterSetter(c,"animations"),i.Factory.addGetterSetter(c,"frameOffsets"),i.Factory.addGetterSetter(c,"image"),i.Factory.addGetterSetter(c,"frameIndex",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"frameRate",17,(0,a.getNumberValidator)()),i.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Tg}var bg={},cE;function A6(){if(cE)return bg;cE=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.Star=void 0;const i=qe(),t=pa(),e=We(),a=ke();let l=class extends t.Shape{_sceneFunc(h){const g=this.innerRadius(),m=this.outerRadius(),_=this.numPoints();h.beginPath(),h.moveTo(0,0-m);for(let E=1;E<_*2;E++){const A=E%2===0?m:g,D=A*Math.sin(E*Math.PI/_),C=-1*A*Math.cos(E*Math.PI/_);h.lineTo(D,C)}h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(h){this.outerRadius(h/2)}setHeight(h){this.outerRadius(h/2)}};return bg.Star=l,l.prototype.className="Star",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(l),i.Factory.addGetterSetter(l,"numPoints",5,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(l,"innerRadius",0,(0,e.getNumberValidator)()),i.Factory.addGetterSetter(l,"outerRadius",0,(0,e.getNumberValidator)()),bg}var Sf={},hE;function QS(){if(hE)return Sf;hE=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.Text=void 0,Sf.stringToArray=h;const i=Ri(),t=qe(),e=pa(),a=ke(),l=We(),c=ke();function h(bt){return[...bt].reduce((lt,dt,Nt,Vt)=>{if(new RegExp("\\p{Emoji}","u").test(dt)){const nt=Vt[Nt+1];nt&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(nt)?(lt.push(dt+nt),Vt[Nt+1]=""):lt.push(dt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(dt+(Vt[Nt+1]||""))?lt.push(dt+Vt[Nt+1]):Nt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(dt)?lt[lt.length-1]+=dt:dt&&lt.push(dt);return lt},[])}const g="auto",m="center",_="inherit",E="justify",A="Change.konva",D="2d",C="-",R="left",P="text",U="Text",H="top",N="bottom",x="middle",L="normal",F="px ",K=" ",j="right",M="rtl",I="word",V="char",B="none",Y="",b=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],q=b.length;function G(bt){return bt.split(",").map(lt=>{lt=lt.trim();const dt=lt.indexOf(" ")>=0,Nt=lt.indexOf('"')>=0||lt.indexOf("'")>=0;return dt&&!Nt&&(lt=`"${lt}"`),lt}).join(", ")}let X;function et(){return X||(X=i.Util.createCanvasElement().getContext(D),X)}function st(bt){bt.fillText(this._partialText,this._partialTextX,this._partialTextY)}function pt(bt){bt.setAttr("miterLimit",2),bt.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Q(bt){return bt=bt||{},!bt.fillLinearGradientColorStops&&!bt.fillRadialGradientColorStops&&!bt.fillPatternImage&&(bt.fill=bt.fill||"black"),bt}class rt extends e.Shape{constructor(lt){super(Q(lt)),this._partialTextX=0,this._partialTextY=0;for(let dt=0;dt<q;dt++)this.on(b[dt]+A,this._setTextData);this._setTextData()}_sceneFunc(lt){const dt=this.textArr,Nt=dt.length;if(!this.text())return;let Vt=this.padding(),nt=this.fontSize(),ht=this.lineHeight()*nt,Dt=this.verticalAlign(),It=this.direction(),qt=0,Yt=this.align(),ce=this.getWidth(),pe=this.letterSpacing(),ae=this.fill(),Ke=this.textDecoration(),ve=Ke.indexOf("underline")!==-1,Je=Ke.indexOf("line-through")!==-1,Gi;It=It===_?lt.direction:It;let un=ht/2,Oi=x;if(a.Konva._fixTextRendering){const we=this.measureSize("M");Oi="alphabetic",un=(we.fontBoundingBoxAscent-we.fontBoundingBoxDescent)/2+ht/2}var He=0,Fn=0;for(It===M&&lt.setAttr("direction",It),lt.setAttr("font",this._getContextFont()),lt.setAttr("textBaseline",Oi),lt.setAttr("textAlign",R),Dt===x?qt=(this.getHeight()-Nt*ht-Vt*2)/2:Dt===N&&(qt=this.getHeight()-Nt*ht-Vt*2),lt.translate(Vt,qt+Vt),Gi=0;Gi<Nt;Gi++){var He=0,Fn=0,Ie=dt[Gi],Fi=Ie.text,Re=Ie.width,Ye=Ie.lastInParagraph,Zn,ji;if(lt.save(),Yt===j?He+=ce-Re-Vt*2:Yt===m&&(He+=(ce-Re-Vt*2)/2),ve){lt.save(),lt.beginPath();const Sn=a.Konva._fixTextRendering?Math.round(nt/4):Math.round(nt/2),$e=He,Ve=un+Fn+Sn;lt.moveTo($e,Ve),Zn=Fi.split(" ").length-1,ji=Yt===E&&!Ye?ce-Vt*2:Re,lt.lineTo($e+Math.round(ji),Ve),lt.lineWidth=nt/15;const Ji=this._getLinearGradient();lt.strokeStyle=Ji||ae,lt.stroke(),lt.restore()}if(Je){lt.save(),lt.beginPath();const Sn=a.Konva._fixTextRendering?-Math.round(nt/4):0;lt.moveTo(He,un+Fn+Sn),Zn=Fi.split(" ").length-1,ji=Yt===E&&!Ye?ce-Vt*2:Re,lt.lineTo(He+Math.round(ji),un+Fn+Sn),lt.lineWidth=nt/15;const $e=this._getLinearGradient();lt.strokeStyle=$e||ae,lt.stroke(),lt.restore()}if(It!==M&&(pe!==0||Yt===E)){Zn=Fi.split(" ").length-1;const Sn=h(Fi);for(let $e=0;$e<Sn.length;$e++){const Ve=Sn[$e];Ve===" "&&!Ye&&Yt===E&&(He+=(ce-Vt*2-Re)/Zn),this._partialTextX=He,this._partialTextY=un+Fn,this._partialText=Ve,lt.fillStrokeShape(this),He+=this.measureSize(Ve).width+pe}}else pe!==0&&lt.setAttr("letterSpacing",`${pe}px`),this._partialTextX=He,this._partialTextY=un+Fn,this._partialText=Fi,lt.fillStrokeShape(this);lt.restore(),Nt>1&&(un+=ht)}}_hitFunc(lt){const dt=this.getWidth(),Nt=this.getHeight();lt.beginPath(),lt.rect(0,0,dt,Nt),lt.closePath(),lt.fillStrokeShape(this)}setText(lt){const dt=i.Util._isString(lt)?lt:lt==null?"":lt+"";return this._setAttr(P,dt),this}getWidth(){return this.attrs.width===g||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===g||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(lt){var dt,Nt,Vt,nt,ht,Dt,It,qt,Yt,ce,pe;let ae=et(),Ke=this.fontSize(),ve;ae.save(),ae.font=this._getContextFont(),ve=ae.measureText(lt),ae.restore();const Je=Ke/100;return{actualBoundingBoxAscent:(dt=ve.actualBoundingBoxAscent)!==null&&dt!==void 0?dt:71.58203125*Je,actualBoundingBoxDescent:(Nt=ve.actualBoundingBoxDescent)!==null&&Nt!==void 0?Nt:0,actualBoundingBoxLeft:(Vt=ve.actualBoundingBoxLeft)!==null&&Vt!==void 0?Vt:-7.421875*Je,actualBoundingBoxRight:(nt=ve.actualBoundingBoxRight)!==null&&nt!==void 0?nt:75.732421875*Je,alphabeticBaseline:(ht=ve.alphabeticBaseline)!==null&&ht!==void 0?ht:0,emHeightAscent:(Dt=ve.emHeightAscent)!==null&&Dt!==void 0?Dt:100*Je,emHeightDescent:(It=ve.emHeightDescent)!==null&&It!==void 0?It:-20*Je,fontBoundingBoxAscent:(qt=ve.fontBoundingBoxAscent)!==null&&qt!==void 0?qt:91*Je,fontBoundingBoxDescent:(Yt=ve.fontBoundingBoxDescent)!==null&&Yt!==void 0?Yt:21*Je,hangingBaseline:(ce=ve.hangingBaseline)!==null&&ce!==void 0?ce:72.80000305175781*Je,ideographicBaseline:(pe=ve.ideographicBaseline)!==null&&pe!==void 0?pe:-21*Je,width:ve.width,height:Ke}}_getContextFont(){return this.fontStyle()+K+this.fontVariant()+K+(this.fontSize()+F)+G(this.fontFamily())}_addTextLine(lt){this.align()===E&&(lt=lt.trim());const Nt=this._getTextWidth(lt);return this.textArr.push({text:lt,width:Nt,lastInParagraph:!1})}_getTextWidth(lt){const dt=this.letterSpacing(),Nt=lt.length;return et().measureText(lt).width+dt*Nt}_setTextData(){let lt=this.text().split(`
`),dt=+this.fontSize(),Nt=0,Vt=this.lineHeight()*dt,nt=this.attrs.width,ht=this.attrs.height,Dt=nt!==g&&nt!==void 0,It=ht!==g&&ht!==void 0,qt=this.padding(),Yt=nt-qt*2,ce=ht-qt*2,pe=0,ae=this.wrap(),Ke=ae!==B,ve=ae!==V&&Ke,Je=this.ellipsis();this.textArr=[],et().font=this._getContextFont();const Gi=Je?this._getTextWidth(Y):0;for(let un=0,Oi=lt.length;un<Oi;++un){let He=lt[un],Fn=this._getTextWidth(He);if(Dt&&Fn>Yt)for(;He.length>0;){let Ie=0,Fi=h(He).length,Re="",Ye=0;for(;Ie<Fi;){const Zn=Ie+Fi>>>1,ji=h(He),we=ji.slice(0,Zn+1).join(""),Wn=this._getTextWidth(we);(Je&&It&&pe+Vt>ce?Wn+Gi:Wn)<=Yt?(Ie=Zn+1,Re=we,Ye=Wn):Fi=Zn}if(Re){if(ve){const we=h(He),Wn=h(Re),Sn=we[Wn.length],$e=Sn===K||Sn===C;let Ve;if($e&&Ye<=Yt)Ve=Wn.length;else{const Ji=Wn.lastIndexOf(K),wi=Wn.lastIndexOf(C);Ve=Math.max(Ji,wi)+1}Ve>0&&(Ie=Ve,Re=we.slice(0,Ie).join(""),Ye=this._getTextWidth(Re))}if(Re=Re.trimRight(),this._addTextLine(Re),Nt=Math.max(Nt,Ye),pe+=Vt,this._shouldHandleEllipsis(pe)){this._tryToAddEllipsisToLastLine();break}if(He=h(He).slice(Ie).join("").trimLeft(),He.length>0&&(Fn=this._getTextWidth(He),Fn<=Yt)){this._addTextLine(He),pe+=Vt,Nt=Math.max(Nt,Fn);break}}else break}else this._addTextLine(He),pe+=Vt,Nt=Math.max(Nt,Fn),this._shouldHandleEllipsis(pe)&&un<Oi-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),It&&pe+Vt>ce)break}this.textHeight=dt,this.textWidth=Nt}_shouldHandleEllipsis(lt){const dt=+this.fontSize(),Nt=this.lineHeight()*dt,Vt=this.attrs.height,nt=Vt!==g&&Vt!==void 0,ht=this.padding(),Dt=Vt-ht*2;return!(this.wrap()!==B)||nt&&lt+Nt>Dt}_tryToAddEllipsisToLastLine(){const lt=this.attrs.width,dt=lt!==g&&lt!==void 0,Nt=this.padding(),Vt=lt-Nt*2,nt=this.ellipsis(),ht=this.textArr[this.textArr.length-1];!ht||!nt||(dt&&(this._getTextWidth(ht.text+Y)<Vt||(ht.text=ht.text.slice(0,ht.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ht.text+Y))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const lt=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,dt=this.hasShadow();return lt&&dt?!0:super._useBufferCanvas()}}return Sf.Text=rt,rt.prototype._fillFunc=st,rt.prototype._strokeFunc=pt,rt.prototype.className=U,rt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(rt),t.Factory.overWriteSetter(rt,"width",(0,l.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(rt,"height",(0,l.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(rt,"direction",_),t.Factory.addGetterSetter(rt,"fontFamily","Arial"),t.Factory.addGetterSetter(rt,"fontSize",12,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(rt,"fontStyle",L),t.Factory.addGetterSetter(rt,"fontVariant",L),t.Factory.addGetterSetter(rt,"padding",0,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(rt,"align",R),t.Factory.addGetterSetter(rt,"verticalAlign",H),t.Factory.addGetterSetter(rt,"lineHeight",1,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(rt,"wrap",I),t.Factory.addGetterSetter(rt,"ellipsis",!1,(0,l.getBooleanValidator)()),t.Factory.addGetterSetter(rt,"letterSpacing",0,(0,l.getNumberValidator)()),t.Factory.addGetterSetter(rt,"text","",(0,l.getStringValidator)()),t.Factory.addGetterSetter(rt,"textDecoration",""),Sf}var Ag={},fE;function C6(){if(fE)return Ag;fE=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.TextPath=void 0;const i=Ri(),t=qe(),e=pa(),a=M_(),l=QS(),c=We(),h=ke(),g="",m="normal";function _(D){D.fillText(this.partialText,0,0)}function E(D){D.strokeText(this.partialText,0,0)}let A=class extends e.Shape{constructor(C){super(C),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return a.Path.getPathLength(this.dataArray)}_getPointAtLength(C){if(!this.attrs.data)return null;const R=this.pathLength;return C-1>R?null:a.Path.getPointAtLengthOfDataArray(C,this.dataArray)}_readDataAttribute(){this.dataArray=a.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(C){C.setAttr("font",this._getContextFont()),C.setAttr("textBaseline",this.textBaseline()),C.setAttr("textAlign","left"),C.save();const R=this.textDecoration(),P=this.fill(),U=this.fontSize(),H=this.glyphInfo;R==="underline"&&C.beginPath();for(let N=0;N<H.length;N++){C.save();const x=H[N].p0;C.translate(x.x,x.y),C.rotate(H[N].rotation),this.partialText=H[N].text,C.fillStrokeShape(this),R==="underline"&&(N===0&&C.moveTo(0,U/2+1),C.lineTo(U,U/2+1)),C.restore()}R==="underline"&&(C.strokeStyle=P,C.lineWidth=U/20,C.stroke()),C.restore()}_hitFunc(C){C.beginPath();const R=this.glyphInfo;if(R.length>=1){const P=R[0].p0;C.moveTo(P.x,P.y)}for(let P=0;P<R.length;P++){const U=R[P].p1;C.lineTo(U.x,U.y)}C.setAttr("lineWidth",this.fontSize()),C.setAttr("strokeStyle",this.colorKey),C.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(C){return l.Text.prototype.setText.call(this,C)}_getContextFont(){return l.Text.prototype._getContextFont.call(this)}_getTextSize(C){const P=this.dummyCanvas.getContext("2d");P.save(),P.font=this._getContextFont();const U=P.measureText(C);return P.restore(),{width:U.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:C,height:R}=this._getTextSize(this.attrs.text);if(this.textWidth=C,this.textHeight=R,this.glyphInfo=[],!this.attrs.data)return null;const P=this.letterSpacing(),U=this.align(),H=this.kerningFunc(),N=Math.max(this.textWidth+((this.attrs.text||"").length-1)*P,0);let x=0;U==="center"&&(x=Math.max(0,this.pathLength/2-N/2)),U==="right"&&(x=Math.max(0,this.pathLength-N));const L=(0,l.stringToArray)(this.text());let F=x;for(let K=0;K<L.length;K++){const j=this._getPointAtLength(F);if(!j)return;let M=this._getTextSize(L[K]).width+P;if(L[K]===" "&&U==="justify"){const q=this.text().split(" ").length-1;M+=(this.pathLength-N)/q}const I=this._getPointAtLength(F+M);if(!I)return;const V=a.Path.getLineLength(j.x,j.y,I.x,I.y);let B=0;if(H)try{B=H(L[K-1],L[K])*this.fontSize()}catch{B=0}j.x+=B,I.x+=B,this.textWidth+=B;const Y=a.Path.getPointOnLine(B+V/2,j.x,j.y,I.x,I.y),b=Math.atan2(I.y-j.y,I.x-j.x);this.glyphInfo.push({transposeX:Y.x,transposeY:Y.y,text:L[K],rotation:b,p0:j,p1:I}),F+=M}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const C=[];this.glyphInfo.forEach(function(F){C.push(F.p0.x),C.push(F.p0.y),C.push(F.p1.x),C.push(F.p1.y)});let R=C[0]||0,P=C[0]||0,U=C[1]||0,H=C[1]||0,N,x;for(let F=0;F<C.length/2;F++)N=C[F*2],x=C[F*2+1],R=Math.min(R,N),P=Math.max(P,N),U=Math.min(U,x),H=Math.max(H,x);const L=this.fontSize();return{x:R-L/2,y:U-L/2,width:P-R+L,height:H-U+L}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ag.TextPath=A,A.prototype._fillFunc=_,A.prototype._strokeFunc=E,A.prototype._fillFuncHit=_,A.prototype._strokeFuncHit=E,A.prototype.className="TextPath",A.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(A),t.Factory.addGetterSetter(A,"data"),t.Factory.addGetterSetter(A,"fontFamily","Arial"),t.Factory.addGetterSetter(A,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(A,"fontStyle",m),t.Factory.addGetterSetter(A,"align","left"),t.Factory.addGetterSetter(A,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(A,"textBaseline","middle"),t.Factory.addGetterSetter(A,"fontVariant",m),t.Factory.addGetterSetter(A,"text",g),t.Factory.addGetterSetter(A,"textDecoration",""),t.Factory.addGetterSetter(A,"kerningFunc",void 0),Ag}var Cg={},dE;function R6(){if(dE)return Cg;dE=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.Transformer=void 0;const i=Ri(),t=qe(),e=Ii(),a=pa(),l=YS(),c=I_(),h=ke(),g=We(),m=ke(),_="tr-konva",E=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(M=>M+`.${_}`).join(" "),A="nodesRect",D=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],C={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},R="ontouchstart"in h.Konva._global;function P(M,I,V){if(M==="rotater")return V;I+=i.Util.degToRad(C[M]||0);const B=(i.Util.radToDeg(I)%360+360)%360;return i.Util._inRange(B,315+22.5,360)||i.Util._inRange(B,0,22.5)?"ns-resize":i.Util._inRange(B,45-22.5,45+22.5)?"nesw-resize":i.Util._inRange(B,90-22.5,90+22.5)?"ew-resize":i.Util._inRange(B,135-22.5,135+22.5)?"nwse-resize":i.Util._inRange(B,180-22.5,180+22.5)?"ns-resize":i.Util._inRange(B,225-22.5,225+22.5)?"nesw-resize":i.Util._inRange(B,270-22.5,270+22.5)?"ew-resize":i.Util._inRange(B,315-22.5,315+22.5)?"nwse-resize":(i.Util.error("Transformer has unknown angle for cursor detection: "+B),"pointer")}const U=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function H(M){return{x:M.x+M.width/2*Math.cos(M.rotation)+M.height/2*Math.sin(-M.rotation),y:M.y+M.height/2*Math.cos(M.rotation)+M.width/2*Math.sin(M.rotation)}}function N(M,I,V){const B=V.x+(M.x-V.x)*Math.cos(I)-(M.y-V.y)*Math.sin(I),Y=V.y+(M.x-V.x)*Math.sin(I)+(M.y-V.y)*Math.cos(I);return{...M,rotation:M.rotation+I,x:B,y:Y}}function x(M,I){const V=H(M);return N(M,I,V)}function L(M,I,V){let B=I;for(let Y=0;Y<M.length;Y++){const b=h.Konva.getAngle(M[Y]),q=Math.abs(b-I)%(Math.PI*2);Math.min(q,Math.PI*2-q)<V&&(B=b)}return B}let F=0,K=class extends c.Group{constructor(I){super(I),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(E,this.update),this.getNode()&&this.update()}attachTo(I){return this.setNode(I),this}setNode(I){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([I])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return _+this._id}setNodes(I=[]){this._nodes&&this._nodes.length&&this.detach();const V=I.filter(Y=>Y.isAncestorOf(this)?(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=I=V,I.length===1&&this.useSingleNodeRotation()?this.rotation(I[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Y=>{const b=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(Y._attrsAffectingSize.length){const q=Y._attrsAffectingSize.map(G=>G+"Change."+this._getEventNamespace()).join(" ");Y.on(q,b)}Y.on(D.map(q=>q+`.${this._getEventNamespace()}`).join(" "),b),Y.on(`absoluteTransformChange.${this._getEventNamespace()}`,b),this._proxyDrag(Y)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(I){let V;I.on(`dragstart.${this._getEventNamespace()}`,B=>{V=I.getAbsolutePosition(),!this.isDragging()&&I!==this.findOne(".back")&&this.startDrag(B,!1)}),I.on(`dragmove.${this._getEventNamespace()}`,B=>{if(!V)return;const Y=I.getAbsolutePosition(),b=Y.x-V.x,q=Y.y-V.y;this.nodes().forEach(G=>{if(G===I||G.isDragging())return;const X=G.getAbsolutePosition();G.setAbsolutePosition({x:X.x+b,y:X.y+q}),G.startDrag(B)}),V=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(I=>{I.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(A),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(A,this.__getNodeRect)}__getNodeShape(I,V=this.rotation(),B){const Y=I.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=I.getAbsoluteScale(B),q=I.getAbsolutePosition(B),G=Y.x*b.x-I.offsetX()*b.x,X=Y.y*b.y-I.offsetY()*b.y,et=(h.Konva.getAngle(I.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),st={x:q.x+G*Math.cos(et)+X*Math.sin(-et),y:q.y+X*Math.cos(et)+G*Math.sin(et),width:Y.width*b.x,height:Y.height*b.y,rotation:et};return N(st,-h.Konva.getAngle(V),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const V=[];this.nodes().map(et=>{const st=et.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),pt=[{x:st.x,y:st.y},{x:st.x+st.width,y:st.y},{x:st.x+st.width,y:st.y+st.height},{x:st.x,y:st.y+st.height}],Q=et.getAbsoluteTransform();pt.forEach(function(rt){const bt=Q.point(rt);V.push(bt)})});const B=new i.Transform;B.rotate(-h.Konva.getAngle(this.rotation()));let Y=1/0,b=1/0,q=-1/0,G=-1/0;V.forEach(function(et){const st=B.point(et);Y===void 0&&(Y=q=st.x,b=G=st.y),Y=Math.min(Y,st.x),b=Math.min(b,st.y),q=Math.max(q,st.x),G=Math.max(G,st.y)}),B.invert();const X=B.point({x:Y,y:b});return{x:X.x,y:X.y,width:q-Y,height:G-b,rotation:h.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),U.forEach(I=>{this._createAnchor(I)}),this._createAnchor("rotater")}_createAnchor(I){const V=new l.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:I+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:R?10:"auto"}),B=this;V.on("mousedown touchstart",function(Y){B._handleMouseDown(Y)}),V.on("dragstart",Y=>{V.stopDrag(),Y.cancelBubble=!0}),V.on("dragend",Y=>{Y.cancelBubble=!0}),V.on("mouseenter",()=>{const Y=h.Konva.getAngle(this.rotation()),b=this.rotateAnchorCursor(),q=P(I,Y,b);V.getStage().content&&(V.getStage().content.style.cursor=q),this._cursorChange=!0}),V.on("mouseout",()=>{V.getStage().content&&(V.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(V)}_createBack(){const I=new a.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(V,B){const Y=B.getParent(),b=Y.padding();V.beginPath(),V.rect(-b,-b,B.width()+b*2,B.height()+b*2),V.moveTo(B.width()/2,-b),Y.rotateEnabled()&&Y.rotateLineVisible()&&V.lineTo(B.width()/2,-Y.rotateAnchorOffset()*i.Util._sign(B.height())-b),V.fillStrokeShape(B)},hitFunc:(V,B)=>{if(!this.shouldOverdrawWholeArea())return;const Y=this.padding();V.beginPath(),V.rect(-Y,-Y,B.width()+Y*2,B.height()+Y*2),V.fillStrokeShape(B)}});this.add(I),this._proxyDrag(I),I.on("dragstart",V=>{V.cancelBubble=!0}),I.on("dragmove",V=>{V.cancelBubble=!0}),I.on("dragend",V=>{V.cancelBubble=!0}),this.on("dragmove",V=>{this.update()})}_handleMouseDown(I){if(this._transforming)return;this._movingAnchorName=I.target.name().split(" ")[0];const V=this._getNodeRect(),B=V.width,Y=V.height,b=Math.sqrt(Math.pow(B,2)+Math.pow(Y,2));this.sin=Math.abs(Y/b),this.cos=Math.abs(B/b),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const q=I.target.getAbsolutePosition(),G=I.target.getStage().getPointerPosition();this._anchorDragOffset={x:G.x-q.x,y:G.y-q.y},F++,this._fire("transformstart",{evt:I.evt,target:this.getNode()}),this._nodes.forEach(X=>{X._fire("transformstart",{evt:I.evt,target:X})})}_handleMouseMove(I){let V,B,Y;const b=this.findOne("."+this._movingAnchorName),q=b.getStage();q.setPointersPositions(I);const G=q.getPointerPosition();let X={x:G.x-this._anchorDragOffset.x,y:G.y-this._anchorDragOffset.y};const et=b.getAbsolutePosition();this.anchorDragBoundFunc()&&(X=this.anchorDragBoundFunc()(et,X,I)),b.setAbsolutePosition(X);const st=b.getAbsolutePosition();if(et.x===st.x&&et.y===st.y)return;if(this._movingAnchorName==="rotater"){const Dt=this._getNodeRect();V=b.x()-Dt.width/2,B=-b.y()+Dt.height/2;let It=Math.atan2(-B,V)+Math.PI/2;Dt.height<0&&(It-=Math.PI);const Yt=h.Konva.getAngle(this.rotation())+It,ce=h.Konva.getAngle(this.rotationSnapTolerance()),ae=L(this.rotationSnaps(),Yt,ce)-Dt.rotation,Ke=x(Dt,ae);this._fitNodesInto(Ke,I);return}const pt=this.shiftBehavior();let Q;pt==="inverted"?Q=this.keepRatio()&&!I.shiftKey:pt==="none"?Q=this.keepRatio():Q=this.keepRatio()||I.shiftKey;var Nt=this.centeredScaling()||I.altKey;if(this._movingAnchorName==="top-left"){if(Q){var rt=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Y=Math.sqrt(Math.pow(rt.x-b.x(),2)+Math.pow(rt.y-b.y(),2));var bt=this.findOne(".top-left").x()>rt.x?-1:1,lt=this.findOne(".top-left").y()>rt.y?-1:1;V=Y*this.cos*bt,B=Y*this.sin*lt,this.findOne(".top-left").x(rt.x-V),this.findOne(".top-left").y(rt.y-B)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(b.y());else if(this._movingAnchorName==="top-right"){if(Q){var rt=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Y=Math.sqrt(Math.pow(b.x()-rt.x,2)+Math.pow(rt.y-b.y(),2));var bt=this.findOne(".top-right").x()<rt.x?-1:1,lt=this.findOne(".top-right").y()>rt.y?-1:1;V=Y*this.cos*bt,B=Y*this.sin*lt,this.findOne(".top-right").x(rt.x+V),this.findOne(".top-right").y(rt.y-B)}var dt=b.position();this.findOne(".top-left").y(dt.y),this.findOne(".bottom-right").x(dt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(b.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(b.x());else if(this._movingAnchorName==="bottom-left"){if(Q){var rt=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Y=Math.sqrt(Math.pow(rt.x-b.x(),2)+Math.pow(b.y()-rt.y,2));var bt=rt.x<b.x()?-1:1,lt=b.y()<rt.y?-1:1;V=Y*this.cos*bt,B=Y*this.sin*lt,b.x(rt.x-V),b.y(rt.y+B)}dt=b.position(),this.findOne(".top-left").x(dt.x),this.findOne(".bottom-right").y(dt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(b.y());else if(this._movingAnchorName==="bottom-right"){if(Q){var rt=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Y=Math.sqrt(Math.pow(b.x()-rt.x,2)+Math.pow(b.y()-rt.y,2));var bt=this.findOne(".bottom-right").x()<rt.x?-1:1,lt=this.findOne(".bottom-right").y()<rt.y?-1:1;V=Y*this.cos*bt,B=Y*this.sin*lt,this.findOne(".bottom-right").x(rt.x+V),this.findOne(".bottom-right").y(rt.y+B)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Nt=this.centeredScaling()||I.altKey;if(Nt){const Dt=this.findOne(".top-left"),It=this.findOne(".bottom-right"),qt=Dt.x(),Yt=Dt.y(),ce=this.getWidth()-It.x(),pe=this.getHeight()-It.y();It.move({x:-qt,y:-Yt}),Dt.move({x:ce,y:pe})}const Vt=this.findOne(".top-left").getAbsolutePosition();V=Vt.x,B=Vt.y;const nt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ht=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:V,y:B,width:nt,height:ht,rotation:h.Konva.getAngle(this.rotation())},I)}_handleMouseUp(I){this._removeEvents(I)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(I){var V;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const B=this.getNode();F--,this._fire("transformend",{evt:I,target:B}),(V=this.getLayer())===null||V===void 0||V.batchDraw(),B&&this._nodes.forEach(Y=>{var b;Y._fire("transformend",{evt:I,target:Y}),(b=Y.getLayer())===null||b===void 0||b.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(I,V){const B=this._getNodeRect(),Y=1;if(i.Util._inRange(I.width,-this.padding()*2-Y,Y)){this.update();return}if(i.Util._inRange(I.height,-this.padding()*2-Y,Y)){this.update();return}const b=new i.Transform;if(b.rotate(h.Konva.getAngle(this.rotation())),this._movingAnchorName&&I.width<0&&this._movingAnchorName.indexOf("left")>=0){const Q=b.point({x:-this.padding()*2,y:0});I.x+=Q.x,I.y+=Q.y,I.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y}else if(this._movingAnchorName&&I.width<0&&this._movingAnchorName.indexOf("right")>=0){const Q=b.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,I.width+=this.padding()*2}if(this._movingAnchorName&&I.height<0&&this._movingAnchorName.indexOf("top")>=0){const Q=b.point({x:0,y:-this.padding()*2});I.x+=Q.x,I.y+=Q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,I.height+=this.padding()*2}else if(this._movingAnchorName&&I.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Q=b.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,I.height+=this.padding()*2}if(this.boundBoxFunc()){const Q=this.boundBoxFunc()(B,I);Q?I=Q:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const q=1e7,G=new i.Transform;G.translate(B.x,B.y),G.rotate(B.rotation),G.scale(B.width/q,B.height/q);const X=new i.Transform,et=I.width/q,st=I.height/q;this.flipEnabled()===!1?(X.translate(I.x,I.y),X.rotate(I.rotation),X.translate(I.width<0?I.width:0,I.height<0?I.height:0),X.scale(Math.abs(et),Math.abs(st))):(X.translate(I.x,I.y),X.rotate(I.rotation),X.scale(et,st));const pt=X.multiply(G.invert());this._nodes.forEach(Q=>{var rt;const bt=Q.getParent().getAbsoluteTransform(),lt=Q.getTransform().copy();lt.translate(Q.offsetX(),Q.offsetY());const dt=new i.Transform;dt.multiply(bt.copy().invert()).multiply(pt).multiply(bt).multiply(lt);const Nt=dt.decompose();Q.setAttrs(Nt),(rt=Q.getLayer())===null||rt===void 0||rt.batchDraw()}),this.rotation(i.Util._getRotation(I.rotation)),this._nodes.forEach(Q=>{this._fire("transform",{evt:V,target:Q}),Q._fire("transform",{evt:V,target:Q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(I,V){this.findOne(I).setAttrs(V)}update(){var I;const V=this._getNodeRect();this.rotation(i.Util._getRotation(V.rotation));const B=V.width,Y=V.height,b=this.enabledAnchors(),q=this.resizeEnabled(),G=this.padding(),X=this.anchorSize(),et=this.find("._anchor");et.forEach(pt=>{pt.setAttrs({width:X,height:X,offsetX:X/2,offsetY:X/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:X/2+G,offsetY:X/2+G,visible:q&&b.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:B/2,y:0,offsetY:X/2+G,visible:q&&b.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:B,y:0,offsetX:X/2-G,offsetY:X/2+G,visible:q&&b.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Y/2,offsetX:X/2+G,visible:q&&b.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:B,y:Y/2,offsetX:X/2-G,visible:q&&b.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Y,offsetX:X/2+G,offsetY:X/2-G,visible:q&&b.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:B/2,y:Y,offsetY:X/2-G,visible:q&&b.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:B,y:Y,offsetX:X/2-G,offsetY:X/2-G,visible:q&&b.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:B/2,y:-this.rotateAnchorOffset()*i.Util._sign(Y)-G,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:B,height:Y,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const st=this.anchorStyleFunc();st&&et.forEach(pt=>{st(pt)}),(I=this.getLayer())===null||I===void 0||I.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const I=this.findOne("."+this._movingAnchorName);I&&I.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return e.Node.prototype.toObject.call(this)}clone(I){return e.Node.prototype.clone.call(this,I)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Cg.Transformer=K,K.isTransforming=()=>F>0;function j(M){return M instanceof Array||i.Util.warn("enabledAnchors value should be an array"),M instanceof Array&&M.forEach(function(I){U.indexOf(I)===-1&&i.Util.warn("Unknown anchor name: "+I+". Available names are: "+U.join(", "))}),M||[]}return K.prototype.className="Transformer",(0,m._registerNode)(K),t.Factory.addGetterSetter(K,"enabledAnchors",U,j),t.Factory.addGetterSetter(K,"flipEnabled",!0,(0,g.getBooleanValidator)()),t.Factory.addGetterSetter(K,"resizeEnabled",!0),t.Factory.addGetterSetter(K,"anchorSize",10,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"rotateEnabled",!0),t.Factory.addGetterSetter(K,"rotateLineVisible",!0),t.Factory.addGetterSetter(K,"rotationSnaps",[]),t.Factory.addGetterSetter(K,"rotateAnchorOffset",50,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(K,"rotationSnapTolerance",5,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"borderEnabled",!0),t.Factory.addGetterSetter(K,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(K,"anchorStrokeWidth",1,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"anchorFill","white"),t.Factory.addGetterSetter(K,"anchorCornerRadius",0,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(K,"borderStrokeWidth",1,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"borderDash"),t.Factory.addGetterSetter(K,"keepRatio",!0),t.Factory.addGetterSetter(K,"shiftBehavior","default"),t.Factory.addGetterSetter(K,"centeredScaling",!1),t.Factory.addGetterSetter(K,"ignoreStroke",!1),t.Factory.addGetterSetter(K,"padding",0,(0,g.getNumberValidator)()),t.Factory.addGetterSetter(K,"nodes"),t.Factory.addGetterSetter(K,"node"),t.Factory.addGetterSetter(K,"boundBoxFunc"),t.Factory.addGetterSetter(K,"anchorDragBoundFunc"),t.Factory.addGetterSetter(K,"anchorStyleFunc"),t.Factory.addGetterSetter(K,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(K,"useSingleNodeRotation",!0),t.Factory.backCompat(K,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Cg}var Rg={},gE;function w6(){if(gE)return Rg;gE=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.Wedge=void 0;const i=qe(),t=pa(),e=ke(),a=We(),l=ke();let c=class extends t.Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,e.Konva.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}};return Rg.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,l._registerNode)(c),i.Factory.addGetterSetter(c,"radius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"angle",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(c,"clockwise",!1),i.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Rg}var wg={},mE;function N6(){if(mE)return wg;mE=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.Blur=void 0;const i=qe(),t=Ii(),e=We();function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const l=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(m,_){const E=m.data,A=m.width,D=m.height;let C,R,P,U,H,N,x,L,F,K,j,M,I,V,B,Y,b,q,G,X,et,st,pt,Q;const rt=_+_+1,bt=A-1,lt=D-1,dt=_+1,Nt=dt*(dt+1)/2,Vt=new a,nt=l[_],ht=c[_];let Dt=null,It=Vt,qt=null,Yt=null;for(P=1;P<rt;P++)It=It.next=new a,P===dt&&(Dt=It);for(It.next=Vt,x=N=0,R=0;R<D;R++){for(Y=b=q=G=L=F=K=j=0,M=dt*(X=E[N]),I=dt*(et=E[N+1]),V=dt*(st=E[N+2]),B=dt*(pt=E[N+3]),L+=Nt*X,F+=Nt*et,K+=Nt*st,j+=Nt*pt,It=Vt,P=0;P<dt;P++)It.r=X,It.g=et,It.b=st,It.a=pt,It=It.next;for(P=1;P<dt;P++)U=N+((bt<P?bt:P)<<2),L+=(It.r=X=E[U])*(Q=dt-P),F+=(It.g=et=E[U+1])*Q,K+=(It.b=st=E[U+2])*Q,j+=(It.a=pt=E[U+3])*Q,Y+=X,b+=et,q+=st,G+=pt,It=It.next;for(qt=Vt,Yt=Dt,C=0;C<A;C++)E[N+3]=pt=j*nt>>ht,pt!==0?(pt=255/pt,E[N]=(L*nt>>ht)*pt,E[N+1]=(F*nt>>ht)*pt,E[N+2]=(K*nt>>ht)*pt):E[N]=E[N+1]=E[N+2]=0,L-=M,F-=I,K-=V,j-=B,M-=qt.r,I-=qt.g,V-=qt.b,B-=qt.a,U=x+((U=C+_+1)<bt?U:bt)<<2,Y+=qt.r=E[U],b+=qt.g=E[U+1],q+=qt.b=E[U+2],G+=qt.a=E[U+3],L+=Y,F+=b,K+=q,j+=G,qt=qt.next,M+=X=Yt.r,I+=et=Yt.g,V+=st=Yt.b,B+=pt=Yt.a,Y-=X,b-=et,q-=st,G-=pt,Yt=Yt.next,N+=4;x+=A}for(C=0;C<A;C++){for(b=q=G=Y=F=K=j=L=0,N=C<<2,M=dt*(X=E[N]),I=dt*(et=E[N+1]),V=dt*(st=E[N+2]),B=dt*(pt=E[N+3]),L+=Nt*X,F+=Nt*et,K+=Nt*st,j+=Nt*pt,It=Vt,P=0;P<dt;P++)It.r=X,It.g=et,It.b=st,It.a=pt,It=It.next;for(H=A,P=1;P<=_;P++)N=H+C<<2,L+=(It.r=X=E[N])*(Q=dt-P),F+=(It.g=et=E[N+1])*Q,K+=(It.b=st=E[N+2])*Q,j+=(It.a=pt=E[N+3])*Q,Y+=X,b+=et,q+=st,G+=pt,It=It.next,P<lt&&(H+=A);for(N=C,qt=Vt,Yt=Dt,R=0;R<D;R++)U=N<<2,E[U+3]=pt=j*nt>>ht,pt>0?(pt=255/pt,E[U]=(L*nt>>ht)*pt,E[U+1]=(F*nt>>ht)*pt,E[U+2]=(K*nt>>ht)*pt):E[U]=E[U+1]=E[U+2]=0,L-=M,F-=I,K-=V,j-=B,M-=qt.r,I-=qt.g,V-=qt.b,B-=qt.a,U=C+((U=R+dt)<lt?U:lt)*A<<2,L+=Y+=qt.r=E[U],F+=b+=qt.g=E[U+1],K+=q+=qt.b=E[U+2],j+=G+=qt.a=E[U+3],qt=qt.next,M+=X=Yt.r,I+=et=Yt.g,V+=st=Yt.b,B+=pt=Yt.a,Y-=X,b-=et,q-=st,G-=pt,Yt=Yt.next,N+=A}}const g=function(_){const E=Math.round(this.blurRadius());E>0&&h(_,E)};return wg.Blur=g,i.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),wg}var Ng={},pE;function x6(){if(pE)return Ng;pE=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.Brighten=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=this.brightness()*255,h=l.data,g=h.length;for(let m=0;m<g;m+=4)h[m]+=c,h[m+1]+=c,h[m+2]+=c};return Ng.Brighten=a,i.Factory.addGetterSetter(t.Node,"brightness",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),Ng}var xg={},yE;function D6(){if(yE)return xg;yE=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Contrast=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=Math.pow((this.contrast()+100)/100,2),h=l.data,g=h.length;let m=150,_=150,E=150;for(let A=0;A<g;A+=4)m=h[A],_=h[A+1],E=h[A+2],m/=255,m-=.5,m*=c,m+=.5,m*=255,_/=255,_-=.5,_*=c,_+=.5,_*=255,E/=255,E-=.5,E*=c,E+=.5,E*=255,m=m<0?0:m>255?255:m,_=_<0?0:_>255?255:_,E=E<0?0:E>255?255:E,h[A]=m,h[A+1]=_,h[A+2]=E};return xg.Contrast=a,i.Factory.addGetterSetter(t.Node,"contrast",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),xg}var Dg={},_E;function I6(){if(_E)return Dg;_E=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.Emboss=void 0;const i=qe(),t=Ii(),e=Ri(),a=We(),l=function(c){const h=this.embossStrength()*10,g=this.embossWhiteLevel()*255,m=this.embossDirection(),_=this.embossBlend(),E=c.data,A=c.width,D=c.height,C=A*4;let R=0,P=0,U=D;switch(m){case"top-left":R=-1,P=-1;break;case"top":R=-1,P=0;break;case"top-right":R=-1,P=1;break;case"right":R=0,P=1;break;case"bottom-right":R=1,P=1;break;case"bottom":R=1,P=0;break;case"bottom-left":R=1,P=-1;break;case"left":R=0,P=-1;break;default:e.Util.error("Unknown emboss direction: "+m)}do{const H=(U-1)*C;let N=R;U+N<1&&(N=0),U+N>D&&(N=0);const x=(U-1+N)*A*4;let L=A;do{const F=H+(L-1)*4;let K=P;L+K<1&&(K=0),L+K>A&&(K=0);const j=x+(L-1+K)*4,M=E[F]-E[j],I=E[F+1]-E[j+1],V=E[F+2]-E[j+2];let B=M;const Y=B>0?B:-B,b=I>0?I:-I,q=V>0?V:-V;if(b>Y&&(B=I),q>Y&&(B=V),B*=h,_){const G=E[F]+B,X=E[F+1]+B,et=E[F+2]+B;E[F]=G>255?255:G<0?0:G,E[F+1]=X>255?255:X<0?0:X,E[F+2]=et>255?255:et<0?0:et}else{let G=g-B;G<0?G=0:G>255&&(G=255),E[F]=E[F+1]=E[F+2]=G}}while(--L)}while(--U)};return Dg.Emboss=l,i.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,i.Factory.afterSetFilter),Dg}var Ig={},vE;function O6(){if(vE)return Ig;vE=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.Enhance=void 0;const i=qe(),t=Ii(),e=We();function a(c,h,g,m,_){const E=g-h,A=_-m;if(E===0)return m+A/2;if(A===0)return m;let D=(c-h)/E;return D=A*D+m,D}const l=function(c){const h=c.data,g=h.length;let m=h[0],_=m,E,A=h[1],D=A,C,R=h[2],P=R,U;const H=this.enhance();if(H===0)return;for(let B=0;B<g;B+=4)E=h[B+0],E<m?m=E:E>_&&(_=E),C=h[B+1],C<A?A=C:C>D&&(D=C),U=h[B+2],U<R?R=U:U>P&&(P=U);_===m&&(_=255,m=0),D===A&&(D=255,A=0),P===R&&(P=255,R=0);let N,x,L,F,K,j,M,I,V;H>0?(x=_+H*(255-_),L=m-H*(m-0),K=D+H*(255-D),j=A-H*(A-0),I=P+H*(255-P),V=R-H*(R-0)):(N=(_+m)*.5,x=_+H*(_-N),L=m+H*(m-N),F=(D+A)*.5,K=D+H*(D-F),j=A+H*(A-F),M=(P+R)*.5,I=P+H*(P-M),V=R+H*(R-M));for(let B=0;B<g;B+=4)h[B+0]=a(h[B+0],m,_,L,x),h[B+1]=a(h[B+1],A,D,j,K),h[B+2]=a(h[B+2],R,P,V,I)};return Ig.Enhance=l,i.Factory.addGetterSetter(t.Node,"enhance",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),Ig}var Og={},EE;function M6(){if(EE)return Og;EE=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.Grayscale=void 0;const i=function(t){const e=t.data,a=e.length;for(let l=0;l<a;l+=4){const c=.34*e[l]+.5*e[l+1]+.16*e[l+2];e[l]=c,e[l+1]=c,e[l+2]=c}};return Og.Grayscale=i,Og}var Mg={},SE;function V6(){if(SE)return Mg;SE=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.HSL=void 0;const i=qe(),t=Ii(),e=We();i.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"luminance",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter);const a=function(l){const c=l.data,h=c.length,g=1,m=Math.pow(2,this.saturation()),_=Math.abs(this.hue()+360)%360,E=this.luminance()*127,A=g*m*Math.cos(_*Math.PI/180),D=g*m*Math.sin(_*Math.PI/180),C=.299*g+.701*A+.167*D,R=.587*g-.587*A+.33*D,P=.114*g-.114*A-.497*D,U=.299*g-.299*A-.328*D,H=.587*g+.413*A+.035*D,N=.114*g-.114*A+.293*D,x=.299*g-.3*A+1.25*D,L=.587*g-.586*A-1.05*D,F=.114*g+.886*A-.2*D;let K,j,M,I;for(let V=0;V<h;V+=4)K=c[V+0],j=c[V+1],M=c[V+2],I=c[V+3],c[V+0]=C*K+R*j+P*M+E,c[V+1]=U*K+H*j+N*M+E,c[V+2]=x*K+L*j+F*M+E,c[V+3]=I};return Mg.HSL=a,Mg}var Vg={},TE;function P6(){if(TE)return Vg;TE=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.HSV=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=l.data,h=c.length,g=Math.pow(2,this.value()),m=Math.pow(2,this.saturation()),_=Math.abs(this.hue()+360)%360,E=g*m*Math.cos(_*Math.PI/180),A=g*m*Math.sin(_*Math.PI/180),D=.299*g+.701*E+.167*A,C=.587*g-.587*E+.33*A,R=.114*g-.114*E-.497*A,P=.299*g-.299*E-.328*A,U=.587*g+.413*E+.035*A,H=.114*g-.114*E+.293*A,N=.299*g-.3*E+1.25*A,x=.587*g-.586*E-1.05*A,L=.114*g+.886*E-.2*A;let F,K,j,M;for(let I=0;I<h;I+=4)F=c[I+0],K=c[I+1],j=c[I+2],M=c[I+3],c[I+0]=D*F+C*K+R*j,c[I+1]=P*F+U*K+H*j,c[I+2]=N*F+x*K+L*j,c[I+3]=M};return Vg.HSV=a,i.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"value",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),Vg}var Pg={},bE;function U6(){if(bE)return Pg;bE=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.Invert=void 0;const i=function(t){const e=t.data,a=e.length;for(let l=0;l<a;l+=4)e[l]=255-e[l],e[l+1]=255-e[l+1],e[l+2]=255-e[l+2]};return Pg.Invert=i,Pg}var Ug={},AE;function L6(){if(AE)return Ug;AE=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.Kaleidoscope=void 0;const i=qe(),t=Ii(),e=Ri(),a=We(),l=function(g,m,_){const E=g.data,A=m.data,D=g.width,C=g.height,R=_.polarCenterX||D/2,P=_.polarCenterY||C/2;let U=Math.sqrt(R*R+P*P),H=D-R,N=C-P;const x=Math.sqrt(H*H+N*N);U=x>U?x:U;const L=C,F=D,K=360/F*Math.PI/180;for(let j=0;j<F;j+=1){const M=Math.sin(j*K),I=Math.cos(j*K);for(let V=0;V<L;V+=1){H=Math.floor(R+U*V/L*I),N=Math.floor(P+U*V/L*M);let B=(N*D+H)*4;const Y=E[B+0],b=E[B+1],q=E[B+2],G=E[B+3];B=(j+V*D)*4,A[B+0]=Y,A[B+1]=b,A[B+2]=q,A[B+3]=G}}},c=function(g,m,_){const E=g.data,A=m.data,D=g.width,C=g.height,R=_.polarCenterX||D/2,P=_.polarCenterY||C/2;let U=Math.sqrt(R*R+P*P),H=D-R,N=C-P;const x=Math.sqrt(H*H+N*N);U=x>U?x:U;const L=C,F=D,K=0;let j,M;for(H=0;H<D;H+=1)for(N=0;N<C;N+=1){const I=H-R,V=N-P,B=Math.sqrt(I*I+V*V)*L/U;let Y=(Math.atan2(V,I)*180/Math.PI+360+K)%360;Y=Y*F/360,j=Math.floor(Y),M=Math.floor(B);let b=(M*D+j)*4;const q=E[b+0],G=E[b+1],X=E[b+2],et=E[b+3];b=(N*D+H)*4,A[b+0]=q,A[b+1]=G,A[b+2]=X,A[b+3]=et}},h=function(g){const m=g.width,_=g.height;let E,A,D,C,R,P,U,H,N,x,L=Math.round(this.kaleidoscopePower());const F=Math.round(this.kaleidoscopeAngle()),K=Math.floor(m*(F%360)/360);if(L<1)return;const j=e.Util.createCanvasElement();j.width=m,j.height=_;const M=j.getContext("2d").getImageData(0,0,m,_);e.Util.releaseCanvas(j),l(g,M,{polarCenterX:m/2,polarCenterY:_/2});let I=m/Math.pow(2,L);for(;I<=8;)I=I*2,L-=1;I=Math.ceil(I);let V=I,B=0,Y=V,b=1;for(K+I>m&&(B=V,Y=0,b=-1),A=0;A<_;A+=1)for(E=B;E!==Y;E+=b)D=Math.round(E+K)%m,N=(m*A+D)*4,R=M.data[N+0],P=M.data[N+1],U=M.data[N+2],H=M.data[N+3],x=(m*A+E)*4,M.data[x+0]=R,M.data[x+1]=P,M.data[x+2]=U,M.data[x+3]=H;for(A=0;A<_;A+=1)for(V=Math.floor(I),C=0;C<L;C+=1){for(E=0;E<V+1;E+=1)N=(m*A+E)*4,R=M.data[N+0],P=M.data[N+1],U=M.data[N+2],H=M.data[N+3],x=(m*A+V*2-E-1)*4,M.data[x+0]=R,M.data[x+1]=P,M.data[x+2]=U,M.data[x+3]=H;V*=2}c(M,g,{})};return Ug.Kaleidoscope=h,i.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),Ug}var Lg={},CE;function z6(){if(CE)return Lg;CE=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.Mask=void 0;const i=qe(),t=Ii(),e=We();function a(D,C,R){let P=(R*D.width+C)*4;const U=[];return U.push(D.data[P++],D.data[P++],D.data[P++],D.data[P++]),U}function l(D,C){return Math.sqrt(Math.pow(D[0]-C[0],2)+Math.pow(D[1]-C[1],2)+Math.pow(D[2]-C[2],2))}function c(D){const C=[0,0,0];for(let R=0;R<D.length;R++)C[0]+=D[R][0],C[1]+=D[R][1],C[2]+=D[R][2];return C[0]/=D.length,C[1]/=D.length,C[2]/=D.length,C}function h(D,C){const R=a(D,0,0),P=a(D,D.width-1,0),U=a(D,0,D.height-1),H=a(D,D.width-1,D.height-1),N=C||10;if(l(R,P)<N&&l(P,H)<N&&l(H,U)<N&&l(U,R)<N){const x=c([P,R,H,U]),L=[];for(let F=0;F<D.width*D.height;F++){const K=l(x,[D.data[F*4],D.data[F*4+1],D.data[F*4+2]]);L[F]=K<N?0:255}return L}}function g(D,C){for(let R=0;R<D.width*D.height;R++)D.data[4*R+3]=C[R]}function m(D,C,R){const P=[1,1,1,1,0,1,1,1,1],U=Math.round(Math.sqrt(P.length)),H=Math.floor(U/2),N=[];for(let x=0;x<R;x++)for(let L=0;L<C;L++){const F=x*C+L;let K=0;for(let j=0;j<U;j++)for(let M=0;M<U;M++){const I=x+j-H,V=L+M-H;if(I>=0&&I<R&&V>=0&&V<C){const B=I*C+V,Y=P[j*U+M];K+=D[B]*Y}}N[F]=K===255*8?255:0}return N}function _(D,C,R){const P=[1,1,1,1,1,1,1,1,1],U=Math.round(Math.sqrt(P.length)),H=Math.floor(U/2),N=[];for(let x=0;x<R;x++)for(let L=0;L<C;L++){const F=x*C+L;let K=0;for(let j=0;j<U;j++)for(let M=0;M<U;M++){const I=x+j-H,V=L+M-H;if(I>=0&&I<R&&V>=0&&V<C){const B=I*C+V,Y=P[j*U+M];K+=D[B]*Y}}N[F]=K>=255*4?255:0}return N}function E(D,C,R){const P=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],U=Math.round(Math.sqrt(P.length)),H=Math.floor(U/2),N=[];for(let x=0;x<R;x++)for(let L=0;L<C;L++){const F=x*C+L;let K=0;for(let j=0;j<U;j++)for(let M=0;M<U;M++){const I=x+j-H,V=L+M-H;if(I>=0&&I<R&&V>=0&&V<C){const B=I*C+V,Y=P[j*U+M];K+=D[B]*Y}}N[F]=K}return N}const A=function(D){const C=this.threshold();let R=h(D,C);return R&&(R=m(R,D.width,D.height),R=_(R,D.width,D.height),R=E(R,D.width,D.height),g(D,R)),D};return Lg.Mask=A,i.Factory.addGetterSetter(t.Node,"threshold",0,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),Lg}var zg={},RE;function k6(){if(RE)return zg;RE=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.Noise=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=this.noise()*255,h=l.data,g=h.length,m=c/2;for(let _=0;_<g;_+=4)h[_+0]+=m-2*m*Math.random(),h[_+1]+=m-2*m*Math.random(),h[_+2]+=m-2*m*Math.random()};return zg.Noise=a,i.Factory.addGetterSetter(t.Node,"noise",.2,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),zg}var kg={},wE;function B6(){if(wE)return kg;wE=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.Pixelate=void 0;const i=qe(),t=Ri(),e=Ii(),a=We(),l=function(c){let h=Math.ceil(this.pixelSize()),g=c.width,m=c.height,_,E,A,D,C,R,P,U=Math.ceil(g/h),H=Math.ceil(m/h),N,x,L,F,K,j,M,I=c.data;if(h<=0){t.Util.error("pixelSize value can not be <= 0");return}for(K=0;K<U;K+=1)for(j=0;j<H;j+=1){for(D=0,C=0,R=0,P=0,N=K*h,x=N+h,L=j*h,F=L+h,M=0,_=N;_<x;_+=1)if(!(_>=g))for(E=L;E<F;E+=1)E>=m||(A=(g*E+_)*4,D+=I[A+0],C+=I[A+1],R+=I[A+2],P+=I[A+3],M+=1);for(D=D/M,C=C/M,R=R/M,P=P/M,_=N;_<x;_+=1)if(!(_>=g))for(E=L;E<F;E+=1)E>=m||(A=(g*E+_)*4,I[A+0]=D,I[A+1]=C,I[A+2]=R,I[A+3]=P)}};return kg.Pixelate=l,i.Factory.addGetterSetter(e.Node,"pixelSize",8,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),kg}var Bg={},NE;function G6(){if(NE)return Bg;NE=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.Posterize=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=Math.round(this.levels()*254)+1,h=l.data,g=h.length,m=255/c;for(let _=0;_<g;_+=1)h[_]=Math.floor(h[_]/m)*m};return Bg.Posterize=a,i.Factory.addGetterSetter(t.Node,"levels",.5,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),Bg}var Gg={},xE;function F6(){if(xE)return Gg;xE=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.RGB=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=l.data,h=c.length,g=this.red(),m=this.green(),_=this.blue();for(let E=0;E<h;E+=4){const A=(.34*c[E]+.5*c[E+1]+.16*c[E+2])/255;c[E]=A*g,c[E+1]=A*m,c[E+2]=A*_,c[E+3]=c[E+3]}};return Gg.RGB=a,i.Factory.addGetterSetter(t.Node,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),i.Factory.addGetterSetter(t.Node,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),i.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,i.Factory.afterSetFilter),Gg}var Fg={},DE;function j6(){if(DE)return Fg;DE=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.RGBA=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=l.data,h=c.length,g=this.red(),m=this.green(),_=this.blue(),E=this.alpha();for(let A=0;A<h;A+=4){const D=1-E;c[A]=g*E+c[A]*D,c[A+1]=m*E+c[A+1]*D,c[A+2]=_*E+c[A+2]*D}};return Fg.RGBA=a,i.Factory.addGetterSetter(t.Node,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),i.Factory.addGetterSetter(t.Node,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),i.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l}),Fg}var jg={},IE;function H6(){if(IE)return jg;IE=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.Sepia=void 0;const i=function(t){const e=t.data,a=e.length;for(let l=0;l<a;l+=4){const c=e[l+0],h=e[l+1],g=e[l+2];e[l+0]=Math.min(255,c*.393+h*.769+g*.189),e[l+1]=Math.min(255,c*.349+h*.686+g*.168),e[l+2]=Math.min(255,c*.272+h*.534+g*.131)}};return jg.Sepia=i,jg}var Hg={},OE;function q6(){if(OE)return Hg;OE=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Solarize=void 0;const i=function(t){const e=t.data,a=t.width,l=t.height,c=a*4;let h=l;do{const g=(h-1)*c;let m=a;do{const _=g+(m-1)*4;let E=e[_],A=e[_+1],D=e[_+2];E>127&&(E=255-E),A>127&&(A=255-A),D>127&&(D=255-D),e[_]=E,e[_+1]=A,e[_+2]=D}while(--m)}while(--h)};return Hg.Solarize=i,Hg}var qg={},ME;function K6(){if(ME)return qg;ME=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.Threshold=void 0;const i=qe(),t=Ii(),e=We(),a=function(l){const c=this.threshold()*255,h=l.data,g=h.length;for(let m=0;m<g;m+=1)h[m]=h[m]<c?0:255};return qg.Threshold=a,i.Factory.addGetterSetter(t.Node,"threshold",.5,(0,e.getNumberValidator)(),i.Factory.afterSetFilter),qg}var VE;function Y6(){if(VE)return rg;VE=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.Konva=void 0;const i=K1(),t=g6(),e=p6(),a=y6(),l=_6(),c=v6(),h=E6(),g=KS(),m=M_(),_=YS(),E=S6(),A=T6(),D=b6(),C=A6(),R=QS(),P=C6(),U=R6(),H=w6(),N=N6(),x=x6(),L=D6(),F=I6(),K=O6(),j=M6(),M=V6(),I=P6(),V=U6(),B=L6(),Y=z6(),b=k6(),q=B6(),G=G6(),X=F6(),et=j6(),st=H6(),pt=q6(),Q=K6();return rg.Konva=i.Konva.Util._assign(i.Konva,{Arc:t.Arc,Arrow:e.Arrow,Circle:a.Circle,Ellipse:l.Ellipse,Image:c.Image,Label:h.Label,Tag:h.Tag,Line:g.Line,Path:m.Path,Rect:_.Rect,RegularPolygon:E.RegularPolygon,Ring:A.Ring,Sprite:D.Sprite,Star:C.Star,Text:R.Text,TextPath:P.TextPath,Transformer:U.Transformer,Wedge:H.Wedge,Filters:{Blur:N.Blur,Brighten:x.Brighten,Contrast:L.Contrast,Emboss:F.Emboss,Enhance:K.Enhance,Grayscale:j.Grayscale,HSL:M.HSL,HSV:I.HSV,Invert:V.Invert,Kaleidoscope:B.Kaleidoscope,Mask:Y.Mask,Noise:b.Noise,Pixelate:q.Pixelate,Posterize:G.Posterize,RGB:X.RGB,RGBA:et.RGBA,Sepia:st.Sepia,Solarize:pt.Solarize,Threshold:Q.Threshold}}),rg}var Q6=gp.exports,PE;function X6(){if(PE)return gp.exports;PE=1,Object.defineProperty(Q6,"__esModule",{value:!0});const i=Y6();return gp.exports=i.Konva,gp.exports}X6();var ap={exports:{}},UE;function Z6(){return UE||(UE=1,function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var e=K1();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return e.Konva}});const a=K1();i.exports=a.Konva}(ap,ap.exports)),ap.exports}var W6=Z6();const Dp=N_(W6);var R1={exports:{}},w1={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function J6(){return LE||(LE=1,function(i){i.exports=function(t){function e(s,o,d,v){return new Jm(s,o,d,v)}function a(){}function l(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return s===null||typeof s!="object"?null:(s=gn&&s[gn]||s["@@iterator"],typeof s=="function"?s:null)}function h(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===vi?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Kl:return"Fragment";case Ms:return"Portal";case Yl:return"Profiler";case Po:return"StrictMode";case fl:return"Suspense";case qc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ql:return(s.displayName||"Context")+".Provider";case yd:return(s._context.displayName||"Context")+".Consumer";case Yh:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case xu:return o=s.displayName||null,o!==null?o:h(s.type)||"Memo";case dl:o=s._payload,s=s._init;try{return h(s(o))}catch{}}return null}function g(s){if(Xl===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);Xl=o&&o[1]||"",Zl=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xl+s+Zl}function m(s,o){if(!s||Du)return"";Du=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(o){var Qt=function(){throw Error()};if(Object.defineProperty(Qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qt,[])}catch(Te){var Bt=Te}Reflect.construct(s,[],Qt)}else{try{Qt.call()}catch(Te){Bt=Te}s.call(Qt.prototype)}}else{try{throw Error()}catch(Te){Bt=Te}(Qt=s())&&typeof Qt.catch=="function"&&Qt.catch(function(){})}}catch(Te){if(Te&&Bt&&typeof Te.stack=="string")return[Te.stack,Bt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=v.DetermineComponentFrameRoot(),W=O[0],at=O[1];if(W&&at){var mt=W.split(`
`),Rt=at.split(`
`);for(T=v=0;v<mt.length&&!mt[v].includes("DetermineComponentFrameRoot");)v++;for(;T<Rt.length&&!Rt[T].includes("DetermineComponentFrameRoot");)T++;if(v===mt.length||T===Rt.length)for(v=mt.length-1,T=Rt.length-1;1<=v&&0<=T&&mt[v]!==Rt[T];)T--;for(;1<=v&&0<=T;v--,T--)if(mt[v]!==Rt[T]){if(v!==1||T!==1)do if(v--,T--,0>T||mt[v]!==Rt[T]){var Ft=`
`+mt[v].replace(" at new "," at ");return s.displayName&&Ft.includes("<anonymous>")&&(Ft=Ft.replace("<anonymous>",s.displayName)),Ft}while(1<=v&&0<=T);break}}}finally{Du=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?g(d):""}function _(s){switch(s.tag){case 26:case 27:case 5:return g(s.type);case 16:return g("Lazy");case 13:return g("Suspense");case 19:return g("SuspenseList");case 0:case 15:return s=m(s.type,!1),s;case 11:return s=m(s.type.render,!1),s;case 1:return s=m(s.type,!0),s;default:return""}}function E(s){try{var o="";do o+=_(s),s=s.return;while(s);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function A(s){var o=s,d=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(d=o.return),s=o.return;while(s)}return o.tag===3?d:null}function D(s){if(A(s)!==s)throw Error(l(188))}function C(s){var o=s.alternate;if(!o){if(o=A(s),o===null)throw Error(l(188));return o!==s?null:s}for(var d=s,v=o;;){var T=d.return;if(T===null)break;var O=T.alternate;if(O===null){if(v=T.return,v!==null){d=v;continue}break}if(T.child===O.child){for(O=T.child;O;){if(O===d)return D(T),s;if(O===v)return D(T),o;O=O.sibling}throw Error(l(188))}if(d.return!==v.return)d=T,v=O;else{for(var W=!1,at=T.child;at;){if(at===d){W=!0,d=T,v=O;break}if(at===v){W=!0,v=T,d=O;break}at=at.sibling}if(!W){for(at=O.child;at;){if(at===d){W=!0,d=O,v=T;break}if(at===v){W=!0,v=O,d=T;break}at=at.sibling}if(!W)throw Error(l(189))}}if(d.alternate!==v)throw Error(l(190))}if(d.tag!==3)throw Error(l(188));return d.stateNode.current===d?s:o}function R(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=R(s),o!==null)return o;s=s.sibling}return null}function P(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(s.tag!==4&&(o=P(s),o!==null))return o;s=s.sibling}return null}function U(s){return{current:s}}function H(s){0>to||(s.current=lf[to],lf[to]=null,to--)}function N(s,o){to++,lf[to]=s.current,s.current=o}function x(s){return s>>>=0,s===0?32:31-(Gd(s)/Gy|0)|0}function L(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function F(s,o){var d=s.pendingLanes;if(d===0)return 0;var v=0,T=s.suspendedLanes,O=s.pingedLanes,W=s.warmLanes;s=s.finishedLanes!==0;var at=d&134217727;return at!==0?(d=at&~T,d!==0?v=L(d):(O&=at,O!==0?v=L(O):s||(W=at&~W,W!==0&&(v=L(W))))):(at=d&~T,at!==0?v=L(at):O!==0?v=L(O):s||(W=d&~W,W!==0&&(v=L(W)))),v===0?0:o!==0&&o!==v&&(o&T)===0&&(T=v&-v,W=o&-o,T>=W||T===32&&(W&4194176)!==0)?o:v}function K(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function j(s,o){switch(s){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M(){var s=Xc;return Xc<<=1,(Xc&4194176)===0&&(Xc=128),s}function I(){var s=Pu;return Pu<<=1,(Pu&62914560)===0&&(Pu=4194304),s}function V(s){for(var o=[],d=0;31>d;d++)o.push(s);return o}function B(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Y(s,o,d,v,T,O){var W=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var at=s.entanglements,mt=s.expirationTimes,Rt=s.hiddenUpdates;for(d=W&~d;0<d;){var Ft=31-li(d),Qt=1<<Ft;at[Ft]=0,mt[Ft]=-1;var Bt=Rt[Ft];if(Bt!==null)for(Rt[Ft]=null,Ft=0;Ft<Bt.length;Ft++){var Te=Bt[Ft];Te!==null&&(Te.lane&=-536870913)}d&=~Qt}v!==0&&b(s,v,0),O!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=O&~(W&~o))}function b(s,o,d){s.pendingLanes|=o,s.suspendedLanes&=~o;var v=31-li(o);s.entangledLanes|=o,s.entanglements[v]=s.entanglements[v]|1073741824|d&4194218}function q(s,o){var d=s.entangledLanes|=o;for(s=s.entanglements;d;){var v=31-li(d),T=1<<v;T&o|s[v]&o&&(s[v]|=o),d&=~T}}function G(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function X(s){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(Lu,s,void 0,(s.current.flags&128)===128)}catch{}}function et(s){if(typeof oa=="function"&&uf(s),Ei&&typeof Ei.setStrictMode=="function")try{Ei.setStrictMode(Lu,s)}catch{}}function st(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}function pt(s,o){if(typeof s=="object"&&s!==null){var d=cf.get(s);return d!==void 0?d:(o={value:s,source:o,stack:E(o)},cf.set(s,o),o)}return{value:s,source:o,stack:E(o)}}function Q(s,o){dr[gr++]=zu,dr[gr++]=no,no=s,zu=o}function rt(s,o,d){Ya[ua++]=Ls,Ya[ua++]=zs,Ya[ua++]=rs,rs=s;var v=Ls;s=zs;var T=32-li(v)-1;v&=~(1<<T),d+=1;var O=32-li(o)+T;if(30<O){var W=T-T%5;O=(v&(1<<W)-1).toString(32),v>>=W,T-=W,Ls=1<<32-li(o)+T|d<<T|v,zs=O+s}else Ls=1<<O|d<<T|v,zs=s}function bt(s){s.return!==null&&(Q(s,1),rt(s,1,0))}function lt(s){for(;s===no;)no=dr[--gr],dr[gr]=null,zu=dr[--gr],dr[gr]=null;for(;s===rs;)rs=Ya[--ua],Ya[ua]=null,zs=Ya[--ua],Ya[ua]=null,Ls=Ya[--ua],Ya[ua]=null}function dt(s,o){N(_l,o),N(Or,s),N(oi,null),s=_d(o),H(oi),N(oi,s)}function Nt(){H(oi),H(Or),H(_l)}function Vt(s){s.memoizedState!==null&&N(Wc,s);var o=oi.current,d=$m(o,s.type);o!==d&&(N(Or,s),N(oi,d))}function nt(s){Or.current===s&&(H(oi),H(Or)),Wc.current===s&&(H(Wc),ns?ml._currentValue=Lo:ml._currentValue2=Lo)}function ht(s){var o=Error(l(418,""));throw ce(pt(o,s)),Jc}function Dt(s,o){if(!Ka)throw Error(l(175));Bo(s.stateNode,s.type,s.memoizedProps,o,s)||ht(s)}function It(s){for(ui=s.return;ui;)switch(ui.tag){case 3:case 27:ss=!0;return;case 5:case 13:ss=!1;return;default:ui=ui.return}}function qt(s){if(!Ka||s!==ui)return!1;if(!nn)return It(s),nn=!0,!1;var o=!1;if(Li?s.tag!==3&&s.tag!==27&&(s.tag!==5||Id(s.type)&&!Xi(s.type,s.memoizedProps))&&(o=!0):s.tag!==3&&(s.tag!==5||Id(s.type)&&!Xi(s.type,s.memoizedProps))&&(o=!0),o&&pn&&ht(s),It(s),s.tag===13){if(!Ka)throw Error(l(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));pn=I0(s)}else pn=ui?$l(s.stateNode):null;return!0}function Yt(){Ka&&(pn=ui=null,nn=!1)}function ce(s){Mr===null?Mr=[s]:Mr.push(s)}function pe(){for(var s=vl,o=ls=vl=0;o<s;){var d=Qa[o];Qa[o++]=null;var v=Qa[o];Qa[o++]=null;var T=Qa[o];Qa[o++]=null;var O=Qa[o];if(Qa[o++]=null,v!==null&&T!==null){var W=v.pending;W===null?T.next=T:(T.next=W.next,W.next=T),v.pending=T}O!==0&&Je(d,T,O)}}function ae(s,o,d,v){Qa[vl++]=s,Qa[vl++]=o,Qa[vl++]=d,Qa[vl++]=v,ls|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function Ke(s,o,d,v){return ae(s,o,d,v),Gi(s)}function ve(s,o){return ae(s,null,null,o),Gi(s)}function Je(s,o,d){s.lanes|=d;var v=s.alternate;v!==null&&(v.lanes|=d);for(var T=!1,O=s.return;O!==null;)O.childLanes|=d,v=O.alternate,v!==null&&(v.childLanes|=d),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(T=!0)),s=O,O=O.return;T&&o!==null&&s.tag===3&&(O=s.stateNode,T=31-li(d),O=O.hiddenUpdates,s=O[T],s===null?O[T]=[o]:s.push(o),o.lane=d|536870912)}function Gi(s){if(50<Qo)throw Qo=0,Kd=null,Error(l(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}function un(s){s!==io&&s.next===null&&(io===null?In=io=s:io=io.next=s),ci=!0,hf||(hf=!0,Re(He))}function Oi(s,o){if(!ff&&ci){ff=!0;do for(var d=!1,v=In;v!==null;){if(s!==0){var T=v.pendingLanes;if(T===0)var O=0;else{var W=v.suspendedLanes,at=v.pingedLanes;O=(1<<31-li(42|s)+1)-1,O&=T&~(W&~at),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(d=!0,Fi(v,O))}else O=Le,O=F(v,v===_n?O:0),(O&3)===0||K(v,O)||(d=!0,Fi(v,O));v=v.next}while(d);ff=!1}}function He(){ci=hf=!1;var s=0;ku!==0&&(i0()&&(s=ku),ku=0);for(var o=fr(),d=null,v=In;v!==null;){var T=v.next,O=Fn(v,o);O===0?(v.next=null,d===null?In=T:d.next=T,T===null&&(io=d)):(d=v,(s!==0||(O&3)!==0)&&(ci=!0)),v=T}Oi(s)}function Fn(s,o){for(var d=s.suspendedLanes,v=s.pingedLanes,T=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var W=31-li(O),at=1<<W,mt=T[W];mt===-1?((at&d)===0||(at&v)!==0)&&(T[W]=j(at,o)):mt<=o&&(s.expiredLanes|=at),O&=~at}if(o=_n,d=Le,d=F(s,s===o?d:0),v=s.callbackNode,d===0||s===o&&mn===2||s.cancelPendingCommit!==null)return v!==null&&v!==null&&as(v),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||K(s,d)){if(o=d&-d,o===s.callbackPriority)return o;switch(v!==null&&as(v),G(d)){case 2:case 8:d=Zc;break;case 32:d=Uu;break;case 268435456:d=Fo;break;default:d=Uu}return v=Ie.bind(null,s),d=Us(d,v),s.callbackPriority=o,s.callbackNode=d,o}return v!==null&&v!==null&&as(v),s.callbackPriority=2,s.callbackNode=null,2}function Ie(s,o){var d=s.callbackNode;if(Fl()&&s.callbackNode!==d)return null;var v=Le;return v=F(s,s===_n?v:0),v===0?null:(ur(s,v,o),Fn(s,fr()),s.callbackNode!=null&&s.callbackNode===d?Ie.bind(null,s):null)}function Fi(s,o){if(Fl())return null;ur(s,o,!0)}function Re(s){l0?o0(function(){(Ue&6)!==0?Us(of,s):s()}):Us(of,s)}function Ye(){return ku===0&&(ku=M()),ku}function Zn(s,o){if(Bu===null){var d=Bu=[];df=0,On=Ye(),zi={status:"pending",value:void 0,then:function(v){d.push(v)}}}return df++,o.then(ji,ji),o}function ji(){if(--df===0&&Bu!==null){zi!==null&&(zi.status="fulfilled");var s=Bu;Bu=null,On=0,zi=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function we(s,o){var d=[],v={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return s.then(function(){v.status="fulfilled",v.value=o;for(var T=0;T<d.length;T++)(0,d[T])(o)},function(T){for(v.status="rejected",v.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),v}function Wn(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sn(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $e(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ve(s,o,d){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Ue&2)!==0){var T=v.pending;return T===null?o.next=o:(o.next=T.next,T.next=o),v.pending=o,o=Gi(s),Je(s,null,d),o}return ae(s,v,o,d),Gi(s)}function Ji(s,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194176)!==0)){var v=o.lanes;v&=s.pendingLanes,d|=v,o.lanes=d,q(s,d)}}function wi(s,o){var d=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var T=null,O=null;if(d=d.firstBaseUpdate,d!==null){do{var W={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};O===null?T=O=W:O=O.next=W,d=d.next}while(d!==null);O===null?T=O=o:O=O.next=o}else T=O=o;d={baseState:v.baseState,firstBaseUpdate:T,lastBaseUpdate:O,shared:v.shared,callbacks:v.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=o:s.next=o,d.lastBaseUpdate=o}function jn(){if(gf){var s=zi;if(s!==null)throw s}}function Yr(s,o,d,v){gf=!1;var T=s.updateQueue;ca=!1;var O=T.firstBaseUpdate,W=T.lastBaseUpdate,at=T.shared.pending;if(at!==null){T.shared.pending=null;var mt=at,Rt=mt.next;mt.next=null,W===null?O=Rt:W.next=Rt,W=mt;var Ft=s.alternate;Ft!==null&&(Ft=Ft.updateQueue,at=Ft.lastBaseUpdate,at!==W&&(at===null?Ft.firstBaseUpdate=Rt:at.next=Rt,Ft.lastBaseUpdate=mt))}if(O!==null){var Qt=T.baseState;W=0,Ft=Rt=mt=null,at=O;do{var Bt=at.lane&-536870913,Te=Bt!==at.lane;if(Te?(Le&Bt)===Bt:(v&Bt)===Bt){Bt!==0&&Bt===On&&(gf=!0),Ft!==null&&(Ft=Ft.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});t:{var Gr=s,Ku=at;Bt=o;var Xo=d;switch(Ku.tag){case 1:if(Gr=Ku.payload,typeof Gr=="function"){Qt=Gr.call(Xo,Qt,Bt);break t}Qt=Gr;break t;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Ku.payload,Bt=typeof Gr=="function"?Gr.call(Xo,Qt,Bt):Gr,Bt==null)break t;Qt=ri({},Qt,Bt);break t;case 2:ca=!0}}Bt=at.callback,Bt!==null&&(s.flags|=64,Te&&(s.flags|=8192),Te=T.callbacks,Te===null?T.callbacks=[Bt]:Te.push(Bt))}else Te={lane:Bt,tag:at.tag,payload:at.payload,callback:at.callback,next:null},Ft===null?(Rt=Ft=Te,mt=Qt):Ft=Ft.next=Te,W|=Bt;if(at=at.next,at===null){if(at=T.shared.pending,at===null)break;Te=at,at=Te.next,Te.next=null,T.lastBaseUpdate=Te,T.shared.pending=null}}while(!0);Ft===null&&(mt=Qt),T.baseState=mt,T.firstBaseUpdate=Rt,T.lastBaseUpdate=Ft,O===null&&(T.shared.lanes=0),kr|=W,s.lanes=W,s.memoizedState=Qt}}function Xs(s,o){if(typeof s!="function")throw Error(l(191,s));s.call(o)}function Zs(s,o){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)Xs(d[s],o)}function $i(s,o){if(Ca(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var d=Object.keys(s),v=Object.keys(o);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var T=d[v];if(!k0.call(o,T)||!Ca(s[T],o[T]))return!1}return!0}function vr(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ta(){}function Jn(s,o,d){switch(d=s[d],d===void 0?s.push(o):d!==o&&(o.then(ta,ta),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===$c?Error(l(483)):s;default:if(typeof o.status=="string")o.then(ta,ta);else{if(s=_n,s!==null&&100<s.shellSuspendCounter)throw Error(l(482));s=o,s.status="pending",s.then(function(v){if(o.status==="pending"){var T=o;T.status="fulfilled",T.value=v}},function(v){if(o.status==="pending"){var T=o;T.status="rejected",T.reason=v}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===$c?Error(l(483)):s}throw ha=o,$c}}function Hi(){if(ha===null)throw Error(l(459));var s=ha;return ha=null,s}function Hn(s){var o=fa;return fa+=1,jo===null&&(jo=[]),Jn(jo,s,o)}function ya(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Mi(s,o){throw o.$$typeof===pd?Error(l(525)):(s=Object.prototype.toString.call(o),Error(l(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Ma(s){var o=s._init;return o(s._payload)}function Ce(s){function o(Et,ft){if(s){var Tt=Et.deletions;Tt===null?(Et.deletions=[ft],Et.flags|=16):Tt.push(ft)}}function d(Et,ft){if(!s)return null;for(;ft!==null;)o(Et,ft),ft=ft.sibling;return null}function v(Et){for(var ft=new Map;Et!==null;)Et.key!==null?ft.set(Et.key,Et):ft.set(Et.index,Et),Et=Et.sibling;return ft}function T(Et,ft){return Et=ul(Et,ft),Et.index=0,Et.sibling=null,Et}function O(Et,ft,Tt){return Et.index=Tt,s?(Tt=Et.alternate,Tt!==null?(Tt=Tt.index,Tt<ft?(Et.flags|=33554434,ft):Tt):(Et.flags|=33554434,ft)):(Et.flags|=1048576,ft)}function W(Et){return s&&Et.alternate===null&&(Et.flags|=33554434),Et}function at(Et,ft,Tt,kt){return ft===null||ft.tag!==6?(ft=Hc(Tt,Et.mode,kt),ft.return=Et,ft):(ft=T(ft,Tt),ft.return=Et,ft)}function mt(Et,ft,Tt,kt){var ee=Tt.type;return ee===Kl?Ft(Et,ft,Tt.props.children,kt,Tt.key):ft!==null&&(ft.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===dl&&Ma(ee)===ft.type)?(ft=T(ft,Tt.props),ya(ft,Tt),ft.return=Et,ft):(ft=Vo(Tt.type,Tt.key,Tt.props,null,Et.mode,kt),ya(ft,Tt),ft.return=Et,ft)}function Rt(Et,ft,Tt,kt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==Tt.containerInfo||ft.stateNode.implementation!==Tt.implementation?(ft=qa(Tt,Et.mode,kt),ft.return=Et,ft):(ft=T(ft,Tt.children||[]),ft.return=Et,ft)}function Ft(Et,ft,Tt,kt,ee){return ft===null||ft.tag!==7?(ft=Hl(Tt,Et.mode,kt,ee),ft.return=Et,ft):(ft=T(ft,Tt),ft.return=Et,ft)}function Qt(Et,ft,Tt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Hc(""+ft,Et.mode,Tt),ft.return=Et,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ql:return Tt=Vo(ft.type,ft.key,ft.props,null,Et.mode,Tt),ya(Tt,ft),Tt.return=Et,Tt;case Ms:return ft=qa(ft,Et.mode,Tt),ft.return=Et,ft;case dl:var kt=ft._init;return ft=kt(ft._payload),Qt(Et,ft,Tt)}if(Wl(ft)||c(ft))return ft=Hl(ft,Et.mode,Tt,null),ft.return=Et,ft;if(typeof ft.then=="function")return Qt(Et,Hn(ft),Tt);if(ft.$$typeof===Ql)return Qt(Et,At(Et,ft),Tt);Mi(Et,ft)}return null}function Bt(Et,ft,Tt,kt){var ee=ft!==null?ft.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return ee!==null?null:at(Et,ft,""+Tt,kt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case ql:return Tt.key===ee?mt(Et,ft,Tt,kt):null;case Ms:return Tt.key===ee?Rt(Et,ft,Tt,kt):null;case dl:return ee=Tt._init,Tt=ee(Tt._payload),Bt(Et,ft,Tt,kt)}if(Wl(Tt)||c(Tt))return ee!==null?null:Ft(Et,ft,Tt,kt,null);if(typeof Tt.then=="function")return Bt(Et,ft,Hn(Tt),kt);if(Tt.$$typeof===Ql)return Bt(Et,ft,At(Et,Tt),kt);Mi(Et,Tt)}return null}function Te(Et,ft,Tt,kt,ee){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return Et=Et.get(Tt)||null,at(ft,Et,""+kt,ee);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case ql:return Et=Et.get(kt.key===null?Tt:kt.key)||null,mt(ft,Et,kt,ee);case Ms:return Et=Et.get(kt.key===null?Tt:kt.key)||null,Rt(ft,Et,kt,ee);case dl:var vn=kt._init;return kt=vn(kt._payload),Te(Et,ft,Tt,kt,ee)}if(Wl(kt)||c(kt))return Et=Et.get(Tt)||null,Ft(ft,Et,kt,ee,null);if(typeof kt.then=="function")return Te(Et,ft,Tt,Hn(kt),ee);if(kt.$$typeof===Ql)return Te(Et,ft,Tt,At(ft,kt),ee);Mi(ft,kt)}return null}function Gr(Et,ft,Tt,kt){for(var ee=null,vn=null,he=ft,Me=ft=0,An=null;he!==null&&Me<Tt.length;Me++){he.index>Me?(An=he,he=null):An=he.sibling;var Fe=Bt(Et,he,Tt[Me],kt);if(Fe===null){he===null&&(he=An);break}s&&he&&Fe.alternate===null&&o(Et,he),ft=O(Fe,ft,Me),vn===null?ee=Fe:vn.sibling=Fe,vn=Fe,he=An}if(Me===Tt.length)return d(Et,he),nn&&Q(Et,Me),ee;if(he===null){for(;Me<Tt.length;Me++)he=Qt(Et,Tt[Me],kt),he!==null&&(ft=O(he,ft,Me),vn===null?ee=he:vn.sibling=he,vn=he);return nn&&Q(Et,Me),ee}for(he=v(he);Me<Tt.length;Me++)An=Te(he,Et,Me,Tt[Me],kt),An!==null&&(s&&An.alternate!==null&&he.delete(An.key===null?Me:An.key),ft=O(An,ft,Me),vn===null?ee=An:vn.sibling=An,vn=An);return s&&he.forEach(function(fo){return o(Et,fo)}),nn&&Q(Et,Me),ee}function Ku(Et,ft,Tt,kt){if(Tt==null)throw Error(l(151));for(var ee=null,vn=null,he=ft,Me=ft=0,An=null,Fe=Tt.next();he!==null&&!Fe.done;Me++,Fe=Tt.next()){he.index>Me?(An=he,he=null):An=he.sibling;var fo=Bt(Et,he,Fe.value,kt);if(fo===null){he===null&&(he=An);break}s&&he&&fo.alternate===null&&o(Et,he),ft=O(fo,ft,Me),vn===null?ee=fo:vn.sibling=fo,vn=fo,he=An}if(Fe.done)return d(Et,he),nn&&Q(Et,Me),ee;if(he===null){for(;!Fe.done;Me++,Fe=Tt.next())Fe=Qt(Et,Fe.value,kt),Fe!==null&&(ft=O(Fe,ft,Me),vn===null?ee=Fe:vn.sibling=Fe,vn=Fe);return nn&&Q(Et,Me),ee}for(he=v(he);!Fe.done;Me++,Fe=Tt.next())Fe=Te(he,Et,Me,Fe.value,kt),Fe!==null&&(s&&Fe.alternate!==null&&he.delete(Fe.key===null?Me:Fe.key),ft=O(Fe,ft,Me),vn===null?ee=Fe:vn.sibling=Fe,vn=Fe);return s&&he.forEach(function(G0){return o(Et,G0)}),nn&&Q(Et,Me),ee}function Xo(Et,ft,Tt,kt){if(typeof Tt=="object"&&Tt!==null&&Tt.type===Kl&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case ql:t:{for(var ee=Tt.key;ft!==null;){if(ft.key===ee){if(ee=Tt.type,ee===Kl){if(ft.tag===7){d(Et,ft.sibling),kt=T(ft,Tt.props.children),kt.return=Et,Et=kt;break t}}else if(ft.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===dl&&Ma(ee)===ft.type){d(Et,ft.sibling),kt=T(ft,Tt.props),ya(kt,Tt),kt.return=Et,Et=kt;break t}d(Et,ft);break}else o(Et,ft);ft=ft.sibling}Tt.type===Kl?(kt=Hl(Tt.props.children,Et.mode,kt,Tt.key),kt.return=Et,Et=kt):(kt=Vo(Tt.type,Tt.key,Tt.props,null,Et.mode,kt),ya(kt,Tt),kt.return=Et,Et=kt)}return W(Et);case Ms:t:{for(ee=Tt.key;ft!==null;){if(ft.key===ee)if(ft.tag===4&&ft.stateNode.containerInfo===Tt.containerInfo&&ft.stateNode.implementation===Tt.implementation){d(Et,ft.sibling),kt=T(ft,Tt.children||[]),kt.return=Et,Et=kt;break t}else{d(Et,ft);break}else o(Et,ft);ft=ft.sibling}kt=qa(Tt,Et.mode,kt),kt.return=Et,Et=kt}return W(Et);case dl:return ee=Tt._init,Tt=ee(Tt._payload),Xo(Et,ft,Tt,kt)}if(Wl(Tt))return Gr(Et,ft,Tt,kt);if(c(Tt)){if(ee=c(Tt),typeof ee!="function")throw Error(l(150));return Tt=ee.call(Tt),Ku(Et,ft,Tt,kt)}if(typeof Tt.then=="function")return Xo(Et,ft,Hn(Tt),kt);if(Tt.$$typeof===Ql)return Xo(Et,ft,At(Et,Tt),kt);Mi(Et,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint"?(Tt=""+Tt,ft!==null&&ft.tag===6?(d(Et,ft.sibling),kt=T(ft,Tt),kt.return=Et,Et=kt):(d(Et,ft),kt=Hc(Tt,Et.mode,kt),kt.return=Et,Et=kt),W(Et)):d(Et,ft)}return function(Et,ft,Tt,kt){try{fa=0;var ee=Xo(Et,ft,Tt,kt);return jo=null,ee}catch(he){if(he===$c)throw he;var vn=e(29,he,null,Et.mode);return vn.lanes=kt,vn.return=Et,vn}finally{}}}function Qr(s,o){s=hs,N(us,s),N(os,o),hs=s|o.baseLanes}function nr(){N(us,hs),N(os,os.current)}function qi(){hs=us.current,H(os),H(us)}function Va(s){var o=s.alternate;N(xn,xn.current&1),N(Xa,s),Vr===null&&(o===null||os.current!==null||o.memoizedState!==null)&&(Vr=s)}function ps(s){if(s.tag===22){if(N(xn,xn.current),N(Xa,s),Vr===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Vr=s)}}else $n()}function $n(){N(xn,xn.current),N(Xa,Xa.current)}function ti(s){H(Xa),Vr===s&&(Vr=null),H(xn)}function rn(s){for(var o=s;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||zo(d)||Qc(d)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function ye(){throw Error(l(321))}function ir(s,o){if(o===null)return!1;for(var d=0;d<o.length&&d<s.length;d++)if(!Ca(s[d],o[d]))return!1;return!0}function Pa(s,o,d,v,T,O){return El=O,Ee=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,fe.H=s===null||s.memoizedState===null?bl:wa,ro=!1,O=d(v,T),ro=!1,Ho&&(O=Ua(o,d,v,T)),Ws(s),O}function Ws(s){fe.H=hi;var o=sn!==null&&sn.next!==null;if(El=0,Ln=sn=Ee=null,Sl=!1,Gu=0,Tl=null,o)throw Error(l(300));s===null||Si||(s=s.dependencies,s!==null&&z(s)&&(Si=!0))}function Ua(s,o,d,v){Ee=s;var T=0;do{if(Ho&&(Tl=null),Gu=0,Ho=!1,25<=T)throw Error(l(301));if(T+=1,Ln=sn=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}fe.H=lo,O=o(d,v)}while(Ho);return O}function ys(){var s=fe.H,o=s.useState()[0];return o=typeof o.then=="function"?La(o):o,s=s.useState()[0],(sn!==null?sn.memoizedState:null)!==s&&(Ee.flags|=1024),o}function _a(){var s=so!==0;return so=0,s}function kn(s,o,d){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~d}function ea(s){if(Sl){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Sl=!1}El=0,Ln=sn=Ee=null,Ho=!1,Gu=so=0,Tl=null}function Tn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Ee.memoizedState=Ln=s:Ln=Ln.next=s,Ln}function dn(){if(sn===null){var s=Ee.alternate;s=s!==null?s.memoizedState:null}else s=sn.next;var o=Ln===null?Ee.memoizedState:Ln.next;if(o!==null)Ln=o,sn=s;else{if(s===null)throw Ee.alternate===null?Error(l(467)):Error(l(310));sn=s,s={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},Ln===null?Ee.memoizedState=Ln=s:Ln=Ln.next=s}return Ln}function La(s){var o=Gu;return Gu+=1,Tl===null&&(Tl=[]),s=Jn(Tl,s,o),o=Ee,(Ln===null?o.memoizedState:Ln.next)===null&&(o=o.alternate,fe.H=o===null||o.memoizedState===null?bl:wa),s}function cn(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return La(s);if(s.$$typeof===Ql)return ct(s)}throw Error(l(438,String(s)))}function va(s){var o=null,d=Ee.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var v=Ee.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(o={data:v.data.map(function(T){return T.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=Fd(),Ee.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(s),v=0;v<s;v++)d[v]=Ne;return o.index++,d}function na(s,o){return typeof o=="function"?o(s):o}function Wt(s){var o=dn();return Jt(o,sn,s)}function Jt(s,o,d){var v=s.queue;if(v===null)throw Error(l(311));v.lastRenderedReducer=d;var T=s.baseQueue,O=v.pending;if(O!==null){if(T!==null){var W=T.next;T.next=O.next,O.next=W}o.baseQueue=T=O,v.pending=null}if(O=s.baseState,T===null)s.memoizedState=O;else{o=T.next;var at=W=null,mt=null,Rt=o,Ft=!1;do{var Qt=Rt.lane&-536870913;if(Qt!==Rt.lane?(Le&Qt)===Qt:(El&Qt)===Qt){var Bt=Rt.revertLane;if(Bt===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),Qt===On&&(Ft=!0);else if((El&Bt)===Bt){Rt=Rt.next,Bt===On&&(Ft=!0);continue}else Qt={lane:0,revertLane:Rt.revertLane,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},mt===null?(at=mt=Qt,W=O):mt=mt.next=Qt,Ee.lanes|=Bt,kr|=Bt;Qt=Rt.action,ro&&d(O,Qt),O=Rt.hasEagerState?Rt.eagerState:d(O,Qt)}else Bt={lane:Qt,revertLane:Rt.revertLane,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},mt===null?(at=mt=Bt,W=O):mt=mt.next=Bt,Ee.lanes|=Qt,kr|=Qt;Rt=Rt.next}while(Rt!==null&&Rt!==o);if(mt===null?W=O:mt.next=at,!Ca(O,s.memoizedState)&&(Si=!0,Ft&&(d=zi,d!==null)))throw d;s.memoizedState=O,s.baseState=W,s.baseQueue=mt,v.lastRenderedState=O}return T===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function ei(s){var o=dn(),d=o.queue;if(d===null)throw Error(l(311));d.lastRenderedReducer=s;var v=d.dispatch,T=d.pending,O=o.memoizedState;if(T!==null){d.pending=null;var W=T=T.next;do O=s(O,W.action),W=W.next;while(W!==T);Ca(O,o.memoizedState)||(Si=!0),o.memoizedState=O,o.baseQueue===null&&(o.baseState=O),d.lastRenderedState=O}return[O,v]}function du(s,o,d){var v=Ee,T=dn(),O=nn;if(O){if(d===void 0)throw Error(l(407));d=d()}else d=o();var W=!Ca((sn||T).memoizedState,d);if(W&&(T.memoizedState=d,Si=!0),T=T.queue,$s(Eo.bind(null,v,T,s),[s]),T.getSnapshot!==o||W||Ln!==null&&Ln.memoizedState.tag&1){if(v.flags|=2048,Ea(9,Er.bind(null,v,T,d,o),{destroy:void 0},null),_n===null)throw Error(l(349));O||(El&60)!==0||_s(v,o,d)}return d}function _s(s,o,d){s.flags|=16384,s={getSnapshot:o,value:d},o=Ee.updateQueue,o===null?(o=Fd(),Ee.updateQueue=o,o.stores=[s]):(d=o.stores,d===null?o.stores=[s]:d.push(s))}function Er(s,o,d,v){o.value=d,o.getSnapshot=v,mi(o)&&Sr(s)}function Eo(s,o,d){return d(function(){mi(o)&&Sr(s)})}function mi(s){var o=s.getSnapshot;s=s.value;try{var d=o();return!Ca(s,d)}catch{return!0}}function Sr(s){var o=ve(s,2);o!==null&&Nn(o,s,2)}function Vn(s){var o=Tn();if(typeof s=="function"){var d=s;if(s=d(),ro){et(!0);try{d()}finally{et(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:s},o}function Ni(s,o,d,v){return s.baseState=d,Jt(s,sn,typeof v=="function"?v:na)}function So(s,o,d,v,T){if(Cs(s))throw Error(l(485));if(s=o.action,s!==null){var O={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){O.listeners.push(W)}};fe.T!==null?d(!0):O.isTransition=!1,v(O),d=o.pending,d===null?(O.next=o.pending=O,To(o,O)):(O.next=d.next,o.pending=d.next=O)}}function To(s,o){var d=o.action,v=o.payload,T=s.state;if(o.isTransition){var O=fe.T,W={};fe.T=W;try{var at=d(T,v),mt=fe.S;mt!==null&&mt(W,at),vs(s,o,at)}catch(Rt){Ki(s,o,Rt)}finally{fe.T=O}}else try{O=d(T,v),vs(s,o,O)}catch(Rt){Ki(s,o,Rt)}}function vs(s,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){Es(s,o,v)},function(v){return Ki(s,o,v)}):Es(s,o,d)}function Es(s,o,d){o.status="fulfilled",o.value=d,Vi(o),s.state=d,o=s.pending,o!==null&&(d=o.next,d===o?s.pending=null:(d=d.next,o.next=d,To(s,d)))}function Ki(s,o,d){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do o.status="rejected",o.reason=d,Vi(o),o=o.next;while(o!==v)}s.action=null}function Vi(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function wn(s,o){return o}function Xr(s,o){if(nn){var d=_n.formState;if(d!==null){t:{var v=Ee;if(nn){if(pn){var T=w0(pn,ss);if(T){pn=$l(T),v=Ps(T);break t}}ht(v)}v=!1}v&&(o=d[0])}}d=Tn(),d.memoizedState=d.baseState=o,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:o},d.queue=v,d=Ml.bind(null,Ee,v),v.dispatch=d,v=Vn(!1);var O=aa.bind(null,Ee,!1,v.queue);return v=Tn(),T={state:o,dispatch:null,action:s,pending:null},v.queue=T,d=So.bind(null,Ee,T,O,d),T.dispatch=d,v.memoizedState=s,[o,d,!1]}function Ss(s){var o=dn();return Js(o,sn,s)}function Js(s,o,d){o=Jt(s,o,wn)[0],s=Wt(na)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?La(o):o;var v=dn(),T=v.queue,O=T.dispatch;return d!==v.memoizedState&&(Ee.flags|=2048,Ea(9,Qe.bind(null,T,d),{destroy:void 0},null)),[o,O,s]}function Qe(s,o){s.action=o}function Ts(s){var o=dn(),d=sn;if(d!==null)return Js(o,d,s);dn(),o=o.memoizedState,d=dn();var v=d.queue.dispatch;return d.memoizedState=s,[o,v,!1]}function Ea(s,o,d,v){return s={tag:s,create:o,inst:d,deps:v,next:null},o=Ee.updateQueue,o===null&&(o=Fd(),Ee.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=s.next=s:(v=d.next,d.next=s,s.next=v,o.lastEffect=s),s}function Sa(){return dn().memoizedState}function Il(s,o,d,v){var T=Tn();Ee.flags|=s,T.memoizedState=Ea(1|o,d,{destroy:void 0},v===void 0?null:v)}function bs(s,o,d,v){var T=dn();v=v===void 0?null:v;var O=T.memoizedState.inst;sn!==null&&v!==null&&ir(v,sn.memoizedState.deps)?T.memoizedState=Ea(o,d,O,v):(Ee.flags|=s,T.memoizedState=Ea(1|o,d,O,v))}function bo(s,o){Il(8390656,8,s,o)}function $s(s,o){bs(2048,8,s,o)}function gu(s,o){return bs(4,2,s,o)}function mu(s,o){return bs(4,4,s,o)}function za(s,o){if(typeof o=="function"){s=s();var d=o(s);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ta(s,o,d){d=d!=null?d.concat([s]):null,bs(4,4,za.bind(null,o,s),d)}function Zr(){}function ar(s,o){var d=dn();o=o===void 0?null:o;var v=d.memoizedState;return o!==null&&ir(o,v[1])?v[0]:(d.memoizedState=[s,o],s)}function rr(s,o){var d=dn();o=o===void 0?null:o;var v=d.memoizedState;if(o!==null&&ir(o,v[1]))return v[0];if(v=s(),ro){et(!0);try{s()}finally{et(!1)}}return d.memoizedState=[v,o],v}function sr(s,o,d){return d===void 0||(El&1073741824)!==0?s.memoizedState=o:(s.memoizedState=d,s=Lc(),Ee.lanes|=s,kr|=s,d)}function Ol(s,o,d,v){return Ca(d,o)?d:os.current!==null?(s=sr(s,d,v),Ca(s,o)||(Si=!0),s):(El&42)===0?(Si=!0,s.memoizedState=d):(s=Lc(),Ee.lanes|=s,kr|=s,o)}function Ao(s,o,d,v,T){var O=Jl();Aa(O!==0&&8>O?O:8);var W=fe.T,at={};fe.T=at,aa(s,!1,o,d);try{var mt=T(),Rt=fe.S;if(Rt!==null&&Rt(at,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var Ft=we(mt,v);ia(s,o,Ft,sa(s))}else ia(s,o,v,sa(s))}catch(Qt){ia(s,o,{then:function(){},status:"rejected",reason:Qt},sa())}finally{Aa(O),fe.T=W}}function Tr(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Lo,baseState:Lo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:Lo},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:d},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Yi(){return ct(ml)}function lr(){return dn().memoizedState}function ka(){return dn().memoizedState}function As(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var d=sa();s=$e(d);var v=Ve(o,s,d);v!==null&&(Nn(v,o,d),Ji(v,o,d)),o={cache:Be()},s.payload=o;return}o=o.return}}function Wr(s,o,d){var v=sa();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Cs(s)?qn(o,d):(d=Ke(s,o,d,v),d!==null&&(Nn(d,s,v),tn(d,o,v)))}function Ml(s,o,d){var v=sa();ia(s,o,d,v)}function ia(s,o,d,v){var T={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Cs(s))qn(o,T);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=o.lastRenderedReducer,O!==null))try{var W=o.lastRenderedState,at=O(W,d);if(T.hasEagerState=!0,T.eagerState=at,Ca(at,W))return ae(s,o,T,0),_n===null&&pe(),!1}catch{}finally{}if(d=Ke(s,o,T,v),d!==null)return Nn(d,s,v),tn(d,o,v),!0}return!1}function aa(s,o,d,v){if(v={lane:2,revertLane:Ye(),action:v,hasEagerState:!1,eagerState:null,next:null},Cs(s)){if(o)throw Error(l(479))}else o=Ke(s,d,v,2),o!==null&&Nn(o,s,2)}function Cs(s){var o=s.alternate;return s===Ee||o!==null&&o===Ee}function qn(s,o){Ho=Sl=!0;var d=s.pending;d===null?o.next=o:(o.next=d.next,d.next=o),s.pending=o}function tn(s,o,d){if((d&4194176)!==0){var v=o.lanes;v&=s.pendingLanes,d|=v,o.lanes=d,q(s,d)}}function br(s,o,d,v){o=s.memoizedState,d=d(v,o),d=d==null?o:ri({},o,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}function Rs(s,o,d,v,T,O,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,O,W):o.prototype&&o.prototype.isPureReactComponent?!$i(d,v)||!$i(T,O):!0}function Co(s,o,d,v){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,v),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,v),o.state!==s&&Fu.enqueueReplaceState(o,o.state,null)}function Ba(s,o){var d=o;if("ref"in o){d={};for(var v in o)v!=="ref"&&(d[v]=o[v])}if(s=s.defaultProps){d===o&&(d=ri({},d));for(var T in s)d[T]===void 0&&(d[T]=s[T])}return d}function Jr(s,o){try{var d=s.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(v){setTimeout(function(){throw v})}}function or(s,o,d){try{var v=s.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function $(s,o,d){return d=$e(d),d.tag=3,d.payload={element:null},d.callback=function(){Jr(s,o)},d}function yt(s){return s=$e(s),s.tag=3,s}function Lt(s,o,d,v){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var O=v.value;s.payload=function(){return T(O)},s.callback=function(){or(o,d,v)}}var W=d.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){or(o,d,v),typeof T!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var at=v.stack;this.componentDidCatch(v.value,{componentStack:at!==null?at:""})})}function Ot(s,o,d,v,T){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(o=d.alternate,o!==null&&w(o,d,T,!0),d=Xa.current,d!==null){switch(d.tag){case 13:return Vr===null?Ir():d.alternate===null&&zn===0&&(zn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,v===Ra?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([v]):o.add(v),jl(s,v,T)),!1;case 22:return d.flags|=65536,v===Ra?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([v]):d.add(v)),jl(s,v,T)),!1}throw Error(l(435,d.tag))}return jl(s,v,T),Ir(),!1}if(nn)return o=Xa.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=T,v!==Jc&&(s=Error(l(422),{cause:v}),ce(pt(s,d)))):(v!==Jc&&(o=Error(l(423),{cause:v}),ce(pt(o,d))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,v=pt(v,d),T=$(s.stateNode,v,T),wi(s,T),zn!==4&&(zn=2)),!1;var O=Error(l(520),{cause:v});if(O=pt(O,d),Hu===null?Hu=[O]:Hu.push(O),zn!==4&&(zn=2),o===null)return!0;v=pt(v,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,s=T&-T,d.lanes|=s,s=$(d.stateNode,v,s),wi(d,s),!1;case 1:if(o=d.type,O=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Fs===null||!Fs.has(O))))return d.flags|=65536,T&=-T,d.lanes|=T,T=yt(T),Lt(T,s,d,v),wi(d,T),!1}d=d.return}while(d!==null);return!1}function Pt(s,o,d,v){o.child=s===null?ks(o,null,d,v):ao(o,s.child,d,v)}function ue(s,o,d,v,T){d=d.render;var O=o.ref;if("ref"in v){var W={};for(var at in v)at!=="ref"&&(W[at]=v[at])}else W=v;return J(o),v=Pa(s,o,d,W,O,T),at=_a(),s!==null&&!Si?(kn(s,o,T),Ar(s,o,T)):(nn&&at&&bt(o),o.flags|=1,Pt(s,o,v,T),o.child)}function zt(s,o,d,v,T){if(s===null){var O=d.type;return typeof O=="function"&&!ol(O)&&O.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=O,Ht(s,o,O,v,T)):(s=Vo(d.type,null,v,o,o.mode,T),s.ref=o.ref,s.return=o,o.child=s)}if(O=s.child,!_u(s,T)){var W=O.memoizedProps;if(d=d.compare,d=d!==null?d:$i,d(W,v)&&s.ref===o.ref)return Ar(s,o,T)}return o.flags|=1,s=ul(O,v),s.ref=o.ref,s.return=o,o.child=s}function Ht(s,o,d,v,T){if(s!==null){var O=s.memoizedProps;if($i(O,v)&&s.ref===o.ref)if(Si=!1,o.pendingProps=v=O,_u(s,T))(s.flags&131072)!==0&&(Si=!0);else return o.lanes=s.lanes,Ar(s,o,T)}return $r(s,o,d,v,T)}function re(s,o,d){var v=o.pendingProps,T=v.children,O=(o.stateNode._pendingVisibility&2)!==0,W=s!==null?s.memoizedState:null;if(ni(s,o),v.mode==="hidden"||O){if((o.flags&128)!==0){if(v=W!==null?W.baseLanes|d:d,s!==null){for(T=o.child=s.child,O=0;T!==null;)O=O|T.lanes|T.childLanes,T=T.sibling;o.childLanes=O&~v}else o.childLanes=0,o.child=null;return ge(s,o,v,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&ii(o,W!==null?W.cachePool:null),W!==null?Qr(o,W):nr(),ps(o);else return o.lanes=o.childLanes=536870912,ge(s,o,W!==null?W.baseLanes|d:d,d)}else W!==null?(ii(o,W.cachePool),Qr(o,W),$n(),o.memoizedState=null):(s!==null&&ii(o,null),nr(),$n());return Pt(s,o,T,d),o.child}function ge(s,o,d,v){var T=Ge();return T=T===null?null:{parent:ns?Yn._currentValue:Yn._currentValue2,pool:T},o.memoizedState={baseLanes:d,cachePool:T},s!==null&&ii(o,null),nr(),ps(o),s!==null&&w(s,o,v,!0),null}function ni(s,o){var d=o.ref;if(d===null)s!==null&&s.ref!==null&&(o.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(l(284));(s===null||s.ref!==d)&&(o.flags|=2097664)}}function $r(s,o,d,v,T){return J(o),d=Pa(s,o,d,v,void 0,T),v=_a(),s!==null&&!Si?(kn(s,o,T),Ar(s,o,T)):(nn&&v&&bt(o),o.flags|=1,Pt(s,o,d,T),o.child)}function Vl(s,o,d,v,T,O){return J(o),o.updateQueue=null,d=Ua(o,v,d,T),Ws(s),v=_a(),s!==null&&!Si?(kn(s,o,O),Ar(s,o,O)):(nn&&v&&bt(o),o.flags|=1,Pt(s,o,d,O),o.child)}function Rc(s,o,d,v,T){if(J(o),o.stateNode===null){var O=Go,W=d.contextType;typeof W=="object"&&W!==null&&(O=ct(W)),O=new d(v,O),o.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Fu,o.stateNode=O,O._reactInternals=o,O=o.stateNode,O.props=v,O.state=o.memoizedState,O.refs={},Wn(o),W=d.contextType,O.context=typeof W=="object"&&W!==null?ct(W):Go,O.state=o.memoizedState,W=d.getDerivedStateFromProps,typeof W=="function"&&(br(o,d,W,v),O.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(W=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),W!==O.state&&Fu.enqueueReplaceState(O,O.state,null),Yr(o,v,O,T),jn(),O.state=o.memoizedState),typeof O.componentDidMount=="function"&&(o.flags|=4194308),v=!0}else if(s===null){O=o.stateNode;var at=o.memoizedProps,mt=Ba(d,at);O.props=mt;var Rt=O.context,Ft=d.contextType;W=Go,typeof Ft=="object"&&Ft!==null&&(W=ct(Ft));var Qt=d.getDerivedStateFromProps;Ft=typeof Qt=="function"||typeof O.getSnapshotBeforeUpdate=="function",at=o.pendingProps!==at,Ft||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(at||Rt!==W)&&Co(o,O,v,W),ca=!1;var Bt=o.memoizedState;O.state=Bt,Yr(o,v,O,T),jn(),Rt=o.memoizedState,at||Bt!==Rt||ca?(typeof Qt=="function"&&(br(o,d,Qt,v),Rt=o.memoizedState),(mt=ca||Rs(o,d,mt,v,Bt,Rt,W))?(Ft||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=v,o.memoizedState=Rt),O.props=v,O.state=Rt,O.context=W,v=mt):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),v=!1)}else{O=o.stateNode,Sn(s,o),W=o.memoizedProps,Ft=Ba(d,W),O.props=Ft,Qt=o.pendingProps,Bt=O.context,Rt=d.contextType,mt=Go,typeof Rt=="object"&&Rt!==null&&(mt=ct(Rt)),at=d.getDerivedStateFromProps,(Rt=typeof at=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==Qt||Bt!==mt)&&Co(o,O,v,mt),ca=!1,Bt=o.memoizedState,O.state=Bt,Yr(o,v,O,T),jn();var Te=o.memoizedState;W!==Qt||Bt!==Te||ca||s!==null&&s.dependencies!==null&&z(s.dependencies)?(typeof at=="function"&&(br(o,d,at,v),Te=o.memoizedState),(Ft=ca||Rs(o,d,Ft,v,Bt,Te,mt)||s!==null&&s.dependencies!==null&&z(s.dependencies))?(Rt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,Te,mt),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,Te,mt)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&Bt===s.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&Bt===s.memoizedState||(o.flags|=1024),o.memoizedProps=v,o.memoizedState=Te),O.props=v,O.state=Te,O.context=mt,v=Ft):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&Bt===s.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&Bt===s.memoizedState||(o.flags|=1024),v=!1)}return O=v,ni(s,o),v=(o.flags&128)!==0,O||v?(O=o.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:O.render(),o.flags|=1,s!==null&&v?(o.child=ao(o,s.child,null,T),o.child=ao(o,null,d,T)):Pt(s,o,d,T),o.memoizedState=O.state,s=o.child):s=Ar(s,o,T),s}function wc(s,o,d,v){return Yt(),o.flags|=256,Pt(s,o,d,v),o.child}function Ro(s){return{baseLanes:s,cachePool:pi()}}function tl(s,o,d){return s=s!==null?s.childLanes&~d:0,o&&(s|=mr),s}function Nc(s,o,d){var v=o.pendingProps,T=!1,O=(o.flags&128)!==0,W;if((W=O)||(W=s!==null&&s.memoizedState===null?!1:(xn.current&2)!==0),W&&(T=!0,o.flags&=-129),W=(o.flags&32)!==0,o.flags&=-33,s===null){if(nn){if(T?Va(o):$n(),nn){var at=pn,mt;(mt=at)&&(at=x0(at,ss),at!==null?(o.memoizedState={dehydrated:at,treeContext:rs!==null?{id:Ls,overflow:zs}:null,retryLane:536870912},mt=e(18,null,null,0),mt.stateNode=at,mt.return=o,o.child=mt,ui=o,pn=null,mt=!0):mt=!1),mt||ht(o)}if(at=o.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return Qc(at)?o.lanes=16:o.lanes=536870912,null;ti(o)}return at=v.children,v=v.fallback,T?($n(),T=o.mode,at=pu({mode:"hidden",children:at},T),v=Hl(v,T,d,null),at.return=o,v.return=o,at.sibling=v,o.child=at,T=o.child,T.memoizedState=Ro(d),T.childLanes=tl(s,W,d),o.memoizedState=eh,v):(Va(o),Pl(o,at))}if(mt=s.memoizedState,mt!==null&&(at=mt.dehydrated,at!==null)){if(O)o.flags&256?(Va(o),o.flags&=-257,o=wo(s,o,d)):o.memoizedState!==null?($n(),o.child=s.child,o.flags|=128,o=null):($n(),T=v.fallback,at=o.mode,v=pu({mode:"visible",children:v.children},at),T=Hl(T,at,d,null),T.flags|=2,v.return=o,T.return=o,v.sibling=T,o.child=v,ao(o,s.child,null,d),v=o.child,v.memoizedState=Ro(d),v.childLanes=tl(s,W,d),o.memoizedState=eh,o=T);else if(Va(o),Qc(at))W=ef(at).digest,v=Error(l(419)),v.stack="",v.digest=W,ce({value:v,source:null,stack:null}),o=wo(s,o,d);else if(Si||w(s,o,d,!1),W=(d&s.childLanes)!==0,Si||W){if(W=_n,W!==null){if(v=d&-d,(v&42)!==0)v=1;else switch(v){case 2:v=1;break;case 8:v=4;break;case 32:v=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:v=64;break;case 268435456:v=134217728;break;default:v=0}if(v=(v&(W.suspendedLanes|d))!==0?0:v,v!==0&&v!==mt.retryLane)throw mt.retryLane=v,ve(s,v),Nn(W,s,v),jd}zo(at)||Ir(),o=wo(s,o,d)}else zo(at)?(o.flags|=128,o.child=s.child,o=jc.bind(null,s),R0(at,o),o=null):(s=mt.treeContext,Ka&&(pn=Nd(at),ui=o,nn=!0,Mr=null,ss=!1,s!==null&&(Ya[ua++]=Ls,Ya[ua++]=zs,Ya[ua++]=rs,Ls=s.id,zs=s.overflow,rs=o)),o=Pl(o,v.children),o.flags|=4096);return o}return T?($n(),T=v.fallback,at=o.mode,mt=s.child,O=mt.sibling,v=ul(mt,{mode:"hidden",children:v.children}),v.subtreeFlags=mt.subtreeFlags&31457280,O!==null?T=ul(O,T):(T=Hl(T,at,d,null),T.flags|=2),T.return=o,v.return=o,v.sibling=T,o.child=v,v=T,T=o.child,at=s.child.memoizedState,at===null?at=Ro(d):(mt=at.cachePool,mt!==null?(O=ns?Yn._currentValue:Yn._currentValue2,mt=mt.parent!==O?{parent:O,pool:O}:mt):mt=pi(),at={baseLanes:at.baseLanes|d,cachePool:mt}),T.memoizedState=at,T.childLanes=tl(s,W,d),o.memoizedState=eh,v):(Va(o),d=s.child,s=d.sibling,d=ul(d,{mode:"visible",children:v.children}),d.return=o,d.sibling=null,s!==null&&(W=o.deletions,W===null?(o.deletions=[s],o.flags|=16):W.push(s)),o.child=d,o.memoizedState=null,d)}function Pl(s,o){return o=pu({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function pu(s,o){return Kh(s,o,0,null)}function wo(s,o,d){return ao(o,s.child,null,d),s=Pl(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function ws(s,o,d){s.lanes|=o;var v=s.alternate;v!==null&&(v.lanes|=o),Rr(s.return,o,d)}function yu(s,o,d,v,T){var O=s.memoizedState;O===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:T}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=v,O.tail=d,O.tailMode=T)}function xc(s,o,d){var v=o.pendingProps,T=v.revealOrder,O=v.tail;if(Pt(s,o,v.children,d),v=xn.current,(v&2)!==0)v=v&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ws(s,d,o);else if(s.tag===19)ws(s,d,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}switch(N(xn,v),T){case"forwards":for(d=o.child,T=null;d!==null;)s=d.alternate,s!==null&&rn(s)===null&&(T=d),d=d.sibling;d=T,d===null?(T=o.child,o.child=null):(T=d.sibling,d.sibling=null),yu(o,!1,T,d,O);break;case"backwards":for(d=null,T=o.child,o.child=null;T!==null;){if(s=T.alternate,s!==null&&rn(s)===null){o.child=T;break}s=T.sibling,T.sibling=d,d=T,T=s}yu(o,!0,d,null,O);break;case"together":yu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ar(s,o,d){if(s!==null&&(o.dependencies=s.dependencies),kr|=o.lanes,(d&o.childLanes)===0)if(s!==null){if(w(s,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(l(153));if(o.child!==null){for(s=o.child,d=ul(s,s.pendingProps),o.child=d,d.return=o;s.sibling!==null;)s=s.sibling,d=d.sibling=ul(s,s.pendingProps),d.return=o;d.sibling=null}return o.child}function _u(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&z(s)))}function vu(s,o,d){switch(o.tag){case 3:dt(o,o.stateNode.containerInfo),ts(o,Yn,s.memoizedState.cache),Yt();break;case 27:case 5:Vt(o);break;case 4:dt(o,o.stateNode.containerInfo);break;case 10:ts(o,o.type,o.memoizedProps.value);break;case 13:var v=o.memoizedState;if(v!==null)return v.dehydrated!==null?(Va(o),o.flags|=128,null):(d&o.child.childLanes)!==0?Nc(s,o,d):(Va(o),s=Ar(s,o,d),s!==null?s.sibling:null);Va(o);break;case 19:var T=(s.flags&128)!==0;if(v=(d&o.childLanes)!==0,v||(w(s,o,d,!1),v=(d&o.childLanes)!==0),T){if(v)return xc(s,o,d);o.flags|=128}if(T=o.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),N(xn,xn.current),v)break;return null;case 22:case 23:return o.lanes=0,re(s,o,d);case 24:ts(o,Yn,s.memoizedState.cache)}return Ar(s,o,d)}function ra(s,o,d){if(s!==null)if(s.memoizedProps!==o.pendingProps)Si=!0;else{if(!_u(s,d)&&(o.flags&128)===0)return Si=!1,vu(s,o,d);Si=(s.flags&131072)!==0}else Si=!1,nn&&(o.flags&1048576)!==0&&rt(o,zu,o.index);switch(o.lanes=0,o.tag){case 16:t:{s=o.pendingProps;var v=o.elementType,T=v._init;if(v=T(v._payload),o.type=v,typeof v=="function")ol(v)?(s=Ba(v,s),o.tag=1,o=Rc(null,o,v,s,d)):(o.tag=0,o=$r(null,o,v,s,d));else{if(v!=null){if(T=v.$$typeof,T===Yh){o.tag=11,o=ue(null,o,v,s,d);break t}else if(T===xu){o.tag=14,o=zt(null,o,v,s,d);break t}}throw o=h(v)||v,Error(l(306,o,""))}}return o;case 0:return $r(s,o,o.type,o.pendingProps,d);case 1:return v=o.type,T=Ba(v,o.pendingProps),Rc(s,o,v,T,d);case 3:t:{if(dt(o,o.stateNode.containerInfo),s===null)throw Error(l(387));var O=o.pendingProps;T=o.memoizedState,v=T.element,Sn(s,o),Yr(o,O,null,d);var W=o.memoizedState;if(O=W.cache,ts(o,Yn,O),O!==T.cache&&p(o,[Yn],d,!0),jn(),O=W.element,Ka&&T.isDehydrated)if(T={element:O,isDehydrated:!1,cache:W.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=wc(s,o,O,d);break t}else if(O!==v){v=pt(Error(l(424)),o),ce(v),o=wc(s,o,O,d);break t}else for(Ka&&(pn=ko(o.stateNode.containerInfo),ui=o,nn=!0,Mr=null,ss=!0),d=ks(o,null,O,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Yt(),O===v){o=Ar(s,o,d);break t}Pt(s,o,O,d)}o=o.child}return o;case 26:if(hr)return ni(s,o),s===null?(d=Od(o.type,null,o.pendingProps,null))?o.memoizedState=d:nn||(o.stateNode=Ud(o.type,o.pendingProps,_l.current,o)):o.memoizedState=Od(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:if(Li)return Vt(o),s===null&&Li&&nn&&(v=o.stateNode=rf(o.type,o.pendingProps,_l.current,oi.current,!1),ui=o,ss=!0,pn=pl(v)),v=o.pendingProps.children,s!==null||nn?Pt(s,o,v,d):o.child=ao(o,null,v,d),ni(s,o),o.child;case 5:return s===null&&nn&&(V0(o.type,o.pendingProps,oi.current),(T=v=pn)&&(v=xd(v,o.type,o.pendingProps,ss),v!==null?(o.stateNode=v,ui=o,pn=pl(v),ss=!1,T=!0):T=!1),T||ht(o)),Vt(o),T=o.type,O=o.pendingProps,W=s!==null?s.memoizedProps:null,v=O.children,Xi(T,O)?v=null:W!==null&&Xi(T,W)&&(o.flags|=32),o.memoizedState!==null&&(T=Pa(s,o,ys,null,null,d),ns?ml._currentValue=T:ml._currentValue2=T),ni(s,o),Pt(s,o,v,d),o.child;case 6:return s===null&&nn&&(By(o.pendingProps,oi.current),(s=d=pn)&&(d=N0(d,o.pendingProps,ss),d!==null?(o.stateNode=d,ui=o,pn=null,s=!0):s=!1),s||ht(o)),null;case 13:return Nc(s,o,d);case 4:return dt(o,o.stateNode.containerInfo),v=o.pendingProps,s===null?o.child=ao(o,null,v,d):Pt(s,o,v,d),o.child;case 11:return ue(s,o,o.type,o.pendingProps,d);case 7:return Pt(s,o,o.pendingProps,d),o.child;case 8:return Pt(s,o,o.pendingProps.children,d),o.child;case 12:return Pt(s,o,o.pendingProps.children,d),o.child;case 10:return v=o.pendingProps,ts(o,o.type,v.value),Pt(s,o,v.children,d),o.child;case 9:return T=o.type._context,v=o.pendingProps.children,J(o),T=ct(T),v=v(T),o.flags|=1,Pt(s,o,v,d),o.child;case 14:return zt(s,o,o.type,o.pendingProps,d);case 15:return Ht(s,o,o.type,o.pendingProps,d);case 19:return xc(s,o,d);case 22:return re(s,o,d);case 24:return J(o),v=ct(Yn),s===null?(T=Ge(),T===null&&(T=_n,O=Be(),T.pooledCache=O,O.refCount++,O!==null&&(T.pooledCacheLanes|=d),T=O),o.memoizedState={parent:v,cache:T},Wn(o),ts(o,Yn,T)):((s.lanes&d)!==0&&(Sn(s,o),Yr(o,null,null,d),jn()),T=s.memoizedState,O=o.memoizedState,T.parent!==v?(T={parent:v,cache:v},o.memoizedState=T,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=T),ts(o,Yn,v)):(v=O.cache,ts(o,Yn,v),v!==T.cache&&p(o,[Yn],d,!0))),Pt(s,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(l(156,o.tag))}function ts(s,o,d){ns?(N(Pr,o._currentValue),o._currentValue=d):(N(Pr,o._currentValue2),o._currentValue2=d)}function Cr(s){var o=Pr.current;ns?s._currentValue=o:s._currentValue2=o,H(Pr)}function Rr(s,o,d){for(;s!==null;){var v=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,v!==null&&(v.childLanes|=o)):v!==null&&(v.childLanes&o)!==o&&(v.childLanes|=o),s===d)break;s=s.return}}function p(s,o,d,v){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var O=T.dependencies;if(O!==null){var W=T.child;O=O.firstContext;t:for(;O!==null;){var at=O;O=T;for(var mt=0;mt<o.length;mt++)if(at.context===o[mt]){O.lanes|=d,at=O.alternate,at!==null&&(at.lanes|=d),Rr(O.return,d,s),v||(W=null);break t}O=at.next}}else if(T.tag===18){if(W=T.return,W===null)throw Error(l(341));W.lanes|=d,O=W.alternate,O!==null&&(O.lanes|=d),Rr(W,d,s),W=null}else W=T.child;if(W!==null)W.return=T;else for(W=T;W!==null;){if(W===s){W=null;break}if(T=W.sibling,T!==null){T.return=W.return,W=T;break}W=W.return}T=W}}function w(s,o,d,v){s=null;for(var T=o,O=!1;T!==null;){if(!O){if((T.flags&524288)!==0)O=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var W=T.alternate;if(W===null)throw Error(l(387));if(W=W.memoizedProps,W!==null){var at=T.type;Ca(T.pendingProps.value,W.value)||(s!==null?s.push(at):s=[at])}}else if(T===Wc.current){if(W=T.alternate,W===null)throw Error(l(387));W.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(ml):s=[ml])}T=T.return}s!==null&&p(o,s,d,v),o.flags|=262144}function z(s){for(s=s.firstContext;s!==null;){var o=s.context;if(!Ca(ns?o._currentValue:o._currentValue2,s.memoizedValue))return!0;s=s.next}return!1}function J(s){uo=s,Ur=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ct(s){return Kt(uo,s)}function At(s,o){return uo===null&&J(s),Kt(s,o)}function Kt(s,o){var d=ns?o._currentValue:o._currentValue2;if(o={context:o,memoizedValue:d,next:null},Ur===null){if(s===null)throw Error(l(308));Ur=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ur=Ur.next=o;return d}function Be(){return{controller:new nh,data:new Map,refCount:0}}function Bn(s){s.refCount--,s.refCount===0&&Gn(Fy,function(){s.controller.abort()})}function Ge(){var s=qo.current;return s!==null?s:_n.pooledCache}function ii(s,o){o===null?N(qo,qo.current):N(qo,o.pool)}function pi(){var s=Ge();return s===null?null:{parent:ns?Yn._currentValue:Yn._currentValue2,pool:s}}function ai(s){s.flags|=4}function Pi(s,o){if(s!==null&&s.child===o.child)return!1;if((o.flags&16)!==0)return!0;for(s=o.child;s!==null;){if((s.flags&13878)!==0||(s.subtreeFlags&13878)!==0)return!0;s=s.sibling}return!1}function wr(s,o,d,v){if(Un)for(d=o.child;d!==null;){if(d.tag===5||d.tag===6)Kc(s,d.stateNode);else if(!(d.tag===4||Li&&d.tag===27)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}else if(is)for(var T=o.child;T!==null;){if(T.tag===5){var O=T.stateNode;d&&v&&(O=C0(O,T.type,T.memoizedProps)),Kc(s,O)}else if(T.tag===6)O=T.stateNode,d&&v&&(O=wd(O,T.memoizedProps)),Kc(s,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),wr(s,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===o)break;for(;T.sibling===null;){if(T.return===null||T.return===o)return;T=T.return}T.sibling.return=T.return,T=T.sibling}}function Eu(s,o,d,v){if(is)for(var T=o.child;T!==null;){if(T.tag===5){var O=T.stateNode;d&&v&&(O=C0(O,T.type,T.memoizedProps)),Rd(s,O)}else if(T.tag===6)O=T.stateNode,d&&v&&(O=wd(O,T.memoizedProps)),Rd(s,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),Eu(s,T,!(T.memoizedProps!==null&&T.memoizedProps.mode==="manual"),!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===o)break;for(;T.sibling===null;){if(T.return===null||T.return===o)return;T=T.return}T.sibling.return=T.return,T=T.sibling}}function Dc(s,o){if(is&&Pi(s,o)){s=o.stateNode;var d=s.containerInfo,v=tf();Eu(v,o,!1,!1),s.pendingChildren=v,ai(o),b0(d,v)}}function Ph(s,o,d,v){if(Un)s.memoizedProps!==v&&ai(o);else if(is){var T=s.stateNode,O=s.memoizedProps;if((s=Pi(s,o))||O!==v){var W=oi.current;O=T0(T,d,O,v,!s,null),O===T?o.stateNode=T:(Qh(O,d,v,W)&&ai(o),o.stateNode=O,s?wr(O,o,!1,!1):ai(o))}else o.stateNode=T}}function Uh(s,o,d){if(Ed(o,d)){if(s.flags|=16777216,!Sd(o,d))if(Ui())s.flags|=8192;else throw ha=Ra,th}else s.flags&=-16777217}function Lh(s,o){if(L0(o)){if(s.flags|=16777216,!Ld(o))if(Ui())s.flags|=8192;else throw ha=Ra,th}else s.flags&=-16777217}function Su(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?I():536870912,s.lanes|=o,bi|=o)}function Tu(s,o){if(!nn)switch(s.tailMode){case"hidden":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Pn(s){var o=s.alternate!==null&&s.alternate.child===s.child,d=0,v=0;if(o)for(var T=s.child;T!==null;)d|=T.lanes|T.childLanes,v|=T.subtreeFlags&31457280,v|=T.flags&31457280,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)d|=T.lanes|T.childLanes,v|=T.subtreeFlags,v|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=v,s.childLanes=d,o}function qm(s,o,d){var v=o.pendingProps;switch(lt(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(o),null;case 1:return Pn(o),null;case 3:return d=o.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),o.memoizedState.cache!==v&&(o.flags|=2048),Cr(Yn),Nt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(qt(o)?ai(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mr!==null&&(sl(Mr),Mr=null))),Dc(s,o),Pn(o),null;case 26:if(hr){d=o.type;var T=o.memoizedState;return s===null?(ai(o),T!==null?(Pn(o),Lh(o,T)):(Pn(o),Uh(o,d,v))):T?T!==s.memoizedState?(ai(o),Pn(o),Lh(o,T)):(Pn(o),o.flags&=-16777217):(Un?s.memoizedProps!==v&&ai(o):Ph(s,o,d,v),Pn(o),Uh(o,d,v)),null}case 27:if(Li){if(nt(o),d=_l.current,T=o.type,s!==null&&o.stateNode!=null)Un?s.memoizedProps!==v&&ai(o):Ph(s,o,T,v);else{if(!v){if(o.stateNode===null)throw Error(l(166));return Pn(o),null}s=oi.current,qt(o)?Dt(o,s):(s=rf(T,v,d,s,!0),o.stateNode=s,ai(o))}return Pn(o),null}case 5:if(nt(o),d=o.type,s!==null&&o.stateNode!=null)Ph(s,o,d,v);else{if(!v){if(o.stateNode===null)throw Error(l(166));return Pn(o),null}s=oi.current,qt(o)?Dt(o,s):(T=vd(d,v,_l.current,s,o),wr(T,o,!1,!1),o.stateNode=T,Qh(T,d,v,s)&&ai(o))}return Pn(o),Uh(o,o.type,o.pendingProps),null;case 6:if(s&&o.stateNode!=null)d=s.memoizedProps,Un?d!==v&&ai(o):is&&(d!==v?(o.stateNode=si(v,_l.current,oi.current,o),ai(o)):o.stateNode=s.stateNode);else{if(typeof v!="string"&&o.stateNode===null)throw Error(l(166));if(s=_l.current,d=oi.current,qt(o)){if(!Ka)throw Error(l(176));if(s=o.stateNode,d=o.memoizedProps,v=null,T=ui,T!==null)switch(T.tag){case 27:case 5:v=T.memoizedProps}nf(s,d,o,v)||ht(o)}else o.stateNode=si(v,s,d,o)}return Pn(o),null;case 13:if(v=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=qt(o),v!==null&&v.dehydrated!==null){if(s===null){if(!T)throw Error(l(318));if(!Ka)throw Error(l(344));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(l(317));D0(T,o)}else Yt(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pn(o),T=!1}else Mr!==null&&(sl(Mr),Mr=null),T=!0;if(!T)return o.flags&256?(ti(o),o):(ti(o),null)}if(ti(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=v!==null,s=s!==null&&s.memoizedState!==null,d){v=o.child,T=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(T=v.alternate.memoizedState.cachePool.pool);var O=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==T&&(v.flags|=2048)}return d!==s&&d&&(o.child.flags|=8192),Su(o,o.updateQueue),Pn(o),null;case 4:return Nt(),Dc(s,o),s===null&&e0(o.stateNode.containerInfo),Pn(o),null;case 10:return Cr(o.type),Pn(o),null;case 19:if(H(xn),T=o.memoizedState,T===null)return Pn(o),null;if(v=(o.flags&128)!==0,O=T.rendering,O===null)if(v)Tu(T,!1);else{if(zn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(O=rn(s),O!==null){for(o.flags|=128,Tu(T,!1),s=O.updateQueue,o.updateQueue=s,Su(o,s),o.subtreeFlags=0,s=d,d=o.child;d!==null;)Mo(d,s),d=d.sibling;return N(xn,xn.current&1|2),o.child}s=s.sibling}T.tail!==null&&fr()>pr&&(o.flags|=128,v=!0,Tu(T,!1),o.lanes=4194304)}else{if(!v)if(s=rn(O),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,Su(o,s),Tu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!nn)return Pn(o),null}else 2*fr()-T.renderingStartTime>pr&&d!==536870912&&(o.flags|=128,v=!0,Tu(T,!1),o.lanes=4194304);T.isBackwards?(O.sibling=o.child,o.child=O):(s=T.last,s!==null?s.sibling=O:o.child=O,T.last=O)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=fr(),o.sibling=null,s=xn.current,N(xn,v?s&1|2:s&1),o):(Pn(o),null);case 22:case 23:return ti(o),qi(),v=o.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(o.flags|=8192):v&&(o.flags|=8192),v?(d&536870912)!==0&&(o.flags&128)===0&&(Pn(o),o.subtreeFlags&6&&(o.flags|=8192)):Pn(o),d=o.updateQueue,d!==null&&Su(o,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),v=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(v=o.memoizedState.cachePool.pool),v!==d&&(o.flags|=2048),s!==null&&H(qo),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Cr(Yn),Pn(o),null;case 25:return null}throw Error(l(156,o.tag))}function Oy(s,o){switch(lt(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Cr(Yn),Nt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return nt(o),null;case 13:if(ti(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(l(340));Yt()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return H(xn),null;case 4:return Nt(),null;case 10:return Cr(o.type),null;case 22:case 23:return ti(o),qi(),s!==null&&H(qo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Cr(Yn),null;case 25:return null;default:return null}}function Km(s,o){switch(lt(o),o.tag){case 3:Cr(Yn),Nt();break;case 26:case 27:case 5:nt(o);break;case 4:Nt();break;case 13:ti(o);break;case 19:H(xn);break;case 10:Cr(o.type);break;case 22:case 23:ti(o),qi(),s!==null&&H(qo);break;case 24:Cr(Yn)}}function Ic(s,o){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var T=v.next;d=T;do{if((d.tag&s)===s){v=void 0;var O=d.create,W=d.inst;v=O(),W.destroy=v}d=d.next}while(d!==T)}}catch(at){hn(o,o.return,at)}}function Ul(s,o,d){try{var v=o.updateQueue,T=v!==null?v.lastEffect:null;if(T!==null){var O=T.next;v=O;do{if((v.tag&s)===s){var W=v.inst,at=W.destroy;if(at!==void 0){W.destroy=void 0,T=o;var mt=d;try{at()}catch(Rt){hn(T,mt,Rt)}}}v=v.next}while(v!==O)}}catch(Rt){hn(o,o.return,Rt)}}function Ym(s){var o=s.updateQueue;if(o!==null){var d=s.stateNode;try{Zs(o,d)}catch(v){hn(s,s.return,v)}}}function Ga(s,o,d){d.props=Ba(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(v){hn(s,o,v)}}function es(s,o){try{var d=s.ref;if(d!==null){var v=s.stateNode;switch(s.tag){case 26:case 27:case 5:var T=Uo(v);break;default:T=v}typeof d=="function"?s.refCleanup=d(T):d.current=T}}catch(O){hn(s,o,O)}}function Fa(s,o){var d=s.ref,v=s.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(T){hn(s,o,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){hn(s,o,T)}else d.current=null}function rd(s){var o=s.type,d=s.memoizedProps,v=s.stateNode;try{g0(v,o,d,s)}catch(T){hn(s,s.return,T)}}function sd(s,o,d){try{m0(s.stateNode,s.type,d,o,s)}catch(v){hn(s,s.return,v)}}function ld(s){return s.tag===5||s.tag===3||(hr?s.tag===26:!1)||(Li?s.tag===27:!1)||s.tag===4}function Oc(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||ld(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&(!Li||s.tag!==27)&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function od(s,o,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,o?Ad(d,s,o):bd(d,s);else if(!(v===4||Li&&v===27)&&(s=s.child,s!==null))for(od(s,o,d),s=s.sibling;s!==null;)od(s,o,d),s=s.sibling}function zh(s,o,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,o?p0(d,s,o):f0(d,s);else if(!(v===4||Li&&v===27)&&(s=s.child,s!==null))for(zh(s,o,d),s=s.sibling;s!==null;)zh(s,o,d),s=s.sibling}function No(s,o,d){s=s.containerInfo;try{A0(s,d)}catch(v){hn(o,o.return,v)}}function ud(s,o){for(t0(s.containerInfo),oe=o;oe!==null;)if(s=oe,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,oe=o;else for(;oe!==null;){s=oe;var d=s.alternate;switch(o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&d!==null){o=void 0;var v=s,T=d.memoizedProps;d=d.memoizedState;var O=v.stateNode;try{var W=Ba(v.type,T,v.elementType===v.type);o=O.getSnapshotBeforeUpdate(W,d),O.__reactInternalSnapshotBeforeUpdate=o}catch(at){hn(v,v.return,at)}}break;case 3:(o&1024)!==0&&Un&&S0(s.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(l(163))}if(o=s.sibling,o!==null){o.return=s.return,oe=o;break}oe=s.return}return W=bn,bn=!1,W}function bu(s,o,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:nl(s,d),v&4&&Ic(5,d);break;case 1:if(nl(s,d),v&4)if(s=d.stateNode,o===null)try{s.componentDidMount()}catch(at){hn(d,d.return,at)}else{var T=Ba(d.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(T,o,s.__reactInternalSnapshotBeforeUpdate)}catch(at){hn(d,d.return,at)}}v&64&&Ym(d),v&512&&es(d,d.return);break;case 3:if(nl(s,d),v&64&&(v=d.updateQueue,v!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=Uo(d.child.stateNode);break;case 1:s=d.child.stateNode}try{Zs(v,s)}catch(at){hn(d,d.return,at)}}break;case 26:if(hr){nl(s,d),v&512&&es(d,d.return);break}case 27:case 5:nl(s,d),o===null&&v&4&&rd(d),v&512&&es(d,d.return);break;case 12:nl(s,d);break;case 13:nl(s,d),v&4&&xo(s,d);break;case 22:if(T=d.memoizedState!==null||Al,!T){o=o!==null&&o.memoizedState!==null||Se;var O=Al,W=Se;Al=T,(Se=o)&&!W?Ll(s,d,(d.subtreeFlags&8772)!==0):nl(s,d),Al=O,Se=W}v&512&&(d.memoizedProps.mode==="manual"?es(d,d.return):Fa(d,d.return));break;default:nl(s,d)}}function kh(s){var o=s.alternate;o!==null&&(s.alternate=null,kh(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&a0(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Nr(s,o,d){for(d=d.child;d!==null;)el(s,o,d),d=d.sibling}function el(s,o,d){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(Lu,d)}catch{}switch(d.tag){case 26:if(hr){Se||Fa(d,o),Nr(s,o,d),d.memoizedState?Vd(d.memoizedState):d.stateNode&&Vu(d.stateNode);break}case 27:if(Li){Se||Fa(d,o);var v=ln,T=fi;ln=d.stateNode,Nr(s,o,d),Bd(d.stateNode),ln=v,fi=T;break}case 5:Se||Fa(d,o);case 6:if(Un){if(v=ln,T=fi,ln=null,Nr(s,o,d),ln=v,fi=T,ln!==null)if(fi)try{_0(ln,d.stateNode)}catch(O){hn(d,o,O)}else try{y0(ln,d.stateNode)}catch(O){hn(d,o,O)}}else Nr(s,o,d);break;case 18:Un&&ln!==null&&(fi?Dd(ln,d.stateNode):M0(ln,d.stateNode));break;case 4:Un?(v=ln,T=fi,ln=d.stateNode.containerInfo,fi=!0,Nr(s,o,d),ln=v,fi=T):(is&&No(d.stateNode,d,tf()),Nr(s,o,d));break;case 0:case 11:case 14:case 15:Se||Ul(2,d,o),Se||Ul(4,d,o),Nr(s,o,d);break;case 1:Se||(Fa(d,o),v=d.stateNode,typeof v.componentWillUnmount=="function"&&Ga(d,o,v)),Nr(s,o,d);break;case 21:Nr(s,o,d);break;case 22:Se||Fa(d,o),Se=(v=Se)||d.memoizedState!==null,Nr(s,o,d),Se=v;break;default:Nr(s,o,d)}}function xo(s,o){if(Ka&&o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{af(s)}catch(d){hn(o,o.return,d)}}function cd(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Oe),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Oe),o;default:throw Error(l(435,s.tag))}}function Bh(s,o){var d=cd(s);o.forEach(function(v){var T=qh.bind(null,s,v);d.has(v)||(d.add(v),v.then(T,T))})}function yi(s,o){var d=o.deletions;if(d!==null)for(var v=0;v<d.length;v++){var T=d[v],O=s,W=o;if(Un){var at=W;t:for(;at!==null;){switch(at.tag){case 27:case 5:ln=at.stateNode,fi=!1;break t;case 3:ln=at.stateNode.containerInfo,fi=!0;break t;case 4:ln=at.stateNode.containerInfo,fi=!0;break t}at=at.return}if(ln===null)throw Error(l(160));el(O,W,T),ln=null,fi=!1}else el(O,W,T);O=T.alternate,O!==null&&(O.return=null),T.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)hd(o,s),o=o.sibling}function hd(s,o){var d=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:yi(o,s),ja(s),v&4&&(Ul(3,s,s.return),Ic(3,s),Ul(5,s,s.return));break;case 1:yi(o,s),ja(s),v&512&&(Se||d===null||Fa(d,d.return)),v&64&&Al&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:if(hr){var T=da;yi(o,s),ja(s),v&512&&(Se||d===null||Fa(d,d.return)),v&4&&(v=d!==null?d.memoizedState:null,o=s.memoizedState,d===null?o===null?s.stateNode===null?s.stateNode=P0(T,s.type,s.memoizedProps,s):Pd(T,s.type,s.stateNode):s.stateNode=Md(T,o,s.memoizedProps):v!==o?(v===null?d.stateNode!==null&&Vu(d.stateNode):Vd(v),o===null?Pd(T,s.type,s.stateNode):Md(T,o,s.memoizedProps)):o===null&&s.stateNode!==null&&sd(s,s.memoizedProps,d.memoizedProps));break}case 27:if(Li&&v&4&&s.alternate===null){T=s.stateNode;var O=s.memoizedProps;try{z0(T),kd(s.type,O,T,s)}catch(Ft){hn(s,s.return,Ft)}}case 5:if(yi(o,s),ja(s),v&512&&(Se||d===null||Fa(d,d.return)),Un){if(s.flags&32){o=s.stateNode;try{$h(o)}catch(Ft){hn(s,s.return,Ft)}}v&4&&s.stateNode!=null&&(o=s.memoizedProps,sd(s,o,d!==null?d.memoizedProps:o)),v&1024&&(yn=!0)}break;case 6:if(yi(o,s),ja(s),v&4&&Un){if(s.stateNode===null)throw Error(l(162));v=s.memoizedProps,d=d!==null?d.memoizedProps:v,o=s.stateNode;try{d0(o,d,v)}catch(Ft){hn(s,s.return,Ft)}}break;case 3:if(hr?(U0(),T=da,da=Di(o.containerInfo),yi(o,s),da=T):yi(o,s),ja(s),v&4){if(Un&&Ka&&d!==null&&d.memoizedState.isDehydrated)try{O0(o.containerInfo)}catch(Ft){hn(s,s.return,Ft)}if(is){v=o.containerInfo,d=o.pendingChildren;try{A0(v,d)}catch(Ft){hn(s,s.return,Ft)}}}yn&&(yn=!1,fd(s));break;case 4:hr?(d=da,da=Di(s.stateNode.containerInfo),yi(o,s),ja(s),da=d):(yi(o,s),ja(s)),v&4&&is&&No(s.stateNode,s,s.stateNode.pendingChildren);break;case 12:yi(o,s),ja(s);break;case 13:yi(o,s),ja(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(qd=fr()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Bh(s,v)));break;case 22:v&512&&(Se||d===null||Fa(d,d.return)),T=s.memoizedState!==null;var W=d!==null&&d.memoizedState!==null,at=Al,mt=Se;if(Al=at||T,Se=mt||W,yi(o,s),Se=mt,Al=at,ja(s),o=s.stateNode,o._current=s,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,v&8192&&(o._visibility=T?o._visibility&-2:o._visibility|1,T&&(o=Al||Se,d===null||W||o||Au(s)),Un&&(s.memoizedProps===null||s.memoizedProps.mode!=="manual"))){t:if(d=null,Un)for(o=s;;){if(o.tag===5||hr&&o.tag===26||Li&&o.tag===27){if(d===null){W=d=o;try{O=W.stateNode,T?v0(O):ky(W.stateNode,W.memoizedProps)}catch(Ft){hn(W,W.return,Ft)}}}else if(o.tag===6){if(d===null){W=o;try{var Rt=W.stateNode;T?E0(Rt):Cd(Rt,W.memoizedProps)}catch(Ft){hn(W,W.return,Ft)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}}v&4&&(v=s.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,Bh(s,d))));break;case 19:yi(o,s),ja(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Bh(s,v)));break;case 21:break;default:yi(o,s),ja(s)}}function ja(s){var o=s.flags;if(o&2){try{if(Un&&(!Li||s.tag!==27)){t:{for(var d=s.return;d!==null;){if(ld(d)){var v=d;break t}d=d.return}throw Error(l(160))}switch(v.tag){case 27:if(Li){var T=v.stateNode,O=Oc(s);zh(s,O,T);break}case 5:var W=v.stateNode;v.flags&32&&($h(W),v.flags&=-33);var at=Oc(s);zh(s,at,W);break;case 3:case 4:var mt=v.stateNode.containerInfo,Rt=Oc(s);od(s,Rt,mt);break;default:throw Error(l(161))}}}catch(Ft){hn(s,s.return,Ft)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function fd(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;fd(o),o.tag===5&&o.flags&1024&&s0(o.stateNode),s=s.sibling}}function nl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)bu(s,o.alternate,o),o=o.sibling}function Au(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Ul(4,o,o.return),Au(o);break;case 1:Fa(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&Ga(o,o.return,d),Au(o);break;case 26:case 27:case 5:Fa(o,o.return),Au(o);break;case 22:Fa(o,o.return),o.memoizedState===null&&Au(o);break;default:Au(o)}s=s.sibling}}function Ll(s,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var v=o.alternate,T=s,O=o,W=O.flags;switch(O.tag){case 0:case 11:case 15:Ll(T,O,d),Ic(4,O);break;case 1:if(Ll(T,O,d),v=O,T=v.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Rt){hn(v,v.return,Rt)}if(v=O,T=v.updateQueue,T!==null){var at=v.stateNode;try{var mt=T.shared.hiddenCallbacks;if(mt!==null)for(T.shared.hiddenCallbacks=null,T=0;T<mt.length;T++)Xs(mt[T],at)}catch(Rt){hn(v,v.return,Rt)}}d&&W&64&&Ym(O),es(O,O.return);break;case 26:case 27:case 5:Ll(T,O,d),d&&v===null&&W&4&&rd(O),es(O,O.return);break;case 12:Ll(T,O,d);break;case 13:Ll(T,O,d),d&&W&4&&xo(T,O);break;case 22:O.memoizedState===null&&Ll(T,O,d),es(O,O.return);break;default:Ll(T,O,d)}o=o.sibling}}function Gh(s,o){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Bn(d))}function Fh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Bn(s))}function il(s,o,d,v){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xr(s,o,d,v),o=o.sibling}function xr(s,o,d,v){var T=o.flags;switch(o.tag){case 0:case 11:case 15:il(s,o,d,v),T&2048&&Ic(9,o);break;case 3:il(s,o,d,v),T&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Bn(s)));break;case 12:if(T&2048){il(s,o,d,v),s=o.stateNode;try{var O=o.memoizedProps,W=O.id,at=O.onPostCommit;typeof at=="function"&&at(W,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(mt){hn(o,o.return,mt)}}else il(s,o,d,v);break;case 23:break;case 22:O=o.stateNode,o.memoizedState!==null?O._visibility&4?il(s,o,d,v):Ns(s,o):O._visibility&4?il(s,o,d,v):(O._visibility|=4,Qi(s,o,d,v,(o.subtreeFlags&10256)!==0)),T&2048&&Gh(o.alternate,o);break;case 24:il(s,o,d,v),T&2048&&Fh(o.alternate,o);break;default:il(s,o,d,v)}}function Qi(s,o,d,v,T){for(T=T&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var O=s,W=o,at=d,mt=v,Rt=W.flags;switch(W.tag){case 0:case 11:case 15:Qi(O,W,at,mt,T),Ic(8,W);break;case 23:break;case 22:var Ft=W.stateNode;W.memoizedState!==null?Ft._visibility&4?Qi(O,W,at,mt,T):Ns(O,W):(Ft._visibility|=4,Qi(O,W,at,mt,T)),T&&Rt&2048&&Gh(W.alternate,W);break;case 24:Qi(O,W,at,mt,T),T&&Rt&2048&&Fh(W.alternate,W);break;default:Qi(O,W,at,mt,T)}o=o.sibling}}function Ns(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=s,v=o,T=v.flags;switch(v.tag){case 22:Ns(d,v),T&2048&&Gh(v.alternate,v);break;case 24:Ns(d,v),T&2048&&Fh(v.alternate,v);break;default:Ns(d,v)}o=o.sibling}}function al(s){if(s.subtreeFlags&co)for(s=s.child;s!==null;)Mc(s),s=s.sibling}function Mc(s){switch(s.tag){case 26:al(s),s.flags&co&&(s.memoizedState!==null?zd(da,s.memoizedState,s.memoizedProps):Td(s.type,s.memoizedProps));break;case 5:al(s),s.flags&co&&Td(s.type,s.memoizedProps);break;case 3:case 4:if(hr){var o=da;da=Di(s.stateNode.containerInfo),al(s),da=o}else al(s);break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=co,co=16777216,al(s),co=o):al(s));break;default:al(s)}}function Vc(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Do(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var v=o[d];oe=v,Uc(v,s)}Vc(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rl(s),s=s.sibling}function rl(s){switch(s.tag){case 0:case 11:case 15:Do(s),s.flags&2048&&Ul(9,s,s.return);break;case 3:Do(s);break;case 12:Do(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&4&&(s.return===null||s.return.tag!==13)?(o._visibility&=-5,Pc(s)):Do(s);break;default:Do(s)}}function Pc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var v=o[d];oe=v,Uc(v,s)}Vc(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Ul(8,o,o.return),Pc(o);break;case 22:d=o.stateNode,d._visibility&4&&(d._visibility&=-5,Pc(o));break;default:Pc(o)}s=s.sibling}}function Uc(s,o){for(;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:Ul(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Bn(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,oe=v;else t:for(d=s;oe!==null;){v=oe;var T=v.sibling,O=v.return;if(kh(v),v===d){oe=null;break t}if(T!==null){T.return=O,oe=T;break t}oe=O}}}function zl(s){var o=Zh(s);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(l(364));return o}if(s=u0(s),s===null)throw Error(l(362));return s.stateNode.current}function jh(s,o){var d=s.tag;switch(o.$$typeof){case Mn:if(s.type===o.value)return!0;break;case cs:t:{for(o=o.value,s=[s,0],d=0;d<s.length;){var v=s[d++],T=v.tag,O=s[d++],W=o[O];if(T!==5&&T!==26&&T!==27||!Vs(v)){for(;W!=null&&jh(v,W);)O++,W=o[O];if(O===o.length){o=!0;break t}else for(v=v.child;v!==null;)s.push(v,O),v=v.sibling}}o=!1}return o;case Bs:if((d===5||d===26||d===27)&&h0(s.stateNode,o.value))return!0;break;case Na:if((d===5||d===6||d===26||d===27)&&(s=c0(s),s!==null&&0<=s.indexOf(o.value)))return!0;break;case ju:if((d===5||d===26||d===27)&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Ha(s){switch(s.$$typeof){case Mn:return"<"+(h(s.value)||"Unknown")+">";case cs:return":has("+(Ha(s)||"")+")";case Bs:return'[role="'+s.value+'"]';case Na:return'"'+s.value+'"';case ju:return'[data-testname="'+s.value+'"]';default:throw Error(l(365))}}function Io(s,o){var d=[];s=[s,0];for(var v=0;v<s.length;){var T=s[v++],O=T.tag,W=s[v++],at=o[W];if(O!==5&&O!==26&&O!==27||!Vs(T)){for(;at!=null&&jh(T,at);)W++,at=o[W];if(W===o.length)d.push(T);else for(T=T.child;T!==null;)s.push(T,W),T=T.sibling}}return d}function kl(s,o){if(!Mu)throw Error(l(363));s=zl(s),s=Io(s,o),o=[],s=Array.from(s);for(var d=0;d<s.length;){var v=s[d++],T=v.tag;if(T===5||T===26||T===27)Vs(v)||o.push(v.stateNode);else for(v=v.child;v!==null;)s.push(v),v=v.sibling}return o}function sa(){if((Ue&2)!==0&&Le!==0)return Le&-Le;if(fe.T!==null){var s=On;return s!==0?s:Ye()}return n0()}function Lc(){mr===0&&(mr=(Le&536870912)===0||nn?M():536870912);var s=Xa.current;return s!==null&&(s.flags|=32),mr}function Nn(s,o,d){(s===_n&&mn===2||s.cancelPendingCommit!==null)&&(Bl(s,0),ba(s,Le,mr,!1)),B(s,d),((Ue&2)===0||s!==_n)&&(s===_n&&((Ue&2)===0&&(Rl|=d),zn===4&&ba(s,Le,mr,!1)),un(s))}function ur(s,o,d){if((Ue&6)!==0)throw Error(l(327));var v=!d&&(o&60)===0&&(o&s.expiredLanes)===0||K(s,o),T=v?Qm(s,o):kc(s,o,!0),O=v;do{if(T===0){zr&&!v&&ba(s,o,0,!1);break}else if(T===6)ba(s,o,0,!Lr);else{if(d=s.current.alternate,O&&!ll(d)){T=kc(s,o,!1),O=!1;continue}if(T===2){if(O=o,s.errorRecoveryDisabledLanes&O)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){o=W;t:{var at=s;T=Hu;var mt=Ka&&at.current.memoizedState.isDehydrated;if(mt&&(Bl(at,W).flags|=256),W=kc(at,W,!1),W!==2){if(Ko&&!mt){at.errorRecoveryDisabledLanes|=O,Rl|=O,T=4;break t}O=Br,Br=T,O!==null&&sl(O)}T=W}if(O=!1,T!==2)continue}}if(T===1){Bl(s,0),ba(s,o,0,!0);break}t:{switch(v=s,T){case 0:case 1:throw Error(l(345));case 4:if((o&4194176)===o){ba(v,o,mr,!Lr);break t}break;case 2:Br=null;break;case 3:case 5:break;default:throw Error(l(329))}if(v.finishedWork=d,v.finishedLanes=o,(o&62914560)===o&&(O=qd+300-fr(),10<O)){if(ba(v,o,mr,!Lr),F(v,0)!==0)break t;v.timeoutHandle=Xh(xs.bind(null,v,d,Br,Yo,mf,o,mr,Rl,bi,Lr,2,-0,0),O);break t}xs(v,d,Br,Yo,mf,o,mr,Rl,bi,Lr,0,-0,0)}}break}while(!0);un(s)}function sl(s){Br===null?Br=s:Br.push.apply(Br,s)}function xs(s,o,d,v,T,O,W,at,mt,Rt,Ft,Qt,Bt){var Te=o.subtreeFlags;if((Te&8192||(Te&16785408)===16785408)&&(Ly(),Mc(o),o=r0(),o!==null)){s.cancelPendingCommit=o(Hh.bind(null,s,d,v,T,W,at,mt,1,Qt,Bt)),ba(s,O,W,!Rt);return}Hh(s,d,v,T,W,at,mt,Ft,Qt,Bt)}function ll(s){for(var o=s;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var T=d[v],O=T.getSnapshot;T=T.value;try{if(!Ca(O(),T))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ba(s,o,d,v){o&=~xa,o&=~Rl,s.suspendedLanes|=o,s.pingedLanes&=~o,v&&(s.warmLanes|=o),v=s.expirationTimes;for(var T=o;0<T;){var O=31-li(T),W=1<<O;v[O]=-1,T&=~W}d!==0&&b(s,d,o)}function dd(){return(Ue&6)===0?(Oi(0),!1):!0}function zc(){if(xe!==null){if(mn===0)var s=xe.return;else s=xe,Ur=uo=null,ea(s),jo=null,fa=0,s=xe;for(;s!==null;)Km(s.alternate,s),s=s.return;xe=null}}function Bl(s,o){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;d!==Ou&&(s.timeoutHandle=Ou,Yc(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),zc(),_n=s,xe=d=ul(s.current,null),Le=o,mn=0,Ti=null,Lr=!1,zr=K(s,o),Ko=!1,bi=mr=xa=Rl=kr=zn=0,Br=Hu=null,mf=!1,(o&8)!==0&&(o|=o&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=o;0<v;){var T=31-li(v),O=1<<T;o|=s[T],v&=~O}return hs=o,pe(),d}function la(s,o){Ee=null,fe.H=hi,o===$c?(o=Hi(),mn=3):o===th?(o=Hi(),mn=4):mn=o===jd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ti=o,xe===null&&(zn=1,Jr(s,pt(o,s.current)))}function Ui(){var s=Xa.current;return s===null?!0:(Le&4194176)===Le?Vr===null:(Le&62914560)===Le||(Le&536870912)!==0?s===Vr:!1}function en(){var s=fe.H;return fe.H=hi,s===null?hi:s}function Dr(){var s=fe.A;return fe.A=Cl,s}function Ir(){zn=4,Lr||(Le&4194176)!==Le&&Xa.current!==null||(zr=!0),(kr&134217727)===0&&(Rl&134217727)===0||_n===null||ba(_n,Le,mr,!1)}function kc(s,o,d){var v=Ue;Ue|=2;var T=en(),O=Dr();(_n!==s||Le!==o)&&(Yo=null,Bl(s,o)),o=!1;var W=zn;t:do try{if(mn!==0&&xe!==null){var at=xe,mt=Ti;switch(mn){case 8:zc(),W=6;break t;case 3:case 2:case 6:Xa.current===null&&(o=!0);var Rt=mn;if(mn=0,Ti=null,Ds(s,at,mt,Rt),d&&zr){W=0;break t}break;default:Rt=mn,mn=0,Ti=null,Ds(s,at,mt,Rt)}}Oo(),W=zn;break}catch(Ft){la(s,Ft)}while(!0);return o&&s.shellSuspendCounter++,Ur=uo=null,Ue=v,fe.H=T,fe.A=O,xe===null&&(_n=null,Le=0,pe()),W}function Oo(){for(;xe!==null;)Cu(xe)}function Qm(s,o){var d=Ue;Ue|=2;var v=en(),T=Dr();_n!==s||Le!==o?(Yo=null,pr=fr()+500,Bl(s,o)):zr=K(s,o);t:do try{if(mn!==0&&xe!==null){o=xe;var O=Ti;e:switch(mn){case 1:mn=0,Ti=null,Ds(s,o,O,1);break;case 2:if(vr(O)){mn=0,Ti=null,Ru(o);break}o=function(){mn===2&&_n===s&&(mn=7),un(s)},O.then(o,o);break t;case 3:mn=7;break t;case 4:mn=5;break t;case 7:vr(O)?(mn=0,Ti=null,Ru(o)):(mn=0,Ti=null,Ds(s,o,O,7));break;case 5:var W=null;switch(xe.tag){case 26:W=xe.memoizedState;case 5:case 27:var at=xe,mt=at.type,Rt=at.pendingProps;if(W?Ld(W):Sd(mt,Rt)){mn=0,Ti=null;var Ft=at.sibling;if(Ft!==null)xe=Ft;else{var Qt=at.return;Qt!==null?(xe=Qt,Gl(Qt)):xe=null}break e}}mn=0,Ti=null,Ds(s,o,O,5);break;case 6:mn=0,Ti=null,Ds(s,o,O,6);break;case 8:zc(),zn=6;break t;default:throw Error(l(462))}}Xm();break}catch(Bt){la(s,Bt)}while(!0);return Ur=uo=null,fe.H=v,fe.A=T,Ue=d,xe!==null?0:(_n=null,Le=0,pe(),zn)}function Xm(){for(;xe!==null&&!eo();)Cu(xe)}function Cu(s){var o=ra(s.alternate,s,hs);s.memoizedProps=s.pendingProps,o===null?Gl(s):xe=o}function Ru(s){var o=s,d=o.alternate;switch(o.tag){case 15:case 0:o=Vl(d,o,o.pendingProps,o.type,void 0,Le);break;case 11:o=Vl(d,o,o.pendingProps,o.type.render,o.ref,Le);break;case 5:ea(o);default:Km(d,o),o=xe=Mo(o,hs),o=ra(d,o,hs)}s.memoizedProps=s.pendingProps,o===null?Gl(s):xe=o}function Ds(s,o,d,v){Ur=uo=null,ea(o),jo=null,fa=0;var T=o.return;try{if(Ot(s,T,o,d,Le)){zn=1,Jr(s,pt(d,s.current)),xe=null;return}}catch(O){if(T!==null)throw xe=T,O;zn=1,Jr(s,pt(d,s.current)),xe=null;return}o.flags&32768?(nn||v===1?s=!0:zr||(Le&536870912)!==0?s=!1:(Lr=s=!0,(v===2||v===3||v===6)&&(v=Xa.current,v!==null&&v.tag===13&&(v.flags|=16384))),gd(o,s)):Gl(o)}function Gl(s){var o=s;do{if((o.flags&32768)!==0){gd(o,Lr);return}s=o.return;var d=qm(o.alternate,o,hs);if(d!==null){xe=d;return}if(o=o.sibling,o!==null){xe=o;return}xe=o=s}while(o!==null);zn===0&&(zn=5)}function gd(s,o){do{var d=Oy(s.alternate,s);if(d!==null){d.flags&=32767,xe=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(s=s.sibling,s!==null)){xe=s;return}xe=s=d}while(s!==null);zn=6,xe=null}function Hh(s,o,d,v,T,O,W,at,mt,Rt){var Ft=fe.T,Qt=Jl();try{Aa(2),fe.T=null,Zm(s,o,d,v,Qt,T,O,W,at,mt,Rt)}finally{fe.T=Ft,Aa(Qt)}}function Zm(s,o,d,v,T,O,W,at){do Fl();while(ho!==null);if((Ue&6)!==0)throw Error(l(327));var mt=s.finishedWork;if(v=s.finishedLanes,mt===null)return null;if(s.finishedWork=null,s.finishedLanes=0,mt===s.current)throw Error(l(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Rt=mt.lanes|mt.childLanes;if(Rt|=ls,Y(s,v,Rt,O,W,at),s===_n&&(xe=_n=null,Le=0),(mt.subtreeFlags&10256)===0&&(mt.flags&10256)===0||wl||(wl=!0,pf=Rt,ah=d,Wm(Uu,function(){return Fl(),null})),d=(mt.flags&15990)!==0,(mt.subtreeFlags&15990)!==0||d?(d=fe.T,fe.T=null,O=Jl(),Aa(2),W=Ue,Ue|=4,ud(s,mt),hd(mt,s),Uy(s.containerInfo),s.current=mt,bu(s,mt.alternate,mt),yl(),Ue=W,Aa(O),fe.T=d):s.current=mt,wl?(wl=!1,ho=s,qu=v):Bc(s,Rt),Rt=s.pendingLanes,Rt===0&&(Fs=null),X(mt.stateNode),un(s),o!==null)for(T=s.onRecoverableError,mt=0;mt<o.length;mt++)Rt=o[mt],T(Rt.value,{componentStack:Rt.stack});return(qu&3)!==0&&Fl(),Rt=s.pendingLanes,(v&4194218)!==0&&(Rt&42)!==0?s===Kd?Qo++:(Qo=0,Kd=s):Qo=0,Oi(0),null}function Bc(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Bn(o)))}function Fl(){if(ho!==null){var s=ho,o=pf;pf=0;var d=G(qu),v=32>d?32:d;d=fe.T;var T=Jl();try{if(Aa(v),fe.T=null,ho===null)var O=!1;else{v=ah,ah=null;var W=ho,at=qu;if(ho=null,qu=0,(Ue&6)!==0)throw Error(l(331));var mt=Ue;if(Ue|=4,rl(W.current),xr(W,W.current,at,v),Ue=mt,Oi(0,!1),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(Lu,W)}catch{}O=!0}return O}finally{Aa(T),fe.T=d,Bc(s,o)}}return!1}function wu(s,o,d){o=pt(d,o),o=$(s.stateNode,o,2),s=Ve(s,o,2),s!==null&&(B(s,2),un(s))}function hn(s,o,d){if(s.tag===3)wu(s,s,d);else for(;o!==null;){if(o.tag===3){wu(o,s,d);break}else if(o.tag===1){var v=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Fs===null||!Fs.has(v))){s=pt(d,s),d=yt(2),v=Ve(o,d,2),v!==null&&(Lt(d,v,o,s),B(v,2),un(v));break}}o=o.return}}function jl(s,o,d){var v=s.pingCache;if(v===null){v=s.pingCache=new ih;var T=new Set;v.set(o,T)}else T=v.get(o),T===void 0&&(T=new Set,v.set(o,T));T.has(d)||(Ko=!0,T.add(d),s=Gc.bind(null,s,o,d),o.then(s,s))}function Gc(s,o,d){var v=s.pingCache;v!==null&&v.delete(o),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,_n===s&&(Le&d)===d&&(zn===4||zn===3&&(Le&62914560)===Le&&300>fr()-qd?(Ue&2)===0&&Bl(s,0):xa|=d,bi===Le&&(bi=0)),un(s)}function Fc(s,o){o===0&&(o=I()),s=ve(s,o),s!==null&&(B(s,o),un(s))}function jc(s){var o=s.memoizedState,d=0;o!==null&&(d=o.retryLane),Fc(s,d)}function qh(s,o){var d=0;switch(s.tag){case 13:var v=s.stateNode,T=s.memoizedState;T!==null&&(d=T.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(l(314))}v!==null&&v.delete(o),Fc(s,d)}function Wm(s,o){return Us(s,o)}function Jm(s,o,d,v){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ul(s,o){var d=s.alternate;return d===null?(d=e(s.tag,o,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=o,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&31457280,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,o=s.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Mo(s,o){s.flags&=31457282;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,o=d.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Vo(s,o,d,v,T,O){var W=0;if(v=s,typeof s=="function")ol(s)&&(W=1);else if(typeof s=="string")W=hr&&Li?xi(s,d,oi.current)?26:sf(s)?27:5:hr?xi(s,d,oi.current)?26:5:Li&&sf(s)?27:5;else t:switch(s){case Kl:return Hl(d.children,T,O,o);case Po:W=8,T|=24;break;case Yl:return s=e(12,d,o,T|2),s.elementType=Yl,s.lanes=O,s;case fl:return s=e(13,d,o,T),s.elementType=fl,s.lanes=O,s;case qc:return s=e(19,d,o,T),s.elementType=qc,s.lanes=O,s;case gl:return Kh(d,T,O,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Vy:case Ql:W=10;break t;case yd:W=9;break t;case Yh:W=11;break t;case xu:W=14;break t;case dl:W=16,v=null;break t}W=29,d=Error(l(130,s===null?"null":typeof s,"")),v=null}return o=e(W,d,o,T),o.elementType=s,o.type=v,o.lanes=O,o}function Hl(s,o,d,v){return s=e(7,s,v,o),s.lanes=d,s}function Kh(s,o,d,v){s=e(22,s,v,o),s.elementType=gl,s.lanes=d;var T={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=T._current;if(O===null)throw Error(l(456));if((T._pendingVisibility&2)===0){var W=ve(O,2);W!==null&&(T._pendingVisibility|=2,Nn(W,O,2))}},attach:function(){var O=T._current;if(O===null)throw Error(l(456));if((T._pendingVisibility&2)!==0){var W=ve(O,2);W!==null&&(T._pendingVisibility&=-3,Nn(W,O,2))}}};return s.stateNode=T,s}function Hc(s,o,d){return s=e(6,s,null,o),s.lanes=d,s}function qa(s,o,d){return o=e(4,s.children!==null?s.children:[],s.key,o),o.lanes=d,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Is(s,o,d,v,T,O,W,at){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ou,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=V(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V(0),this.hiddenUpdates=V(null),this.identifierPrefix=v,this.onUncaughtError=T,this.onCaughtError=O,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function cl(s,o,d,v,T,O,W,at,mt,Rt,Ft,Qt){return s=new Is(s,o,d,W,at,mt,Rt,Qt),o=1,O===!0&&(o|=24),O=e(3,null,null,o),s.current=O,O.stateNode=s,o=Be(),o.refCount++,s.pooledCache=o,o.refCount++,O.memoizedState={element:v,isDehydrated:d,cache:o},Wn(O),s}function md(s){return s?(s=Go,s):Go}function hl(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(l(188)):(s=Object.keys(s).join(","),Error(l(268,s)));return s=C(o),s=s!==null?R(s):null,s===null?null:Uo(s.stateNode)}function Os(s,o,d,v,T,O){T=md(T),v.context===null?v.context=T:v.pendingContext=T,v=$e(o),v.payload={element:d},O=O===void 0?null:O,O!==null&&(v.callback=O),d=Ve(s,v,o),d!==null&&(Nn(d,s,o),Ji(d,s,o))}function _i(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<o?d:o}}function Nu(s,o){_i(s,o),(s=s.alternate)&&_i(s,o)}var Pe={},My=ny(),cr=x_(),ri=Object.assign,pd=Symbol.for("react.element"),ql=Symbol.for("react.transitional.element"),Ms=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),Po=Symbol.for("react.strict_mode"),Yl=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),yd=Symbol.for("react.consumer"),Ql=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),fl=Symbol.for("react.suspense"),qc=Symbol.for("react.suspense_list"),xu=Symbol.for("react.memo"),dl=Symbol.for("react.lazy"),gl=Symbol.for("react.offscreen"),Ne=Symbol.for("react.memo_cache_sentinel"),gn=Symbol.iterator,vi=Symbol.for("react.client.reference"),fe=My.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xl,Zl,Du=!1,Wl=Array.isArray,Iu=t.rendererVersion,Py=t.rendererPackageName,Kn=t.extraDevToolsConfig,Uo=t.getPublicInstance,_d=t.getRootHostContext,$m=t.getChildHostContext,t0=t.prepareForCommit,Uy=t.resetAfterCommit,vd=t.createInstance,Kc=t.appendInitialChild,Qh=t.finalizeInitialChildren,Xi=t.shouldSetTextContent,si=t.createTextInstance,Xh=t.scheduleTimeout,Yc=t.cancelTimeout,Ou=t.noTimeout,ns=t.isPrimaryRenderer;t.warnsIfNotActing;var Un=t.supportsMutation,is=t.supportsPersistence,Ka=t.supportsHydration,Zh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var e0=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Aa=t.setCurrentUpdatePriority,Jl=t.getCurrentUpdatePriority,n0=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var i0=t.shouldAttemptEagerTransition,a0=t.detachDeletedInstance;t.requestPostPaintCallback;var Ed=t.maySuspendCommit,Sd=t.preloadInstance,Ly=t.startSuspendingCommit,Td=t.suspendInstance,r0=t.waitForCommitToBeReady,Lo=t.NotPendingTransition,ml=t.HostTransitionContext,s0=t.resetFormInstance;t.bindToConsole;var l0=t.supportsMicrotasks,o0=t.scheduleMicrotask,Mu=t.supportsTestSelectors,u0=t.findFiberRoot,zy=t.getBoundingRect,c0=t.getTextContent,Vs=t.isHiddenSubtree,h0=t.matchAccessibilityRole,Wh=t.setFocusIfFocusable,Jh=t.setupIntersectionObserver,f0=t.appendChild,bd=t.appendChildToContainer,d0=t.commitTextUpdate,g0=t.commitMount,m0=t.commitUpdate,p0=t.insertBefore,Ad=t.insertInContainerBefore,y0=t.removeChild,_0=t.removeChildFromContainer,$h=t.resetTextContent,v0=t.hideInstance,E0=t.hideTextInstance,ky=t.unhideInstance,Cd=t.unhideTextInstance,S0=t.clearContainer,T0=t.cloneInstance,tf=t.createContainerChildSet,Rd=t.appendChildToContainerChildSet,b0=t.finalizeContainerChildren,A0=t.replaceContainerChildren,C0=t.cloneHiddenInstance,wd=t.cloneHiddenTextInstance,zo=t.isSuspenseInstancePending,Qc=t.isSuspenseInstanceFallback,ef=t.getSuspenseInstanceFallbackErrorDetails,R0=t.registerSuspenseInstanceRetry,w0=t.canHydrateFormStateMarker,Ps=t.isFormStateMarkerMatching,$l=t.getNextHydratableSibling,pl=t.getFirstHydratableChild,ko=t.getFirstHydratableChildWithinContainer,Nd=t.getFirstHydratableChildWithinSuspenseInstance,xd=t.canHydrateInstance,N0=t.canHydrateTextInstance,x0=t.canHydrateSuspenseInstance,Bo=t.hydrateInstance,nf=t.hydrateTextInstance,D0=t.hydrateSuspenseInstance,I0=t.getNextHydratableInstanceAfterSuspenseInstance,O0=t.commitHydratedContainer,af=t.commitHydratedSuspenseInstance,M0=t.clearSuspenseBoundary,Dd=t.clearSuspenseBoundaryFromContainer,Id=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var V0=t.validateHydratableInstance,By=t.validateHydratableTextInstance,hr=t.supportsResources,xi=t.isHostHoistableType,Di=t.getHoistableRoot,Od=t.getResource,Md=t.acquireResource,Vd=t.releaseResource,P0=t.hydrateHoistable,Pd=t.mountHoistable,Vu=t.unmountHoistable,Ud=t.createHoistableInstance,U0=t.prepareToCommitHoistables,L0=t.mayResourceSuspendCommit,Ld=t.preloadResource,zd=t.suspendResource,Li=t.supportsSingletons,rf=t.resolveSingletonInstance,z0=t.clearSingleton,kd=t.acquireSingletonInstance,Bd=t.releaseSingletonInstance,sf=t.isHostSingletonType,lf=[],to=-1,Go={},li=Math.clz32?Math.clz32:x,Gd=Math.log,Gy=Math.LN2,Xc=128,Pu=4194304,Us=cr.unstable_scheduleCallback,as=cr.unstable_cancelCallback,eo=cr.unstable_shouldYield,yl=cr.unstable_requestPaint,fr=cr.unstable_now,of=cr.unstable_ImmediatePriority,Zc=cr.unstable_UserBlockingPriority,Uu=cr.unstable_NormalPriority,Fo=cr.unstable_IdlePriority,oa=cr.log,uf=cr.unstable_setDisableYieldValue,Lu=null,Ei=null,Ca=typeof Object.is=="function"?Object.is:st,cf=new WeakMap,dr=[],gr=0,no=null,zu=0,Ya=[],ua=0,rs=null,Ls=1,zs="",oi=U(null),Or=U(null),_l=U(null),Wc=U(null),ui=null,pn=null,nn=!1,Mr=null,ss=!1,Jc=Error(l(519)),Qa=[],vl=0,ls=0,In=null,io=null,hf=!1,ci=!1,ff=!1,ku=0,Bu=null,df=0,On=0,zi=null,ca=!1,gf=!1,k0=Object.prototype.hasOwnProperty,$c=Error(l(460)),th=Error(l(474)),Ra={then:function(){}},ha=null,jo=null,fa=0,ao=Ce(!0),ks=Ce(!1),os=U(null),us=U(0),Xa=U(null),Vr=null,xn=U(0),El=0,Ee=null,sn=null,Ln=null,Sl=!1,Ho=!1,ro=!1,so=0,Gu=0,Tl=null,B0=0,Fd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},hi={readContext:ct,use:cn,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye};hi.useCacheRefresh=ye,hi.useMemoCache=ye,hi.useHostTransitionStatus=ye,hi.useFormState=ye,hi.useActionState=ye,hi.useOptimistic=ye;var bl={readContext:ct,use:cn,useCallback:function(s,o){return Tn().memoizedState=[s,o===void 0?null:o],s},useContext:ct,useEffect:bo,useImperativeHandle:function(s,o,d){d=d!=null?d.concat([s]):null,Il(4194308,4,za.bind(null,o,s),d)},useLayoutEffect:function(s,o){return Il(4194308,4,s,o)},useInsertionEffect:function(s,o){Il(4,2,s,o)},useMemo:function(s,o){var d=Tn();o=o===void 0?null:o;var v=s();if(ro){et(!0);try{s()}finally{et(!1)}}return d.memoizedState=[v,o],v},useReducer:function(s,o,d){var v=Tn();if(d!==void 0){var T=d(o);if(ro){et(!0);try{d(o)}finally{et(!1)}}}else T=o;return v.memoizedState=v.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},v.queue=s,s=s.dispatch=Wr.bind(null,Ee,s),[v.memoizedState,s]},useRef:function(s){var o=Tn();return s={current:s},o.memoizedState=s},useState:function(s){s=Vn(s);var o=s.queue,d=Ml.bind(null,Ee,o);return o.dispatch=d,[s.memoizedState,d]},useDebugValue:Zr,useDeferredValue:function(s,o){var d=Tn();return sr(d,s,o)},useTransition:function(){var s=Vn(!1);return s=Ao.bind(null,Ee,s.queue,!0,!1),Tn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,d){var v=Ee,T=Tn();if(nn){if(d===void 0)throw Error(l(407));d=d()}else{if(d=o(),_n===null)throw Error(l(349));(Le&60)!==0||_s(v,o,d)}T.memoizedState=d;var O={value:d,getSnapshot:o};return T.queue=O,bo(Eo.bind(null,v,O,s),[s]),v.flags|=2048,Ea(9,Er.bind(null,v,O,d,o),{destroy:void 0},null),d},useId:function(){var s=Tn(),o=_n.identifierPrefix;if(nn){var d=zs,v=Ls;d=(v&~(1<<32-li(v)-1)).toString(32)+d,o=":"+o+"R"+d,d=so++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=B0++,o=":"+o+"r"+d.toString(32)+":";return s.memoizedState=o},useCacheRefresh:function(){return Tn().memoizedState=As.bind(null,Ee)}};bl.useMemoCache=va,bl.useHostTransitionStatus=Yi,bl.useFormState=Xr,bl.useActionState=Xr,bl.useOptimistic=function(s){var o=Tn();o.memoizedState=o.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=aa.bind(null,Ee,!0,d),d.dispatch=o,[s,o]};var wa={readContext:ct,use:cn,useCallback:ar,useContext:ct,useEffect:$s,useImperativeHandle:Ta,useInsertionEffect:gu,useLayoutEffect:mu,useMemo:rr,useReducer:Wt,useRef:Sa,useState:function(){return Wt(na)},useDebugValue:Zr,useDeferredValue:function(s,o){var d=dn();return Ol(d,sn.memoizedState,s,o)},useTransition:function(){var s=Wt(na)[0],o=dn().memoizedState;return[typeof s=="boolean"?s:La(s),o]},useSyncExternalStore:du,useId:lr};wa.useCacheRefresh=ka,wa.useMemoCache=va,wa.useHostTransitionStatus=Yi,wa.useFormState=Ss,wa.useActionState=Ss,wa.useOptimistic=function(s,o){var d=dn();return Ni(d,sn,s,o)};var lo={readContext:ct,use:cn,useCallback:ar,useContext:ct,useEffect:$s,useImperativeHandle:Ta,useInsertionEffect:gu,useLayoutEffect:mu,useMemo:rr,useReducer:ei,useRef:Sa,useState:function(){return ei(na)},useDebugValue:Zr,useDeferredValue:function(s,o){var d=dn();return sn===null?sr(d,s,o):Ol(d,sn.memoizedState,s,o)},useTransition:function(){var s=ei(na)[0],o=dn().memoizedState;return[typeof s=="boolean"?s:La(s),o]},useSyncExternalStore:du,useId:lr};lo.useCacheRefresh=ka,lo.useMemoCache=va,lo.useHostTransitionStatus=Yi,lo.useFormState=Ts,lo.useActionState=Ts,lo.useOptimistic=function(s,o){var d=dn();return sn!==null?Ni(d,sn,s,o):(d.baseState=s,[s,d.queue.dispatch])};var Fu={isMounted:function(s){return(s=s._reactInternals)?A(s)===s:!1},enqueueSetState:function(s,o,d){s=s._reactInternals;var v=sa(),T=$e(v);T.payload=o,d!=null&&(T.callback=d),o=Ve(s,T,v),o!==null&&(Nn(o,s,v),Ji(o,s,v))},enqueueReplaceState:function(s,o,d){s=s._reactInternals;var v=sa(),T=$e(v);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=Ve(s,T,v),o!==null&&(Nn(o,s,v),Ji(o,s,v))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var d=sa(),v=$e(d);v.tag=2,o!=null&&(v.callback=o),o=Ve(s,v,d),o!==null&&(Nn(o,s,d),Ji(o,s,d))}},oo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},jd=Error(l(461)),Si=!1,eh={dehydrated:null,treeContext:null,retryLane:0},Pr=U(null),uo=null,Ur=null,nh=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(d,v){s.push(v)}};this.abort=function(){o.aborted=!0,s.forEach(function(d){return d()})}},Gn=cr.unstable_scheduleCallback,Fy=cr.unstable_NormalPriority,Yn={$$typeof:Ql,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Hd=fe.S;fe.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Zn(s,o),Hd!==null&&Hd(s,o)};var qo=U(null),Al=!1,Se=!1,yn=!1,Oe=typeof WeakSet=="function"?WeakSet:Set,oe=null,bn=!1,ln=null,fi=!1,da=null,co=8192,Cl={getCacheForType:function(s){var o=ct(Yn),d=o.data.get(s);return d===void 0&&(d=s(),o.data.set(s,d)),d}},Mn=0,cs=1,Bs=2,ju=3,Na=4;if(typeof Symbol=="function"&&Symbol.for){var Gs=Symbol.for;Mn=Gs("selector.component"),cs=Gs("selector.has_pseudo_class"),Bs=Gs("selector.role"),ju=Gs("selector.test_id"),Na=Gs("selector.text")}var ih=typeof WeakMap=="function"?WeakMap:Map,Ue=0,_n=null,xe=null,Le=0,mn=0,Ti=null,Lr=!1,zr=!1,Ko=!1,hs=0,zn=0,kr=0,Rl=0,xa=0,mr=0,bi=0,Hu=null,Br=null,mf=!1,qd=0,pr=1/0,Yo=null,Fs=null,wl=!1,ho=null,qu=0,pf=0,ah=null,Qo=0,Kd=null;return Pe.attemptContinuousHydration=function(s){if(s.tag===13){var o=ve(s,67108864);o!==null&&Nn(o,s,67108864),Nu(s,67108864)}},Pe.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var o=sa(),d=ve(s,o);d!==null&&Nn(d,s,o),Nu(s,o)}},Pe.attemptSynchronousHydration=function(s){switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=L(s.pendingLanes);if(o!==0){for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var d=1<<31-li(o);s.entanglements[1]|=d,o&=~d}un(s),(Ue&6)===0&&(pr=fr()+500,Oi(0))}}break;case 13:o=ve(s,2),o!==null&&Nn(o,s,2),dd(),Nu(s,2)}},Pe.batchedUpdates=function(s,o){return s(o)},Pe.createComponentSelector=function(s){return{$$typeof:Mn,value:s}},Pe.createContainer=function(s,o,d,v,T,O,W,at,mt,Rt){return cl(s,o,!1,null,d,v,O,W,at,mt,Rt,null)},Pe.createHasPseudoClassSelector=function(s){return{$$typeof:cs,value:s}},Pe.createHydrationContainer=function(s,o,d,v,T,O,W,at,mt,Rt,Ft,Qt,Bt){return s=cl(d,v,!0,s,T,O,at,mt,Rt,Ft,Qt,Bt),s.context=md(null),d=s.current,v=sa(),T=$e(v),T.callback=o??null,Ve(d,T,v),s.current.lanes=v,B(s,v),un(s),s},Pe.createPortal=function(s,o,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:v==null?null:""+v,children:s,containerInfo:o,implementation:d}},Pe.createRoleSelector=function(s){return{$$typeof:Bs,value:s}},Pe.createTestNameSelector=function(s){return{$$typeof:ju,value:s}},Pe.createTextSelector=function(s){return{$$typeof:Na,value:s}},Pe.defaultOnCaughtError=function(s){console.error(s)},Pe.defaultOnRecoverableError=function(s){oo(s)},Pe.defaultOnUncaughtError=function(s){oo(s)},Pe.deferredUpdates=function(s){var o=fe.T,d=Jl();try{return Aa(32),fe.T=null,s()}finally{Aa(d),fe.T=o}},Pe.discreteUpdates=function(s,o,d,v,T){var O=fe.T,W=Jl();try{return Aa(2),fe.T=null,s(o,d,v,T)}finally{Aa(W),fe.T=O,Ue===0&&(pr=fr()+500)}},Pe.findAllNodes=kl,Pe.findBoundingRects=function(s,o){if(!Mu)throw Error(l(363));o=kl(s,o),s=[];for(var d=0;d<o.length;d++)s.push(zy(o[d]));for(o=s.length-1;0<o;o--){d=s[o];for(var v=d.x,T=v+d.width,O=d.y,W=O+d.height,at=o-1;0<=at;at--)if(o!==at){var mt=s[at],Rt=mt.x,Ft=Rt+mt.width,Qt=mt.y,Bt=Qt+mt.height;if(v>=Rt&&O>=Qt&&T<=Ft&&W<=Bt){s.splice(o,1);break}else if(v!==Rt||d.width!==mt.width||Bt<O||Qt>W){if(!(O!==Qt||d.height!==mt.height||Ft<v||Rt>T)){Rt>v&&(mt.width+=Rt-v,mt.x=v),Ft<T&&(mt.width=T-Rt),s.splice(o,1);break}}else{Qt>O&&(mt.height+=Qt-O,mt.y=O),Bt<W&&(mt.height=W-Qt),s.splice(o,1);break}}}return s},Pe.findHostInstance=hl,Pe.findHostInstanceWithNoPortals=function(s){return s=C(s),s=s!==null?P(s):null,s===null?null:Uo(s.stateNode)},Pe.findHostInstanceWithWarning=function(s){return hl(s)},Pe.flushPassiveEffects=Fl,Pe.flushSyncFromReconciler=function(s){var o=Ue;Ue|=1;var d=fe.T,v=Jl();try{if(Aa(2),fe.T=null,s)return s()}finally{Aa(v),fe.T=d,Ue=o,(Ue&6)===0&&Oi(0)}},Pe.flushSyncWork=dd,Pe.focusWithin=function(s,o){if(!Mu)throw Error(l(363));for(s=zl(s),o=Io(s,o),o=Array.from(o),s=0;s<o.length;){var d=o[s++],v=d.tag;if(!Vs(d)){if((v===5||v===26||v===27)&&Wh(d.stateNode))return!0;for(d=d.child;d!==null;)o.push(d),d=d.sibling}}return!1},Pe.getFindAllNodesFailureDescription=function(s,o){if(!Mu)throw Error(l(363));var d=0,v=[];s=[zl(s),0];for(var T=0;T<s.length;){var O=s[T++],W=O.tag,at=s[T++],mt=o[at];if((W!==5&&W!==26&&W!==27||!Vs(O))&&(jh(O,mt)&&(v.push(Ha(mt)),at++,at>d&&(d=at)),at<o.length))for(O=O.child;O!==null;)s.push(O,at),O=O.sibling}if(d<o.length){for(s=[];d<o.length;d++)s.push(Ha(o[d]));return`findAllNodes was able to match part of the selector:
  `+(v.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},Pe.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 27:case 5:return Uo(s.child.stateNode);default:return s.child.stateNode}},Pe.injectIntoDevTools=function(){var s={bundleType:0,version:Iu,rendererPackageName:Py,currentDispatcherRef:fe,findFiberByHostInstance:Zh,reconcilerVersion:"19.0.0"};if(Kn!==null&&(s.rendererConfig=Kn),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)s=!0;else{try{Lu=o.inject(s),Ei=o}catch{}s=!!o.checkDCE}}return s},Pe.isAlreadyRendering=function(){return!1},Pe.observeVisibleRects=function(s,o,d,v){if(!Mu)throw Error(l(363));s=kl(s,o);var T=Jh(s,d,v).disconnect;return{disconnect:function(){T()}}},Pe.shouldError=function(){return null},Pe.shouldSuspend=function(){return!1},Pe.startHostTransition=function(s,o,d,v){if(s.tag!==5)throw Error(l(476));var T=Tr(s).queue;Ao(s,T,o,Lo,d===null?a:function(){var O=Tr(s).next.queue;return ia(s,O,{},sa()),d(v)})},Pe.updateContainer=function(s,o,d,v){var T=o.current,O=sa();return Os(T,O,s,o,d,v),O},Pe.updateContainerSync=function(s,o,d,v){return o.tag===0&&Fl(),Os(o.current,2,s,o,d,v),2},Pe},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(w1)),w1.exports}var zE;function $6(){return zE||(zE=1,R1.exports=J6()),R1.exports}var t9=$6();const e9=N_(t9);var N1={exports:{}},$o={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function n9(){return kE||(kE=1,$o.ConcurrentRoot=1,$o.ContinuousEventPriority=8,$o.DefaultEventPriority=32,$o.DiscreteEventPriority=2,$o.IdleEventPriority=268435456,$o.LegacyRoot=0,$o.NoEventPriority=0),$o}var BE;function i9(){return BE||(BE=1,N1.exports=n9()),N1.exports}var ry=i9(),a9=ke();const GE={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let FE=!1,jE=!1;const V_=".react-konva-event",r9=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,s9=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,l9={};function sy(i,t,e=l9){if(!FE&&"zIndex"in t&&(console.warn(s9),FE=!0),!jE&&t.draggable){var a=t.x!==void 0||t.y!==void 0,l=t.onDragEnd||t.onDragMove;a&&!l&&(console.warn(r9),jE=!0)}for(var c in e)if(!GE[c]){var h=c.slice(0,2)==="on",g=e[c]!==t[c];if(h&&g){var m=c.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),i.off(m,e[c])}var _=!t.hasOwnProperty(c);_&&i.setAttr(c,void 0)}var E=t._useStrictMode,A={},D=!1;const C={};for(var c in t)if(!GE[c]){var h=c.slice(0,2)==="on",R=e[c]!==t[c];if(h&&R){var m=c.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[c]&&(C[m]=t[c])}!h&&(t[c]!==e[c]||E&&t[c]!==i.getAttr(c))&&(D=!0,A[c]=t[c])}D&&(i.setAttrs(A),vc(i));for(var m in C)i.on(m+V_,C[m])}function vc(i){if(!a9.Konva.autoDrawEnabled){var t=i.getLayer()||i.getStage();t&&t.batchDraw()}}var x1=x_();const XS={},o9={};Dp.Node.prototype._applyProps=sy;let ZS=ry.DefaultEventPriority;function u9(i,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}i.add(t),vc(i)}function c9(i,t,e){let a=Dp[i];a||(console.error(`Konva has no node with the type ${i}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${i}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),a=Dp.Group);const l={},c={};for(var h in t){var g=h.slice(0,2)==="on";g?c[h]=t[h]:l[h]=t[h]}const m=new a(l);return sy(m,c),m}function h9(i,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${i}"`)}function f9(i,t,e){return!1}function d9(i){return i}function g9(){return null}function m9(){return null}function p9(i,t,e,a){return o9}function y9(){}function _9(i){}function v9(i,t){return!1}function E9(){return XS}function S9(){return XS}const T9=setTimeout,b9=clearTimeout,A9=!0,C9=i=>{i()},R9=-1;function w9(i,t){return!1}const N9=!1,x9=!1,D9=!0,I9=!1,O9=!1;function M9(i,t){t.parent===i?t.moveToTop():i.add(t),vc(i)}function V9(i,t){t.parent===i?t.moveToTop():i.add(t),vc(i)}function WS(i,t,e){t._remove(),i.add(t),t.setZIndex(e.getZIndex()),vc(i)}function P9(i,t,e){WS(i,t,e)}function U9(i,t){t.destroy(),t.off(V_),vc(i)}function L9(i,t){t.destroy(),t.off(V_),vc(i)}function z9(i,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function k9(i,t,e){}function B9(i,t,e,a){sy(i,a,e)}function G9(i){i.hide(),vc(i)}function F9(i){}function j9(i,t){(t.visible==null||t.visible)&&i.show()}function H9(i,t){}function q9(i){}function K9(){}function Y9(){return ry.DefaultEventPriority}function Q9(){}function X9(){return null}function Z9(i){ZS=i}function W9(){return ZS}function J9(){return ry.DiscreteEventPriority}function $9(){return!1}function tA(){}function eA(){return!1}function nA(){return!0}function iA(){}function aA(){}function rA(){return null}const sA=null;function lA(){}const oA=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:sA,appendChild:M9,appendChildToContainer:V9,appendInitialChild:u9,cancelTimeout:b9,clearContainer:q9,commitMount:k9,commitTextUpdate:z9,commitUpdate:B9,createInstance:c9,createTextInstance:h9,detachDeletedInstance:K9,finalizeInitialChildren:f9,getChildHostContext:S9,getCurrentEventPriority:Y9,getCurrentUpdatePriority:W9,getInstanceFromScope:X9,getPublicInstance:d9,getRootHostContext:E9,hideInstance:G9,hideTextInstance:F9,idlePriority:x1.unstable_IdlePriority,insertBefore:WS,insertInContainerBefore:P9,isPrimaryRenderer:N9,maySuspendCommit:eA,noTimeout:R9,now:x1.unstable_now,preloadInstance:nA,prepareForCommit:g9,preparePortalMount:m9,prepareScopeUpdate:Q9,prepareUpdate:p9,removeChild:U9,removeChildFromContainer:L9,requestPostPaintCallback:tA,resetAfterCommit:y9,resetFormInstance:lA,resetTextContent:_9,resolveUpdatePriority:J9,run:x1.unstable_runWithPriority,scheduleMicrotask:C9,scheduleTimeout:T9,setCurrentUpdatePriority:Z9,shouldAttemptEagerTransition:$9,shouldDeprioritizeSubtree:v9,shouldSetTextContent:w9,startSuspendingCommit:iA,supportsHydration:O9,supportsMicrotasks:A9,supportsMutation:D9,supportsPersistence:I9,suspendInstance:aA,unhideInstance:j9,unhideTextInstance:H9,waitForCommitToBeReady:rA,warnsIfNotActing:x9},Symbol.toStringTag,{value:"Module"}));function JS(i,t,e){if(!i)return;if(e(i)===!0)return i;let a=i.child;for(;a;){const l=JS(a,t,e);if(l)return l;a=a.sibling}}function $S(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const P_=$S(Gt.createContext(null));class t5 extends Gt.Component{render(){return Gt.createElement(P_.Provider,{value:this._reactInternals},this.props.children)}}function uA(){const i=Gt.useContext(P_);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Gt.useId();return Gt.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const a=JS(e,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===t)return!0;c=c.next}});if(a)return a}},[i,t])}const cA=Symbol.for("react.context"),hA=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===cA;function fA(){const i=uA(),[t]=Gt.useState(()=>new Map);t.clear();let e=i;for(;e;){const a=e.type;hA(a)&&a!==P_&&!t.has(a)&&t.set(a,Gt.use($S(a))),e=e.return}return t}function dA(){const i=fA();return Gt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>a=>Gt.createElement(t,null,Gt.createElement(e.Provider,{...a,value:i.get(e)})),t=>Gt.createElement(t5,{...t})),[i])}if(Ja.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function gA(i){const t=Ja.useRef({});return Ja.useLayoutEffect(()=>{t.current=i}),Ja.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const mA=i=>{const t=Ja.useRef(null),e=Ja.useRef(null),a=Ja.useRef(null),l=gA(i),c=dA(),h=g=>{const{forwardedRef:m}=i;m&&(typeof m=="function"?m(g):m.current=g)};return Ja.useLayoutEffect(()=>(e.current=new Dp.Stage({width:i.width,height:i.height,container:t.current}),h(e.current),a.current=Jg.createContainer(e.current,ry.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Jg.updateContainer(Ja.createElement(c,{},i.children),a.current,null,()=>{}),()=>{h(null),Jg.updateContainer(null,a.current,null),e.current.destroy()}),[]),Ja.useLayoutEffect(()=>{h(e.current),sy(e.current,i,l),Jg.updateContainer(Ja.createElement(c,{},i.children),a.current,null)}),Ja.createElement("div",{ref:t,id:i.id,accessKey:i.accessKey,className:i.className,role:i.role,style:i.style,tabIndex:i.tabIndex,title:i.title})},pA="Layer",D1="Group",Hs="Rect",$u="Circle",HE="Ellipse",Kg="Line",I1="Text",rp="Arc",qE="Arrow",Jg=e9(oA);Jg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ja.version,rendererPackageName:"react-konva"});const yA=Ja.forwardRef((i,t)=>Ja.createElement(t5,{},Ja.createElement(mA,{...i,forwardedRef:t}))),_A=()=>{};var KE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=function(i){const t=[];let e=0;for(let a=0;a<i.length;a++){let l=i.charCodeAt(a);l<128?t[e++]=l:l<2048?(t[e++]=l>>6|192,t[e++]=l&63|128):(l&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++a)&1023),t[e++]=l>>18|240,t[e++]=l>>12&63|128,t[e++]=l>>6&63|128,t[e++]=l&63|128):(t[e++]=l>>12|224,t[e++]=l>>6&63|128,t[e++]=l&63|128)}return t},vA=function(i){const t=[];let e=0,a=0;for(;e<i.length;){const l=i[e++];if(l<128)t[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=i[e++];t[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=i[e++],h=i[e++],g=i[e++],m=((l&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;t[a++]=String.fromCharCode(55296+(m>>10)),t[a++]=String.fromCharCode(56320+(m&1023))}else{const c=i[e++],h=i[e++];t[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|h&63)}}return t.join("")},n5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<i.length;l+=3){const c=i[l],h=l+1<i.length,g=h?i[l+1]:0,m=l+2<i.length,_=m?i[l+2]:0,E=c>>2,A=(c&3)<<4|g>>4;let D=(g&15)<<2|_>>6,C=_&63;m||(C=64,h||(D=64)),a.push(e[E],e[A],e[D],e[C])}return a.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(e5(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):vA(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<i.length;){const c=e[i.charAt(l++)],g=l<i.length?e[i.charAt(l)]:0;++l;const _=l<i.length?e[i.charAt(l)]:64;++l;const A=l<i.length?e[i.charAt(l)]:64;if(++l,c==null||g==null||_==null||A==null)throw new EA;const D=c<<2|g>>4;if(a.push(D),_!==64){const C=g<<4&240|_>>2;if(a.push(C),A!==64){const R=_<<6&192|A;a.push(R)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class EA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SA=function(i){const t=e5(i);return n5.encodeByteArray(t,!0)},Ip=function(i){return SA(i).replace(/\./g,"")},i5=function(i){try{return n5.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=()=>TA().__FIREBASE_DEFAULTS__,AA=()=>{if(typeof process>"u"||typeof KE>"u")return;const i=KE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},CA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&i5(i[1]);return t&&JSON.parse(t)},ly=()=>{try{return _A()||bA()||AA()||CA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},a5=i=>{var t,e;return(e=(t=ly())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},RA=i=>{const t=a5(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),a]:[t.substring(0,e),a]},r5=()=>{var i;return(i=ly())===null||i===void 0?void 0:i.config},s5=i=>{var t;return(t=ly())===null||t===void 0?void 0:t[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,a)=>{e?this.reject(e):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},a=t||"demo-project",l=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ip(JSON.stringify(e)),Ip(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zi())}function DA(){var i;const t=(i=ly())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function MA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VA(){const i=Zi();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function l5(){return!DA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o5(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((i,t)=>{try{let e=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),e||self.indexedDB.deleteDatabase(a),i(!0)},l.onupgradeneeded=()=>{e=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="FirebaseError";class hu extends Error{constructor(t,e,a){super(e),this.code=t,this.customData=a,this.name=UA,Object.setPrototypeOf(this,hu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dm.prototype.create)}}class Dm{constructor(t,e,a){this.service=t,this.serviceName=e,this.errors=a}create(t,...e){const a=e[0]||{},l=`${this.service}/${t}`,c=this.errors[t],h=c?LA(c,a):"Error",g=`${this.serviceName}: ${h} (${l}).`;return new hu(l,g,a)}}function LA(i,t){return i.replace(zA,(e,a)=>{const l=t[a];return l!=null?String(l):`<${a}?>`})}const zA=/\{\$([^}]+)}/g;function kA(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function vh(i,t){if(i===t)return!0;const e=Object.keys(i),a=Object.keys(t);for(const l of e){if(!a.includes(l))return!1;const c=i[l],h=t[l];if(YE(c)&&YE(h)){if(!vh(c,h))return!1}else if(c!==h)return!1}for(const l of a)if(!e.includes(l))return!1;return!0}function YE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(i){const t=[];for(const[e,a]of Object.entries(i))Array.isArray(a)?a.forEach(l=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function $g(i){const t={};return i.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function tm(i){const t=i.indexOf("?");if(!t)return"";const e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}function BA(i,t){const e=new GA(i,t);return e.subscribe.bind(e)}class GA{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,a){let l;if(t===void 0&&e===void 0&&a===void 0)throw new Error("Missing Observer.");FA(t,["next","error","complete"])?l=t:l={next:t,error:e,complete:a},l.next===void 0&&(l.next=O1),l.error===void 0&&(l.error=O1),l.complete===void 0&&(l.complete=O1);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FA(i,t){if(typeof i!="object"||i===null)return!1;for(const e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function O1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(i){return i&&i._delegate?i._delegate:i}class Eh{constructor(t,e,a){this.name=t,this.instanceFactory=e,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const a=new wA;if(this.instancesDeferred.set(e,a),this.isInitialized(e)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:e});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qA(t))try{this.getOrInitializeService({instanceIdentifier:lh})}catch{}for(const[e,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(e);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(t=lh){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=lh){return this.instances.has(t)}getOptions(t=lh){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:e});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&h.resolve(l)}return l}onInit(t,e){var a;const l=this.normalizeInstanceIdentifier(e),c=(a=this.onInitCallbacks.get(l))!==null&&a!==void 0?a:new Set;c.add(t),this.onInitCallbacks.set(l,c);const h=this.instances.get(l);return h&&t(h,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,e){const a=this.onInitCallbacks.get(e);if(a)for(const l of a)try{l(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:HA(t),options:e}),this.instances.set(t,a),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=lh){return this.component?this.component.multipleInstances?t:lh:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HA(i){return i===lh?void 0:i}function qA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new jA(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const YA={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},QA=Xe.INFO,XA={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},ZA=(i,t,...e)=>{if(t<i.logLevel)return;const a=new Date().toISOString(),l=XA[t];if(l)console[l](`[${a}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class U_{constructor(t){this.name=t,this._logLevel=QA,this._logHandler=ZA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?YA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...t),this._logHandler(this,Xe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...t),this._logHandler(this,Xe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...t),this._logHandler(this,Xe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...t),this._logHandler(this,Xe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...t),this._logHandler(this,Xe.ERROR,...t)}}const WA=(i,t)=>t.some(e=>i instanceof e);let QE,XE;function JA(){return QE||(QE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $A(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u5=new WeakMap,Y1=new WeakMap,c5=new WeakMap,M1=new WeakMap,L_=new WeakMap;function t8(i){const t=new Promise((e,a)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{e(uc(i.result)),l()},h=()=>{a(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&u5.set(e,i)}).catch(()=>{}),L_.set(t,i),t}function e8(i){if(Y1.has(i))return;const t=new Promise((e,a)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{e(),l()},h=()=>{a(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Y1.set(i,t)}let Q1={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Y1.get(i);if(t==="objectStoreNames")return i.objectStoreNames||c5.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return uc(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function n8(i){Q1=i(Q1)}function i8(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const a=i.call(V1(this),t,...e);return c5.set(a,t.sort?t.sort():[t]),uc(a)}:$A().includes(i)?function(...t){return i.apply(V1(this),t),uc(u5.get(this))}:function(...t){return uc(i.apply(V1(this),t))}}function a8(i){return typeof i=="function"?i8(i):(i instanceof IDBTransaction&&e8(i),WA(i,JA())?new Proxy(i,Q1):i)}function uc(i){if(i instanceof IDBRequest)return t8(i);if(M1.has(i))return M1.get(i);const t=a8(i);return t!==i&&(M1.set(i,t),L_.set(t,i)),t}const V1=i=>L_.get(i);function r8(i,t,{blocked:e,upgrade:a,blocking:l,terminated:c}={}){const h=indexedDB.open(i,t),g=uc(h);return a&&h.addEventListener("upgradeneeded",m=>{a(uc(h.result),m.oldVersion,m.newVersion,uc(h.transaction),m)}),e&&h.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),g.then(m=>{c&&m.addEventListener("close",()=>c()),l&&m.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const s8=["get","getKey","getAll","getAllKeys","count"],l8=["put","add","delete","clear"],P1=new Map;function ZE(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(P1.get(t))return P1.get(t);const e=t.replace(/FromIndex$/,""),a=t!==e,l=l8.includes(e);if(!(e in(a?IDBIndex:IDBObjectStore).prototype)||!(l||s8.includes(e)))return;const c=async function(h,...g){const m=this.transaction(h,l?"readwrite":"readonly");let _=m.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[e](...g),l&&m.done]))[0]};return P1.set(t,c),c}n8(i=>({...i,get:(t,e,a)=>ZE(t,e)||i.get(t,e,a),has:(t,e)=>!!ZE(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(u8(e)){const a=e.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(e=>e).join(" ")}}function u8(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const X1="@firebase/app",WE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new U_("@firebase/app"),c8="@firebase/app-compat",h8="@firebase/analytics-compat",f8="@firebase/analytics",d8="@firebase/app-check-compat",g8="@firebase/app-check",m8="@firebase/auth",p8="@firebase/auth-compat",y8="@firebase/database",_8="@firebase/data-connect",v8="@firebase/database-compat",E8="@firebase/functions",S8="@firebase/functions-compat",T8="@firebase/installations",b8="@firebase/installations-compat",A8="@firebase/messaging",C8="@firebase/messaging-compat",R8="@firebase/performance",w8="@firebase/performance-compat",N8="@firebase/remote-config",x8="@firebase/remote-config-compat",D8="@firebase/storage",I8="@firebase/storage-compat",O8="@firebase/firestore",M8="@firebase/vertexai",V8="@firebase/firestore-compat",P8="firebase",U8="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="[DEFAULT]",L8={[X1]:"fire-core",[c8]:"fire-core-compat",[f8]:"fire-analytics",[h8]:"fire-analytics-compat",[g8]:"fire-app-check",[d8]:"fire-app-check-compat",[m8]:"fire-auth",[p8]:"fire-auth-compat",[y8]:"fire-rtdb",[_8]:"fire-data-connect",[v8]:"fire-rtdb-compat",[E8]:"fire-fn",[S8]:"fire-fn-compat",[T8]:"fire-iid",[b8]:"fire-iid-compat",[A8]:"fire-fcm",[C8]:"fire-fcm-compat",[R8]:"fire-perf",[w8]:"fire-perf-compat",[N8]:"fire-rc",[x8]:"fire-rc-compat",[D8]:"fire-gcs",[I8]:"fire-gcs-compat",[O8]:"fire-fst",[V8]:"fire-fst-compat",[M8]:"fire-vertex","fire-js":"fire-js",[P8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Map,z8=new Map,W1=new Map;function JE(i,t){try{i.container.addComponent(t)}catch(e){lu.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function zf(i){const t=i.name;if(W1.has(t))return lu.debug(`There were multiple attempts to register component ${t}.`),!1;W1.set(t,i);for(const e of Op.values())JE(e,i);for(const e of z8.values())JE(e,i);return!0}function z_(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function ds(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cc=new Dm("app","Firebase",k8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(t,e,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=U8;function h5(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Z1,automaticDataCollectionEnabled:!1},t),l=a.name;if(typeof l!="string"||!l)throw cc.create("bad-app-name",{appName:String(l)});if(e||(e=r5()),!e)throw cc.create("no-options");const c=Op.get(l);if(c){if(vh(e,c.options)&&vh(a,c.config))return c;throw cc.create("duplicate-app",{appName:l})}const h=new KA(l);for(const m of W1.values())h.addComponent(m);const g=new B8(e,a,h);return Op.set(l,g),g}function f5(i=Z1){const t=Op.get(i);if(!t&&i===Z1&&r5())return h5();if(!t)throw cc.create("no-app",{appName:i});return t}function hc(i,t,e){var a;let l=(a=L8[i])!==null&&a!==void 0?a:i;e&&(l+=`-${e}`);const c=l.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const g=[`Unable to register library "${l}" with version "${t}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&h&&g.push("and"),h&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),lu.warn(g.join(" "));return}zf(new Eh(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="firebase-heartbeat-database",F8=1,dm="firebase-heartbeat-store";let U1=null;function d5(){return U1||(U1=r8(G8,F8,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(dm)}catch(e){console.warn(e)}}}}).catch(i=>{throw cc.create("idb-open",{originalErrorMessage:i.message})})),U1}async function j8(i){try{const e=(await d5()).transaction(dm),a=await e.objectStore(dm).get(g5(i));return await e.done,a}catch(t){if(t instanceof hu)lu.warn(t.message);else{const e=cc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});lu.warn(e.message)}}}async function $E(i,t){try{const a=(await d5()).transaction(dm,"readwrite");await a.objectStore(dm).put(t,g5(i)),await a.done}catch(e){if(e instanceof hu)lu.warn(e.message);else{const a=cc.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});lu.warn(a.message)}}}function g5(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=1024,q8=30;class K8{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Q8(e),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,e;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=t4();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>q8){const h=X8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){lu.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=t4(),{heartbeatsToSend:a,unsentEntries:l}=Y8(this._heartbeatsCache.heartbeats),c=Ip(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(e){return lu.warn(e),""}}}function t4(){return new Date().toISOString().substring(0,10)}function Y8(i,t=H8){const e=[];let a=i.slice();for(const l of i){const c=e.find(h=>h.agent===l.agent);if(c){if(c.dates.push(l.date),e4(e)>t){c.dates.pop();break}}else if(e.push({agent:l.agent,dates:[l.date]}),e4(e)>t){e.pop();break}a=a.slice(1)}return{heartbeatsToSend:e,unsentEntries:a}}class Q8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o5()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await j8(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const l=await this.read();return $E(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const l=await this.read();return $E(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function e4(i){return Ip(JSON.stringify({version:2,heartbeats:i})).length}function X8(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let a=1;a<i.length;a++)i[a].date<e&&(e=i[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(i){zf(new Eh("platform-logger",t=>new o8(t),"PRIVATE")),zf(new Eh("heartbeat",t=>new K8(t),"PRIVATE")),hc(X1,WE,i),hc(X1,WE,"esm2017"),hc("fire-js","")}Z8("");var W8="firebase",J8="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hc(W8,J8,"app");function k_(i,t){var e={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&t.indexOf(a)<0&&(e[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(e[a[l]]=i[a[l]]);return e}function m5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $8=m5,p5=new Dm("auth","Firebase",m5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new U_("@firebase/auth");function t7(i,...t){Mp.logLevel<=Xe.WARN&&Mp.warn(`Auth (${$f}): ${i}`,...t)}function mp(i,...t){Mp.logLevel<=Xe.ERROR&&Mp.error(`Auth (${$f}): ${i}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(i,...t){throw G_(i,...t)}function Dl(i,...t){return G_(i,...t)}function B_(i,t,e){const a=Object.assign(Object.assign({},$8()),{[t]:e});return new Dm("auth","Firebase",a).create(t,{appName:i.name})}function ru(i){return B_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e7(i,t,e){const a=e;if(!(t instanceof a))throw a.name!==t.constructor.name&&Qs(i,"argument-error"),B_(i,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G_(i,...t){if(typeof i!="string"){const e=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(e,...a)}return p5.create(i,...t)}function me(i,t,...e){if(!i)throw G_(t,...e)}function eu(i){const t="INTERNAL ASSERTION FAILED: "+i;throw mp(t),new Error(t)}function ou(i,t){i||eu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function n7(){return n4()==="http:"||n4()==="https:"}function n4(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n7()||OA()||"connection"in navigator)?navigator.onLine:!0}function a7(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t,e){this.shortDelay=t,this.longDelay=e,ou(e>t,"Short delay should be less than long delay!"),this.isMobile=xA()||MA()}get(){return i7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(i,t){ou(i.emulator,"Emulator should always be set here");const{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{static initialize(t,e,a){this.fetchImpl=t,e&&(this.headersImpl=e),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=new Om(3e4,6e4);function Ec(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}async function Sc(i,t,e,a,l={}){return _5(i,l,async()=>{let c={},h={};a&&(t==="GET"?h=a:c={body:JSON.stringify(a)});const g=Im(Object.assign({key:i.config.apiKey},h)).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const _=Object.assign({method:t,headers:m},c);return IA()||(_.referrerPolicy="no-referrer"),y5.fetch()(v5(i,i.config.apiHost,e,g),_)})}async function _5(i,t,e){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},r7),t);try{const l=new o7(i),c=await Promise.race([e(),l.promise]);l.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw sp(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[m,_]=g.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sp(i,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw sp(i,"email-already-in-use",h);if(m==="USER_DISABLED")throw sp(i,"user-disabled",h);const E=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw B_(i,E,_);Qs(i,E)}}catch(l){if(l instanceof hu)throw l;Qs(i,"network-request-failed",{message:String(l)})}}async function Mm(i,t,e,a,l={}){const c=await Sc(i,t,e,a,l);return"mfaPendingCredential"in c&&Qs(i,"multi-factor-auth-required",{_serverResponse:c}),c}function v5(i,t,e,a){const l=`${t}${e}?${a}`;return i.config.emulator?F_(i.config,l):`${i.config.apiScheme}://${l}`}function l7(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class o7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,a)=>{this.timer=setTimeout(()=>a(Dl(this.auth,"network-request-failed")),s7.get())})}}function sp(i,t,e){const a={appName:i.name};e.email&&(a.email=e.email),e.phoneNumber&&(a.phoneNumber=e.phoneNumber);const l=Dl(i,t,a);return l.customData._tokenResponse=e,l}function i4(i){return i!==void 0&&i.enterprise!==void 0}class u7{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return l7(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function c7(i,t){return Sc(i,"GET","/v2/recaptchaConfig",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(i,t){return Sc(i,"POST","/v1/accounts:delete",t)}async function E5(i,t){return Sc(i,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function f7(i,t=!1){const e=er(i),a=await e.getIdToken(t),l=j_(a);me(l&&l.exp&&l.auth_time&&l.iat,e.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:l,token:a,authTime:sm(L1(l.auth_time)),issuedAtTime:sm(L1(l.iat)),expirationTime:sm(L1(l.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function L1(i){return Number(i)*1e3}function j_(i){const[t,e,a]=i.split(".");if(t===void 0||e===void 0||a===void 0)return mp("JWT malformed, contained fewer than 3 sections"),null;try{const l=i5(e);return l?JSON.parse(l):(mp("Failed to decode base64 JWT payload"),null)}catch(l){return mp("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function a4(i){const t=j_(i);return me(t,"internal-error"),me(typeof t.exp<"u","internal-error"),me(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gm(i,t,e=!1){if(e)return t;try{return await t}catch(a){throw a instanceof hu&&d7(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function d7({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const l=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=sm(this.lastLoginAt),this.creationTime=sm(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(i){var t;const e=i.auth,a=await i.getIdToken(),l=await gm(i,E5(e,{idToken:a}));me(l==null?void 0:l.users.length,e,"internal-error");const c=l.users[0];i._notifyReloadListener(c);const h=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?S5(c.providerUserInfo):[],g=p7(i.providerData,h),m=i.isAnonymous,_=!(i.email&&c.passwordHash)&&!(g!=null&&g.length),E=m?_:!1,A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new $1(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(i,A)}async function m7(i){const t=er(i);await Vp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function p7(i,t){return[...i.filter(a=>!t.some(l=>l.providerId===a.providerId)),...t]}function S5(i){return i.map(t=>{var{providerId:e}=t,a=k_(t,["providerId"]);return{providerId:e,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(i,t){const e=await _5(i,{},async()=>{const a=Im({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=i.config,h=v5(i,l,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",y5.fetch()(h,{method:"POST",headers:g,body:a})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function _7(i,t){return Sc(i,"POST","/v2/accounts:revokeToken",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){me(t.idToken,"internal-error"),me(typeof t.idToken<"u","internal-error"),me(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):a4(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){me(t.length!==0,"internal-error");const e=a4(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:a,refreshToken:l,expiresIn:c}=await y7(t,e);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(t,e,a){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,e){const{refreshToken:a,accessToken:l,expirationTime:c}=e,h=new Vf;return a&&(me(typeof a=="string","internal-error",{appName:t}),h.refreshToken=a),l&&(me(typeof l=="string","internal-error",{appName:t}),h.accessToken=l),c&&(me(typeof c=="number","internal-error",{appName:t}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Vf,this.toJSON())}_performRefresh(){return eu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(i,t){me(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class nu{constructor(t){var{uid:e,auth:a,stsTokenManager:l}=t,c=k_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=a,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new $1(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const e=await gm(this,this.stsTokenManager.getToken(this.auth,t));return me(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return f7(this,t)}reload(){return m7(this)}_assign(t){this!==t&&(me(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new nu(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),e&&await Vp(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(ru(this.auth));const t=await this.getIdToken();return await gm(this,h7(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var a,l,c,h,g,m,_,E;const A=(a=e.displayName)!==null&&a!==void 0?a:void 0,D=(l=e.email)!==null&&l!==void 0?l:void 0,C=(c=e.phoneNumber)!==null&&c!==void 0?c:void 0,R=(h=e.photoURL)!==null&&h!==void 0?h:void 0,P=(g=e.tenantId)!==null&&g!==void 0?g:void 0,U=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,H=(_=e.createdAt)!==null&&_!==void 0?_:void 0,N=(E=e.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:x,emailVerified:L,isAnonymous:F,providerData:K,stsTokenManager:j}=e;me(x&&j,t,"internal-error");const M=Vf.fromJSON(this.name,j);me(typeof x=="string",t,"internal-error"),tc(A,t.name),tc(D,t.name),me(typeof L=="boolean",t,"internal-error"),me(typeof F=="boolean",t,"internal-error"),tc(C,t.name),tc(R,t.name),tc(P,t.name),tc(U,t.name),tc(H,t.name),tc(N,t.name);const I=new nu({uid:x,auth:t,email:D,emailVerified:L,displayName:A,isAnonymous:F,photoURL:R,phoneNumber:C,tenantId:P,stsTokenManager:M,createdAt:H,lastLoginAt:N});return K&&Array.isArray(K)&&(I.providerData=K.map(V=>Object.assign({},V))),U&&(I._redirectEventId=U),I}static async _fromIdTokenResponse(t,e,a=!1){const l=new Vf;l.updateFromServerResponse(e);const c=new nu({uid:e.localId,auth:t,stsTokenManager:l,isAnonymous:a});return await Vp(c),c}static async _fromGetAccountInfoResponse(t,e,a){const l=e.users[0];me(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?S5(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Vf;g.updateFromIdToken(a);const m=new nu({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:h}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new $1(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(m,_),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Map;function iu(i){ou(i instanceof Function,"Expected a class definition");let t=r4.get(i);return t?(ou(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,r4.set(i,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}T5.type="NONE";const s4=T5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(i,t,e){return`firebase:${i}:${t}:${e}`}class Pf{constructor(t,e,a){this.persistence=t,this.auth=e,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=pp(this.userKey,l.apiKey,c),this.fullPersistenceKey=pp("persistence",l.apiKey,c),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?nu._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,a="authUser"){if(!e.length)return new Pf(iu(s4),t,a);const l=(await Promise.all(e.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||iu(s4);const h=pp(a,t.config.apiKey,t.name);let g=null;for(const _ of e)try{const E=await _._get(h);if(E){const A=nu._fromJSON(t,E);_!==c&&(g=A),c=_;break}}catch{}const m=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Pf(c,t,a):(c=m[0],g&&await c._set(h,g.toJSON()),await Promise.all(e.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new Pf(c,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(R5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(b5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(N5(t))return"Blackberry";if(x5(t))return"Webos";if(A5(t))return"Safari";if((t.includes("chrome/")||C5(t))&&!t.includes("edge/"))return"Chrome";if(w5(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(e);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function b5(i=Zi()){return/firefox\//i.test(i)}function A5(i=Zi()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function C5(i=Zi()){return/crios\//i.test(i)}function R5(i=Zi()){return/iemobile/i.test(i)}function w5(i=Zi()){return/android/i.test(i)}function N5(i=Zi()){return/blackberry/i.test(i)}function x5(i=Zi()){return/webos/i.test(i)}function H_(i=Zi()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function v7(i=Zi()){var t;return H_(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function E7(){return VA()&&document.documentMode===10}function D5(i=Zi()){return H_(i)||w5(i)||x5(i)||N5(i)||/windows phone/i.test(i)||R5(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(i,t=[]){let e;switch(i){case"Browser":e=l4(Zi());break;case"Worker":e=`${l4(Zi())}-${i}`;break;default:e=i}const a=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${$f}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const a=c=>new Promise((h,g)=>{try{const m=t(c);h(m)}catch(m){g(m)}});a.onAbort=e,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const a of this.queue)await a(t),a.onAbort&&e.push(a.onAbort)}catch(a){e.reverse();for(const l of e)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(i,t={}){return Sc(i,"GET","/v2/passwordPolicy",Ec(i,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=6;class A7{constructor(t){var e,a,l,c;const h=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=h.minPasswordLength)!==null&&e!==void 0?e:b7,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,a,l,c,h,g;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(a=m.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsLowercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsUppercaseLetter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(g=m.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),m}validatePasswordLengthOptions(t,e){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(e.meetsMinPasswordLength=t.length>=a),l&&(e.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let a;for(let l=0;l<t.length;l++)a=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(e,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,e,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(t,e,a,l){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o4(this),this.idTokenSubscription=new o4(this),this.beforeStateQueue=new S7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=iu(e)),this._initializationPromise=this.queue(async()=>{var a,l;if(!this._deleted&&(this.persistenceManager=await Pf.create(this,t),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await E5(this,{idToken:t}),a=await nu._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(a)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(ds(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let l=a,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,g=l==null?void 0:l._redirectEventId,m=await this.tryRedirectSignIn(t);(!h||h===g)&&(m!=null&&m.user)&&(l=m.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(h){l=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Vp(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=a7()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ds(this.app))return Promise.reject(ru(this));const e=t?er(t):null;return e&&me(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&me(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(ru(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ds(this.app)?Promise.reject(ru(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(iu(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await T7(this),e=new A7(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Dm("auth","Firebase",t())}onAuthStateChanged(t,e,a){return this.registerStateListener(this.authStateSubscription,t,e,a)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,a){return this.registerStateListener(this.idTokenSubscription,t,e,a)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(a.tenantId=this.tenantId),await _7(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const a=await this.getOrInitRedirectPersistenceManager(e);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&iu(t)||this._popupRedirectResolver;me(e,this,"argument-error"),this.redirectPersistenceManager=await Pf.create(this,[iu(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,a;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,a,l){if(this._deleted)return()=>{};const c=typeof e=="function"?e:e.next.bind(e);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,a,l);return()=>{h=!0,m()}}else{const m=t.addObserver(e);return()=>{h=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=I5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(e["X-Firebase-Client"]=a);const l=await this._getAppCheckToken();return l&&(e["X-Firebase-AppCheck"]=l),e}async _getAppCheckToken(){var t;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&t7(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tc(i){return er(i)}class o4{constructor(t){this.auth=t,this.observer=null,this.addObserver=BA(e=>this.observer=e)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R7(i){oy=i}function O5(i){return oy.loadJS(i)}function w7(){return oy.recaptchaEnterpriseScript}function N7(){return oy.gapiScript}function x7(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class D7{constructor(){this.enterprise=new I7}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class I7{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const O7="recaptcha-enterprise",M5="NO_RECAPTCHA";class M7{constructor(t){this.type=O7,this.auth=Tc(t)}async verify(t="verify",e=!1){async function a(c){if(!e){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,g)=>{c7(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new u7(m);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,h(_.siteKey)}}).catch(m=>{g(m)})})}function l(c,h,g){const m=window.grecaptcha;i4(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:t}).then(_=>{h(_)}).catch(()=>{h(M5)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D7().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{a(this.auth).then(g=>{if(!e&&i4(window.grecaptcha))l(g,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=w7();m.length!==0&&(m+=g),O5(m).then(()=>{l(g,c,h)}).catch(_=>{h(_)})}}).catch(g=>{h(g)})})}}async function u4(i,t,e,a=!1,l=!1){const c=new M7(i);let h;if(l)h=M5;else try{h=await c.verify(e)}catch{h=await c.verify(e,!0)}const g=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const m=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const m=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function t_(i,t,e,a,l){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await u4(i,t,e,e==="getOobCode");return a(i,h)}else return a(i,t).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await u4(i,t,e,e==="getOobCode");return a(i,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(i,t){const e=z_(i,"auth");if(e.isInitialized()){const l=e.getImmediate(),c=e.getOptions();if(vh(c,t??{}))return l;Qs(l,"already-initialized")}return e.initialize({options:t})}function P7(i,t){const e=(t==null?void 0:t.persistence)||[],a=(Array.isArray(e)?e:[e]).map(iu);t!=null&&t.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function U7(i,t,e){const a=Tc(i);me(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const l=!1,c=V5(t),{host:h,port:g}=L7(t),m=g===null?"":`:${g}`,_={url:`${c}//${h}${m}/`},E=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){me(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),me(vh(_,a.config.emulator)&&vh(E,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=E,a.settings.appVerificationDisabledForTesting=!0,z7()}function V5(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function L7(i){const t=V5(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};const a=e[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:c4(a.substr(c.length+1))}}else{const[c,h]=a.split(":");return{host:c,port:c4(h)}}}function c4(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function z7(){function i(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return eu("not implemented")}_getIdTokenResponse(t){return eu("not implemented")}_linkToIdToken(t,e){return eu("not implemented")}_getReauthenticationResolver(t){return eu("not implemented")}}async function k7(i,t){return Sc(i,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B7(i,t){return Mm(i,"POST","/v1/accounts:signInWithPassword",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(i,t){return Mm(i,"POST","/v1/accounts:signInWithEmailLink",Ec(i,t))}async function F7(i,t){return Mm(i,"POST","/v1/accounts:signInWithEmailLink",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends q_{constructor(t,e,a,l=null){super("password",a),this._email=t,this._password=e,this._tenantId=l}static _fromEmailAndPassword(t,e){return new mm(t,e,"password")}static _fromEmailAndCode(t,e,a=null){return new mm(t,e,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t_(t,e,"signInWithPassword",B7);case"emailLink":return G7(t,{email:this._email,oobCode:this._password});default:Qs(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const a={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t_(t,a,"signUpPassword",k7);case"emailLink":return F7(t,{idToken:e,email:this._email,oobCode:this._password});default:Qs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(i,t){return Mm(i,"POST","/v1/accounts:signInWithIdp",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7="http://localhost";class Sh extends q_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Sh(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Qs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:l}=e,c=k_(e,["providerId","signInMethod"]);if(!a||!l)return null;const h=new Sh(a,l);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(t){const e=this.buildRequest();return Uf(t,e)}_linkToIdToken(t,e){const a=this.buildRequest();return a.idToken=e,Uf(t,a)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Uf(t,e)}buildRequest(){const t={requestUri:j7,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Im(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q7(i){const t=$g(tm(i)).link,e=t?$g(tm(t)).deep_link_id:null,a=$g(tm(i)).deep_link_id;return(a?$g(tm(a)).link:null)||a||e||t||i}class K_{constructor(t){var e,a,l,c,h,g;const m=$g(tm(t)),_=(e=m.apiKey)!==null&&e!==void 0?e:null,E=(a=m.oobCode)!==null&&a!==void 0?a:null,A=H7((l=m.mode)!==null&&l!==void 0?l:null);me(_&&E&&A,"argument-error"),this.apiKey=_,this.operation=A,this.code=E,this.continueUrl=(c=m.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(h=m.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(g=m.tenantId)!==null&&g!==void 0?g:null}static parseLink(t){const e=q7(t);try{return new K_(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.providerId=td.PROVIDER_ID}static credential(t,e){return mm._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const a=K_.parseLink(e);return me(a,"argument-error"),mm._fromEmailAndCode(t,a.code,a.tenantId)}}td.PROVIDER_ID="password";td.EMAIL_PASSWORD_SIGN_IN_METHOD="password";td.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends Y_{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Vm{constructor(){super("facebook.com")}static credential(t){return Sh._fromParams({providerId:ac.PROVIDER_ID,signInMethod:ac.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ac.credentialFromTaggedObject(t)}static credentialFromError(t){return ac.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ac.credential(t.oauthAccessToken)}catch{return null}}}ac.FACEBOOK_SIGN_IN_METHOD="facebook.com";ac.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Vm{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Sh._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return tu.credentialFromTaggedObject(t)}static credentialFromError(t){return tu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:a}=t;if(!e&&!a)return null;try{return tu.credential(e,a)}catch{return null}}}tu.GOOGLE_SIGN_IN_METHOD="google.com";tu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends Vm{constructor(){super("github.com")}static credential(t){return Sh._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return rc.credentialFromTaggedObject(t)}static credentialFromError(t){return rc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return rc.credential(t.oauthAccessToken)}catch{return null}}}rc.GITHUB_SIGN_IN_METHOD="github.com";rc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Vm{constructor(){super("twitter.com")}static credential(t,e){return Sh._fromParams({providerId:sc.PROVIDER_ID,signInMethod:sc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return sc.credentialFromTaggedObject(t)}static credentialFromError(t){return sc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:a}=t;if(!e||!a)return null;try{return sc.credential(e,a)}catch{return null}}}sc.TWITTER_SIGN_IN_METHOD="twitter.com";sc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(i,t){return Mm(i,"POST","/v1/accounts:signUp",Ec(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,a,l=!1){const c=await nu._fromIdTokenResponse(t,a,l),h=h4(a);return new Th({user:c,providerId:h,_tokenResponse:a,operationType:e})}static async _forOperation(t,e,a){await t._updateTokensIfNecessary(a,!0);const l=h4(a);return new Th({user:t,providerId:l,_tokenResponse:a,operationType:e})}}function h4(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends hu{constructor(t,e,a,l){var c;super(e.code,e.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,Pp.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:e.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,e,a,l){return new Pp(t,e,a,l)}}function P5(i,t,e,a){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Pp._fromErrorAndOperation(i,c,t,a):c})}async function Y7(i,t,e=!1){const a=await gm(i,t._linkToIdToken(i.auth,await i.getIdToken()),e);return Th._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(i,t,e=!1){const{auth:a}=i;if(ds(a.app))return Promise.reject(ru(a));const l="reauthenticate";try{const c=await gm(i,P5(a,l,t,i),e);me(c.idToken,a,"internal-error");const h=j_(c.idToken);me(h,a,"internal-error");const{sub:g}=h;return me(i.uid===g,a,"user-mismatch"),Th._forOperation(i,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Qs(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(i,t,e=!1){if(ds(i.app))return Promise.reject(ru(i));const a="signIn",l=await P5(i,a,t),c=await Th._fromIdTokenResponse(i,a,l);return e||await i._updateCurrentUser(c.user),c}async function X7(i,t){return U5(Tc(i),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(i){const t=Tc(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Z7(i,t,e){if(ds(i.app))return Promise.reject(ru(i));const a=Tc(i),h=await t_(a,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K7).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&L5(i),m}),g=await Th._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function W7(i,t,e){return ds(i.app)?Promise.reject(ru(i)):X7(er(i),td.credential(t,e)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&L5(i),a})}function J7(i,t,e,a){return er(i).onIdTokenChanged(t,e,a)}function $7(i,t,e){return er(i).beforeAuthStateChanged(t,e)}function tC(i,t,e,a){return er(i).onAuthStateChanged(t,e,a)}function eC(i){return er(i).signOut()}const Up="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Up,"1"),this.storage.removeItem(Up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1e3,iC=10;class k5 extends z5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const a=this.storage.getItem(e),l=this.localCache[e];a!==l&&t(e,l,a)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((h,g,m)=>{this.notifyListeners(h,m)});return}const a=t.key;e?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(a);!e&&this.localCache[a]===h||this.notifyListeners(a,h)},c=this.storage.getItem(a);E7()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,iC):l()}notifyListeners(t,e){this.localCache[t]=e;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:a}),!0)})},nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}k5.type="LOCAL";const aC=k5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5 extends z5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}B5.type="SESSION";const G5=B5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(l=>l.isListeningto(t));if(e)return e;const a=new uy(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:a,eventType:l,data:c}=e.data,h=this.handlersMap[l];if(!(h!=null&&h.size))return;e.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const g=Array.from(h).map(async _=>_(e.origin,c)),m=await rC(g);e.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(i="",t=10){let e="";for(let a=0;a<t;a++)e+=Math.floor(Math.random()*10);return i+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,h;return new Promise((g,m)=>{const _=Q_("",20);l.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},a);h={messageChannel:l,onMessage(A){const D=A;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(E),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:_,data:e},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(){return window}function lC(i){yo().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function oC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function cC(){return F5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebaseLocalStorageDb",hC=1,Lp="firebaseLocalStorage",H5="fbase_key";class Pm{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function cy(i,t){return i.transaction([Lp],t?"readwrite":"readonly").objectStore(Lp)}function fC(){const i=indexedDB.deleteDatabase(j5);return new Pm(i).toPromise()}function e_(){const i=indexedDB.open(j5,hC);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(Lp,{keyPath:H5})}catch(l){e(l)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(Lp)?t(a):(a.close(),await fC(),t(await e_()))})})}async function f4(i,t,e){const a=cy(i,!0).put({[H5]:t,value:e});return new Pm(a).toPromise()}async function dC(i,t){const e=cy(i,!1).get(t),a=await new Pm(e).toPromise();return a===void 0?null:a.value}function d4(i,t){const e=cy(i,!0).delete(t);return new Pm(e).toPromise()}const gC=800,mC=3;class q5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e_(),this.db)}async _withRetries(t){let e=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(e++>mC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uy._getInstance(cC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await oC(),!this.activeServiceWorker)return;this.sender=new sC(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((e=a[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await e_();return await f4(t,Up,"1"),await d4(t,Up),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(a=>f4(a,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(a=>dC(a,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>d4(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=cy(l,!1).getAll();return new Pm(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],a=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),e.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),e.push(l));return e}notifyListeners(t,e){this.localCache[t]=e;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q5.type="LOCAL";const pC=q5;new Om(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(i,t){return t?iu(t):(me(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends q_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Uf(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Uf(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Uf(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function yC(i){return U5(i.auth,new X_(i),i.bypassAuthState)}function _C(i){const{auth:t,user:e}=i;return me(e,t,"internal-error"),Q7(e,new X_(i),i.bypassAuthState)}async function vC(i){const{auth:t,user:e}=i;return me(e,t,"internal-error"),Y7(e,new X_(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(t,e,a,l,c=!1){this.auth=t,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:a,postBody:l,tenantId:c,error:h,type:g}=t;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:e,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(m))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return vC;case"reauthViaPopup":case"reauthViaRedirect":return _C;default:Qs(this.auth,"internal-error")}}resolve(t){ou(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ou(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Om(2e3,1e4);async function SC(i,t,e){if(ds(i.app))return Promise.reject(Dl(i,"operation-not-supported-in-this-environment"));const a=Tc(i);e7(i,t,Y_);const l=K5(a,e);return new gh(a,"signInViaPopup",t,l).executeNotNull()}class gh extends Y5{constructor(t,e,a,l,c){super(t,e,l,c),this.provider=a,this.authWindow=null,this.pollId=null,gh.currentPopupAction&&gh.currentPopupAction.cancel(),gh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return me(t,this.auth,"internal-error"),t}async onExecution(){ou(this.filter.length===1,"Popup operations only handle one event");const t=Q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Dl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Dl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,a;if(!((a=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,EC.get())};t()}}gh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="pendingRedirect",yp=new Map;class bC extends Y5{constructor(t,e,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,a),this.eventId=null}async execute(){let t=yp.get(this.auth._key());if(!t){try{const a=await AC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(e){t=()=>Promise.reject(e)}yp.set(this.auth._key(),t)}return this.bypassAuthState||yp.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(i,t){const e=wC(t),a=RC(i);if(!await a._isAvailable())return!1;const l=await a._get(e)==="true";return await a._remove(e),l}function CC(i,t){yp.set(i._key(),t)}function RC(i){return iu(i._redirectPersistence)}function wC(i){return pp(TC,i.config.apiKey,i.name)}async function NC(i,t,e=!1){if(ds(i.app))return Promise.reject(ru(i));const a=Tc(i),l=K5(a,t),h=await new bC(a,l,e).execute();return h&&!e&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,t)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=10*60*1e3;class DC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(e=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var a;if(t.error&&!Q5(t)){const l=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";e.onError(Dl(this.auth,l))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const a=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xC&&this.cachedEventUids.clear(),this.cachedEventUids.has(g4(t))}saveEventToCache(t){this.cachedEventUids.add(g4(t)),this.lastProcessedEventTime=Date.now()}}function g4(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function Q5({type:i,error:t}){return i==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function IC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q5(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(i,t={}){return Sc(i,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;async function PC(i){if(i.config.emulator)return;const{authorizedDomains:t}=await OC(i);for(const e of t)try{if(UC(e))return}catch{}Qs(i,"unauthorized-domain")}function UC(i){const t=J1(),{protocol:e,hostname:a}=new URL(t);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&a===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&h.hostname===a}if(!VC.test(e))return!1;if(MC.test(i))return a===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Om(3e4,6e4);function m4(){const i=yo().___jsl;if(i!=null&&i.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function zC(i){return new Promise((t,e)=>{var a,l,c;function h(){m4(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{m4(),e(Dl(i,"network-request-failed"))},timeout:LC.get()})}if(!((l=(a=yo().gapi)===null||a===void 0?void 0:a.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((c=yo().gapi)===null||c===void 0)&&c.load)h();else{const g=x7("iframefcb");return yo()[g]=()=>{gapi.load?h():e(Dl(i,"network-request-failed"))},O5(`${N7()}?onload=${g}`).catch(m=>e(m))}}).catch(t=>{throw _p=null,t})}let _p=null;function kC(i){return _p=_p||zC(i),_p}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new Om(5e3,15e3),GC="__/auth/iframe",FC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qC(i){const t=i.config;me(t.authDomain,i,"auth-domain-config-required");const e=t.emulator?F_(t,FC):`https://${i.config.authDomain}/${GC}`,a={apiKey:t.apiKey,appName:i.name,v:$f},l=HC.get(i.config.apiHost);l&&(a.eid=l);const c=i._getFrameworks();return c.length&&(a.fw=c.join(",")),`${e}?${Im(a).slice(1)}`}async function KC(i){const t=await kC(i),e=yo().gapi;return me(e,i,"internal-error"),t.open({where:document.body,url:qC(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const h=Dl(i,"network-request-failed"),g=yo().setTimeout(()=>{c(h)},BC.get());function m(){yo().clearTimeout(g),l(a)}a.ping(m).then(m,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,XC=600,ZC="_blank",WC="http://localhost";class p4{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JC(i,t,e,a=QC,l=XC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const m=Object.assign(Object.assign({},YC),{width:a.toString(),height:l.toString(),top:c,left:h}),_=Zi().toLowerCase();e&&(g=C5(_)?ZC:e),b5(_)&&(t=t||WC,m.scrollbars="yes");const E=Object.entries(m).reduce((D,[C,R])=>`${D}${C}=${R},`,"");if(v7(_)&&g!=="_self")return $C(t||"",g),new p4(null);const A=window.open(t||"",g,E);me(A,i,"popup-blocked");try{A.focus()}catch{}return new p4(A)}function $C(i,t){const e=document.createElement("a");e.href=i,e.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="__/auth/handler",eR="emulator/auth/handler",nR=encodeURIComponent("fac");async function y4(i,t,e,a,l,c){me(i.config.authDomain,i,"auth-domain-config-required"),me(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:a,v:$f,eventId:l};if(t instanceof Y_){t.setDefaultLanguage(i.languageCode),h.providerId=t.providerId||"",kA(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,A]of Object.entries({}))h[E]=A}if(t instanceof Vm){const E=t.getScopes().filter(A=>A!=="");E.length>0&&(h.scopes=E.join(","))}i.tenantId&&(h.tid=i.tenantId);const g=h;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const m=await i._getAppCheckToken(),_=m?`#${nR}=${encodeURIComponent(m)}`:"";return`${iR(i)}?${Im(g).slice(1)}${_}`}function iR({config:i}){return i.emulator?F_(i,eR):`https://${i.authDomain}/${tR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G5,this._completeRedirectFn=NC,this._overrideRedirectResult=CC}async _openPopup(t,e,a,l){var c;ou((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await y4(t,e,a,J1(),l);return JC(t,h,Q_())}async _openRedirect(t,e,a,l){await this._originValidation(t);const c=await y4(t,e,a,J1(),l);return lC(c),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:l,promise:c}=this.eventManagers[e];return l?Promise.resolve(l):(ou(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[e]={promise:a},a.catch(()=>{delete this.eventManagers[e]}),a}async initAndGetManager(t){const e=await KC(t),a=new DC(t);return e.register("authEvent",l=>(me(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=e,a}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(z1,{type:z1},l=>{var c;const h=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[z1];h!==void 0&&e(!!h),Qs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=PC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return D5()||A5()||H_()}}const rR=aR;var _4="@firebase/auth",v4="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oR(i){zf(new Eh("auth",(t,{options:e})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;me(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I5(i)},_=new C7(a,l,c,m);return P7(_,e),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,a)=>{t.getProvider("auth-internal").initialize()})),zf(new Eh("auth-internal",t=>{const e=Tc(t.getProvider("auth").getImmediate());return(a=>new sR(a))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),hc(_4,v4,lR(i)),hc(_4,v4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=5*60,cR=s5("authIdTokenMaxAge")||uR;let E4=null;const hR=i=>async t=>{const e=t&&await t.getIdTokenResult(),a=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(a&&a>cR)return;const l=e==null?void 0:e.token;E4!==l&&(E4=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function fR(i=f5()){const t=z_(i,"auth");if(t.isInitialized())return t.getImmediate();const e=V7(i,{popupRedirectResolver:rR,persistence:[pC,aC,G5]}),a=s5("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const h=hR(c.toString());$7(e,h,()=>h(e.currentUser)),J7(e,g=>h(g))}}const l=a5("auth");return l&&U7(e,`http://${l}`),e}function dR(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}R7({loadJS(i){return new Promise((t,e)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=t,a.onerror=l=>{const c=Dl("internal-error");c.customData=l,e(c)},a.type="text/javascript",a.charset="UTF-8",dR().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oR("Browser");var S4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fc,X5;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,M){function I(){}I.prototype=M.prototype,j.D=M.prototype,j.prototype=new I,j.prototype.constructor=j,j.C=function(V,B,Y){for(var b=Array(arguments.length-2),q=2;q<arguments.length;q++)b[q-2]=arguments[q];return M.prototype[B].apply(V,b)}}function e(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,e),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(j,M,I){I||(I=0);var V=Array(16);if(typeof M=="string")for(var B=0;16>B;++B)V[B]=M.charCodeAt(I++)|M.charCodeAt(I++)<<8|M.charCodeAt(I++)<<16|M.charCodeAt(I++)<<24;else for(B=0;16>B;++B)V[B]=M[I++]|M[I++]<<8|M[I++]<<16|M[I++]<<24;M=j.g[0],I=j.g[1],B=j.g[2];var Y=j.g[3],b=M+(Y^I&(B^Y))+V[0]+3614090360&4294967295;M=I+(b<<7&4294967295|b>>>25),b=Y+(B^M&(I^B))+V[1]+3905402710&4294967295,Y=M+(b<<12&4294967295|b>>>20),b=B+(I^Y&(M^I))+V[2]+606105819&4294967295,B=Y+(b<<17&4294967295|b>>>15),b=I+(M^B&(Y^M))+V[3]+3250441966&4294967295,I=B+(b<<22&4294967295|b>>>10),b=M+(Y^I&(B^Y))+V[4]+4118548399&4294967295,M=I+(b<<7&4294967295|b>>>25),b=Y+(B^M&(I^B))+V[5]+1200080426&4294967295,Y=M+(b<<12&4294967295|b>>>20),b=B+(I^Y&(M^I))+V[6]+2821735955&4294967295,B=Y+(b<<17&4294967295|b>>>15),b=I+(M^B&(Y^M))+V[7]+4249261313&4294967295,I=B+(b<<22&4294967295|b>>>10),b=M+(Y^I&(B^Y))+V[8]+1770035416&4294967295,M=I+(b<<7&4294967295|b>>>25),b=Y+(B^M&(I^B))+V[9]+2336552879&4294967295,Y=M+(b<<12&4294967295|b>>>20),b=B+(I^Y&(M^I))+V[10]+4294925233&4294967295,B=Y+(b<<17&4294967295|b>>>15),b=I+(M^B&(Y^M))+V[11]+2304563134&4294967295,I=B+(b<<22&4294967295|b>>>10),b=M+(Y^I&(B^Y))+V[12]+1804603682&4294967295,M=I+(b<<7&4294967295|b>>>25),b=Y+(B^M&(I^B))+V[13]+4254626195&4294967295,Y=M+(b<<12&4294967295|b>>>20),b=B+(I^Y&(M^I))+V[14]+2792965006&4294967295,B=Y+(b<<17&4294967295|b>>>15),b=I+(M^B&(Y^M))+V[15]+1236535329&4294967295,I=B+(b<<22&4294967295|b>>>10),b=M+(B^Y&(I^B))+V[1]+4129170786&4294967295,M=I+(b<<5&4294967295|b>>>27),b=Y+(I^B&(M^I))+V[6]+3225465664&4294967295,Y=M+(b<<9&4294967295|b>>>23),b=B+(M^I&(Y^M))+V[11]+643717713&4294967295,B=Y+(b<<14&4294967295|b>>>18),b=I+(Y^M&(B^Y))+V[0]+3921069994&4294967295,I=B+(b<<20&4294967295|b>>>12),b=M+(B^Y&(I^B))+V[5]+3593408605&4294967295,M=I+(b<<5&4294967295|b>>>27),b=Y+(I^B&(M^I))+V[10]+38016083&4294967295,Y=M+(b<<9&4294967295|b>>>23),b=B+(M^I&(Y^M))+V[15]+3634488961&4294967295,B=Y+(b<<14&4294967295|b>>>18),b=I+(Y^M&(B^Y))+V[4]+3889429448&4294967295,I=B+(b<<20&4294967295|b>>>12),b=M+(B^Y&(I^B))+V[9]+568446438&4294967295,M=I+(b<<5&4294967295|b>>>27),b=Y+(I^B&(M^I))+V[14]+3275163606&4294967295,Y=M+(b<<9&4294967295|b>>>23),b=B+(M^I&(Y^M))+V[3]+4107603335&4294967295,B=Y+(b<<14&4294967295|b>>>18),b=I+(Y^M&(B^Y))+V[8]+1163531501&4294967295,I=B+(b<<20&4294967295|b>>>12),b=M+(B^Y&(I^B))+V[13]+2850285829&4294967295,M=I+(b<<5&4294967295|b>>>27),b=Y+(I^B&(M^I))+V[2]+4243563512&4294967295,Y=M+(b<<9&4294967295|b>>>23),b=B+(M^I&(Y^M))+V[7]+1735328473&4294967295,B=Y+(b<<14&4294967295|b>>>18),b=I+(Y^M&(B^Y))+V[12]+2368359562&4294967295,I=B+(b<<20&4294967295|b>>>12),b=M+(I^B^Y)+V[5]+4294588738&4294967295,M=I+(b<<4&4294967295|b>>>28),b=Y+(M^I^B)+V[8]+2272392833&4294967295,Y=M+(b<<11&4294967295|b>>>21),b=B+(Y^M^I)+V[11]+1839030562&4294967295,B=Y+(b<<16&4294967295|b>>>16),b=I+(B^Y^M)+V[14]+4259657740&4294967295,I=B+(b<<23&4294967295|b>>>9),b=M+(I^B^Y)+V[1]+2763975236&4294967295,M=I+(b<<4&4294967295|b>>>28),b=Y+(M^I^B)+V[4]+1272893353&4294967295,Y=M+(b<<11&4294967295|b>>>21),b=B+(Y^M^I)+V[7]+4139469664&4294967295,B=Y+(b<<16&4294967295|b>>>16),b=I+(B^Y^M)+V[10]+3200236656&4294967295,I=B+(b<<23&4294967295|b>>>9),b=M+(I^B^Y)+V[13]+681279174&4294967295,M=I+(b<<4&4294967295|b>>>28),b=Y+(M^I^B)+V[0]+3936430074&4294967295,Y=M+(b<<11&4294967295|b>>>21),b=B+(Y^M^I)+V[3]+3572445317&4294967295,B=Y+(b<<16&4294967295|b>>>16),b=I+(B^Y^M)+V[6]+76029189&4294967295,I=B+(b<<23&4294967295|b>>>9),b=M+(I^B^Y)+V[9]+3654602809&4294967295,M=I+(b<<4&4294967295|b>>>28),b=Y+(M^I^B)+V[12]+3873151461&4294967295,Y=M+(b<<11&4294967295|b>>>21),b=B+(Y^M^I)+V[15]+530742520&4294967295,B=Y+(b<<16&4294967295|b>>>16),b=I+(B^Y^M)+V[2]+3299628645&4294967295,I=B+(b<<23&4294967295|b>>>9),b=M+(B^(I|~Y))+V[0]+4096336452&4294967295,M=I+(b<<6&4294967295|b>>>26),b=Y+(I^(M|~B))+V[7]+1126891415&4294967295,Y=M+(b<<10&4294967295|b>>>22),b=B+(M^(Y|~I))+V[14]+2878612391&4294967295,B=Y+(b<<15&4294967295|b>>>17),b=I+(Y^(B|~M))+V[5]+4237533241&4294967295,I=B+(b<<21&4294967295|b>>>11),b=M+(B^(I|~Y))+V[12]+1700485571&4294967295,M=I+(b<<6&4294967295|b>>>26),b=Y+(I^(M|~B))+V[3]+2399980690&4294967295,Y=M+(b<<10&4294967295|b>>>22),b=B+(M^(Y|~I))+V[10]+4293915773&4294967295,B=Y+(b<<15&4294967295|b>>>17),b=I+(Y^(B|~M))+V[1]+2240044497&4294967295,I=B+(b<<21&4294967295|b>>>11),b=M+(B^(I|~Y))+V[8]+1873313359&4294967295,M=I+(b<<6&4294967295|b>>>26),b=Y+(I^(M|~B))+V[15]+4264355552&4294967295,Y=M+(b<<10&4294967295|b>>>22),b=B+(M^(Y|~I))+V[6]+2734768916&4294967295,B=Y+(b<<15&4294967295|b>>>17),b=I+(Y^(B|~M))+V[13]+1309151649&4294967295,I=B+(b<<21&4294967295|b>>>11),b=M+(B^(I|~Y))+V[4]+4149444226&4294967295,M=I+(b<<6&4294967295|b>>>26),b=Y+(I^(M|~B))+V[11]+3174756917&4294967295,Y=M+(b<<10&4294967295|b>>>22),b=B+(M^(Y|~I))+V[2]+718787259&4294967295,B=Y+(b<<15&4294967295|b>>>17),b=I+(Y^(B|~M))+V[9]+3951481745&4294967295,j.g[0]=j.g[0]+M&4294967295,j.g[1]=j.g[1]+(B+(b<<21&4294967295|b>>>11))&4294967295,j.g[2]=j.g[2]+B&4294967295,j.g[3]=j.g[3]+Y&4294967295}a.prototype.u=function(j,M){M===void 0&&(M=j.length);for(var I=M-this.blockSize,V=this.B,B=this.h,Y=0;Y<M;){if(B==0)for(;Y<=I;)l(this,j,Y),Y+=this.blockSize;if(typeof j=="string"){for(;Y<M;)if(V[B++]=j.charCodeAt(Y++),B==this.blockSize){l(this,V),B=0;break}}else for(;Y<M;)if(V[B++]=j[Y++],B==this.blockSize){l(this,V),B=0;break}}this.h=B,this.o+=M},a.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var M=1;M<j.length-8;++M)j[M]=0;var I=8*this.o;for(M=j.length-8;M<j.length;++M)j[M]=I&255,I/=256;for(this.u(j),j=Array(16),M=I=0;4>M;++M)for(var V=0;32>V;V+=8)j[I++]=this.g[M]>>>V&255;return j};function c(j,M){var I=g;return Object.prototype.hasOwnProperty.call(I,j)?I[j]:I[j]=M(j)}function h(j,M){this.h=M;for(var I=[],V=!0,B=j.length-1;0<=B;B--){var Y=j[B]|0;V&&Y==M||(I[B]=Y,V=!1)}this.g=I}var g={};function m(j){return-128<=j&&128>j?c(j,function(M){return new h([M|0],0>M?-1:0)}):new h([j|0],0>j?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return A;if(0>j)return U(_(-j));for(var M=[],I=1,V=0;j>=I;V++)M[V]=j/I|0,I*=4294967296;return new h(M,0)}function E(j,M){if(j.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(j.charAt(0)=="-")return U(E(j.substring(1),M));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(M,8)),V=A,B=0;B<j.length;B+=8){var Y=Math.min(8,j.length-B),b=parseInt(j.substring(B,B+Y),M);8>Y?(Y=_(Math.pow(M,Y)),V=V.j(Y).add(_(b))):(V=V.j(I),V=V.add(_(b)))}return V}var A=m(0),D=m(1),C=m(16777216);i=h.prototype,i.m=function(){if(P(this))return-U(this).m();for(var j=0,M=1,I=0;I<this.g.length;I++){var V=this.i(I);j+=(0<=V?V:4294967296+V)*M,M*=4294967296}return j},i.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(R(this))return"0";if(P(this))return"-"+U(this).toString(j);for(var M=_(Math.pow(j,6)),I=this,V="";;){var B=L(I,M).g;I=H(I,B.j(M));var Y=((0<I.g.length?I.g[0]:I.h)>>>0).toString(j);if(I=B,R(I))return Y+V;for(;6>Y.length;)Y="0"+Y;V=Y+V}},i.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function R(j){if(j.h!=0)return!1;for(var M=0;M<j.g.length;M++)if(j.g[M]!=0)return!1;return!0}function P(j){return j.h==-1}i.l=function(j){return j=H(this,j),P(j)?-1:R(j)?0:1};function U(j){for(var M=j.g.length,I=[],V=0;V<M;V++)I[V]=~j.g[V];return new h(I,~j.h).add(D)}i.abs=function(){return P(this)?U(this):this},i.add=function(j){for(var M=Math.max(this.g.length,j.g.length),I=[],V=0,B=0;B<=M;B++){var Y=V+(this.i(B)&65535)+(j.i(B)&65535),b=(Y>>>16)+(this.i(B)>>>16)+(j.i(B)>>>16);V=b>>>16,Y&=65535,b&=65535,I[B]=b<<16|Y}return new h(I,I[I.length-1]&-2147483648?-1:0)};function H(j,M){return j.add(U(M))}i.j=function(j){if(R(this)||R(j))return A;if(P(this))return P(j)?U(this).j(U(j)):U(U(this).j(j));if(P(j))return U(this.j(U(j)));if(0>this.l(C)&&0>j.l(C))return _(this.m()*j.m());for(var M=this.g.length+j.g.length,I=[],V=0;V<2*M;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var B=0;B<j.g.length;B++){var Y=this.i(V)>>>16,b=this.i(V)&65535,q=j.i(B)>>>16,G=j.i(B)&65535;I[2*V+2*B]+=b*G,N(I,2*V+2*B),I[2*V+2*B+1]+=Y*G,N(I,2*V+2*B+1),I[2*V+2*B+1]+=b*q,N(I,2*V+2*B+1),I[2*V+2*B+2]+=Y*q,N(I,2*V+2*B+2)}for(V=0;V<M;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=M;V<2*M;V++)I[V]=0;return new h(I,0)};function N(j,M){for(;(j[M]&65535)!=j[M];)j[M+1]+=j[M]>>>16,j[M]&=65535,M++}function x(j,M){this.g=j,this.h=M}function L(j,M){if(R(M))throw Error("division by zero");if(R(j))return new x(A,A);if(P(j))return M=L(U(j),M),new x(U(M.g),U(M.h));if(P(M))return M=L(j,U(M)),new x(U(M.g),M.h);if(30<j.g.length){if(P(j)||P(M))throw Error("slowDivide_ only works with positive integers.");for(var I=D,V=M;0>=V.l(j);)I=F(I),V=F(V);var B=K(I,1),Y=K(V,1);for(V=K(V,2),I=K(I,2);!R(V);){var b=Y.add(V);0>=b.l(j)&&(B=B.add(I),Y=b),V=K(V,1),I=K(I,1)}return M=H(j,B.j(M)),new x(B,M)}for(B=A;0<=j.l(M);){for(I=Math.max(1,Math.floor(j.m()/M.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),Y=_(I),b=Y.j(M);P(b)||0<b.l(j);)I-=V,Y=_(I),b=Y.j(M);R(Y)&&(Y=D),B=B.add(Y),j=H(j,b)}return new x(B,j)}i.A=function(j){return L(this,j).h},i.and=function(j){for(var M=Math.max(this.g.length,j.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)&j.i(V);return new h(I,this.h&j.h)},i.or=function(j){for(var M=Math.max(this.g.length,j.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)|j.i(V);return new h(I,this.h|j.h)},i.xor=function(j){for(var M=Math.max(this.g.length,j.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)^j.i(V);return new h(I,this.h^j.h)};function F(j){for(var M=j.g.length+1,I=[],V=0;V<M;V++)I[V]=j.i(V)<<1|j.i(V-1)>>>31;return new h(I,j.h)}function K(j,M){var I=M>>5;M%=32;for(var V=j.g.length-I,B=[],Y=0;Y<V;Y++)B[Y]=0<M?j.i(Y+I)>>>M|j.i(Y+I+1)<<32-M:j.i(Y+I);return new h(B,j.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,X5=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,fc=h}).apply(typeof S4<"u"?S4:typeof self<"u"?self:typeof window<"u"?window:{});var lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z5,em,W5,vp,n_,J5,$5,tT;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,w,z){return p==Array.prototype||p==Object.prototype||(p[w]=z.value),p};function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof lp=="object"&&lp];for(var w=0;w<p.length;++w){var z=p[w];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var a=e(this);function l(p,w){if(w)t:{var z=a;p=p.split(".");for(var J=0;J<p.length-1;J++){var ct=p[J];if(!(ct in z))break t;z=z[ct]}p=p[p.length-1],J=z[p],w=w(J),w!=J&&w!=null&&t(z,p,{configurable:!0,writable:!0,value:w})}}function c(p,w){p instanceof String&&(p+="");var z=0,J=!1,ct={next:function(){if(!J&&z<p.length){var At=z++;return{value:w(At,p[At]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}l("Array.prototype.values",function(p){return p||function(){return c(this,function(w,z){return z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function m(p){var w=typeof p;return w=w!="object"?w:p?Array.isArray(p)?"array":w:"null",w=="array"||w=="object"&&typeof p.length=="number"}function _(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function E(p,w,z){return p.call.apply(p.bind,arguments)}function A(p,w,z){if(!p)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,J),p.apply(w,ct)}}return function(){return p.apply(w,arguments)}}function D(p,w,z){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,D.apply(null,arguments)}function C(p,w){var z=Array.prototype.slice.call(arguments,1);return function(){var J=z.slice();return J.push.apply(J,arguments),p.apply(this,J)}}function R(p,w){function z(){}z.prototype=w.prototype,p.aa=w.prototype,p.prototype=new z,p.prototype.constructor=p,p.Qb=function(J,ct,At){for(var Kt=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)Kt[Be-2]=arguments[Be];return w.prototype[ct].apply(J,Kt)}}function P(p){const w=p.length;if(0<w){const z=Array(w);for(let J=0;J<w;J++)z[J]=p[J];return z}return[]}function U(p,w){for(let z=1;z<arguments.length;z++){const J=arguments[z];if(m(J)){const ct=p.length||0,At=J.length||0;p.length=ct+At;for(let Kt=0;Kt<At;Kt++)p[ct+Kt]=J[Kt]}else p.push(J)}}class H{constructor(w,z){this.i=w,this.j=z,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function N(p){return/^[\s\xa0]*$/.test(p)}function x(){var p=g.navigator;return p&&(p=p.userAgent)?p:""}function L(p){return L[" "](p),p}L[" "]=function(){};var F=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function K(p,w,z){for(const J in p)w.call(z,p[J],J,p)}function j(p,w){for(const z in p)w.call(void 0,p[z],z,p)}function M(p){const w={};for(const z in p)w[z]=p[z];return w}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(p,w){let z,J;for(let ct=1;ct<arguments.length;ct++){J=arguments[ct];for(z in J)p[z]=J[z];for(let At=0;At<I.length;At++)z=I[At],Object.prototype.hasOwnProperty.call(J,z)&&(p[z]=J[z])}}function B(p){var w=1;p=p.split(":");const z=[];for(;0<w&&p.length;)z.push(p.shift()),w--;return p.length&&z.push(p.join(":")),z}function Y(p){g.setTimeout(()=>{throw p},0)}function b(){var p=pt;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class q{constructor(){this.h=this.g=null}add(w,z){const J=G.get();J.set(w,z),this.h?this.h.next=J:this.g=J,this.h=J}}var G=new H(()=>new X,p=>p.reset());class X{constructor(){this.next=this.g=this.h=null}set(w,z){this.h=w,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let et,st=!1,pt=new q,Q=()=>{const p=g.Promise.resolve(void 0);et=()=>{p.then(rt)}};var rt=()=>{for(var p;p=b();){try{p.h.call(p.g)}catch(z){Y(z)}var w=G;w.j(p),100>w.h&&(w.h++,p.next=w.g,w.g=p)}st=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const z=()=>{};g.addEventListener("test",z,w),g.removeEventListener("test",z,w)}catch{}return p}();function Nt(p,w){if(lt.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var z=this.type=p.type,J=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget){if(F){t:{try{L(w.nodeName);var ct=!0;break t}catch{}ct=!1}ct||(w=null)}}else z=="mouseover"?w=p.fromElement:z=="mouseout"&&(w=p.toElement);this.relatedTarget=w,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Vt[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Nt.aa.h.call(this)}}R(Nt,lt);var Vt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function Dt(p,w,z,J,ct){this.listener=p,this.proxy=null,this.src=w,this.type=z,this.capture=!!J,this.ha=ct,this.key=++ht,this.da=this.fa=!1}function It(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function qt(p){this.src=p,this.g={},this.h=0}qt.prototype.add=function(p,w,z,J,ct){var At=p.toString();p=this.g[At],p||(p=this.g[At]=[],this.h++);var Kt=ce(p,w,J,ct);return-1<Kt?(w=p[Kt],z||(w.fa=!1)):(w=new Dt(w,this.src,At,!!J,ct),w.fa=z,p.push(w)),w};function Yt(p,w){var z=w.type;if(z in p.g){var J=p.g[z],ct=Array.prototype.indexOf.call(J,w,void 0),At;(At=0<=ct)&&Array.prototype.splice.call(J,ct,1),At&&(It(w),p.g[z].length==0&&(delete p.g[z],p.h--))}}function ce(p,w,z,J){for(var ct=0;ct<p.length;++ct){var At=p[ct];if(!At.da&&At.listener==w&&At.capture==!!z&&At.ha==J)return ct}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),ae={};function Ke(p,w,z,J,ct){if(Array.isArray(w)){for(var At=0;At<w.length;At++)Ke(p,w[At],z,J,ct);return null}return z=Fi(z),p&&p[nt]?p.K(w,z,_(J)?!!J.capture:!1,ct):ve(p,w,z,!1,J,ct)}function ve(p,w,z,J,ct,At){if(!w)throw Error("Invalid event type");var Kt=_(ct)?!!ct.capture:!!ct,Be=Fn(p);if(Be||(p[pe]=Be=new qt(p)),z=Be.add(w,z,J,Kt,At),z.proxy)return z;if(J=Je(),z.proxy=J,J.src=p,J.listener=z,p.addEventListener)dt||(ct=Kt),ct===void 0&&(ct=!1),p.addEventListener(w.toString(),J,ct);else if(p.attachEvent)p.attachEvent(Oi(w.toString()),J);else if(p.addListener&&p.removeListener)p.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Je(){function p(z){return w.call(p.src,p.listener,z)}const w=He;return p}function Gi(p,w,z,J,ct){if(Array.isArray(w))for(var At=0;At<w.length;At++)Gi(p,w[At],z,J,ct);else J=_(J)?!!J.capture:!!J,z=Fi(z),p&&p[nt]?(p=p.i,w=String(w).toString(),w in p.g&&(At=p.g[w],z=ce(At,z,J,ct),-1<z&&(It(At[z]),Array.prototype.splice.call(At,z,1),At.length==0&&(delete p.g[w],p.h--)))):p&&(p=Fn(p))&&(w=p.g[w.toString()],p=-1,w&&(p=ce(w,z,J,ct)),(z=-1<p?w[p]:null)&&un(z))}function un(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[nt])Yt(w.i,p);else{var z=p.type,J=p.proxy;w.removeEventListener?w.removeEventListener(z,J,p.capture):w.detachEvent?w.detachEvent(Oi(z),J):w.addListener&&w.removeListener&&w.removeListener(J),(z=Fn(w))?(Yt(z,p),z.h==0&&(z.src=null,w[pe]=null)):It(p)}}}function Oi(p){return p in ae?ae[p]:ae[p]="on"+p}function He(p,w){if(p.da)p=!0;else{w=new Nt(w,this);var z=p.listener,J=p.ha||p.src;p.fa&&un(p),p=z.call(J,w)}return p}function Fn(p){return p=p[pe],p instanceof qt?p:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fi(p){return typeof p=="function"?p:(p[Ie]||(p[Ie]=function(w){return p.handleEvent(w)}),p[Ie])}function Re(){bt.call(this),this.i=new qt(this),this.M=this,this.F=null}R(Re,bt),Re.prototype[nt]=!0,Re.prototype.removeEventListener=function(p,w,z,J){Gi(this,p,w,z,J)};function Ye(p,w){var z,J=p.F;if(J)for(z=[];J;J=J.F)z.push(J);if(p=p.M,J=w.type||w,typeof w=="string")w=new lt(w,p);else if(w instanceof lt)w.target=w.target||p;else{var ct=w;w=new lt(J,p),V(w,ct)}if(ct=!0,z)for(var At=z.length-1;0<=At;At--){var Kt=w.g=z[At];ct=Zn(Kt,J,!0,w)&&ct}if(Kt=w.g=p,ct=Zn(Kt,J,!0,w)&&ct,ct=Zn(Kt,J,!1,w)&&ct,z)for(At=0;At<z.length;At++)Kt=w.g=z[At],ct=Zn(Kt,J,!1,w)&&ct}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var p=this.i,w;for(w in p.g){for(var z=p.g[w],J=0;J<z.length;J++)It(z[J]);delete p.g[w],p.h--}}this.F=null},Re.prototype.K=function(p,w,z,J){return this.i.add(String(p),w,!1,z,J)},Re.prototype.L=function(p,w,z,J){return this.i.add(String(p),w,!0,z,J)};function Zn(p,w,z,J){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();for(var ct=!0,At=0;At<w.length;++At){var Kt=w[At];if(Kt&&!Kt.da&&Kt.capture==z){var Be=Kt.listener,Bn=Kt.ha||Kt.src;Kt.fa&&Yt(p.i,Kt),ct=Be.call(Bn,J)!==!1&&ct}}return ct&&!J.defaultPrevented}function ji(p,w,z){if(typeof p=="function")z&&(p=D(p,z));else if(p&&typeof p.handleEvent=="function")p=D(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:g.setTimeout(p,w||0)}function we(p){p.g=ji(()=>{p.g=null,p.i&&(p.i=!1,we(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class Wn extends bt{constructor(w,z){super(),this.m=w,this.l=z,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(p){bt.call(this),this.h=p,this.g={}}R(Sn,bt);var $e=[];function Ve(p){K(p.g,function(w,z){this.g.hasOwnProperty(z)&&un(w)},p),p.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),Ve(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ji=g.JSON.stringify,wi=g.JSON.parse,jn=class{stringify(p){return g.JSON.stringify(p,void 0)}parse(p){return g.JSON.parse(p,void 0)}};function Yr(){}Yr.prototype.h=null;function Xs(p){return p.h||(p.h=p.i())}function Zs(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vr(){lt.call(this,"d")}R(vr,lt);function ta(){lt.call(this,"c")}R(ta,lt);var Jn={},Hi=null;function Hn(){return Hi=Hi||new Re}Jn.La="serverreachability";function ya(p){lt.call(this,Jn.La,p)}R(ya,lt);function Mi(p){const w=Hn();Ye(w,new ya(w))}Jn.STAT_EVENT="statevent";function Ma(p,w){lt.call(this,Jn.STAT_EVENT,p),this.stat=w}R(Ma,lt);function Ce(p){const w=Hn();Ye(w,new Ma(w,p))}Jn.Ma="timingevent";function Qr(p,w){lt.call(this,Jn.Ma,p),this.size=w}R(Qr,lt);function nr(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){p()},w)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function Va(p,w,z,J,ct,At){p.info(function(){if(p.g)if(At)for(var Kt="",Be=At.split("&"),Bn=0;Bn<Be.length;Bn++){var Ge=Be[Bn].split("=");if(1<Ge.length){var ii=Ge[0];Ge=Ge[1];var pi=ii.split("_");Kt=2<=pi.length&&pi[1]=="type"?Kt+(ii+"="+Ge+"&"):Kt+(ii+"=redacted&")}}else Kt=null;else Kt=At;return"XMLHTTP REQ ("+J+") [attempt "+ct+"]: "+w+`
`+z+`
`+Kt})}function ps(p,w,z,J,ct,At,Kt){p.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ct+"]: "+w+`
`+z+`
`+At+" "+Kt})}function $n(p,w,z,J){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+rn(p,z)+(J?" "+J:"")})}function ti(p,w){p.info(function(){return"TIMEOUT: "+w})}qi.prototype.info=function(){};function rn(p,w){if(!p.g)return w;if(!w)return null;try{var z=JSON.parse(w);if(z){for(p=0;p<z.length;p++)if(Array.isArray(z[p])){var J=z[p];if(!(2>J.length)){var ct=J[1];if(Array.isArray(ct)&&!(1>ct.length)){var At=ct[0];if(At!="noop"&&At!="stop"&&At!="close")for(var Kt=1;Kt<ct.length;Kt++)ct[Kt]=""}}}}return Ji(z)}catch{return w}}var ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pa;function Ws(){}R(Ws,Yr),Ws.prototype.g=function(){return new XMLHttpRequest},Ws.prototype.i=function(){return{}},Pa=new Ws;function Ua(p,w,z,J){this.j=p,this.i=w,this.l=z,this.R=J||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ys}function ys(){this.i=null,this.g="",this.h=!1}var _a={},kn={};function ea(p,w,z){p.L=1,p.v=Ts(wn(w)),p.m=z,p.P=!0,Tn(p,null)}function Tn(p,w){p.F=Date.now(),cn(p),p.A=wn(p.v);var z=p.A,J=p.R;Array.isArray(J)||(J=[String(J)]),rr(z.i,"t",J),p.C=0,z=p.j.J,p.h=new ys,p.g=Ar(p.j,z?w:null,!p.m),0<p.O&&(p.M=new Wn(D(p.Y,p,p.g),p.O)),w=p.U,z=p.g,J=p.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&($e[0]=ct.toString()),ct=$e);for(var At=0;At<ct.length;At++){var Kt=Ke(z,ct[At],J||w.handleEvent,!1,w.h||w);if(!Kt)break;w.g[Kt.key]=Kt}w=p.H?M(p.H):{},p.m?(p.u||(p.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,w)):(p.u="GET",p.g.ea(p.A,p.u,null,w)),Mi(),Va(p.i,p.u,p.A,p.l,p.R,p.m)}Ua.prototype.ca=function(p){p=p.target;const w=this.M;w&&yt(p)==3?w.j():this.Y(p)},Ua.prototype.Y=function(p){try{if(p==this.g)t:{const pi=yt(this.g);var w=this.g.Ba();const ai=this.g.Z();if(!(3>pi)&&(pi!=3||this.g&&(this.h.h||this.g.oa()||Lt(this.g)))){this.J||pi!=4||w==7||(w==8||0>=ai?Mi(3):Mi(2)),na(this);var z=this.g.Z();this.X=z;e:if(dn(this)){var J=Lt(this.g);p="";var ct=J.length,At=yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Wt(this);var Kt="";break e}this.h.i=new g.TextDecoder}for(w=0;w<ct;w++)this.h.h=!0,p+=this.h.i.decode(J[w],{stream:!(At&&w==ct-1)});J.length=0,this.h.g+=p,this.C=0,Kt=this.h.g}else Kt=this.g.oa();if(this.o=z==200,ps(this.i,this.u,this.A,this.l,this.R,pi,z),this.o){if(this.T&&!this.K){e:{if(this.g){var Be,Bn=this.g;if((Be=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Be)){var Ge=Be;break e}}Ge=null}if(z=Ge)$n(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ei(this,z);else{this.o=!1,this.s=3,Ce(12),Jt(this),Wt(this);break t}}if(this.P){z=!0;let Pi;for(;!this.J&&this.C<Kt.length;)if(Pi=La(this,Kt),Pi==kn){pi==4&&(this.s=4,Ce(14),z=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(Pi==_a){this.s=4,Ce(15),$n(this.i,this.l,Kt,"[Invalid Chunk]"),z=!1;break}else $n(this.i,this.l,Pi,null),ei(this,Pi);if(dn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pi!=4||Kt.length!=0||this.h.h||(this.s=1,Ce(16),z=!1),this.o=this.o&&z,!z)$n(this.i,this.l,Kt,"[Invalid Chunked Response]"),Jt(this),Wt(this);else if(0<Kt.length&&!this.W){this.W=!0;var ii=this.j;ii.g==this&&ii.ba&&!ii.M&&(ii.j.info("Great, no buffering proxy detected. Bytes received: "+Kt.length),tl(ii),ii.M=!0,Ce(11))}}else $n(this.i,this.l,Kt,null),ei(this,Kt);pi==4&&Jt(this),this.o&&!this.J&&(pi==4?pu(this.j,this):(this.o=!1,cn(this)))}else Ot(this.g),z==400&&0<Kt.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Jt(this),Wt(this)}}}catch{}finally{}};function dn(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function La(p,w){var z=p.C,J=w.indexOf(`
`,z);return J==-1?kn:(z=Number(w.substring(z,J)),isNaN(z)?_a:(J+=1,J+z>w.length?kn:(w=w.slice(J,J+z),p.C=J+z,w)))}Ua.prototype.cancel=function(){this.J=!0,Jt(this)};function cn(p){p.S=Date.now()+p.I,va(p,p.I)}function va(p,w){if(p.B!=null)throw Error("WatchDog timer not null");p.B=nr(D(p.ba,p),w)}function na(p){p.B&&(g.clearTimeout(p.B),p.B=null)}Ua.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(ti(this.i,this.A),this.L!=2&&(Mi(),Ce(17)),Jt(this),this.s=2,Wt(this)):va(this,this.S-p)};function Wt(p){p.j.G==0||p.J||pu(p.j,p)}function Jt(p){na(p);var w=p.M;w&&typeof w.ma=="function"&&w.ma(),p.M=null,Ve(p.U),p.g&&(w=p.g,p.g=null,w.abort(),w.ma())}function ei(p,w){try{var z=p.j;if(z.G!=0&&(z.g==p||mi(z.h,p))){if(!p.K&&mi(z.h,p)&&z.G==3){try{var J=z.Da.g.parse(w)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ct=J;if(ct[0]==0){t:if(!z.u){if(z.g)if(z.g.F+3e3<p.F)Pl(z),Ht(z);else break t;Ro(z),Ce(18)}}else z.za=ct[1],0<z.za-z.T&&37500>ct[2]&&z.F&&z.v==0&&!z.C&&(z.C=nr(D(z.Za,z),6e3));if(1>=Eo(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else ws(z,11)}else if((p.K||z.g==p)&&Pl(z),!N(w))for(ct=z.Da.g.parse(w),w=0;w<ct.length;w++){let Ge=ct[w];if(z.T=Ge[0],Ge=Ge[1],z.G==2)if(Ge[0]=="c"){z.K=Ge[1],z.ia=Ge[2];const ii=Ge[3];ii!=null&&(z.la=ii,z.j.info("VER="+z.la));const pi=Ge[4];pi!=null&&(z.Aa=pi,z.j.info("SVER="+z.Aa));const ai=Ge[5];ai!=null&&typeof ai=="number"&&0<ai&&(J=1.5*ai,z.L=J,z.j.info("backChannelRequestTimeoutMs_="+J)),J=z;const Pi=p.g;if(Pi){const wr=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wr){var At=J.h;At.g||wr.indexOf("spdy")==-1&&wr.indexOf("quic")==-1&&wr.indexOf("h2")==-1||(At.j=At.l,At.g=new Set,At.h&&(Sr(At,At.h),At.h=null))}if(J.D){const Eu=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(J.ya=Eu,Qe(J.I,J.D,Eu))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-p.F,z.j.info("Handshake RTT: "+z.R+"ms")),J=z;var Kt=p;if(J.qa=xc(J,J.J?J.ia:null,J.W),Kt.K){Vn(J.h,Kt);var Be=Kt,Bn=J.L;Bn&&(Be.I=Bn),Be.B&&(na(Be),cn(Be)),J.g=Kt}else wc(J);0<z.i.length&&ge(z)}else Ge[0]!="stop"&&Ge[0]!="close"||ws(z,7);else z.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?ws(z,7):zt(z):Ge[0]!="noop"&&z.l&&z.l.ta(Ge),z.v=0)}}Mi(4)}catch{}}var du=class{constructor(p,w){this.g=p,this.map=w}};function _s(p){this.l=p||10,g.PerformanceNavigationTiming?(p=g.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Er(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Eo(p){return p.h?1:p.g?p.g.size:0}function mi(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function Sr(p,w){p.g?p.g.add(w):p.h=w}function Vn(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}_s.prototype.cancel=function(){if(this.i=Ni(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ni(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const z of p.g.values())w=w.concat(z.D);return w}return P(p.i)}function So(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(m(p)){for(var w=[],z=p.length,J=0;J<z;J++)w.push(p[J]);return w}w=[],z=0;for(J in p)w[z++]=p[J];return w}function To(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(m(p)||typeof p=="string"){var w=[];p=p.length;for(var z=0;z<p;z++)w.push(z);return w}w=[],z=0;for(const J in p)w[z++]=J;return w}}}function vs(p,w){if(p.forEach&&typeof p.forEach=="function")p.forEach(w,void 0);else if(m(p)||typeof p=="string")Array.prototype.forEach.call(p,w,void 0);else for(var z=To(p),J=So(p),ct=J.length,At=0;At<ct;At++)w.call(void 0,J[At],z&&z[At],p)}var Es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(p,w){if(p){p=p.split("&");for(var z=0;z<p.length;z++){var J=p[z].indexOf("="),ct=null;if(0<=J){var At=p[z].substring(0,J);ct=p[z].substring(J+1)}else At=p[z];w(At,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}function Vi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Vi){this.h=p.h,Xr(this,p.j),this.o=p.o,this.g=p.g,Ss(this,p.s),this.l=p.l;var w=p.i,z=new za;z.i=w.i,w.g&&(z.g=new Map(w.g),z.h=w.h),Js(this,z),this.m=p.m}else p&&(w=String(p).match(Es))?(this.h=!1,Xr(this,w[1]||"",!0),this.o=Ea(w[2]||""),this.g=Ea(w[3]||"",!0),Ss(this,w[4]),this.l=Ea(w[5]||"",!0),Js(this,w[6]||"",!0),this.m=Ea(w[7]||"")):(this.h=!1,this.i=new za(null,this.h))}Vi.prototype.toString=function(){var p=[],w=this.j;w&&p.push(Sa(w,bs,!0),":");var z=this.g;return(z||w=="file")&&(p.push("//"),(w=this.o)&&p.push(Sa(w,bs,!0),"@"),p.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.s,z!=null&&p.push(":",String(z))),(z=this.l)&&(this.g&&z.charAt(0)!="/"&&p.push("/"),p.push(Sa(z,z.charAt(0)=="/"?$s:bo,!0))),(z=this.i.toString())&&p.push("?",z),(z=this.m)&&p.push("#",Sa(z,mu)),p.join("")};function wn(p){return new Vi(p)}function Xr(p,w,z){p.j=z?Ea(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function Ss(p,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);p.s=w}else p.s=null}function Js(p,w,z){w instanceof za?(p.i=w,Ol(p.i,p.h)):(z||(w=Sa(w,gu)),p.i=new za(w,p.h))}function Qe(p,w,z){p.i.set(w,z)}function Ts(p){return Qe(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ea(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Sa(p,w,z){return typeof p=="string"?(p=encodeURI(p).replace(w,Il),z&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Il(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var bs=/[#\/\?@]/g,bo=/[#\?:]/g,$s=/[#\?]/g,gu=/[#\?@]/g,mu=/#/g;function za(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function Ta(p){p.g||(p.g=new Map,p.h=0,p.i&&Ki(p.i,function(w,z){p.add(decodeURIComponent(w.replace(/\+/g," ")),z)}))}i=za.prototype,i.add=function(p,w){Ta(this),this.i=null,p=sr(this,p);var z=this.g.get(p);return z||this.g.set(p,z=[]),z.push(w),this.h+=1,this};function Zr(p,w){Ta(p),w=sr(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function ar(p,w){return Ta(p),w=sr(p,w),p.g.has(w)}i.forEach=function(p,w){Ta(this),this.g.forEach(function(z,J){z.forEach(function(ct){p.call(w,ct,J,this)},this)},this)},i.na=function(){Ta(this);const p=Array.from(this.g.values()),w=Array.from(this.g.keys()),z=[];for(let J=0;J<w.length;J++){const ct=p[J];for(let At=0;At<ct.length;At++)z.push(w[J])}return z},i.V=function(p){Ta(this);let w=[];if(typeof p=="string")ar(this,p)&&(w=w.concat(this.g.get(sr(this,p))));else{p=Array.from(this.g.values());for(let z=0;z<p.length;z++)w=w.concat(p[z])}return w},i.set=function(p,w){return Ta(this),this.i=null,p=sr(this,p),ar(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},i.get=function(p,w){return p?(p=this.V(p),0<p.length?String(p[0]):w):w};function rr(p,w,z){Zr(p,w),0<z.length&&(p.i=null,p.g.set(sr(p,w),P(z)),p.h+=z.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(var z=0;z<w.length;z++){var J=w[z];const At=encodeURIComponent(String(J)),Kt=this.V(J);for(J=0;J<Kt.length;J++){var ct=At;Kt[J]!==""&&(ct+="="+encodeURIComponent(String(Kt[J]))),p.push(ct)}}return this.i=p.join("&")};function sr(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function Ol(p,w){w&&!p.j&&(Ta(p),p.i=null,p.g.forEach(function(z,J){var ct=J.toLowerCase();J!=ct&&(Zr(this,J),rr(this,ct,z))},p)),p.j=w}function Ao(p,w){const z=new qi;if(g.Image){const J=new Image;J.onload=C(Yi,z,"TestLoadImage: loaded",!0,w,J),J.onerror=C(Yi,z,"TestLoadImage: error",!1,w,J),J.onabort=C(Yi,z,"TestLoadImage: abort",!1,w,J),J.ontimeout=C(Yi,z,"TestLoadImage: timeout",!1,w,J),g.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=p}else w(!1)}function Tr(p,w){const z=new qi,J=new AbortController,ct=setTimeout(()=>{J.abort(),Yi(z,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:J.signal}).then(At=>{clearTimeout(ct),At.ok?Yi(z,"TestPingServer: ok",!0,w):Yi(z,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(ct),Yi(z,"TestPingServer: error",!1,w)})}function Yi(p,w,z,J,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),J(z)}catch{}}function lr(){this.g=new jn}function ka(p,w,z){const J=z||"";try{vs(p,function(ct,At){let Kt=ct;_(ct)&&(Kt=Ji(ct)),w.push(J+At+"="+encodeURIComponent(Kt))})}catch(ct){throw w.push(J+"type="+encodeURIComponent("_badmap")),ct}}function As(p){this.l=p.Ub||null,this.j=p.eb||!1}R(As,Yr),As.prototype.g=function(){return new Wr(this.l,this.j)},As.prototype.i=function(p){return function(){return p}}({});function Wr(p,w){Re.call(this),this.D=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Wr,Re),i=Wr.prototype,i.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=w,this.readyState=1,aa(this)},i.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(w.body=p),(this.D||g).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},i.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ml(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ml(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}i.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?ia(this):aa(this),this.readyState==3&&Ml(this)}},i.Ra=function(p){this.g&&(this.response=this.responseText=p,ia(this))},i.Qa=function(p){this.g&&(this.response=p,ia(this))},i.ga=function(){this.g&&ia(this)};function ia(p){p.readyState=4,p.l=null,p.j=null,p.v=null,aa(p)}i.setRequestHeader=function(p,w){this.u.append(p,w)},i.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var z=w.next();!z.done;)z=z.value,p.push(z[0]+": "+z[1]),z=w.next();return p.join(`\r
`)};function aa(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Cs(p){let w="";return K(p,function(z,J){w+=J,w+=":",w+=z,w+=`\r
`}),w}function qn(p,w,z){t:{for(J in z){var J=!1;break t}J=!0}J||(z=Cs(z),typeof p=="string"?z!=null&&encodeURIComponent(String(z)):Qe(p,w,z))}function tn(p){Re.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(tn,Re);var br=/^https?$/i,Rs=["POST","PUT"];i=tn.prototype,i.Ha=function(p){this.J=p},i.ea=function(p,w,z,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pa.g(),this.v=this.o?Xs(this.o):Xs(Pa),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(At){Co(this,At);return}if(p=z||"",z=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ct in J)z.set(ct,J[ct]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const At of J.keys())z.set(At,J.get(At));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(z.keys()).find(At=>At.toLowerCase()=="content-type"),ct=g.FormData&&p instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Rs,w,void 0))||J||ct||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[At,Kt]of z)this.g.setRequestHeader(At,Kt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$(this),this.u=!0,this.g.send(p),this.u=!1}catch(At){Co(this,At)}};function Co(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.m=5,Ba(p),or(p)}function Ba(p){p.A||(p.A=!0,Ye(p,"complete"),Ye(p,"error"))}i.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ye(this,"complete"),Ye(this,"abort"),or(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),tn.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Jr(this):this.bb())},i.bb=function(){Jr(this)};function Jr(p){if(p.h&&typeof h<"u"&&(!p.v[1]||yt(p)!=4||p.Z()!=2)){if(p.u&&yt(p)==4)ji(p.Ea,0,p);else if(Ye(p,"readystatechange"),yt(p)==4){p.h=!1;try{const Kt=p.Z();t:switch(Kt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var z;if(!(z=w)){var J;if(J=Kt===0){var ct=String(p.D).match(Es)[1]||null;!ct&&g.self&&g.self.location&&(ct=g.self.location.protocol.slice(0,-1)),J=!br.test(ct?ct.toLowerCase():"")}z=J}if(z)Ye(p,"complete"),Ye(p,"success");else{p.m=6;try{var At=2<yt(p)?p.g.statusText:""}catch{At=""}p.l=At+" ["+p.Z()+"]",Ba(p)}}finally{or(p)}}}}function or(p,w){if(p.g){$(p);const z=p.g,J=p.v[0]?()=>{}:null;p.g=null,p.v=null,w||Ye(p,"ready");try{z.onreadystatechange=J}catch{}}}function $(p){p.I&&(g.clearTimeout(p.I),p.I=null)}i.isActive=function(){return!!this.g};function yt(p){return p.g?p.g.readyState:0}i.Z=function(){try{return 2<yt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),wi(w)}};function Lt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ot(p){const w={};p=(p.g&&2<=yt(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<p.length;J++){if(N(p[J]))continue;var z=B(p[J]);const ct=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const At=w[ct]||[];w[ct]=At,At.push(z)}j(w,function(J){return J.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pt(p,w,z){return z&&z.internalChannelParams&&z.internalChannelParams[p]||w}function ue(p){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pt("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pt("baseRetryDelayMs",5e3,p),this.cb=Pt("retryDelaySeedMs",1e4,p),this.Wa=Pt("forwardChannelMaxRetries",2,p),this.wa=Pt("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new _s(p&&p.concurrentRequestLimit),this.Da=new lr,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ue.prototype,i.la=8,i.G=1,i.connect=function(p,w,z,J){Ce(0),this.W=p,this.H=w||{},z&&J!==void 0&&(this.H.OSID=z,this.H.OAID=J),this.F=this.X,this.I=xc(this,null,this.W),ge(this)};function zt(p){if(re(p),p.G==3){var w=p.U++,z=wn(p.I);if(Qe(z,"SID",p.K),Qe(z,"RID",w),Qe(z,"TYPE","terminate"),Vl(p,z),w=new Ua(p,p.j,w),w.L=2,w.v=Ts(wn(z)),z=!1,g.navigator&&g.navigator.sendBeacon)try{z=g.navigator.sendBeacon(w.v.toString(),"")}catch{}!z&&g.Image&&(new Image().src=w.v,z=!0),z||(w.g=Ar(w.j,null),w.g.ea(w.v)),w.F=Date.now(),cn(w)}yu(p)}function Ht(p){p.g&&(tl(p),p.g.cancel(),p.g=null)}function re(p){Ht(p),p.u&&(g.clearTimeout(p.u),p.u=null),Pl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&g.clearTimeout(p.s),p.s=null)}function ge(p){if(!Er(p.h)&&!p.s){p.s=!0;var w=p.Ga;et||Q(),st||(et(),st=!0),pt.add(w,p),p.B=0}}function ni(p,w){return Eo(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=w.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=nr(D(p.Ga,p,w),wo(p,p.B)),p.B++,!0)}i.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ct=new Ua(this,this.j,p);let At=this.o;if(this.S&&(At?(At=M(At),V(At,this.S)):At=this.S),this.m!==null||this.O||(ct.H=At,At=null),this.P)t:{for(var w=0,z=0;z<this.i.length;z++){e:{var J=this.i[z];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break e}J=void 0}if(J===void 0)break;if(w+=J,4096<w){w=z;break t}if(w===4096||z===this.i.length-1){w=z+1;break t}}w=1e3}else w=1e3;w=Rc(this,ct,w),z=wn(this.I),Qe(z,"RID",p),Qe(z,"CVER",22),this.D&&Qe(z,"X-HTTP-Session-Id",this.D),Vl(this,z),At&&(this.O?w="headers="+encodeURIComponent(String(Cs(At)))+"&"+w:this.m&&qn(z,this.m,At)),Sr(this.h,ct),this.Ua&&Qe(z,"TYPE","init"),this.P?(Qe(z,"$req",w),Qe(z,"SID","null"),ct.T=!0,ea(ct,z,null)):ea(ct,z,w),this.G=2}}else this.G==3&&(p?$r(this,p):this.i.length==0||Er(this.h)||$r(this))};function $r(p,w){var z;w?z=w.l:z=p.U++;const J=wn(p.I);Qe(J,"SID",p.K),Qe(J,"RID",z),Qe(J,"AID",p.T),Vl(p,J),p.m&&p.o&&qn(J,p.m,p.o),z=new Ua(p,p.j,z,p.B+1),p.m===null&&(z.H=p.o),w&&(p.i=w.D.concat(p.i)),w=Rc(p,z,1e3),z.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Sr(p.h,z),ea(z,J,w)}function Vl(p,w){p.H&&K(p.H,function(z,J){Qe(w,J,z)}),p.l&&vs({},function(z,J){Qe(w,J,z)})}function Rc(p,w,z){z=Math.min(p.i.length,z);var J=p.l?D(p.l.Na,p.l,p):null;t:{var ct=p.i;let At=-1;for(;;){const Kt=["count="+z];At==-1?0<z?(At=ct[0].g,Kt.push("ofs="+At)):At=0:Kt.push("ofs="+At);let Be=!0;for(let Bn=0;Bn<z;Bn++){let Ge=ct[Bn].g;const ii=ct[Bn].map;if(Ge-=At,0>Ge)At=Math.max(0,ct[Bn].g-100),Be=!1;else try{ka(ii,Kt,"req"+Ge+"_")}catch{J&&J(ii)}}if(Be){J=Kt.join("&");break t}}}return p=p.i.splice(0,z),w.D=p,J}function wc(p){if(!p.g&&!p.u){p.Y=1;var w=p.Fa;et||Q(),st||(et(),st=!0),pt.add(w,p),p.v=0}}function Ro(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=nr(D(p.Fa,p),wo(p,p.v)),p.v++,!0)}i.Fa=function(){if(this.u=null,Nc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=nr(D(this.ab,this),p)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Ht(this),Nc(this))};function tl(p){p.A!=null&&(g.clearTimeout(p.A),p.A=null)}function Nc(p){p.g=new Ua(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var w=wn(p.qa);Qe(w,"RID","rpc"),Qe(w,"SID",p.K),Qe(w,"AID",p.T),Qe(w,"CI",p.F?"0":"1"),!p.F&&p.ja&&Qe(w,"TO",p.ja),Qe(w,"TYPE","xmlhttp"),Vl(p,w),p.m&&p.o&&qn(w,p.m,p.o),p.L&&(p.g.I=p.L);var z=p.g;p=p.ia,z.L=1,z.v=Ts(wn(w)),z.m=null,z.P=!0,Tn(z,p)}i.Za=function(){this.C!=null&&(this.C=null,Ht(this),Ro(this),Ce(19))};function Pl(p){p.C!=null&&(g.clearTimeout(p.C),p.C=null)}function pu(p,w){var z=null;if(p.g==w){Pl(p),tl(p),p.g=null;var J=2}else if(mi(p.h,w))z=w.D,Vn(p.h,w),J=1;else return;if(p.G!=0){if(w.o)if(J==1){z=w.m?w.m.length:0,w=Date.now()-w.F;var ct=p.B;J=Hn(),Ye(J,new Qr(J,z)),ge(p)}else wc(p);else if(ct=w.s,ct==3||ct==0&&0<w.X||!(J==1&&ni(p,w)||J==2&&Ro(p)))switch(z&&0<z.length&&(w=p.h,w.i=w.i.concat(z)),ct){case 1:ws(p,5);break;case 4:ws(p,10);break;case 3:ws(p,6);break;default:ws(p,2)}}}function wo(p,w){let z=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(z*=2),z*w}function ws(p,w){if(p.j.info("Error code "+w),w==2){var z=D(p.fb,p),J=p.Xa;const ct=!J;J=new Vi(J||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Xr(J,"https"),Ts(J),ct?Ao(J.toString(),z):Tr(J.toString(),z)}else Ce(2);p.G=0,p.l&&p.l.sa(w),yu(p),re(p)}i.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function yu(p){if(p.G=0,p.ka=[],p.l){const w=Ni(p.h);(w.length!=0||p.i.length!=0)&&(U(p.ka,w),U(p.ka,p.i),p.h.i.length=0,P(p.i),p.i.length=0),p.l.ra()}}function xc(p,w,z){var J=z instanceof Vi?wn(z):new Vi(z);if(J.g!="")w&&(J.g=w+"."+J.g),Ss(J,J.s);else{var ct=g.location;J=ct.protocol,w=w?w+"."+ct.hostname:ct.hostname,ct=+ct.port;var At=new Vi(null);J&&Xr(At,J),w&&(At.g=w),ct&&Ss(At,ct),z&&(At.l=z),J=At}return z=p.D,w=p.ya,z&&w&&Qe(J,z,w),Qe(J,"VER",p.la),Vl(p,J),J}function Ar(p,w,z){if(w&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Ca&&!p.pa?new tn(new As({eb:z})):new tn(p.pa),w.Ha(p.J),w}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}i=_u.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function vu(){}vu.prototype.g=function(p,w){return new ra(p,w)};function ra(p,w){Re.call(this),this.g=new ue(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(p?p["X-WebChannel-Client-Profile"]=w.va:p={"X-WebChannel-Client-Profile":w.va}),this.g.S=p,(p=w&&w.Sb)&&!N(p)&&(this.g.m=p),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!N(w)&&(this.g.D=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new Rr(this)}R(ra,Re),ra.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ra.prototype.close=function(){zt(this.g)},ra.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var z={};z.__data__=p,p=z}else this.u&&(z={},z.__data__=Ji(p),p=z);w.i.push(new du(w.Ya++,p)),w.G==3&&ge(w)},ra.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,ra.aa.N.call(this)};function ts(p){vr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){t:{for(const z in w){p=z;break t}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}R(ts,vr);function Cr(){ta.call(this),this.status=1}R(Cr,ta);function Rr(p){this.g=p}R(Rr,_u),Rr.prototype.ua=function(){Ye(this.g,"a")},Rr.prototype.ta=function(p){Ye(this.g,new ts(p))},Rr.prototype.sa=function(p){Ye(this.g,new Cr)},Rr.prototype.ra=function(){Ye(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,ra.prototype.send=ra.prototype.o,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,tT=function(){return new vu},$5=function(){return Hn()},J5=Jn,n_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,vp=ye,ir.COMPLETE="complete",W5=ir,Zs.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Re.prototype.listen=Re.prototype.K,em=Zs,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,Z5=tn}).apply(typeof lp<"u"?lp:typeof self<"u"?self:typeof window<"u"?window:{});const T4="@firebase/firestore",b4="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ia.UNAUTHENTICATED=new Ia(null),Ia.GOOGLE_CREDENTIALS=new Ia("google-credentials-uid"),Ia.FIRST_PARTY=new Ia("first-party-uid"),Ia.MOCK_USER=new Ia("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new U_("@firebase/firestore");function xf(){return bh.logLevel}function jt(i,...t){if(bh.logLevel<=Xe.DEBUG){const e=t.map(Z_);bh.debug(`Firestore (${ed}): ${i}`,...e)}}function yr(i,...t){if(bh.logLevel<=Xe.ERROR){const e=t.map(Z_);bh.error(`Firestore (${ed}): ${i}`,...e)}}function Ah(i,...t){if(bh.logLevel<=Xe.WARN){const e=t.map(Z_);bh.warn(`Firestore (${ed}): ${i}`,...e)}}function Z_(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(i="Unexpected state"){const t=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+i;throw yr(t),new Error(t)}function ie(i,t){i||te()}function be(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends hu{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ia.UNAUTHENTICATED))}shutdown(){}}class mR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class pR{constructor(t){this.t=t,this.currentUser=Ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ie(this.o===void 0);let a=this.i;const l=m=>this.i!==a?(a=this.i,e(m)):Promise.resolve();let c=new su;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new su,t.enqueueRetryable(()=>l(this.currentUser))};const h=()=>{const m=c;t.enqueueRetryable(async()=>{await m.promise,await l(this.currentUser)})},g=m=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(m=>g(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?g(m):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new su)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(a=>this.i!==t?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ie(typeof a.accessToken=="string"),new eT(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ie(t===null||typeof t=="string"),new Ia(t)}}class yR{constructor(t,e,a){this.l=t,this.h=e,this.P=a,this.type="FirstParty",this.user=Ia.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class _R{constructor(t,e,a){this.l=t,this.h=e,this.P=a}getToken(){return Promise.resolve(new yR(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Ia.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A4{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ds(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){ie(this.o===void 0);const a=c=>{c.error!=null&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,jt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>a(c))};const l=c=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new A4(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ie(typeof e.token=="string"),this.R=e.token,new A4(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let a=0;a<i;a++)e[a]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=ER(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<e&&(a+=t.charAt(l[c]%62))}return a}}function _e(i,t){return i<t?-1:i>t?1:0}function i_(i,t){let e=0;for(;e<i.length&&e<t.length;){const a=i.codePointAt(e),l=t.codePointAt(e);if(a!==l){if(a<128&&l<128)return _e(a,l);{const c=nT(),h=SR(c.encode(C4(i,e)),c.encode(C4(t,e)));return h!==0?h:_e(a,l)}}e+=a>65535?2:1}return _e(i.length,t.length)}function C4(i,t){return i.codePointAt(t)>65535?i.substring(t,t+2):i.substring(t,t+1)}function SR(i,t){for(let e=0;e<i.length&&e<t.length;++e)if(i[e]!==t[e])return _e(i[e],t[e]);return _e(i.length,t.length)}function kf(i,t,e){return i.length===t.length&&i.every((a,l)=>e(a,t[l]))}function aT(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=-62135596800,w4=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),a=Math.floor((t-1e3*e)*w4);return new gi(e,a)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<R4)throw new Xt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w4}_compareTo(t){return this.seconds===t.seconds?_e(this.nanoseconds,t.nanoseconds):_e(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-R4;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(t){return new le(t)}static min(){return new le(new gi(0,0))}static max(){return new le(new gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="__name__";class go{constructor(t,e,a){e===void 0?e=0:e>t.length&&te(),a===void 0?a=t.length-e:a>t.length-e&&te(),this.segments=t,this.offset=e,this.len=a}get length(){return this.len}isEqual(t){return go.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof go?t.forEach(a=>{e.push(a)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,a=this.limit();e<a;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const a=Math.min(t.length,e.length);for(let l=0;l<a;l++){const c=go.compareSegments(t.get(l),e.get(l));if(c!==0)return c}return _e(t.length,e.length)}static compareSegments(t,e){const a=go.isNumericId(t),l=go.isNumericId(e);return a&&!l?-1:!a&&l?1:a&&l?go.extractNumericId(t).compare(go.extractNumericId(e)):i_(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fc.fromString(t.substring(4,t.length-2))}}class En extends go{construct(t,e,a){return new En(t,e,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const a of t){if(a.indexOf("//")>=0)throw new Xt(xt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);e.push(...a.split("/").filter(l=>l.length>0))}return new En(e)}static emptyPath(){return new En([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends go{construct(t,e,a){return new di(t,e,a)}static isValidIdentifier(t){return TR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N4}static keyField(){return new di([N4])}static fromServerFormat(t){const e=[];let a="",l=0;const c=()=>{if(a.length===0)throw new Xt(xt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(a),a=""};let h=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new Xt(xt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[l+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Xt(xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=m,l+=2}else g==="`"?(h=!h,l++):g!=="."||h?(a+=g,l++):(c(),l++)}if(c(),h)throw new Xt(xt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new di(e)}static emptyPath(){return new di([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.path=t}static fromPath(t){return new Zt(En.fromString(t))}static fromName(t){return new Zt(En.fromString(t).popFirst(5))}static empty(){return new Zt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&En.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return En.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Zt(new En(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=-1;class zp{constructor(t,e,a,l){this.indexId=t,this.collectionGroup=e,this.fields=a,this.indexState=l}}function a_(i){return i.fields.find(t=>t.kind===2)}function oh(i){return i.fields.filter(t=>t.kind!==2)}zp.UNKNOWN_ID=-1;class Ep{constructor(t,e){this.fieldPath=t,this.kind=e}}class ym{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ym(0,ms.min())}}function bR(i,t){const e=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,l=le.fromTimestamp(a===1e9?new gi(e+1,0):new gi(e,a));return new ms(l,Zt.empty(),t)}function rT(i){return new ms(i.readTime,i.key,pm)}class ms{constructor(t,e,a){this.readTime=t,this.documentKey=e,this.largestBatchId=a}static min(){return new ms(le.min(),Zt.empty(),pm)}static max(){return new ms(le.max(),Zt.empty(),pm)}}function W_(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=Zt.comparator(i.documentKey,t.documentKey),e!==0?e:_e(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(i){if(i.code!==xt.FAILED_PRECONDITION||i.message!==sT)throw i;jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new _t((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(e,c).next(a,l)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof _t?e:_t.resolve(e)}catch(e){return _t.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.reject(e)}static resolve(t){return new _t((e,a)=>{e(t)})}static reject(t){return new _t((e,a)=>{a(t)})}static waitFor(t){return new _t((e,a)=>{let l=0,c=0,h=!1;t.forEach(g=>{++l,g.next(()=>{++c,h&&c===l&&e()},m=>a(m))}),h=!0,c===l&&e()})}static or(t){let e=_t.resolve(!1);for(const a of t)e=e.next(l=>l?_t.resolve(l):a());return e}static forEach(t,e){const a=[];return t.forEach((l,c)=>{a.push(e.call(this,l,c))}),this.waitFor(a)}static mapArray(t,e){return new _t((a,l)=>{const c=t.length,h=new Array(c);let g=0;for(let m=0;m<c;m++){const _=m;e(t[_]).next(E=>{h[_]=E,++g,g===c&&a(h)},E=>l(E))}})}static doWhile(t,e){return new _t((a,l)=>{const c=()=>{t()===!0?e().next(()=>{c()},l):a()};c()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="SimpleDb";class hy{static open(t,e,a,l){try{return new hy(e,t.transaction(l,a))}catch(c){throw new lm(e,c)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.m=new su,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{e.error?this.m.reject(new lm(t,e.error)):this.m.resolve()},this.transaction.onerror=a=>{const l=J_(a.target.error);this.m.reject(new lm(t,l))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(jt(fs,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new CR(e)}}class dc{static delete(t){return jt(fs,"Removing database:",t),ch(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!o5())return!1;if(dc.v())return!0;const t=Zi(),e=dc.C(t),a=0<e&&e<10,l=oT(t),c=0<l&&l<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||a||c)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static C(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(a)}constructor(t,e,a){this.name=t,this.version=e,this.O=a,dc.C(Zi())===12.2&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(jt(fs,"Opening database:",this.name),this.db=await new Promise((e,a)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const h=c.target.result;e(h)},l.onblocked=()=>{a(new lm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const h=c.target.error;h.name==="VersionError"?a(new Xt(xt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?a(new Xt(xt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):a(new lm(t,h))},l.onupgradeneeded=c=>{jt(fs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const h=c.target.result;this.O.B(h,l.transaction,c.oldVersion,this.version).next(()=>{jt(fs,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,a,l){const c=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.N(t);const g=hy.open(this.db,t,c?"readonly":"readwrite",a),m=l(g).next(_=>(g.S(),_)).catch(_=>(g.abort(_),_t.reject(_))).toPromise();return m.catch(()=>{}),await g.p,m}catch(g){const m=g,_=m.name!=="FirebaseError"&&h<3;if(jt(fs,"Transaction failed with error:",m.message,"Retrying:",_),this.close(),!_)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oT(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class AR{constructor(t){this.q=t,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.U=t}delete(){return ch(this.q.delete())}}class lm extends Xt{constructor(t,e){super(xt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function bc(i){return i.name==="IndexedDbTransactionError"}class CR{constructor(t){this.store=t}put(t,e){let a;return e!==void 0?(jt(fs,"PUT",this.store.name,t,e),a=this.store.put(e,t)):(jt(fs,"PUT",this.store.name,"<auto-key>",t),a=this.store.put(t)),ch(a)}add(t){return jt(fs,"ADD",this.store.name,t,t),ch(this.store.add(t))}get(t){return ch(this.store.get(t)).next(e=>(e===void 0&&(e=null),jt(fs,"GET",this.store.name,t,e),e))}delete(t){return jt(fs,"DELETE",this.store.name,t),ch(this.store.delete(t))}count(){return jt(fs,"COUNT",this.store.name),ch(this.store.count())}G(t,e){const a=this.options(t,e),l=a.index?this.store.index(a.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(a.range);return new _t((h,g)=>{c.onerror=m=>{g(m.target.error)},c.onsuccess=m=>{h(m.target.result)}})}{const c=this.cursor(a),h=[];return this.j(c,(g,m)=>{h.push(m)}).next(()=>h)}}H(t,e){const a=this.store.getAll(t,e===null?void 0:e);return new _t((l,c)=>{a.onerror=h=>{c(h.target.error)},a.onsuccess=h=>{l(h.target.result)}})}J(t,e){jt(fs,"DELETE ALL",this.store.name);const a=this.options(t,e);a.Y=!1;const l=this.cursor(a);return this.j(l,(c,h,g)=>g.delete())}Z(t,e){let a;e?a=t:(a={},e=t);const l=this.cursor(a);return this.j(l,e)}X(t){const e=this.cursor({});return new _t((a,l)=>{e.onerror=c=>{const h=J_(c.target.error);l(h)},e.onsuccess=c=>{const h=c.target.result;h?t(h.primaryKey,h.value).next(g=>{g?h.continue():a()}):a()}})}j(t,e){const a=[];return new _t((l,c)=>{t.onerror=h=>{c(h.target.error)},t.onsuccess=h=>{const g=h.target.result;if(!g)return void l();const m=new AR(g),_=e(g.primaryKey,g.value,m);if(_ instanceof _t){const E=_.catch(A=>(m.done(),_t.reject(A)));a.push(E)}m.isDone?l():m.K===null?g.continue():g.continue(m.K)}}).next(()=>_t.waitFor(a))}options(t,e){let a;return t!==void 0&&(typeof t=="string"?a=t:e=t),{index:a,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const a=this.store.index(t.index);return t.Y?a.openKeyCursor(t.range,e):a.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ch(i){return new _t((t,e)=>{i.onsuccess=a=>{const l=a.target.result;t(l)},i.onerror=a=>{const l=J_(a.target.error);e(l)}})}let x4=!1;function J_(i){const t=dc.C(Zi());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const a=new Xt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x4||(x4=!0,setTimeout(()=>{throw a},0)),a}}return i}const om="IndexBackfiller";class RR{constructor(t,e){this.asyncQueue=t,this.ee=e,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){jt(om,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ee.ne();jt(om,`Documents written: ${e}`)}catch(e){bc(e)?jt(om,"Ignoring IndexedDB error during index backfill: ",e):await Oh(e)}await this.te(6e4)})}}class wR{constructor(t,e){this.localStore=t,this.persistence=e}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.re(e,t))}re(t,e){const a=new Set;let l=e,c=!0;return _t.doWhile(()=>c===!0&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(h=>{if(h!==null&&!a.has(h))return jt(om,`Processing collection: ${h}`),this.ie(t,h,l).next(g=>{l-=g,a.add(h)});c=!1})).next(()=>e-l)}ie(t,e,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(l=>this.localStore.localDocuments.getNextDocuments(t,e,l,a).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next(()=>this.se(l,c)).next(g=>(jt(om,`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(t,e,g))).next(()=>h.size)}))}se(t,e){let a=t;return e.changes.forEach((l,c)=>{const h=rT(c);W_(h,a)>0&&(a=h)}),new ms(a.readTime,a.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=a=>this.oe(a),this._e=a=>e.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}qs.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=-1;function fy(i){return i==null}function _m(i){return i===0&&1/i==-1/0}function NR(i){return typeof i=="number"&&Number.isInteger(i)&&!_m(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="";function tr(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=D4(t)),t=xR(i.get(e),t);return D4(t)}function xR(i,t){let e=t;const a=i.length;for(let l=0;l<a;l++){const c=i.charAt(l);switch(c){case"\0":e+="";break;case kp:e+="";break;default:e+=c}}return e}function D4(i){return i+kp+""}function mo(i){const t=i.length;if(ie(t>=2),t===2)return ie(i.charAt(0)===kp&&i.charAt(1)===""),En.emptyPath();const e=t-2,a=[];let l="";for(let c=0;c<t;){const h=i.indexOf(kp,c);switch((h<0||h>e)&&te(),i.charAt(h+1)){case"":const g=i.substring(c,h);let m;l.length===0?m=g:(l+=g,m=l,l=""),a.push(m);break;case"":l+=i.substring(c,h),l+="\0";break;case"":l+=i.substring(c,h+1);break;default:te()}c=h+2}return new En(a)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="remoteDocuments",Um="owner",Tf="owner",vm="mutationQueues",DR="userId",xl="mutations",I4="batchId",mh="userMutationsIndex",O4=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(i,t){return[i,tr(t)]}function uT(i,t,e){return[i,tr(t),e]}const IR={},Bf="documentMutations",Bp="remoteDocumentsV14",OR=["prefixPath","collectionGroup","readTime","documentId"],Tp="documentKeyIndex",MR=["prefixPath","collectionGroup","documentId"],cT="collectionGroupIndex",VR=["collectionGroup","readTime","prefixPath","documentId"],Em="remoteDocumentGlobal",r_="remoteDocumentGlobalKey",Gf="targets",hT="queryTargetsIndex",PR=["canonicalId","targetId"],Ff="targetDocuments",UR=["targetId","path"],$_="documentTargetsIndex",LR=["path","targetId"],Gp="targetGlobalKey",yh="targetGlobal",Sm="collectionParents",zR=["collectionId","parent"],jf="clientMetadata",kR="clientId",dy="bundles",BR="bundleId",gy="namedQueries",GR="name",tv="indexConfiguration",FR="indexId",s_="collectionGroupIndex",jR="collectionGroup",Fp="indexState",HR=["indexId","uid"],fT="sequenceNumberIndex",qR=["uid","sequenceNumber"],jp="indexEntries",KR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dT="documentKeyIndex",YR=["indexId","uid","orderedDocumentKey"],my="documentOverlays",QR=["userId","collectionPath","documentId"],l_="collectionPathOverlayIndex",XR=["userId","collectionPath","largestBatchId"],gT="collectionGroupOverlayIndex",ZR=["userId","collectionGroup","largestBatchId"],ev="globals",WR="name",mT=[vm,xl,Bf,uh,Gf,Um,yh,Ff,jf,Em,Sm,dy,gy],JR=[...mT,my],pT=[vm,xl,Bf,Bp,Gf,Um,yh,Ff,jf,Em,Sm,dy,gy,my],yT=pT,nv=[...yT,tv,Fp,jp],$R=nv,tw=[...nv,ev];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends lT{constructor(t,e){super(),this.ue=t,this.currentSequenceNumber=e}}function Wi(i,t){const e=be(i);return dc.M(e.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Mh(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function _T(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,e){this.comparator=t,this.root=e||Oa.EMPTY}insert(t,e){return new Xn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Oa.BLACK,null,null))}remove(t){return new Xn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oa.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const a=this.comparator(t,e.key);if(a===0)return e.value;a<0?e=e.left:a>0&&(e=e.right)}return null}indexOf(t){let e=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(t,a.key);if(l===0)return e+a.left.size;l<0?a=a.left:(e+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,a)=>(t(e,a),!1))}toString(){const t=[];return this.inorderTraversal((e,a)=>(t.push(`${e}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new op(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new op(this.root,t,this.comparator,!1)}getReverseIterator(){return new op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new op(this.root,t,this.comparator,!0)}}class op{constructor(t,e,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=e?a(t.key,e):1,e&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oa{constructor(t,e,a,l,c){this.key=t,this.value=e,this.color=a??Oa.RED,this.left=l??Oa.EMPTY,this.right=c??Oa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,a,l,c){return new Oa(t??this.key,e??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,a){let l=this;const c=a(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,e,a),null):c===0?l.copy(null,e,null,null,null):l.copy(null,null,null,null,l.right.insert(t,e,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Oa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let a,l=this;if(e(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,e),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),e(t,l.key)===0){if(l.right.isEmpty())return Oa.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,e))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const t=this.left.check();if(t!==this.right.check())throw te();return t+(this.isRed()?0:1)}}Oa.EMPTY=null,Oa.RED=!0,Oa.BLACK=!1;Oa.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,e,a,l,c){return this}insert(t,e,a){return new Oa(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.comparator=t,this.data=new Xn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,a)=>(t(e),!1))}forEachInRange(t,e){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,t[1])>=0)return;e(l.key)}}forEachWhile(t,e){let a;for(a=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new V4(this.data.getIterator())}getIteratorFrom(t){return new V4(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(a=>{e=e.add(a)}),e}isEqual(t){if(!(t instanceof Rn)||this.size!==t.size)return!1;const e=this.data.getIterator(),a=t.data.getIterator();for(;e.hasNext();){const l=e.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Rn(this.comparator);return e.data=t,e}}class V4{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bf(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this.fields=t,t.sort(di.comparator)}static empty(){return new Ks([])}unionWith(t){let e=new Rn(di.comparator);for(const a of this.fields)e=e.add(a);for(const a of t)e=e.add(a);return new Ks(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return kf(this.fields,t.fields,(e,a)=>e.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new vT("Invalid base64 string: "+c):c}}(t);return new Bi(e)}static fromUint8Array(t){const e=function(l){let c="";for(let h=0;h<l.length;++h)c+=String.fromCharCode(l[h]);return c}(t);return new Bi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let l=0;l<e.length;l++)a[l]=e.charCodeAt(l);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _e(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const ew=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(i){if(ie(!!i),typeof i=="string"){let t=0;const e=ew.exec(i);if(ie(!!e),e[1]){let l=e[1];l=(l+"000000000").substr(0,9),t=Number(l)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Qn(i.seconds),nanos:Qn(i.nanos)}}function Qn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function cu(i){return typeof i=="string"?Bi.fromBase64String(i):Bi.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="server_timestamp",ST="__type__",TT="__previous_value__",bT="__local_write_time__";function iv(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{})[ST])===null||e===void 0?void 0:e.stringValue)===ET}function py(i){const t=i.mapValue.fields[TT];return iv(t)?py(t):t}function Tm(i){const t=uu(i.mapValue.fields[bT].timestampValue);return new gi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t,e,a,l,c,h,g,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=m,this.useFetchStreams=_}}const Hp="(default)";class Ch{constructor(t,e){this.projectId=t,this.database=e||Hp}static empty(){return new Ch("","")}get isDefaultDatabase(){return this.database===Hp}isEqual(t){return t instanceof Ch&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__type__",AT="__max__",oc={mapValue:{fields:{__type__:{stringValue:AT}}}},rv="__vector__",Hf="value",bp={nullValue:"NULL_VALUE"};function mc(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?iv(i)?4:CT(i)?9007199254740991:yy(i)?10:11:te()}function vo(i,t){if(i===t)return!0;const e=mc(i);if(e!==mc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Tm(i).isEqual(Tm(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const h=uu(l.timestampValue),g=uu(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(l,c){return cu(l.bytesValue).isEqual(cu(c.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(l,c){return Qn(l.geoPointValue.latitude)===Qn(c.geoPointValue.latitude)&&Qn(l.geoPointValue.longitude)===Qn(c.geoPointValue.longitude)}(i,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return Qn(l.integerValue)===Qn(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const h=Qn(l.doubleValue),g=Qn(c.doubleValue);return h===g?_m(h)===_m(g):isNaN(h)&&isNaN(g)}return!1}(i,t);case 9:return kf(i.arrayValue.values||[],t.arrayValue.values||[],vo);case 10:case 11:return function(l,c){const h=l.mapValue.fields||{},g=c.mapValue.fields||{};if(M4(h)!==M4(g))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(g[m]===void 0||!vo(h[m],g[m])))return!1;return!0}(i,t);default:return te()}}function bm(i,t){return(i.values||[]).find(e=>vo(e,t))!==void 0}function pc(i,t){if(i===t)return 0;const e=mc(i),a=mc(t);if(e!==a)return _e(e,a);switch(e){case 0:case 9007199254740991:return 0;case 1:return _e(i.booleanValue,t.booleanValue);case 2:return function(c,h){const g=Qn(c.integerValue||c.doubleValue),m=Qn(h.integerValue||h.doubleValue);return g<m?-1:g>m?1:g===m?0:isNaN(g)?isNaN(m)?0:-1:1}(i,t);case 3:return P4(i.timestampValue,t.timestampValue);case 4:return P4(Tm(i),Tm(t));case 5:return i_(i.stringValue,t.stringValue);case 6:return function(c,h){const g=cu(c),m=cu(h);return g.compareTo(m)}(i.bytesValue,t.bytesValue);case 7:return function(c,h){const g=c.split("/"),m=h.split("/");for(let _=0;_<g.length&&_<m.length;_++){const E=_e(g[_],m[_]);if(E!==0)return E}return _e(g.length,m.length)}(i.referenceValue,t.referenceValue);case 8:return function(c,h){const g=_e(Qn(c.latitude),Qn(h.latitude));return g!==0?g:_e(Qn(c.longitude),Qn(h.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return U4(i.arrayValue,t.arrayValue);case 10:return function(c,h){var g,m,_,E;const A=c.fields||{},D=h.fields||{},C=(g=A[Hf])===null||g===void 0?void 0:g.arrayValue,R=(m=D[Hf])===null||m===void 0?void 0:m.arrayValue,P=_e(((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0,((E=R==null?void 0:R.values)===null||E===void 0?void 0:E.length)||0);return P!==0?P:U4(C,R)}(i.mapValue,t.mapValue);case 11:return function(c,h){if(c===oc.mapValue&&h===oc.mapValue)return 0;if(c===oc.mapValue)return 1;if(h===oc.mapValue)return-1;const g=c.fields||{},m=Object.keys(g),_=h.fields||{},E=Object.keys(_);m.sort(),E.sort();for(let A=0;A<m.length&&A<E.length;++A){const D=i_(m[A],E[A]);if(D!==0)return D;const C=pc(g[m[A]],_[E[A]]);if(C!==0)return C}return _e(m.length,E.length)}(i.mapValue,t.mapValue);default:throw te()}}function P4(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return _e(i,t);const e=uu(i),a=uu(t),l=_e(e.seconds,a.seconds);return l!==0?l:_e(e.nanos,a.nanos)}function U4(i,t){const e=i.values||[],a=t.values||[];for(let l=0;l<e.length&&l<a.length;++l){const c=pc(e[l],a[l]);if(c)return c}return _e(e.length,a.length)}function qf(i){return u_(i)}function u_(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const a=uu(e);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return cu(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return Zt.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let a="[",l=!0;for(const c of e.values||[])l?l=!1:a+=",",a+=u_(c);return a+"]"}(i.arrayValue):"mapValue"in i?function(e){const a=Object.keys(e.fields||{}).sort();let l="{",c=!0;for(const h of a)c?c=!1:l+=",",l+=`${h}:${u_(e.fields[h])}`;return l+"}"}(i.mapValue):te()}function Ap(i){switch(mc(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=py(i);return t?16+Ap(t):16;case 5:return 2*i.stringValue.length;case 6:return cu(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((l,c)=>l+Ap(c),0)}(i.arrayValue);case 10:case 11:return function(a){let l=0;return Mh(a.fields,(c,h)=>{l+=c.length+Ap(h)}),l}(i.mapValue);default:throw te()}}function Am(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function c_(i){return!!i&&"integerValue"in i}function Cm(i){return!!i&&"arrayValue"in i}function L4(i){return!!i&&"nullValue"in i}function z4(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Cp(i){return!!i&&"mapValue"in i}function yy(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{})[av])===null||e===void 0?void 0:e.stringValue)===rv}function um(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Mh(i.mapValue.fields,(e,a)=>t.mapValue.fields[e]=um(a)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=um(i.arrayValue.values[e]);return t}return Object.assign({},i)}function CT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===AT}const RT={mapValue:{fields:{[av]:{stringValue:rv},[Hf]:{arrayValue:{}}}}};function iw(i){return"nullValue"in i?bp:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Am(Ch.empty(),Zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?yy(i)?RT:{mapValue:{}}:te()}function aw(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Am(Ch.empty(),Zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?RT:"mapValue"in i?yy(i)?{mapValue:{}}:oc:te()}function k4(i,t){const e=pc(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?-1:!i.inclusive&&t.inclusive?1:0}function B4(i,t){const e=pc(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?1:!i.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this.value=t}static empty(){return new Hr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let a=0;a<t.length-1;++a)if(e=(e.mapValue.fields||{})[t.get(a)],!Cp(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=um(e)}setAll(t){let e=di.emptyPath(),a={},l=[];t.forEach((h,g)=>{if(!e.isImmediateParentOf(g)){const m=this.getFieldsMap(e);this.applyChanges(m,a,l),a={},l=[],e=g.popLast()}h?a[g.lastSegment()]=um(h):l.push(g.lastSegment())});const c=this.getFieldsMap(e);this.applyChanges(c,a,l)}delete(t){const e=this.field(t.popLast());Cp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return vo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let a=0;a<t.length;++a){let l=e.mapValue.fields[t.get(a)];Cp(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},e.mapValue.fields[t.get(a)]=l),e=l}return e.mapValue.fields}applyChanges(t,e,a){Mh(e,(l,c)=>t[l]=c);for(const l of a)delete t[l]}clone(){return new Hr(um(this.value))}}function wT(i){const t=[];return Mh(i.fields,(e,a)=>{const l=new di([e]);if(Cp(a)){const c=wT(a.mapValue).fields;if(c.length===0)t.push(l);else for(const h of c)t.push(l.child(h))}else t.push(l)}),new Ks(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,e,a,l,c,h,g){this.key=t,this.documentType=e,this.version=a,this.readTime=l,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(t){return new Ci(t,0,le.min(),le.min(),le.min(),Hr.empty(),0)}static newFoundDocument(t,e,a,l){return new Ci(t,1,e,le.min(),a,l,0)}static newNoDocument(t,e){return new Ci(t,2,e,le.min(),le.min(),Hr.empty(),0)}static newUnknownDocument(t,e){return new Ci(t,3,e,le.min(),le.min(),Hr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ci&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,e){this.position=t,this.inclusive=e}}function G4(i,t,e){let a=0;for(let l=0;l<i.position.length;l++){const c=t[l],h=i.position[l];if(c.field.isKeyField()?a=Zt.comparator(Zt.fromName(h.referenceValue),e.key):a=pc(h,e.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function F4(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!vo(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,e="asc"){this.field=t,this.dir=e}}function rw(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class Ze extends NT{constructor(t,e,a){super(),this.field=t,this.op=e,this.value=a}static create(t,e,a){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,a):new sw(t,e,a):e==="array-contains"?new uw(t,a):e==="in"?new VT(t,a):e==="not-in"?new cw(t,a):e==="array-contains-any"?new hw(t,a):new Ze(t,e,a)}static createKeyFieldInFilter(t,e,a){return e==="in"?new lw(t,a):new ow(t,a)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(pc(e,this.value)):e!==null&&mc(this.value)===mc(e)&&this.matchesComparison(pc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends NT{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Cn(t,e)}matches(t){return Yf(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Yf(i){return i.op==="and"}function h_(i){return i.op==="or"}function sv(i){return xT(i)&&Yf(i)}function xT(i){for(const t of i.filters)if(t instanceof Cn)return!1;return!0}function f_(i){if(i instanceof Ze)return i.field.canonicalString()+i.op.toString()+qf(i.value);if(sv(i))return i.filters.map(t=>f_(t)).join(",");{const t=i.filters.map(e=>f_(e)).join(",");return`${i.op}(${t})`}}function DT(i,t){return i instanceof Ze?function(a,l){return l instanceof Ze&&a.op===l.op&&a.field.isEqual(l.field)&&vo(a.value,l.value)}(i,t):i instanceof Cn?function(a,l){return l instanceof Cn&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce((c,h,g)=>c&&DT(h,l.filters[g]),!0):!1}(i,t):void te()}function IT(i,t){const e=i.filters.concat(t);return Cn.create(e,i.op)}function OT(i){return i instanceof Ze?function(e){return`${e.field.canonicalString()} ${e.op} ${qf(e.value)}`}(i):i instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(OT).join(" ,")+"}"}(i):"Filter"}class sw extends Ze{constructor(t,e,a){super(t,e,a),this.key=Zt.fromName(a.referenceValue)}matches(t){const e=Zt.comparator(t.key,this.key);return this.matchesComparison(e)}}class lw extends Ze{constructor(t,e){super(t,"in",e),this.keys=MT("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ow extends Ze{constructor(t,e){super(t,"not-in",e),this.keys=MT("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function MT(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(a=>Zt.fromName(a.referenceValue))}class uw extends Ze{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Cm(e)&&bm(e.arrayValue,this.value)}}class VT extends Ze{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&bm(this.value.arrayValue,e)}}class cw extends Ze{constructor(t,e){super(t,"not-in",e)}matches(t){if(bm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!bm(this.value.arrayValue,e)}}class hw extends Ze{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Cm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(a=>bm(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(t,e=null,a=[],l=[],c=null,h=null,g=null){this.path=t,this.collectionGroup=e,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=h,this.endAt=g,this.le=null}}function d_(i,t=null,e=[],a=[],l=null,c=null,h=null){return new fw(i,t,e,a,l,c,h)}function Rh(i){const t=be(i);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(a=>f_(a)).join(","),e+="|ob:",e+=t.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),fy(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(a=>qf(a)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(a=>qf(a)).join(",")),t.le=e}return t.le}function Lm(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!rw(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!DT(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!F4(i.startAt,t.startAt)&&F4(i.endAt,t.endAt)}function qp(i){return Zt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Kp(i,t){return i.filters.filter(e=>e instanceof Ze&&e.field.isEqual(t))}function j4(i,t,e){let a=bp,l=!0;for(const c of Kp(i,t)){let h=bp,g=!0;switch(c.op){case"<":case"<=":h=iw(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,g=!1;break;case"!=":case"not-in":h=bp}k4({value:a,inclusive:l},{value:h,inclusive:g})<0&&(a=h,l=g)}if(e!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(t)){const h=e.position[c];k4({value:a,inclusive:l},{value:h,inclusive:e.inclusive})<0&&(a=h,l=e.inclusive);break}}return{value:a,inclusive:l}}function H4(i,t,e){let a=oc,l=!0;for(const c of Kp(i,t)){let h=oc,g=!0;switch(c.op){case">=":case">":h=aw(c.value),g=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,g=!1;break;case"!=":case"not-in":h=oc}B4({value:a,inclusive:l},{value:h,inclusive:g})>0&&(a=h,l=g)}if(e!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(t)){const h=e.position[c];B4({value:a,inclusive:l},{value:h,inclusive:e.inclusive})>0&&(a=h,l=e.inclusive);break}}return{value:a,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,e=null,a=[],l=[],c=null,h="F",g=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dw(i,t,e,a,l,c,h,g){return new nd(i,t,e,a,l,c,h,g)}function _y(i){return new nd(i)}function q4(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function PT(i){return i.collectionGroup!==null}function cm(i){const t=be(i);if(t.he===null){t.he=[];const e=new Set;for(const c of t.explicitOrderBy)t.he.push(c),e.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Rn(di.comparator);return h.filters.forEach(m=>{m.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(c=>{e.has(c.canonicalString())||c.isKeyField()||t.he.push(new Rm(c,a))}),e.has(di.keyField().canonicalString())||t.he.push(new Rm(di.keyField(),a))}return t.he}function Ys(i){const t=be(i);return t.Pe||(t.Pe=gw(t,cm(i))),t.Pe}function gw(i,t){if(i.limitType==="F")return d_(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Rm(l.field,c)});const e=i.endAt?new Kf(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new Kf(i.startAt.position,i.startAt.inclusive):null;return d_(i.path,i.collectionGroup,t,i.filters,i.limit,e,a)}}function g_(i,t){const e=i.filters.concat([t]);return new nd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function m_(i,t,e){return new nd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function vy(i,t){return Lm(Ys(i),Ys(t))&&i.limitType===t.limitType}function UT(i){return`${Rh(Ys(i))}|lt:${i.limitType}`}function Df(i){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(l=>OT(l)).join(", ")}]`),fy(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(l=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(l)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(l=>qf(l)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(l=>qf(l)).join(",")),`Target(${a})`}(Ys(i))}; limitType=${i.limitType})`}function zm(i,t){return t.isFoundDocument()&&function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Zt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(i,t)&&function(a,l){for(const c of cm(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(i,t)&&function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0}(i,t)&&function(a,l){return!(a.startAt&&!function(h,g,m){const _=G4(h,g,m);return h.inclusive?_<=0:_<0}(a.startAt,cm(a),l)||a.endAt&&!function(h,g,m){const _=G4(h,g,m);return h.inclusive?_>=0:_>0}(a.endAt,cm(a),l))}(i,t)}function mw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function LT(i){return(t,e)=>{let a=!1;for(const l of cm(i)){const c=pw(l,t,e);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function pw(i,t,e){const a=i.field.isKeyField()?Zt.comparator(t.key,e.key):function(c,h,g){const m=h.data.field(c),_=g.data.field(c);return m!==null&&_!==null?pc(m,_):te()}(i.field,t,e);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),a=this.inner[e];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,e){const a=this.mapKeyFn(t),l=this.inner[a];if(l===void 0)return this.inner[a]=[[t,e]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,e]);l.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),a=this.inner[e];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return a.length===1?delete this.inner[e]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Mh(this.inner,(e,a)=>{for(const[l,c]of a)t(l,c)})}isEmpty(){return _T(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Xn(Zt.comparator);function gs(){return yw}const zT=new Xn(Zt.comparator);function nm(...i){let t=zT;for(const e of i)t=t.insert(e.key,e);return t}function kT(i){let t=zT;return i.forEach((e,a)=>t=t.insert(e,a.overlayedDocument)),t}function po(){return hm()}function BT(){return hm()}function hm(){return new fu(i=>i.toString(),(i,t)=>i.isEqual(t))}const _w=new Xn(Zt.comparator),vw=new Rn(Zt.comparator);function ze(...i){let t=vw;for(const e of i)t=t.add(e);return t}const Ew=new Rn(_e);function Sw(){return Ew}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_m(t)?"-0":t}}function GT(i){return{integerValue:""+i}}function Tw(i,t){return NR(t)?GT(t):lv(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this._=void 0}}function bw(i,t,e){return i instanceof wm?function(l,c){const h={fields:{[ST]:{stringValue:ET},[bT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&iv(c)&&(c=py(c)),c&&(h.fields[TT]=c),{mapValue:h}}(e,t):i instanceof Qf?jT(i,t):i instanceof Xf?HT(i,t):function(l,c){const h=FT(l,c),g=K4(h)+K4(l.Ie);return c_(h)&&c_(l.Ie)?GT(g):lv(l.serializer,g)}(i,t)}function Aw(i,t,e){return i instanceof Qf?jT(i,t):i instanceof Xf?HT(i,t):e}function FT(i,t){return i instanceof Nm?function(a){return c_(a)||function(c){return!!c&&"doubleValue"in c}(a)}(t)?t:{integerValue:0}:null}class wm extends Ey{}class Qf extends Ey{constructor(t){super(),this.elements=t}}function jT(i,t){const e=qT(t);for(const a of i.elements)e.some(l=>vo(l,a))||e.push(a);return{arrayValue:{values:e}}}class Xf extends Ey{constructor(t){super(),this.elements=t}}function HT(i,t){let e=qT(t);for(const a of i.elements)e=e.filter(l=>!vo(l,a));return{arrayValue:{values:e}}}class Nm extends Ey{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function K4(i){return Qn(i.integerValue||i.doubleValue)}function qT(i){return Cm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t,e){this.field=t,this.transform=e}}function Rw(i,t){return i.field.isEqual(t.field)&&function(a,l){return a instanceof Qf&&l instanceof Qf||a instanceof Xf&&l instanceof Xf?kf(a.elements,l.elements,vo):a instanceof Nm&&l instanceof Nm?vo(a.Ie,l.Ie):a instanceof wm&&l instanceof wm}(i.transform,t.transform)}class ww{constructor(t,e){this.version=t,this.transformResults=e}}class qr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new qr}static exists(t){return new qr(void 0,t)}static updateTime(t){return new qr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rp(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Sy{}function KT(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Ty(i.key,qr.none()):new id(i.key,i.data,qr.none());{const e=i.data,a=Hr.empty();let l=new Rn(di.comparator);for(let c of t.fields)if(!l.has(c)){let h=e.field(c);h===null&&c.length>1&&(c=c.popLast(),h=e.field(c)),h===null?a.delete(c):a.set(c,h),l=l.add(c)}return new Ac(i.key,a,new Ks(l.toArray()),qr.none())}}function Nw(i,t,e){i instanceof id?function(l,c,h){const g=l.value.clone(),m=Q4(l.fieldTransforms,c,h.transformResults);g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,t,e):i instanceof Ac?function(l,c,h){if(!Rp(l.precondition,c))return void c.convertToUnknownDocument(h.version);const g=Q4(l.fieldTransforms,c,h.transformResults),m=c.data;m.setAll(YT(l)),m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,t,e):function(l,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function fm(i,t,e,a){return i instanceof id?function(c,h,g,m){if(!Rp(c.precondition,h))return g;const _=c.value.clone(),E=X4(c.fieldTransforms,m,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(i,t,e,a):i instanceof Ac?function(c,h,g,m){if(!Rp(c.precondition,h))return g;const _=X4(c.fieldTransforms,m,h),E=h.data;return E.setAll(YT(c)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(i,t,e,a):function(c,h,g){return Rp(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g}(i,t,e)}function xw(i,t){let e=null;for(const a of i.fieldTransforms){const l=t.data.field(a.field),c=FT(a.transform,l||null);c!=null&&(e===null&&(e=Hr.empty()),e.set(a.field,c))}return e||null}function Y4(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&kf(a,l,(c,h)=>Rw(c,h))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class id extends Sy{constructor(t,e,a,l=[]){super(),this.key=t,this.value=e,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ac extends Sy{constructor(t,e,a,l,c=[]){super(),this.key=t,this.data=e,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function YT(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const a=i.data.field(e);t.set(e,a)}}),t}function Q4(i,t,e){const a=new Map;ie(i.length===e.length);for(let l=0;l<e.length;l++){const c=i[l],h=c.transform,g=t.data.field(c.field);a.set(c.field,Aw(h,g,e[l]))}return a}function X4(i,t,e){const a=new Map;for(const l of i){const c=l.transform,h=e.data.field(l.field);a.set(l.field,bw(c,h,t))}return a}class Ty extends Sy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QT extends Sy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t,e,a,l){this.batchId=t,this.localWriteTime=e,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(t,e){const a=e.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&Nw(c,t,a[l])}}applyToLocalView(t,e){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(e=fm(a,t,e,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(e=fm(a,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const a=BT();return this.mutations.forEach(l=>{const c=t.get(l.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=e.has(l.key)?null:g;const m=KT(h,g);m!==null&&a.set(l.key,m),h.isValidDocument()||h.convertToNoDocument(le.min())}),a}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ze())}isEqual(t){return this.batchId===t.batchId&&kf(this.mutations,t.mutations,(e,a)=>Y4(e,a))&&kf(this.baseMutations,t.baseMutations,(e,a)=>Y4(e,a))}}class uv{constructor(t,e,a,l){this.batch=t,this.commitVersion=e,this.mutationResults=a,this.docVersions=l}static from(t,e,a){ie(t.mutations.length===a.length);let l=function(){return _w}();const c=t.mutations;for(let h=0;h<c.length;h++)l=l.insert(c[h].key,a[h].version);return new uv(t,e,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki,on;function Iw(i){switch(i){case xt.OK:return te();case xt.CANCELLED:case xt.UNKNOWN:case xt.DEADLINE_EXCEEDED:case xt.RESOURCE_EXHAUSTED:case xt.INTERNAL:case xt.UNAVAILABLE:case xt.UNAUTHENTICATED:return!1;case xt.INVALID_ARGUMENT:case xt.NOT_FOUND:case xt.ALREADY_EXISTS:case xt.PERMISSION_DENIED:case xt.FAILED_PRECONDITION:case xt.ABORTED:case xt.OUT_OF_RANGE:case xt.UNIMPLEMENTED:case xt.DATA_LOSS:return!0;default:return te()}}function XT(i){if(i===void 0)return yr("GRPC error has no .code"),xt.UNKNOWN;switch(i){case ki.OK:return xt.OK;case ki.CANCELLED:return xt.CANCELLED;case ki.UNKNOWN:return xt.UNKNOWN;case ki.DEADLINE_EXCEEDED:return xt.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return xt.RESOURCE_EXHAUSTED;case ki.INTERNAL:return xt.INTERNAL;case ki.UNAVAILABLE:return xt.UNAVAILABLE;case ki.UNAUTHENTICATED:return xt.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return xt.INVALID_ARGUMENT;case ki.NOT_FOUND:return xt.NOT_FOUND;case ki.ALREADY_EXISTS:return xt.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return xt.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return xt.FAILED_PRECONDITION;case ki.ABORTED:return xt.ABORTED;case ki.OUT_OF_RANGE:return xt.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return xt.UNIMPLEMENTED;case ki.DATA_LOSS:return xt.DATA_LOSS;default:return te()}}(on=ki||(ki={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new fc([4294967295,4294967295],0);function Z4(i){const t=nT().encode(i),e=new X5;return e.update(t),new Uint8Array(e.digest())}function W4(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),a=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new fc([e,a],0),new fc([l,c],0)]}class hv{constructor(t,e,a){if(this.bitmap=t,this.padding=e,this.hashCount=a,e<0||e>=8)throw new im(`Invalid padding: ${e}`);if(a<0)throw new im(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new im(`Invalid hash count: ${a}`);if(t.length===0&&e!==0)throw new im(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=fc.fromNumber(this.Ee)}Ae(t,e,a){let l=t.add(e.multiply(fc.fromNumber(a)));return l.compare(Ow)===1&&(l=new fc([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=Z4(t),[a,l]=W4(e);for(let c=0;c<this.hashCount;c++){const h=this.Ae(a,l,c);if(!this.Re(h))return!1}return!0}static create(t,e,a){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),h=new hv(c,l,e);return a.forEach(g=>h.insert(g)),h}insert(t){if(this.Ee===0)return;const e=Z4(t),[a,l]=W4(e);for(let c=0;c<this.hashCount;c++){const h=this.Ae(a,l,c);this.Ve(h)}}Ve(t){const e=Math.floor(t/8),a=t%8;this.bitmap[e]|=1<<a}}class im extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,e,a,l,c){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,e,a){const l=new Map;return l.set(t,km.createSynthesizedTargetChangeForCurrentChange(t,e,a)),new by(le.min(),l,new Xn(_e),gs(),ze())}}class km{constructor(t,e,a,l,c){this.resumeToken=t,this.current=e,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,e,a){return new km(a,e,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,e,a,l){this.me=t,this.removedTargetIds=e,this.key=a,this.fe=l}}class ZT{constructor(t,e){this.targetId=t,this.ge=e}}class WT{constructor(t,e,a=Bi.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=e,this.resumeToken=a,this.cause=l}}class J4{constructor(){this.pe=0,this.ye=$4(),this.we=Bi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=ze(),e=ze(),a=ze();return this.ye.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:e=e.add(l);break;case 1:a=a.add(l);break;default:te()}}),new km(this.we,this.Se,t,e,a)}Me(){this.be=!1,this.ye=$4()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,ie(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Mw{constructor(t){this.ke=t,this.qe=new Map,this.Qe=gs(),this.$e=up(),this.Ue=up(),this.Ke=new Xn(_e)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const a=this.He(e);switch(t.state){case 0:this.Je(e)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(e);break;case 3:this.Je(e)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),a.Ce(t.resumeToken));break;default:te()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((a,l)=>{this.Je(l)&&e(l)})}Ze(t){const e=t.targetId,a=t.ge.count,l=this.Xe(e);if(l){const c=l.target;if(qp(c))if(a===0){const h=new Zt(c.path);this.ze(e,h,Ci.newNoDocument(h,le.min()))}else ie(a===1);else{const h=this.et(e);if(h!==a){const g=this.tt(t),m=g?this.nt(g,t,h):1;if(m!==0){this.Ye(e);const _=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,_)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=e;let h,g;try{h=cu(a).toUint8Array()}catch(m){if(m instanceof vT)return Ah("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{g=new hv(h,l,c)}catch(m){return Ah(m instanceof im?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return g.Ee===0?null:g}nt(t,e,a){return e.ge.count===a-this.st(t,e.targetId)?0:2}st(t,e){const a=this.ke.getRemoteKeysForTarget(e);let l=0;return a.forEach(c=>{const h=this.ke.it(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.ze(e,c,null),l++)}),l}ot(t){const e=new Map;this.qe.forEach((c,h)=>{const g=this.Xe(h);if(g){if(c.current&&qp(g.target)){const m=new Zt(g.target.path);this._t(m).has(h)||this.ut(h,m)||this.ze(h,m,Ci.newNoDocument(m,t))}c.ve&&(e.set(h,c.Fe()),c.Me())}});let a=ze();this.Ue.forEach((c,h)=>{let g=!0;h.forEachWhile(m=>{const _=this.Xe(m);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(c))}),this.Qe.forEach((c,h)=>h.setReadTime(t));const l=new by(t,e,this.Ke,this.Qe,a);return this.Qe=gs(),this.$e=up(),this.Ue=up(),this.Ke=new Xn(_e),l}Ge(t,e){if(!this.Je(t))return;const a=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,a),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,a){if(!this.Je(t))return;const l=this.He(t);this.ut(t,e)?l.xe(e,1):l.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),a&&(this.Qe=this.Qe.insert(e,a))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new J4,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Rn(_e),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Rn(_e),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||jt("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new J4),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function up(){return new Xn(Zt.comparator)}function $4(){return new Xn(Zt.comparator)}const Vw={asc:"ASCENDING",desc:"DESCENDING"},Pw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uw={and:"AND",or:"OR"};class Lw{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function p_(i,t){return i.useProto3Json||fy(t)?t:{value:t}}function Zf(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function JT(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function zw(i,t){return Zf(i,t.toTimestamp())}function _r(i){return ie(!!i),le.fromTimestamp(function(e){const a=uu(e);return new gi(a.seconds,a.nanos)}(i))}function fv(i,t){return y_(i,t).canonicalString()}function y_(i,t){const e=function(l){return new En(["projects",l.projectId,"databases",l.database])}(i).child("documents");return t===void 0?e:e.child(t)}function $T(i){const t=En.fromString(i);return ie(o3(t)),t}function Yp(i,t){return fv(i.databaseId,t.path)}function _h(i,t){const e=$T(t);if(e.get(1)!==i.databaseId.projectId)throw new Xt(xt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Xt(xt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Zt(n3(e))}function t3(i,t){return fv(i.databaseId,t)}function e3(i){const t=$T(i);return t.length===4?En.emptyPath():n3(t)}function __(i){return new En(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function n3(i){return ie(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function tS(i,t,e){return{name:Yp(i,t),fields:e.value.mapValue.fields}}function kw(i,t,e){const a=_h(i,t.name),l=_r(t.updateTime),c=t.createTime?_r(t.createTime):le.min(),h=new Hr({mapValue:{fields:t.fields}}),g=Ci.newFoundDocument(a,l,c,h);return e&&g.setHasCommittedMutations(),e?g.setHasCommittedMutations():g}function Bw(i,t){let e;if("targetChange"in t){t.targetChange;const a=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:te()}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(_,E){return _.useProto3Json?(ie(E===void 0||typeof E=="string"),Bi.fromBase64String(E||"")):(ie(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Bi.fromUint8Array(E||new Uint8Array))}(i,t.targetChange.resumeToken),h=t.targetChange.cause,g=h&&function(_){const E=_.code===void 0?xt.UNKNOWN:XT(_.code);return new Xt(E,_.message||"")}(h);e=new WT(a,l,c,g||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const l=_h(i,a.document.name),c=_r(a.document.updateTime),h=a.document.createTime?_r(a.document.createTime):le.min(),g=new Hr({mapValue:{fields:a.document.fields}}),m=Ci.newFoundDocument(l,c,h,g),_=a.targetIds||[],E=a.removedTargetIds||[];e=new wp(_,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const l=_h(i,a.document),c=a.readTime?_r(a.readTime):le.min(),h=Ci.newNoDocument(l,c),g=a.removedTargetIds||[];e=new wp([],g,h.key,h)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const l=_h(i,a.document),c=a.removedTargetIds||[];e=new wp([],c,l,null)}else{if(!("filter"in t))return te();{t.filter;const a=t.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,h=new Dw(l,c),g=a.targetId;e=new ZT(g,h)}}return e}function Qp(i,t){let e;if(t instanceof id)e={update:tS(i,t.key,t.value)};else if(t instanceof Ty)e={delete:Yp(i,t.key)};else if(t instanceof Ac)e={update:tS(i,t.key,t.data),updateMask:Kw(t.fieldMask)};else{if(!(t instanceof QT))return te();e={verify:Yp(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(a=>function(c,h){const g=h.transform;if(g instanceof wm)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Qf)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Xf)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Nm)return{fieldPath:h.field.canonicalString(),increment:g.Ie};throw te()}(0,a))),t.precondition.isNone||(e.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:zw(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:te()}(i,t.precondition)),e}function v_(i,t){const e=t.currentDocument?function(c){return c.updateTime!==void 0?qr.updateTime(_r(c.updateTime)):c.exists!==void 0?qr.exists(c.exists):qr.none()}(t.currentDocument):qr.none(),a=t.updateTransforms?t.updateTransforms.map(l=>function(h,g){let m=null;if("setToServerValue"in g)ie(g.setToServerValue==="REQUEST_TIME"),m=new wm;else if("appendMissingElements"in g){const E=g.appendMissingElements.values||[];m=new Qf(E)}else if("removeAllFromArray"in g){const E=g.removeAllFromArray.values||[];m=new Xf(E)}else"increment"in g?m=new Nm(h,g.increment):te();const _=di.fromServerFormat(g.fieldPath);return new Cw(_,m)}(i,l)):[];if(t.update){t.update.name;const l=_h(i,t.update.name),c=new Hr({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=function(m){const _=m.fieldPaths||[];return new Ks(_.map(E=>di.fromServerFormat(E)))}(t.updateMask);return new Ac(l,c,h,e,a)}return new id(l,c,e,a)}if(t.delete){const l=_h(i,t.delete);return new Ty(l,e)}if(t.verify){const l=_h(i,t.verify);return new QT(l,e)}return te()}function Gw(i,t){return i&&i.length>0?(ie(t!==void 0),i.map(e=>function(l,c){let h=l.updateTime?_r(l.updateTime):_r(c);return h.isEqual(le.min())&&(h=_r(c)),new ww(h,l.transformResults||[])}(e,t))):[]}function i3(i,t){return{documents:[t3(i,t.path)]}}function a3(i,t){const e={structuredQuery:{}},a=t.path;let l;t.collectionGroup!==null?(l=a,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=a.popLast(),e.structuredQuery.from=[{collectionId:a.lastSegment()}]),e.parent=t3(i,l);const c=function(_){if(_.length!==0)return l3(Cn.create(_,"and"))}(t.filters);c&&(e.structuredQuery.where=c);const h=function(_){if(_.length!==0)return _.map(E=>function(D){return{field:If(D.field),direction:jw(D.dir)}}(E))}(t.orderBy);h&&(e.structuredQuery.orderBy=h);const g=p_(i,t.limit);return g!==null&&(e.structuredQuery.limit=g),t.startAt&&(e.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ht:e,parent:l}}function r3(i){let t=e3(i.parent);const e=i.structuredQuery,a=e.from?e.from.length:0;let l=null;if(a>0){ie(a===1);const E=e.from[0];E.allDescendants?l=E.collectionId:t=t.child(E.collectionId)}let c=[];e.where&&(c=function(A){const D=s3(A);return D instanceof Cn&&sv(D)?D.getFilters():[D]}(e.where));let h=[];e.orderBy&&(h=function(A){return A.map(D=>function(R){return new Rm(Of(R.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(D))}(e.orderBy));let g=null;e.limit&&(g=function(A){let D;return D=typeof A=="object"?A.value:A,fy(D)?null:D}(e.limit));let m=null;e.startAt&&(m=function(A){const D=!!A.before,C=A.values||[];return new Kf(C,D)}(e.startAt));let _=null;return e.endAt&&(_=function(A){const D=!A.before,C=A.values||[];return new Kf(C,D)}(e.endAt)),dw(t,l,h,c,g,"F",m,_)}function Fw(i,t){const e=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function s3(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=Of(e.unaryFilter.field);return Ze.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Of(e.unaryFilter.field);return Ze.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Of(e.unaryFilter.field);return Ze.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Of(e.unaryFilter.field);return Ze.create(h,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(i):i.fieldFilter!==void 0?function(e){return Ze.create(Of(e.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return Cn.create(e.compositeFilter.filters.map(a=>s3(a)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return te()}}(e.compositeFilter.op))}(i):te()}function jw(i){return Vw[i]}function Hw(i){return Pw[i]}function qw(i){return Uw[i]}function If(i){return{fieldPath:i.canonicalString()}}function Of(i){return di.fromServerFormat(i.fieldPath)}function l3(i){return i instanceof Ze?function(e){if(e.op==="=="){if(z4(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NAN"}};if(L4(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(z4(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NAN"}};if(L4(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:If(e.field),op:Hw(e.op),value:e.value}}}(i):i instanceof Cn?function(e){const a=e.getFilters().map(l=>l3(l));return a.length===1?a[0]:{compositeFilter:{op:qw(e.op),filters:a}}}(i):te()}function Kw(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function o3(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t,e,a,l,c=le.min(),h=le.min(),g=Bi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=m}withSequenceNumber(t){return new au(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(t){this.Tt=t}}function Yw(i,t){let e;if(t.document)e=kw(i.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const a=Zt.fromSegments(t.noDocument.path),l=Nh(t.noDocument.readTime);e=Ci.newNoDocument(a,l),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return te();{const a=Zt.fromSegments(t.unknownDocument.path),l=Nh(t.unknownDocument.version);e=Ci.newUnknownDocument(a,l)}}return t.readTime&&e.setReadTime(function(l){const c=new gi(l[0],l[1]);return le.fromTimestamp(c)}(t.readTime)),e}function eS(i,t){const e=t.key,a={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Xp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())a.document=function(c,h){return{name:Yp(c,h.key),fields:h.data.value.mapValue.fields,updateTime:Zf(c,h.version.toTimestamp()),createTime:Zf(c,h.createTime.toTimestamp())}}(i.Tt,t);else if(t.isNoDocument())a.noDocument={path:e.path.toArray(),readTime:wh(t.version)};else{if(!t.isUnknownDocument())return te();a.unknownDocument={path:e.path.toArray(),version:wh(t.version)}}return a}function Xp(i){const t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function wh(i){const t=i.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Nh(i){const t=new gi(i.seconds,i.nanoseconds);return le.fromTimestamp(t)}function hh(i,t){const e=(t.baseMutations||[]).map(c=>v_(i.Tt,c));for(let c=0;c<t.mutations.length-1;++c){const h=t.mutations[c];if(c+1<t.mutations.length&&t.mutations[c+1].transform!==void 0){const g=t.mutations[c+1];h.updateTransforms=g.transform.fieldTransforms,t.mutations.splice(c+1,1),++c}}const a=t.mutations.map(c=>v_(i.Tt,c)),l=gi.fromMillis(t.localWriteTimeMs);return new ov(t.batchId,l,e,a)}function am(i){const t=Nh(i.readTime),e=i.lastLimboFreeSnapshotVersion!==void 0?Nh(i.lastLimboFreeSnapshotVersion):le.min();let a;return a=function(c){return c.documents!==void 0}(i.query)?function(c){return ie(c.documents.length===1),Ys(_y(e3(c.documents[0])))}(i.query):function(c){return Ys(r3(c))}(i.query),new au(a,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,t,e,Bi.fromBase64String(i.resumeToken))}function c3(i,t){const e=wh(t.snapshotVersion),a=wh(t.lastLimboFreeSnapshotVersion);let l;l=qp(t.target)?i3(i.Tt,t.target):a3(i.Tt,t.target).ht;const c=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Rh(t.target),readTime:e,resumeToken:c,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:l}}function h3(i){const t=r3({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?m_(t,t.limit,"L"):t}function k1(i,t){return new cv(t.largestBatchId,v_(i.Tt,t.overlayMutation))}function nS(i,t){const e=t.path.lastSegment();return[i,tr(t.path.popLast()),e]}function iS(i,t,e,a){return{indexId:i,uid:t,sequenceNumber:e,readTime:wh(a.readTime),documentKey:tr(a.documentKey.path),largestBatchId:a.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{getBundleMetadata(t,e){return aS(t).get(e).next(a=>{if(a)return function(c){return{id:c.bundleId,createTime:Nh(c.createTime),version:c.version}}(a)})}saveBundleMetadata(t,e){return aS(t).put(function(l){return{bundleId:l.id,createTime:wh(_r(l.createTime)),version:l.version}}(e))}getNamedQuery(t,e){return rS(t).get(e).next(a=>{if(a)return function(c){return{name:c.name,query:h3(c.bundledQuery),readTime:Nh(c.readTime)}}(a)})}saveNamedQuery(t,e){return rS(t).put(function(l){return{name:l.name,readTime:wh(_r(l.readTime)),bundledQuery:l.bundledQuery}}(e))}}function aS(i){return Wi(i,dy)}function rS(i){return Wi(i,gy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t,e){this.serializer=t,this.userId=e}static It(t,e){const a=e.uid||"";return new Ay(t,a)}getOverlay(t,e){return Yg(t).get(nS(this.userId,e)).next(a=>a?k1(this.serializer,a):null)}getOverlays(t,e){const a=po();return _t.forEach(e,l=>this.getOverlay(t,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(t,e,a){const l=[];return a.forEach((c,h)=>{const g=new cv(e,h);l.push(this.Et(t,g))}),_t.waitFor(l)}removeOverlaysForBatchId(t,e,a){const l=new Set;e.forEach(h=>l.add(tr(h.getCollectionPath())));const c=[];return l.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,a],[this.userId,h,a+1],!1,!0);c.push(Yg(t).J(l_,g))}),_t.waitFor(c)}getOverlaysForCollection(t,e,a){const l=po(),c=tr(e),h=IDBKeyRange.bound([this.userId,c,a],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Yg(t).G(l_,h).next(g=>{for(const m of g){const _=k1(this.serializer,m);l.set(_.getKey(),_)}return l})}getOverlaysForCollectionGroup(t,e,a,l){const c=po();let h;const g=IDBKeyRange.bound([this.userId,e,a],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Yg(t).Z({index:gT,range:g},(m,_,E)=>{const A=k1(this.serializer,_);c.size()<l||A.largestBatchId===h?(c.set(A.getKey(),A),h=A.largestBatchId):E.done()}).next(()=>c)}Et(t,e){return Yg(t).put(function(l,c,h){const[g,m,_]=nS(c,h.mutation.key);return{userId:c,collectionPath:m,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Qp(l.Tt,h.mutation)}}(this.serializer,this.userId,e))}}function Yg(i){return Wi(i,my)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{dt(t){return Wi(t,ev)}getSessionToken(t){return this.dt(t).get("sessionToken").next(e=>{const a=e==null?void 0:e.value;return a?Bi.fromUint8Array(a):Bi.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(Qn(t.integerValue));else if("doubleValue"in t){const a=Qn(t.doubleValue);isNaN(a)?this.ft(e,13):(this.ft(e,15),_m(a)?e.gt(0):e.gt(a))}else if("timestampValue"in t){let a=t.timestampValue;this.ft(e,20),typeof a=="string"&&(a=uu(a)),e.yt(`${a.seconds||""}`),e.gt(a.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(cu(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const a=t.geoPointValue;this.ft(e,45),e.gt(a.latitude||0),e.gt(a.longitude||0)}else"mapValue"in t?CT(t)?this.ft(e,Number.MAX_SAFE_INTEGER):yy(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):te()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const a=t.fields||{};this.ft(e,55);for(const l of Object.keys(a))this.wt(l,e),this.Rt(a[l],e)}vt(t,e){var a,l;const c=t.fields||{};this.ft(e,53);const h=Hf,g=((l=(a=c[h].arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.length)||0;this.ft(e,15),e.gt(Qn(g)),this.wt(h,e),this.Rt(c[h],e)}Ft(t,e){const a=t.values||[];this.ft(e,50);for(const l of a)this.Rt(l,e)}Dt(t,e){this.ft(e,37),Zt.fromName(t).path.forEach(a=>{this.ft(e,60),this.Mt(a,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}}fh.xt=new fh;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=255;function Zw(i){if(i===0)return 8;let t=0;return i>>4||(t+=4,i<<=4),i>>6||(t+=2,i<<=2),i>>7||(t+=1),t}function sS(i){const t=64-function(a){let l=0;for(let c=0;c<8;++c){const h=Zw(255&a[c]);if(l+=h,h!==8)break}return l}(i);return Math.ceil(t/8)}class Ww{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const e=t[Symbol.iterator]();let a=e.next();for(;!a.done;)this.Nt(a.value),a=e.next();this.Bt()}Lt(t){const e=t[Symbol.iterator]();let a=e.next();for(;!a.done;)this.kt(a.value),a=e.next();this.qt()}Qt(t){for(const e of t){const a=e.charCodeAt(0);if(a<128)this.Nt(a);else if(a<2048)this.Nt(960|a>>>6),this.Nt(128|63&a);else if(e<"\uD800"||"\uDBFF"<e)this.Nt(480|a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a);else{const l=e.codePointAt(0);this.Nt(240|l>>>18),this.Nt(128|63&l>>>12),this.Nt(128|63&l>>>6),this.Nt(128|63&l)}}this.Bt()}$t(t){for(const e of t){const a=e.charCodeAt(0);if(a<128)this.kt(a);else if(a<2048)this.kt(960|a>>>6),this.kt(128|63&a);else if(e<"\uD800"||"\uDBFF"<e)this.kt(480|a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a);else{const l=e.codePointAt(0);this.kt(240|l>>>18),this.kt(128|63&l>>>12),this.kt(128|63&l>>>6),this.kt(128|63&l)}}this.qt()}Ut(t){const e=this.Kt(t),a=sS(e);this.Wt(1+a),this.buffer[this.position++]=255&a;for(let l=e.length-a;l<e.length;++l)this.buffer[this.position++]=255&e[l]}Gt(t){const e=this.Kt(t),a=sS(e);this.Wt(1+a),this.buffer[this.position++]=~(255&a);for(let l=e.length-a;l<e.length;++l)this.buffer[this.position++]=~(255&e[l])}zt(){this.jt(Af),this.jt(255)}Ht(){this.Jt(Af),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Kt(t){const e=function(c){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,c,!1),new Uint8Array(h.buffer)}(t),a=!!(128&e[0]);e[0]^=a?255:128;for(let l=1;l<e.length;++l)e[l]^=a?255:0;return e}Nt(t){const e=255&t;e===0?(this.jt(0),this.jt(255)):e===Af?(this.jt(Af),this.jt(0)):this.jt(e)}kt(t){const e=255&t;e===0?(this.Jt(0),this.Jt(255)):e===Af?(this.Jt(Af),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const e=t+this.position;if(e<=this.buffer.length)return;let a=2*this.buffer.length;a<e&&(a=e);const l=new Uint8Array(a);l.set(this.buffer),this.buffer=l}}class Jw{constructor(t){this.Zt=t}bt(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Ut(t)}Vt(){this.Zt.zt()}}class $w{constructor(t){this.Zt=t}bt(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class Qg{constructor(){this.Zt=new Ww,this.Xt=new Jw(this.Zt),this.en=new $w(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,e,a,l){this.indexId=t,this.documentKey=e,this.arrayValue=a,this.directionalValue=l}nn(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,a=new Uint8Array(e);return a.set(this.directionalValue,0),e!==t?a.set([0],this.directionalValue.length):++a[a.length-1],new dh(this.indexId,this.documentKey,this.arrayValue,a)}}function ec(i,t){let e=i.indexId-t.indexId;return e!==0?e:(e=lS(i.arrayValue,t.arrayValue),e!==0?e:(e=lS(i.directionalValue,t.directionalValue),e!==0?e:Zt.comparator(i.documentKey,t.documentKey)))}function lS(i,t){for(let e=0;e<i.length&&e<t.length;++e){const a=i[e]-t[e];if(a!==0)return a}return i.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.rn=new Rn((e,a)=>di.comparator(e.field,a.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const e of t.filters){const a=e;a.isInequality()?this.rn=this.rn.add(a):this._n.push(a)}}get an(){return this.rn.size>1}un(t){if(ie(t.collectionGroup===this.collectionId),this.an)return!1;const e=a_(t);if(e!==void 0&&!this.cn(e))return!1;const a=oh(t);let l=new Set,c=0,h=0;for(;c<a.length&&this.cn(a[c]);++c)l=l.add(a[c].fieldPath.canonicalString());if(c===a.length)return!0;if(this.rn.size>0){const g=this.rn.getIterator().getNext();if(!l.has(g.field.canonicalString())){const m=a[c];if(!this.ln(g,m)||!this.hn(this.sn[h++],m))return!1}++c}for(;c<a.length;++c){const g=a[c];if(h>=this.sn.length||!this.hn(this.sn[h++],g))return!1}return!0}Pn(){if(this.an)return null;let t=new Rn(di.comparator);const e=[];for(const a of this._n)if(!a.field.isKeyField())if(a.op==="array-contains"||a.op==="array-contains-any")e.push(new Ep(a.field,2));else{if(t.has(a.field))continue;t=t.add(a.field),e.push(new Ep(a.field,0))}for(const a of this.sn)a.field.isKeyField()||t.has(a.field)||(t=t.add(a.field),e.push(new Ep(a.field,a.dir==="asc"?0:1)));return new zp(zp.UNKNOWN_ID,this.collectionId,e,ym.empty())}cn(t){for(const e of this._n)if(this.ln(e,t))return!0;return!1}ln(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const a=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===a}hn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(i){var t,e;if(ie(i instanceof Ze||i instanceof Cn),i instanceof Ze){if(i instanceof VT){const l=((e=(t=i.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(c=>Ze.create(i.field,"==",c)))||[];return Cn.create(l,"or")}return i}const a=i.filters.map(l=>f3(l));return Cn.create(a,i.op)}function tN(i){if(i.getFilters().length===0)return[];const t=T_(f3(i));return ie(d3(t)),E_(t)||S_(t)?[t]:t.getFilters()}function E_(i){return i instanceof Ze}function S_(i){return i instanceof Cn&&sv(i)}function d3(i){return E_(i)||S_(i)||function(e){if(e instanceof Cn&&h_(e)){for(const a of e.getFilters())if(!E_(a)&&!S_(a))return!1;return!0}return!1}(i)}function T_(i){if(ie(i instanceof Ze||i instanceof Cn),i instanceof Ze)return i;if(i.filters.length===1)return T_(i.filters[0]);const t=i.filters.map(a=>T_(a));let e=Cn.create(t,i.op);return e=Zp(e),d3(e)?e:(ie(e instanceof Cn),ie(Yf(e)),ie(e.filters.length>1),e.filters.reduce((a,l)=>dv(a,l)))}function dv(i,t){let e;return ie(i instanceof Ze||i instanceof Cn),ie(t instanceof Ze||t instanceof Cn),e=i instanceof Ze?t instanceof Ze?function(l,c){return Cn.create([l,c],"and")}(i,t):uS(i,t):t instanceof Ze?uS(t,i):function(l,c){if(ie(l.filters.length>0&&c.filters.length>0),Yf(l)&&Yf(c))return IT(l,c.getFilters());const h=h_(l)?l:c,g=h_(l)?c:l,m=h.filters.map(_=>dv(_,g));return Cn.create(m,"or")}(i,t),Zp(e)}function uS(i,t){if(Yf(t))return IT(t,i.getFilters());{const e=t.filters.map(a=>dv(i,a));return Cn.create(e,"or")}}function Zp(i){if(ie(i instanceof Ze||i instanceof Cn),i instanceof Ze)return i;const t=i.getFilters();if(t.length===1)return Zp(t[0]);if(xT(i))return i;const e=t.map(l=>Zp(l)),a=[];return e.forEach(l=>{l instanceof Ze?a.push(l):l instanceof Cn&&(l.op===i.op?a.push(...l.filters):a.push(l))}),a.length===1?a[0]:Cn.create(a,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Tn=new gv}addToCollectionParentIndex(t,e){return this.Tn.add(e),_t.resolve()}getCollectionParents(t,e){return _t.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return _t.resolve()}deleteFieldIndex(t,e){return _t.resolve()}deleteAllFieldIndexes(t){return _t.resolve()}createTargetIndexes(t,e){return _t.resolve()}getDocumentsMatchingTarget(t,e){return _t.resolve(null)}getIndexType(t,e){return _t.resolve(0)}getFieldIndexes(t,e){return _t.resolve([])}getNextCollectionGroupToUpdate(t){return _t.resolve(null)}getMinOffset(t,e){return _t.resolve(ms.min())}getMinOffsetFromCollectionGroup(t,e){return _t.resolve(ms.min())}updateCollectionGroup(t,e,a){return _t.resolve()}updateIndexEntries(t,e){return _t.resolve()}}class gv{constructor(){this.index={}}add(t){const e=t.lastSegment(),a=t.popLast(),l=this.index[e]||new Rn(En.comparator),c=!l.has(a);return this.index[e]=l.add(a),c}has(t){const e=t.lastSegment(),a=t.popLast(),l=this.index[e];return l&&l.has(a)}getEntries(t){return(this.index[t]||new Rn(En.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="IndexedDbIndexManager",cp=new Uint8Array(0);class nN{constructor(t,e){this.databaseId=e,this.In=new gv,this.En=new fu(a=>Rh(a),(a,l)=>Lm(a,l)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.In.has(e)){const a=e.lastSegment(),l=e.popLast();t.addOnCommittedListener(()=>{this.In.add(e)});const c={collectionId:a,parent:tr(l)};return hS(t).put(c)}return _t.resolve()}getCollectionParents(t,e){const a=[],l=IDBKeyRange.bound([e,""],[aT(e),""],!1,!0);return hS(t).G(l).next(c=>{for(const h of c){if(h.collectionId!==e)break;a.push(mo(h.parent))}return a})}addFieldIndex(t,e){const a=Xg(t),l=function(g){return{indexId:g.indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(e);delete l.indexId;const c=a.add(l);if(e.indexState){const h=Rf(t);return c.next(g=>{h.put(iS(g,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return c.next()}deleteFieldIndex(t,e){const a=Xg(t),l=Rf(t),c=Cf(t);return a.delete(e.indexId).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Xg(t),a=Cf(t),l=Rf(t);return e.J().next(()=>a.J()).next(()=>l.J())}createTargetIndexes(t,e){return _t.forEach(this.dn(e),a=>this.getIndexType(t,a).next(l=>{if(l===0||l===1){const c=new oS(a).Pn();if(c!=null)return this.addFieldIndex(t,c)}}))}getDocumentsMatchingTarget(t,e){const a=Cf(t);let l=!0;const c=new Map;return _t.forEach(this.dn(e),h=>this.An(t,h).next(g=>{l&&(l=!!g),c.set(h,g)})).next(()=>{if(l){let h=ze();const g=[];return _t.forEach(c,(m,_)=>{jt(cS,`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(m)} to execute ${Rh(e)}`);const E=function(x,L){const F=a_(L);if(F===void 0)return null;for(const K of Kp(x,F.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(_,m),A=function(x,L){const F=new Map;for(const K of oh(L))for(const j of Kp(x,K.fieldPath))switch(j.op){case"==":case"in":F.set(K.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return F.set(K.fieldPath.canonicalString(),j.value),Array.from(F.values())}return null}(_,m),D=function(x,L){const F=[];let K=!0;for(const j of oh(L)){const M=j.kind===0?j4(x,j.fieldPath,x.startAt):H4(x,j.fieldPath,x.startAt);F.push(M.value),K&&(K=M.inclusive)}return new Kf(F,K)}(_,m),C=function(x,L){const F=[];let K=!0;for(const j of oh(L)){const M=j.kind===0?H4(x,j.fieldPath,x.endAt):j4(x,j.fieldPath,x.endAt);F.push(M.value),K&&(K=M.inclusive)}return new Kf(F,K)}(_,m),R=this.Rn(m,_,D),P=this.Rn(m,_,C),U=this.Vn(m,_,A),H=this.mn(m.indexId,E,R,D.inclusive,P,C.inclusive,U);return _t.forEach(H,N=>a.H(N,e.limit).next(x=>{x.forEach(L=>{const F=Zt.fromSegments(L.documentKey);h.has(F)||(h=h.add(F),g.push(F))})}))}).next(()=>g)}return _t.resolve(null)})}dn(t){let e=this.En.get(t);return e||(t.filters.length===0?e=[t]:e=tN(Cn.create(t.filters,"and")).map(a=>d_(t.path,t.collectionGroup,t.orderBy,a.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,e),e)}mn(t,e,a,l,c,h,g){const m=(e!=null?e.length:1)*Math.max(a.length,c.length),_=m/(e!=null?e.length:1),E=[];for(let A=0;A<m;++A){const D=e?this.fn(e[A/_]):cp,C=this.gn(t,D,a[A%_],l),R=this.pn(t,D,c[A%_],h),P=g.map(U=>this.gn(t,D,U,!0));E.push(...this.createRange(C,R,P))}return E}gn(t,e,a,l){const c=new dh(t,Zt.empty(),e,a);return l?c:c.nn()}pn(t,e,a,l){const c=new dh(t,Zt.empty(),e,a);return l?c.nn():c}An(t,e){const a=new oS(e),l=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,l).next(c=>{let h=null;for(const g of c)a.un(g)&&(!h||g.fields.length>h.fields.length)&&(h=g);return h})}getIndexType(t,e){let a=2;const l=this.dn(e);return _t.forEach(l,c=>this.An(t,c).next(h=>{h?a!==0&&h.fields.length<function(m){let _=new Rn(di.comparator),E=!1;for(const A of m.filters)for(const D of A.getFlattenedFilters())D.field.isKeyField()||(D.op==="array-contains"||D.op==="array-contains-any"?E=!0:_=_.add(D.field));for(const A of m.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(E?1:0)}(c)&&(a=1):a=0})).next(()=>function(h){return h.limit!==null}(e)&&l.length>1&&a===2?1:a)}yn(t,e){const a=new Qg;for(const l of oh(t)){const c=e.data.field(l.fieldPath);if(c==null)return null;const h=a.tn(l.kind);fh.xt.At(c,h)}return a.Yt()}fn(t){const e=new Qg;return fh.xt.At(t,e.tn(0)),e.Yt()}wn(t,e){const a=new Qg;return fh.xt.At(Am(this.databaseId,e),a.tn(function(c){const h=oh(c);return h.length===0?0:h[h.length-1].kind}(t))),a.Yt()}Vn(t,e,a){if(a===null)return[];let l=[];l.push(new Qg);let c=0;for(const h of oh(t)){const g=a[c++];for(const m of l)if(this.Sn(e,h.fieldPath)&&Cm(g))l=this.bn(l,h,g);else{const _=m.tn(h.kind);fh.xt.At(g,_)}}return this.Dn(l)}Rn(t,e,a){return this.Vn(t,e,a.position)}Dn(t){const e=[];for(let a=0;a<t.length;++a)e[a]=t[a].Yt();return e}bn(t,e,a){const l=[...t],c=[];for(const h of a.arrayValue.values||[])for(const g of l){const m=new Qg;m.seed(g.Yt()),fh.xt.At(h,m.tn(e.kind)),c.push(m)}return c}Sn(t,e){return!!t.filters.find(a=>a instanceof Ze&&a.field.isEqual(e)&&(a.op==="in"||a.op==="not-in"))}getFieldIndexes(t,e){const a=Xg(t),l=Rf(t);return(e?a.G(s_,IDBKeyRange.bound(e,e)):a.G()).next(c=>{const h=[];return _t.forEach(c,g=>l.get([g.indexId,this.uid]).next(m=>{h.push(function(E,A){const D=A?new ym(A.sequenceNumber,new ms(Nh(A.readTime),new Zt(mo(A.documentKey)),A.largestBatchId)):ym.empty(),C=E.fields.map(([R,P])=>new Ep(di.fromServerFormat(R),P));return new zp(E.indexId,E.collectionGroup,C,D)}(g,m))})).next(()=>h)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((a,l)=>{const c=a.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:_e(a.collectionGroup,l.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,a){const l=Xg(t),c=Rf(t);return this.vn(t).next(h=>l.G(s_,IDBKeyRange.bound(e,e)).next(g=>_t.forEach(g,m=>c.put(iS(m.indexId,this.uid,h,a)))))}updateIndexEntries(t,e){const a=new Map;return _t.forEach(e,(l,c)=>{const h=a.get(l.collectionGroup);return(h?_t.resolve(h):this.getFieldIndexes(t,l.collectionGroup)).next(g=>(a.set(l.collectionGroup,g),_t.forEach(g,m=>this.Cn(t,l,m).next(_=>{const E=this.Fn(c,m);return _.isEqual(E)?_t.resolve():this.Mn(t,c,m,_,E)}))))})}xn(t,e,a,l){return Cf(t).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.wn(a,e.key),documentKey:e.key.path.toArray()})}On(t,e,a,l){return Cf(t).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.wn(a,e.key),e.key.path.toArray()])}Cn(t,e,a){const l=Cf(t);let c=new Rn(ec);return l.Z({index:dT,range:IDBKeyRange.only([a.indexId,this.uid,this.wn(a,e)])},(h,g)=>{c=c.add(new dh(a.indexId,e,g.arrayValue,g.directionalValue))}).next(()=>c)}Fn(t,e){let a=new Rn(ec);const l=this.yn(e,t);if(l==null)return a;const c=a_(e);if(c!=null){const h=t.data.field(c.fieldPath);if(Cm(h))for(const g of h.arrayValue.values||[])a=a.add(new dh(e.indexId,t.key,this.fn(g),l))}else a=a.add(new dh(e.indexId,t.key,cp,l));return a}Mn(t,e,a,l,c){jt(cS,"Updating index entries for document '%s'",e.key);const h=[];return function(m,_,E,A,D){const C=m.getIterator(),R=_.getIterator();let P=bf(C),U=bf(R);for(;P||U;){let H=!1,N=!1;if(P&&U){const x=E(P,U);x<0?N=!0:x>0&&(H=!0)}else P!=null?N=!0:H=!0;H?(A(U),U=bf(R)):N?(D(P),P=bf(C)):(P=bf(C),U=bf(R))}}(l,c,ec,g=>{h.push(this.xn(t,e,a,g))},g=>{h.push(this.On(t,e,a,g))}),_t.waitFor(h)}vn(t){let e=1;return Rf(t).Z({index:fT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,l,c)=>{c.done(),e=l.sequenceNumber+1}).next(()=>e)}createRange(t,e,a){a=a.sort((h,g)=>ec(h,g)).filter((h,g,m)=>!g||ec(h,m[g-1])!==0);const l=[];l.push(t);for(const h of a){const g=ec(h,t),m=ec(h,e);if(g===0)l[0]=t.nn();else if(g>0&&m<0)l.push(h),l.push(h.nn());else if(m>0)break}l.push(e);const c=[];for(let h=0;h<l.length;h+=2){if(this.Nn(l[h],l[h+1]))return[];const g=[l[h].indexId,this.uid,l[h].arrayValue,l[h].directionalValue,cp,[]],m=[l[h+1].indexId,this.uid,l[h+1].arrayValue,l[h+1].directionalValue,cp,[]];c.push(IDBKeyRange.bound(g,m))}return c}Nn(t,e){return ec(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(fS)}getMinOffset(t,e){return _t.mapArray(this.dn(e),a=>this.An(t,a).next(l=>l||te())).next(fS)}}function hS(i){return Wi(i,Sm)}function Cf(i){return Wi(i,jp)}function Xg(i){return Wi(i,tv)}function Rf(i){return Wi(i,Fp)}function fS(i){ie(i.length!==0);let t=i[0].indexState.offset,e=t.largestBatchId;for(let a=1;a<i.length;a++){const l=i[a].indexState.offset;W_(l,t)<0&&(t=l),e<l.largestBatchId&&(e=l.largestBatchId)}return new ms(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g3=41943040;class $a{static withCacheSize(t){return new $a(t,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(i,t,e){const a=i.store(xl),l=i.store(Bf),c=[],h=IDBKeyRange.only(e.batchId);let g=0;const m=a.Z({range:h},(E,A,D)=>(g++,D.delete()));c.push(m.next(()=>{ie(g===1)}));const _=[];for(const E of e.mutations){const A=uT(t,E.key.path,e.batchId);c.push(l.delete(A)),_.push(E.key)}return _t.waitFor(c).next(()=>_)}function Wp(i){if(!i)return 0;let t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw te();t=i.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$a.DEFAULT_COLLECTION_PERCENTILE=10,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$a.DEFAULT=new $a(g3,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$a.DISABLED=new $a(-1,0,0);class Cy{constructor(t,e,a,l){this.userId=t,this.serializer=e,this.indexManager=a,this.referenceDelegate=l,this.Bn={}}static It(t,e,a,l){ie(t.uid!=="");const c=t.isAuthenticated()?t.uid:"";return new Cy(c,e,a,l)}checkEmpty(t){let e=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).Z({index:mh,range:a},(l,c,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,a,l){const c=Mf(t),h=nc(t);return h.add({}).next(g=>{ie(typeof g=="number");const m=new ov(g,e,a,l),_=function(C,R,P){const U=P.baseMutations.map(N=>Qp(C.Tt,N)),H=P.mutations.map(N=>Qp(C.Tt,N));return{userId:R,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:U,mutations:H}}(this.serializer,this.userId,m),E=[];let A=new Rn((D,C)=>_e(D.canonicalString(),C.canonicalString()));for(const D of l){const C=uT(this.userId,D.key.path,g);A=A.add(D.key.path.popLast()),E.push(h.put(_)),E.push(c.put(C,IR))}return A.forEach(D=>{E.push(this.indexManager.addToCollectionParentIndex(t,D))}),t.addOnCommittedListener(()=>{this.Bn[g]=m.keys()}),_t.waitFor(E).next(()=>m)})}lookupMutationBatch(t,e){return nc(t).get(e).next(a=>a?(ie(a.userId===this.userId),hh(this.serializer,a)):null)}Ln(t,e){return this.Bn[e]?_t.resolve(this.Bn[e]):this.lookupMutationBatch(t,e).next(a=>{if(a){const l=a.keys();return this.Bn[e]=l,l}return null})}getNextMutationBatchAfterBatchId(t,e){const a=e+1,l=IDBKeyRange.lowerBound([this.userId,a]);let c=null;return nc(t).Z({index:mh,range:l},(h,g,m)=>{g.userId===this.userId&&(ie(g.batchId>=a),c=hh(this.serializer,g)),m.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=ph;return nc(t).Z({index:mh,range:e,reverse:!0},(l,c,h)=>{a=c.batchId,h.done()}).next(()=>a)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ph],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).G(mh,e).next(a=>a.map(l=>hh(this.serializer,l)))}getAllMutationBatchesAffectingDocumentKey(t,e){const a=Sp(this.userId,e.path),l=IDBKeyRange.lowerBound(a),c=[];return Mf(t).Z({range:l},(h,g,m)=>{const[_,E,A]=h,D=mo(E);if(_===this.userId&&e.path.isEqual(D))return nc(t).get(A).next(C=>{if(!C)throw te();ie(C.userId===this.userId),c.push(hh(this.serializer,C))});m.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(t,e){let a=new Rn(_e);const l=[];return e.forEach(c=>{const h=Sp(this.userId,c.path),g=IDBKeyRange.lowerBound(h),m=Mf(t).Z({range:g},(_,E,A)=>{const[D,C,R]=_,P=mo(C);D===this.userId&&c.path.isEqual(P)?a=a.add(R):A.done()});l.push(m)}),_t.waitFor(l).next(()=>this.kn(t,a))}getAllMutationBatchesAffectingQuery(t,e){const a=e.path,l=a.length+1,c=Sp(this.userId,a),h=IDBKeyRange.lowerBound(c);let g=new Rn(_e);return Mf(t).Z({range:h},(m,_,E)=>{const[A,D,C]=m,R=mo(D);A===this.userId&&a.isPrefixOf(R)?R.length===l&&(g=g.add(C)):E.done()}).next(()=>this.kn(t,g))}kn(t,e){const a=[],l=[];return e.forEach(c=>{l.push(nc(t).get(c).next(h=>{if(h===null)throw te();ie(h.userId===this.userId),a.push(hh(this.serializer,h))}))}),_t.waitFor(l).next(()=>a)}removeMutationBatch(t,e){return m3(t.ue,this.userId,e).next(a=>(t.addOnCommittedListener(()=>{this.qn(e.batchId)}),_t.forEach(a,l=>this.referenceDelegate.markPotentiallyOrphaned(t,l))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return _t.resolve();const a=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),l=[];return Mf(t).Z({range:a},(c,h,g)=>{if(c[0]===this.userId){const m=mo(c[1]);l.push(m)}else g.done()}).next(()=>{ie(l.length===0)})})}containsKey(t,e){return p3(t,this.userId,e)}Qn(t){return y3(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:ph,lastStreamToken:""})}}function p3(i,t,e){const a=Sp(t,e.path),l=a[1],c=IDBKeyRange.lowerBound(a);let h=!1;return Mf(i).Z({range:c,Y:!0},(g,m,_)=>{const[E,A,D]=g;E===t&&A===l&&(h=!0),_.done()}).next(()=>h)}function nc(i){return Wi(i,xl)}function Mf(i){return Wi(i,Bf)}function y3(i){return Wi(i,vm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new xh(0)}static Kn(){return new xh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Wn(t).next(e=>{const a=new xh(e.highestTargetId);return e.highestTargetId=a.next(),this.Gn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(e=>le.fromTimestamp(new gi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,a){return this.Wn(t).next(l=>(l.highestListenSequenceNumber=e,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),e>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=e),this.Gn(t,l)))}addTargetData(t,e){return this.zn(t,e).next(()=>this.Wn(t).next(a=>(a.targetCount+=1,this.jn(e,a),this.Gn(t,a))))}updateTargetData(t,e){return this.zn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>wf(t).delete(e.targetId)).next(()=>this.Wn(t)).next(a=>(ie(a.targetCount>0),a.targetCount-=1,this.Gn(t,a)))}removeTargets(t,e,a){let l=0;const c=[];return wf(t).Z((h,g)=>{const m=am(g);m.sequenceNumber<=e&&a.get(m.targetId)===null&&(l++,c.push(this.removeTargetData(t,m)))}).next(()=>_t.waitFor(c)).next(()=>l)}forEachTarget(t,e){return wf(t).Z((a,l)=>{const c=am(l);e(c)})}Wn(t){return gS(t).get(Gp).next(e=>(ie(e!==null),e))}Gn(t,e){return gS(t).put(Gp,e)}zn(t,e){return wf(t).put(c3(this.serializer,e))}jn(t,e){let a=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,a=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,a=!0),a}getTargetCount(t){return this.Wn(t).next(e=>e.targetCount)}getTargetData(t,e){const a=Rh(e),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let c=null;return wf(t).Z({range:l,index:hT},(h,g,m)=>{const _=am(g);Lm(e,_.target)&&(c=_,m.done())}).next(()=>c)}addMatchingKeys(t,e,a){const l=[],c=lc(t);return e.forEach(h=>{const g=tr(h.path);l.push(c.put({targetId:a,path:g})),l.push(this.referenceDelegate.addReference(t,a,h))}),_t.waitFor(l)}removeMatchingKeys(t,e,a){const l=lc(t);return _t.forEach(e,c=>{const h=tr(c.path);return _t.waitFor([l.delete([a,h]),this.referenceDelegate.removeReference(t,a,c)])})}removeMatchingKeysForTargetId(t,e){const a=lc(t),l=IDBKeyRange.bound([e],[e+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(t,e){const a=IDBKeyRange.bound([e],[e+1],!1,!0),l=lc(t);let c=ze();return l.Z({range:a,Y:!0},(h,g,m)=>{const _=mo(h[1]),E=new Zt(_);c=c.add(E)}).next(()=>c)}containsKey(t,e){const a=tr(e.path),l=IDBKeyRange.bound([a],[aT(a)],!1,!0);let c=0;return lc(t).Z({index:$_,Y:!0,range:l},([h,g],m,_)=>{h!==0&&(c++,_.done())}).next(()=>c>0)}lt(t,e){return wf(t).get(e).next(a=>a?am(a):null)}}function wf(i){return Wi(i,Gf)}function gS(i){return Wi(i,yh)}function lc(i){return Wi(i,Ff)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",aN=1048576;function pS([i,t],[e,a]){const l=_e(i,e);return l===0?_e(t,a):l}class rN{constructor(t){this.Hn=t,this.buffer=new Rn(pS),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const a=this.buffer.last();pS(e,a)<0&&(this.buffer=this.buffer.delete(a).add(e))}}get maxValue(){return this.buffer.last()[0]}}class _3{constructor(t,e,a){this.garbageCollector=t,this.asyncQueue=e,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){jt(mS,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){bc(e)?jt(mS,"Ignoring IndexedDB error during garbage collection: ",e):await Oh(e)}await this.er(3e5)})}}class sN{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(a=>Math.floor(e/100*a))}nthSequenceNumber(t,e){if(e===0)return _t.resolve(qs.ae);const a=new rN(e);return this.tr.forEachTarget(t,l=>a.Zn(l.sequenceNumber)).next(()=>this.tr.rr(t,l=>a.Zn(l))).next(()=>a.maxValue)}removeTargets(t,e,a){return this.tr.removeTargets(t,e,a)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(jt("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(dS)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let a,l,c,h,g,m,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,h=Date.now(),this.nthSequenceNumber(t,l))).next(A=>(a=A,g=Date.now(),this.removeTargets(t,a,e))).next(A=>(c=A,m=Date.now(),this.removeOrphanedDocuments(t,a))).next(A=>(_=Date.now(),xf()<=Xe.DEBUG&&jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${l} in `+(g-h)+`ms
	Removed ${c} targets in `+(m-g)+`ms
	Removed ${A} documents in `+(_-m)+`ms
Total Duration: ${_-E}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:A})))}}function v3(i,t){return new sN(i,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,e){this.db=t,this.garbageCollector=v3(this,e)}nr(t){const e=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(a=>e.next(l=>a+l))}sr(t){let e=0;return this.rr(t,a=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}rr(t,e){return this._r(t,(a,l)=>e(l))}addReference(t,e,a){return hp(t,a)}removeReference(t,e,a){return hp(t,a)}removeTargets(t,e,a){return this.db.getTargetCache().removeTargets(t,e,a)}markPotentiallyOrphaned(t,e){return hp(t,e)}ar(t,e){return function(l,c){let h=!1;return y3(l).X(g=>p3(l,g,c).next(m=>(m&&(h=!0),_t.resolve(!m)))).next(()=>h)}(t,e)}removeOrphanedDocuments(t,e){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this._r(t,(h,g)=>{if(g<=e){const m=this.ar(t,h).next(_=>{if(!_)return c++,a.getEntry(t,h).next(()=>(a.removeEntry(h,le.min()),lc(t).delete(function(A){return[0,tr(A.path)]}(h))))});l.push(m)}}).next(()=>_t.waitFor(l)).next(()=>a.apply(t)).next(()=>c)}removeTarget(t,e){const a=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,a)}updateLimboDocument(t,e){return hp(t,e)}_r(t,e){const a=lc(t);let l,c=qs.ae;return a.Z({index:$_},([h,g],{path:m,sequenceNumber:_})=>{h===0?(c!==qs.ae&&e(new Zt(mo(l)),c),c=_,l=m):c=qs.ae}).next(()=>{c!==qs.ae&&e(new Zt(mo(l)),c)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function hp(i,t){return lc(i).put(function(a,l){return{targetId:0,path:tr(a.path),sequenceNumber:l}}(t,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.changes=new fu(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ci.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const a=this.changes.get(e);return a!==void 0?_t.resolve(a):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,a){return sh(t).put(a)}removeEntry(t,e,a){return sh(t).delete(function(c,h){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Xp(h),g[g.length-1]]}(e,a))}updateMetadata(t,e){return this.getMetadata(t).next(a=>(a.byteSize+=e,this.ur(t,a)))}getEntry(t,e){let a=Ci.newInvalidDocument(e);return sh(t).Z({index:Tp,range:IDBKeyRange.only(Zg(e))},(l,c)=>{a=this.cr(e,c)}).next(()=>a)}lr(t,e){let a={size:0,document:Ci.newInvalidDocument(e)};return sh(t).Z({index:Tp,range:IDBKeyRange.only(Zg(e))},(l,c)=>{a={document:this.cr(e,c),size:Wp(c)}}).next(()=>a)}getEntries(t,e){let a=gs();return this.hr(t,e,(l,c)=>{const h=this.cr(l,c);a=a.insert(l,h)}).next(()=>a)}Pr(t,e){let a=gs(),l=new Xn(Zt.comparator);return this.hr(t,e,(c,h)=>{const g=this.cr(c,h);a=a.insert(c,g),l=l.insert(c,Wp(h))}).next(()=>({documents:a,Tr:l}))}hr(t,e,a){if(e.isEmpty())return _t.resolve();let l=new Rn(vS);e.forEach(m=>l=l.add(m));const c=IDBKeyRange.bound(Zg(l.first()),Zg(l.last())),h=l.getIterator();let g=h.getNext();return sh(t).Z({index:Tp,range:c},(m,_,E)=>{const A=Zt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;g&&vS(g,A)<0;)a(g,null),g=h.getNext();g&&g.isEqual(A)&&(a(g,_),g=h.hasNext()?h.getNext():null),g?E.W(Zg(g)):E.done()}).next(()=>{for(;g;)a(g,null),g=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(t,e,a,l,c){const h=e.path,g=[h.popLast().toArray(),h.lastSegment(),Xp(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sh(t).G(IDBKeyRange.bound(g,m,!0)).next(_=>{c==null||c.incrementDocumentReadCount(_.length);let E=gs();for(const A of _){const D=this.cr(Zt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);D.isFoundDocument()&&(zm(e,D)||l.has(D.key))&&(E=E.insert(D.key,D))}return E})}getAllFromCollectionGroup(t,e,a,l){let c=gs();const h=_S(e,a),g=_S(e,ms.max());return sh(t).Z({index:cT,range:IDBKeyRange.bound(h,g,!0)},(m,_,E)=>{const A=this.cr(Zt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);c=c.insert(A.key,A),c.size===l&&E.done()}).next(()=>c)}newChangeBuffer(t){return new uN(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return yS(t).get(r_).next(e=>(ie(!!e),e))}ur(t,e){return yS(t).put(r_,e)}cr(t,e){if(e){const a=Yw(this.serializer,e);if(!(a.isNoDocument()&&a.version.isEqual(le.min())))return a}return Ci.newInvalidDocument(t)}}function S3(i){return new oN(i)}class uN extends E3{constructor(t,e){super(),this.Ir=t,this.trackRemovals=e,this.Er=new fu(a=>a.toString(),(a,l)=>a.isEqual(l))}applyChanges(t){const e=[];let a=0,l=new Rn((c,h)=>_e(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const g=this.Er.get(c);if(e.push(this.Ir.removeEntry(t,c,g.readTime)),h.isValidDocument()){const m=eS(this.Ir.serializer,h);l=l.add(c.path.popLast());const _=Wp(m);a+=_-g.size,e.push(this.Ir.addEntry(t,c,m))}else if(a-=g.size,this.trackRemovals){const m=eS(this.Ir.serializer,h.convertToNoDocument(le.min()));e.push(this.Ir.addEntry(t,c,m))}}),l.forEach(c=>{e.push(this.Ir.indexManager.addToCollectionParentIndex(t,c))}),e.push(this.Ir.updateMetadata(t,a)),_t.waitFor(e)}getFromCache(t,e){return this.Ir.lr(t,e).next(a=>(this.Er.set(e,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(t,e){return this.Ir.Pr(t,e).next(({documents:a,Tr:l})=>(l.forEach((c,h)=>{this.Er.set(c,{size:h,readTime:a.get(c).readTime})}),a))}}function yS(i){return Wi(i,Em)}function sh(i){return Wi(i,Bp)}function Zg(i){const t=i.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _S(i,t){const e=t.documentKey.path.toArray();return[i,Xp(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function vS(i,t){const e=i.path.toArray(),a=t.path.toArray();let l=0;for(let c=0;c<e.length-2&&c<a.length-2;++c)if(l=_e(e[c],a[c]),l)return l;return l=_e(e.length,a.length),l||(l=_e(e[e.length-2],a[a.length-2]),l||_e(e[e.length-1],a[a.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t,e,a,l){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=a,this.indexManager=l}getDocument(t,e){let a=null;return this.documentOverlayCache.getOverlay(t,e).next(l=>(a=l,this.remoteDocumentCache.getEntry(t,e))).next(l=>(a!==null&&fm(a.mutation,l,Ks.empty(),gi.now()),l))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(a=>this.getLocalViewOfDocuments(t,a,ze()).next(()=>a))}getLocalViewOfDocuments(t,e,a=ze()){const l=po();return this.populateOverlays(t,l,e).next(()=>this.computeViews(t,e,l,a).next(c=>{let h=nm();return c.forEach((g,m)=>{h=h.insert(g,m.overlayedDocument)}),h}))}getOverlayedDocuments(t,e){const a=po();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,ze()))}populateOverlays(t,e,a){const l=[];return a.forEach(c=>{e.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((h,g)=>{e.set(h,g)})})}computeViews(t,e,a,l){let c=gs();const h=hm(),g=function(){return hm()}();return e.forEach((m,_)=>{const E=a.get(_.key);l.has(_.key)&&(E===void 0||E.mutation instanceof Ac)?c=c.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),fm(E.mutation,_,E.mutation.getFieldMask(),gi.now())):h.set(_.key,Ks.empty())}),this.recalculateAndSaveOverlays(t,c).next(m=>(m.forEach((_,E)=>h.set(_,E)),e.forEach((_,E)=>{var A;return g.set(_,new cN(E,(A=h.get(_))!==null&&A!==void 0?A:null))}),g))}recalculateAndSaveOverlays(t,e){const a=hm();let l=new Xn((h,g)=>h-g),c=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(h=>{for(const g of h)g.keys().forEach(m=>{const _=e.get(m);if(_===null)return;let E=a.get(m)||Ks.empty();E=g.applyToLocalView(_,E),a.set(m,E);const A=(l.get(g.batchId)||ze()).add(m);l=l.insert(g.batchId,A)})}).next(()=>{const h=[],g=l.getReverseIterator();for(;g.hasNext();){const m=g.getNext(),_=m.key,E=m.value,A=BT();E.forEach(D=>{if(!c.has(D)){const C=KT(e.get(D),a.get(D));C!==null&&A.set(D,C),c=c.add(D)}}),h.push(this.documentOverlayCache.saveOverlays(t,_,A))}return _t.waitFor(h)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,e,a,l){return function(h){return Zt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):PT(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,a,l):this.getDocumentsMatchingCollectionQuery(t,e,a,l)}getNextDocuments(t,e,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,a,l).next(c=>{const h=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,a.largestBatchId,l-c.size):_t.resolve(po());let g=pm,m=c;return h.next(_=>_t.forEach(_,(E,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(E)?_t.resolve():this.remoteDocumentCache.getEntry(t,E).next(D=>{m=m.insert(E,D)}))).next(()=>this.populateOverlays(t,_,c)).next(()=>this.computeViews(t,m,_,ze())).next(E=>({batchId:g,changes:kT(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Zt(e)).next(a=>{let l=nm();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}getDocumentsMatchingCollectionGroupQuery(t,e,a,l){const c=e.collectionGroup;let h=nm();return this.indexManager.getCollectionParents(t,c).next(g=>_t.forEach(g,m=>{const _=function(A,D){return new nd(D,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e,m.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,a,l).next(E=>{E.forEach((A,D)=>{h=h.insert(A,D)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,e,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,a.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,a,c,l))).next(h=>{c.forEach((m,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Ci.newInvalidDocument(E)))});let g=nm();return h.forEach((m,_)=>{const E=c.get(m);E!==void 0&&fm(E.mutation,_,Ks.empty(),gi.now()),zm(e,_)&&(g=g.insert(m,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return _t.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(l){return{id:l.id,version:l.version,createTime:_r(l.createTime)}}(e)),_t.resolve()}getNamedQuery(t,e){return _t.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(l){return{name:l.name,query:h3(l.bundledQuery),readTime:_r(l.readTime)}}(e)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.overlays=new Xn(Zt.comparator),this.Rr=new Map}getOverlay(t,e){return _t.resolve(this.overlays.get(e))}getOverlays(t,e){const a=po();return _t.forEach(e,l=>this.getOverlay(t,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(t,e,a){return a.forEach((l,c)=>{this.Et(t,e,c)}),_t.resolve()}removeOverlaysForBatchId(t,e,a){const l=this.Rr.get(a);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),_t.resolve()}getOverlaysForCollection(t,e,a){const l=po(),c=e.length+1,h=new Zt(e.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const m=g.getNext().value,_=m.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===c&&m.largestBatchId>a&&l.set(m.getKey(),m)}return _t.resolve(l)}getOverlaysForCollectionGroup(t,e,a,l){let c=new Xn((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>a){let E=c.get(_.largestBatchId);E===null&&(E=po(),c=c.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const g=po(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((_,E)=>g.set(_,E)),!(g.size()>=l)););return _t.resolve(g)}Et(t,e,a){const l=this.overlays.get(a.key);if(l!==null){const h=this.Rr.get(l.largestBatchId).delete(a.key);this.Rr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new cv(e,a));let c=this.Rr.get(e);c===void 0&&(c=ze(),this.Rr.set(e,c)),this.Rr.set(e,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.sessionToken=Bi.EMPTY_BYTE_STRING}getSessionToken(t){return _t.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.Vr=new Rn(ma.mr),this.gr=new Rn(ma.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const a=new ma(t,e);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,e){t.forEach(a=>this.addReference(a,e))}removeReference(t,e){this.wr(new ma(t,e))}Sr(t,e){t.forEach(a=>this.removeReference(a,e))}br(t){const e=new Zt(new En([])),a=new ma(e,t),l=new ma(e,t+1),c=[];return this.gr.forEachInRange([a,l],h=>{this.wr(h),c.push(h.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new Zt(new En([])),a=new ma(e,t),l=new ma(e,t+1);let c=ze();return this.gr.forEachInRange([a,l],h=>{c=c.add(h.key)}),c}containsKey(t){const e=new ma(t,0),a=this.Vr.firstAfterOrEqual(e);return a!==null&&t.isEqual(a.key)}}class ma{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return Zt.comparator(t.key,e.key)||_e(t.Cr,e.Cr)}static pr(t,e){return _e(t.Cr,e.Cr)||Zt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Rn(ma.mr)}checkEmpty(t){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,a,l){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ov(c,e,a,l);this.mutationQueue.push(h);for(const g of l)this.Mr=this.Mr.add(new ma(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return _t.resolve(h)}lookupMutationBatch(t,e){return _t.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const a=e+1,l=this.Nr(a),c=l<0?0:l;return _t.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?ph:this.Fr-1)}getAllMutationBatches(t){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const a=new ma(e,0),l=new ma(e,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,l],h=>{const g=this.Or(h.Cr);c.push(g)}),_t.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,e){let a=new Rn(_e);return e.forEach(l=>{const c=new ma(l,0),h=new ma(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,h],g=>{a=a.add(g.Cr)})}),_t.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,e){const a=e.path,l=a.length+1;let c=a;Zt.isDocumentKey(c)||(c=c.child(""));const h=new ma(new Zt(c),0);let g=new Rn(_e);return this.Mr.forEachWhile(m=>{const _=m.key.path;return!!a.isPrefixOf(_)&&(_.length===l&&(g=g.add(m.Cr)),!0)},h),_t.resolve(this.Br(g))}Br(t){const e=[];return t.forEach(a=>{const l=this.Or(a);l!==null&&e.push(l)}),e}removeMutationBatch(t,e){ie(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return _t.forEach(e.mutations,l=>{const c=new ma(l.key,e.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,e){const a=new ma(e,0),l=this.Mr.firstAfterOrEqual(a);return _t.resolve(e.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,_t.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t){this.kr=t,this.docs=function(){return new Xn(Zt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const a=e.key,l=this.docs.get(a),c=l?l.size:0,h=this.kr(e);return this.docs=this.docs.insert(a,{document:e.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const a=this.docs.get(e);return _t.resolve(a?a.document.mutableCopy():Ci.newInvalidDocument(e))}getEntries(t,e){let a=gs();return e.forEach(l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Ci.newInvalidDocument(l))}),_t.resolve(a)}getDocumentsMatchingQuery(t,e,a,l){let c=gs();const h=e.path,g=new Zt(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(g);for(;m.hasNext();){const{key:_,value:{document:E}}=m.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||W_(rT(E),a)<=0||(l.has(E.key)||zm(e,E))&&(c=c.insert(E.key,E.mutableCopy()))}return _t.resolve(c)}getAllFromCollectionGroup(t,e,a,l){te()}qr(t,e){return _t.forEach(this.docs,a=>e(a))}newChangeBuffer(t){return new pN(this)}getSize(t){return _t.resolve(this.size)}}class pN extends E3{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((a,l)=>{l.isValidDocument()?e.push(this.Ir.addEntry(t,l)):this.Ir.removeEntry(a)}),_t.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(t){this.persistence=t,this.Qr=new fu(e=>Rh(e),Lm),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.$r=0,this.Ur=new mv,this.targetCount=0,this.Kr=xh.Un()}forEachTarget(t,e){return this.Qr.forEach((a,l)=>e(l)),_t.resolve()}getLastRemoteSnapshotVersion(t){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _t.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(t,e,a){return a&&(this.lastRemoteSnapshotVersion=a),e>this.$r&&(this.$r=e),_t.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new xh(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,_t.resolve()}updateTargetData(t,e){return this.zn(e),_t.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,_t.resolve()}removeTargets(t,e,a){let l=0;const c=[];return this.Qr.forEach((h,g)=>{g.sequenceNumber<=e&&a.get(g.targetId)===null&&(this.Qr.delete(h),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),_t.waitFor(c).next(()=>l)}getTargetCount(t){return _t.resolve(this.targetCount)}getTargetData(t,e){const a=this.Qr.get(e)||null;return _t.resolve(a)}addMatchingKeys(t,e,a){return this.Ur.yr(e,a),_t.resolve()}removeMatchingKeys(t,e,a){this.Ur.Sr(e,a);const l=this.persistence.referenceDelegate,c=[];return l&&e.forEach(h=>{c.push(l.markPotentiallyOrphaned(t,h))}),_t.waitFor(c)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),_t.resolve()}getMatchingKeysForTargetId(t,e){const a=this.Ur.vr(e);return _t.resolve(a)}containsKey(t,e){return _t.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new qs(0),this.zr=!1,this.zr=!0,this.jr=new dN,this.referenceDelegate=t(this),this.Hr=new yN(this),this.indexManager=new eN,this.remoteDocumentCache=function(l){return new mN(l)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new u3(e),this.Yr=new hN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let a=this.Wr[t.toKey()];return a||(a=new gN(e,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,a){jt("MemoryPersistence","Starting transaction:",t);const l=new _N(this.Gr.next());return this.referenceDelegate.Zr(),a(l).next(c=>this.referenceDelegate.Xr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}ei(t,e){return _t.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,e)))}}class _N extends lT{constructor(t){super(),this.currentSequenceNumber=t}}class Ry{constructor(t){this.persistence=t,this.ti=new mv,this.ni=null}static ri(t){return new Ry(t)}get ii(){if(this.ni)return this.ni;throw te()}addReference(t,e,a){return this.ti.addReference(a,e),this.ii.delete(a.toString()),_t.resolve()}removeReference(t,e,a){return this.ti.removeReference(a,e),this.ii.add(a.toString()),_t.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),_t.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(l=>this.ii.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,e.targetId).next(l=>{l.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.ii,a=>{const l=Zt.fromPath(a);return this.si(t,l).next(c=>{c||e.removeEntry(l,le.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(a=>{a?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return _t.or([()=>_t.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Jp{constructor(t,e){this.persistence=t,this.oi=new fu(a=>tr(a.path),(a,l)=>a.isEqual(l)),this.garbageCollector=v3(this,e)}static ri(t,e){return new Jp(t,e)}Zr(){}Xr(t){return _t.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>e.next(l=>a+l))}sr(t){let e=0;return this.rr(t,a=>{e++}).next(()=>e)}rr(t,e){return _t.forEach(this.oi,(a,l)=>this.ar(t,a,l).next(c=>c?_t.resolve():e(l)))}removeTargets(t,e,a){return this.persistence.getTargetCache().removeTargets(t,e,a)}removeOrphanedDocuments(t,e){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.qr(t,h=>this.ar(t,h,e).next(g=>{g||(a++,c.removeEntry(h,le.min()))})).next(()=>c.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),_t.resolve()}removeTarget(t,e){const a=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,e,a){return this.oi.set(a,t.currentSequenceNumber),_t.resolve()}removeReference(t,e,a){return this.oi.set(a,t.currentSequenceNumber),_t.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),_t.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ap(t.data.value)),e}ar(t,e,a){return _t.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const l=this.oi.get(e);return _t.resolve(l!==void 0&&l>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(t){this.serializer=t}B(t,e,a,l){const c=new hy("createOrUpgrade",e);a<1&&l>=1&&(function(m){m.createObjectStore(Um)}(t),function(m){m.createObjectStore(vm,{keyPath:DR}),m.createObjectStore(xl,{keyPath:I4,autoIncrement:!0}).createIndex(mh,O4,{unique:!0}),m.createObjectStore(Bf)}(t),ES(t),function(m){m.createObjectStore(uh)}(t));let h=_t.resolve();return a<3&&l>=3&&(a!==0&&(function(m){m.deleteObjectStore(Ff),m.deleteObjectStore(Gf),m.deleteObjectStore(yh)}(t),ES(t)),h=h.next(()=>function(m){const _=m.store(yh),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return _.put(Gp,E)}(c))),a<4&&l>=4&&(a!==0&&(h=h.next(()=>function(m,_){return _.store(xl).G().next(A=>{m.deleteObjectStore(xl),m.createObjectStore(xl,{keyPath:I4,autoIncrement:!0}).createIndex(mh,O4,{unique:!0});const D=_.store(xl),C=A.map(R=>D.put(R));return _t.waitFor(C)})}(t,c))),h=h.next(()=>{(function(m){m.createObjectStore(jf,{keyPath:kR})})(t)})),a<5&&l>=5&&(h=h.next(()=>this._i(c))),a<6&&l>=6&&(h=h.next(()=>(function(m){m.createObjectStore(Em)}(t),this.ai(c)))),a<7&&l>=7&&(h=h.next(()=>this.ui(c))),a<8&&l>=8&&(h=h.next(()=>this.ci(t,c))),a<9&&l>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)})),a<10&&l>=10&&(h=h.next(()=>this.li(c))),a<11&&l>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(dy,{keyPath:BR})})(t),function(m){m.createObjectStore(gy,{keyPath:GR})}(t)})),a<12&&l>=12&&(h=h.next(()=>{(function(m){const _=m.createObjectStore(my,{keyPath:QR});_.createIndex(l_,XR,{unique:!1}),_.createIndex(gT,ZR,{unique:!1})})(t)})),a<13&&l>=13&&(h=h.next(()=>function(m){const _=m.createObjectStore(Bp,{keyPath:OR});_.createIndex(Tp,MR),_.createIndex(cT,VR)}(t)).next(()=>this.hi(t,c)).next(()=>t.deleteObjectStore(uh))),a<14&&l>=14&&(h=h.next(()=>this.Pi(t,c))),a<15&&l>=15&&(h=h.next(()=>function(m){m.createObjectStore(tv,{keyPath:FR,autoIncrement:!0}).createIndex(s_,jR,{unique:!1}),m.createObjectStore(Fp,{keyPath:HR}).createIndex(fT,qR,{unique:!1}),m.createObjectStore(jp,{keyPath:KR}).createIndex(dT,YR,{unique:!1})}(t))),a<16&&l>=16&&(h=h.next(()=>{e.objectStore(Fp).clear()}).next(()=>{e.objectStore(jp).clear()})),a<17&&l>=17&&(h=h.next(()=>{(function(m){m.createObjectStore(ev,{keyPath:WR})})(t)})),h}ai(t){let e=0;return t.store(uh).Z((a,l)=>{e+=Wp(l)}).next(()=>{const a={byteSize:e};return t.store(Em).put(r_,a)})}_i(t){const e=t.store(vm),a=t.store(xl);return e.G().next(l=>_t.forEach(l,c=>{const h=IDBKeyRange.bound([c.userId,ph],[c.userId,c.lastAcknowledgedBatchId]);return a.G(mh,h).next(g=>_t.forEach(g,m=>{ie(m.userId===c.userId);const _=hh(this.serializer,m);return m3(t,c.userId,_).next(()=>{})}))}))}ui(t){const e=t.store(Ff),a=t.store(uh);return t.store(yh).get(Gp).next(l=>{const c=[];return a.Z((h,g)=>{const m=new En(h),_=function(A){return[0,tr(A)]}(m);c.push(e.get(_).next(E=>E?_t.resolve():(A=>e.put({targetId:0,path:tr(A),sequenceNumber:l.highestListenSequenceNumber}))(m)))}).next(()=>_t.waitFor(c))})}ci(t,e){t.createObjectStore(Sm,{keyPath:zR});const a=e.store(Sm),l=new gv,c=h=>{if(l.add(h)){const g=h.lastSegment(),m=h.popLast();return a.put({collectionId:g,parent:tr(m)})}};return e.store(uh).Z({Y:!0},(h,g)=>{const m=new En(h);return c(m.popLast())}).next(()=>e.store(Bf).Z({Y:!0},([h,g,m],_)=>{const E=mo(g);return c(E.popLast())}))}li(t){const e=t.store(Gf);return e.Z((a,l)=>{const c=am(l),h=c3(this.serializer,c);return e.put(h)})}hi(t,e){const a=e.store(uh),l=[];return a.Z((c,h)=>{const g=e.store(Bp),m=function(A){return A.document?new Zt(En.fromString(A.document.name).popFirst(5)):A.noDocument?Zt.fromSegments(A.noDocument.path):A.unknownDocument?Zt.fromSegments(A.unknownDocument.path):te()}(h).path.toArray(),_={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};l.push(g.put(_))}).next(()=>_t.waitFor(l))}Pi(t,e){const a=e.store(xl),l=S3(this.serializer),c=new pv(Ry.ri,this.serializer.Tt);return a.G().next(h=>{const g=new Map;return h.forEach(m=>{var _;let E=(_=g.get(m.userId))!==null&&_!==void 0?_:ze();hh(this.serializer,m).keys().forEach(A=>E=E.add(A)),g.set(m.userId,E)}),_t.forEach(g,(m,_)=>{const E=new Ia(_),A=Ay.It(this.serializer,E),D=c.getIndexManager(E),C=Cy.It(E,this.serializer,D,c.referenceDelegate);return new T3(l,C,A,D).recalculateAndSaveOverlaysForDocumentKeys(new o_(e,qs.ae),m).next()})})}}function ES(i){i.createObjectStore(Ff,{keyPath:UR}).createIndex($_,LR,{unique:!0}),i.createObjectStore(Gf,{keyPath:"targetId"}).createIndex(hT,PR,{unique:!0}),i.createObjectStore(yh)}const ic="IndexedDbPersistence",B1=18e5,G1=5e3,F1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EN="main";class yv{constructor(t,e,a,l,c,h,g,m,_,E,A=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=a,this.Ti=c,this.window=h,this.document=g,this.Ii=_,this.Ei=E,this.di=A,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=D=>Promise.resolve(),!yv.D())throw new Xt(xt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lN(this,l),this.gi=e+EN,this.serializer=new u3(m),this.pi=new dc(this.gi,this.di,new vN(this.serializer)),this.jr=new Xw,this.Hr=new iN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=S3(this.serializer),this.Yr=new Qw,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,E===!1&&yr(ic,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xt(xt.FAILED_PRECONDITION,F1);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new qs(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>fp(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(e=>this.isPrimary&&!e?this.xi(t).next(()=>!1):!!e&&this.Oi(t).next(()=>!0))).catch(t=>{if(bc(t))return jt(ic,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return jt(ic,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return Wg(t).get(Tf).next(e=>_t.resolve(this.Ni(e)))}Bi(t){return fp(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,B1)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const a=Wi(e,jf);return a.G().next(l=>{const c=this.qi(l,B1),h=l.filter(g=>c.indexOf(g)===-1);return _t.forEach(h,g=>a.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(this.yi)for(const e of t)this.yi.removeItem(this.Qi(e.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?_t.resolve(!0):Wg(t).get(Tf).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,G1)&&!this.$i(e.ownerId)){if(this.Ni(e)&&this.networkEnabled)return!0;if(!this.Ni(e)){if(!e.allowTabSynchronization)throw new Xt(xt.FAILED_PRECONDITION,F1);return!1}}return!(!this.networkEnabled||!this.inForeground)||fp(t).G().next(a=>this.qi(a,G1).find(l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,h=!this.inForeground&&l.inForeground,g=this.networkEnabled===l.networkEnabled;if(c||h&&g)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&jt(ic,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Um,jf],t=>{const e=new o_(t,qs.ae);return this.xi(e).next(()=>this.Bi(e))}),this.pi.close(),this.Gi()}qi(t,e){return t.filter(a=>this.ki(a.updateTimeMs,e)&&!this.$i(a.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>fp(t).G().next(e=>this.qi(e,B1).map(a=>a.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,e){return Cy.It(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new nN(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return Ay.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,e,a){jt(ic,"Starting transaction:",t);const l=e==="readonly"?"readonly":"readwrite",c=function(m){return m===17?tw:m===16?$R:m===15?nv:m===14?yT:m===13?pT:m===12?JR:m===11?mT:void te()}(this.di);let h;return this.pi.runTransaction(t,l,c,g=>(h=new o_(g,this.Gr?this.Gr.next():qs.ae),e==="readwrite-primary"?this.Fi(h).next(m=>!!m||this.Mi(h)).next(m=>{if(!m)throw yr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Xt(xt.FAILED_PRECONDITION,sT);return a(h)}).next(m=>this.Oi(h).next(()=>m)):this.ji(h).next(()=>a(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}ji(t){return Wg(t).get(Tf).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,G1)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xt(xt.FAILED_PRECONDITION,F1)})}Oi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wg(t).put(Tf,e)}static D(){return dc.D()}xi(t){const e=Wg(t);return e.get(Tf).next(a=>this.Ni(a)?(jt(ic,"Releasing primary lease."),e.delete(Tf)):_t.resolve())}ki(t,e){const a=Date.now();return!(t<a-e)&&(!(t>a)||(yr(`Detected an update time that is in the future: ${t} > ${a}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;l5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var e;try{const a=((e=this.yi)===null||e===void 0?void 0:e.getItem(this.Qi(t)))!==null;return jt(ic,`Client '${t}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return yr(ic,"Failed to get zombied client id.",a),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){yr("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Wg(i){return Wi(i,Um)}function fp(i){return Wi(i,jf)}function SN(i,t){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t,e,a,l){this.targetId=t,this.fromCache=e,this.Hi=a,this.Ji=l}static Yi(t,e){let a=ze(),l=ze();for(const c of e.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new _v(t,e.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return l5()?8:oT(Zi())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,a,l){const c={result:null};return this.rs(t,e).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ss(t,e,l,a).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new TN;return this._s(t,e,h).next(g=>{if(c.result=g,this.Xi)return this.us(t,e,h,g.size)})}).next(()=>c.result)}us(t,e,a,l){return a.documentReadCount<this.es?(xf()<=Xe.DEBUG&&jt("QueryEngine","SDK will not create cache indexes for query:",Df(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),_t.resolve()):(xf()<=Xe.DEBUG&&jt("QueryEngine","Query:",Df(e),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ts*l?(xf()<=Xe.DEBUG&&jt("QueryEngine","The SDK decides to create cache indexes for query:",Df(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ys(e))):_t.resolve())}rs(t,e){if(q4(e))return _t.resolve(null);let a=Ys(e);return this.indexManager.getIndexType(t,a).next(l=>l===0?null:(e.limit!==null&&l===1&&(e=m_(e,null,"F"),a=Ys(e)),this.indexManager.getDocumentsMatchingTarget(t,a).next(c=>{const h=ze(...c);return this.ns.getDocuments(t,h).next(g=>this.indexManager.getMinOffset(t,a).next(m=>{const _=this.cs(e,g);return this.ls(e,_,h,m.readTime)?this.rs(t,m_(e,null,"F")):this.hs(t,_,e,m)}))})))}ss(t,e,a,l){return q4(e)||l.isEqual(le.min())?_t.resolve(null):this.ns.getDocuments(t,a).next(c=>{const h=this.cs(e,c);return this.ls(e,h,a,l)?_t.resolve(null):(xf()<=Xe.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Df(e)),this.hs(t,h,e,bR(l,pm)).next(g=>g))})}cs(t,e){let a=new Rn(LT(t));return e.forEach((l,c)=>{zm(t,c)&&(a=a.add(c))}),a}ls(t,e,a,l){if(t.limit===null)return!1;if(a.size!==e.size)return!0;const c=t.limitType==="F"?e.last():e.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}_s(t,e,a){return xf()<=Xe.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",Df(e)),this.ns.getDocumentsMatchingQuery(t,e,ms.min(),a)}hs(t,e,a,l){return this.ns.getDocumentsMatchingQuery(t,a,l).next(c=>(e.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="LocalStore",bN=3e8;class AN{constructor(t,e,a,l){this.persistence=t,this.Ps=e,this.serializer=l,this.Ts=new Xn(_e),this.Is=new fu(c=>Rh(c),Lm),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new T3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function A3(i,t,e,a){return new AN(i,t,e,a)}async function C3(i,t){const e=be(i);return await e.persistence.runTransaction("Handle user change","readonly",a=>{let l;return e.mutationQueue.getAllMutationBatches(a).next(c=>(l=c,e.As(t),e.mutationQueue.getAllMutationBatches(a))).next(c=>{const h=[],g=[];let m=ze();for(const _ of l){h.push(_.batchId);for(const E of _.mutations)m=m.add(E.key)}for(const _ of c){g.push(_.batchId);for(const E of _.mutations)m=m.add(E.key)}return e.localDocuments.getDocuments(a,m).next(_=>({Rs:_,removedBatchIds:h,addedBatchIds:g}))})})}function CN(i,t){const e=be(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=t.batch.keys(),c=e.ds.newChangeBuffer({trackRemovals:!0});return function(g,m,_,E){const A=_.batch,D=A.keys();let C=_t.resolve();return D.forEach(R=>{C=C.next(()=>E.getEntry(m,R)).next(P=>{const U=_.docVersions.get(R);ie(U!==null),P.version.compareTo(U)<0&&(A.applyToRemoteDocument(P,_),P.isValidDocument()&&(P.setReadTime(_.commitVersion),E.addEntry(P)))})}),C.next(()=>g.mutationQueue.removeMutationBatch(m,A))}(e,a,t,c).next(()=>c.apply(a)).next(()=>e.mutationQueue.performConsistencyCheck(a)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(a,l,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let m=ze();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(m=m.add(g.batch.mutations[_].key));return m}(t))).next(()=>e.localDocuments.getDocuments(a,l))})}function R3(i){const t=be(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function RN(i,t){const e=be(i),a=t.snapshotVersion;let l=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=e.ds.newChangeBuffer({trackRemovals:!0});l=e.Ts;const g=[];t.targetChanges.forEach((E,A)=>{const D=l.get(A);if(!D)return;g.push(e.Hr.removeMatchingKeys(c,E.removedDocuments,A).next(()=>e.Hr.addMatchingKeys(c,E.addedDocuments,A)));let C=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(A)!==null?C=C.withResumeToken(Bi.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):E.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(E.resumeToken,a)),l=l.insert(A,C),function(P,U,H){return P.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=bN?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(D,C,E)&&g.push(e.Hr.updateTargetData(c,C))});let m=gs(),_=ze();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&g.push(e.persistence.referenceDelegate.updateLimboDocument(c,E))}),g.push(wN(c,h,t.documentUpdates).next(E=>{m=E.Vs,_=E.fs})),!a.isEqual(le.min())){const E=e.Hr.getLastRemoteSnapshotVersion(c).next(A=>e.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));g.push(E)}return _t.waitFor(g).next(()=>h.apply(c)).next(()=>e.localDocuments.getLocalViewOfDocuments(c,m,_)).next(()=>m)}).then(c=>(e.Ts=l,c))}function wN(i,t,e){let a=ze(),l=ze();return e.forEach(c=>a=a.add(c)),t.getEntries(i,a).next(c=>{let h=gs();return e.forEach((g,m)=>{const _=c.get(g);m.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),m.isNoDocument()&&m.version.isEqual(le.min())?(t.removeEntry(g,m.readTime),h=h.insert(g,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||m.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(m),h=h.insert(g,m)):jt(vv,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",m.version)}),{Vs:h,fs:l}})}function NN(i,t){const e=be(i);return e.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=ph),e.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function xN(i,t){const e=be(i);return e.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return e.Hr.getTargetData(a,t).next(c=>c?(l=c,_t.resolve(l)):e.Hr.allocateTargetId(a).next(h=>(l=new au(t,h,"TargetPurposeListen",a.currentSequenceNumber),e.Hr.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=e.Ts.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(a.targetId,a),e.Is.set(t,a.targetId)),a})}async function b_(i,t,e){const a=be(i),l=a.Ts.get(t),c=e?"readwrite":"readwrite-primary";try{e||await a.persistence.runTransaction("Release target",c,h=>a.persistence.referenceDelegate.removeTarget(h,l))}catch(h){if(!bc(h))throw h;jt(vv,`Failed to update sequence numbers for target ${t}: ${h}`)}a.Ts=a.Ts.remove(t),a.Is.delete(l.target)}function SS(i,t,e){const a=be(i);let l=le.min(),c=ze();return a.persistence.runTransaction("Execute query","readwrite",h=>function(m,_,E){const A=be(m),D=A.Is.get(E);return D!==void 0?_t.resolve(A.Ts.get(D)):A.Hr.getTargetData(_,E)}(a,h,Ys(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(h,g.targetId).next(m=>{c=m})}).next(()=>a.Ps.getDocumentsMatchingQuery(h,t,e?l:le.min(),e?c:ze())).next(g=>(DN(a,mw(t),g),{documents:g,gs:c})))}function DN(i,t,e){let a=i.Es.get(t)||le.min();e.forEach((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),i.Es.set(t,a)}class TS{constructor(){this.activeTargetIds=Sw()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class w3{constructor(){this.ho=new TS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,a){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,a){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new TS,Promise.resolve()}handleUserChange(t,e,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="ConnectivityMonitor";class AS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){jt(bS,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){jt(bS,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp=null;function A_(){return dp===null?dp=function(){return 268435456+Math.round(2147483648*Math.random())}():dp++,"0x"+dp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="RestConnection",ON={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MN{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${a}/databases/${l}`,this.wo=this.databaseId.database===Hp?`project_id=${a}`:`project_id=${a}&database_id=${l}`}So(t,e,a,l,c){const h=A_(),g=this.bo(t,e.toUriEncodedString());jt(j1,`Sending RPC '${t}' ${h}:`,g,a);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,l,c),this.vo(t,g,m,a).then(_=>(jt(j1,`Received RPC '${t}' ${h}: `,_),_),_=>{throw Ah(j1,`RPC '${t}' ${h} failed with error: `,_,"url: ",g,"request:",a),_})}Co(t,e,a,l,c,h){return this.So(t,e,a,l,c)}Do(t,e,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ed}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((l,c)=>t[c]=l),a&&a.headers.forEach((l,c)=>t[c]=l)}bo(t,e){const a=ON[t];return`${this.po}/v1/${e}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="WebChannelConnection";class PN extends MN{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,a,l){const c=A_();return new Promise((h,g)=>{const m=new Z5;m.setWithCredentials(!0),m.listenOnce(W5.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case vp.NO_ERROR:const E=m.getResponseJson();jt(Wa,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),h(E);break;case vp.TIMEOUT:jt(Wa,`RPC '${t}' ${c} timed out`),g(new Xt(xt.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const A=m.getStatus();if(jt(Wa,`RPC '${t}' ${c} failed with status:`,A,"response text:",m.getResponseText()),A>0){let D=m.getResponseJson();Array.isArray(D)&&(D=D[0]);const C=D==null?void 0:D.error;if(C&&C.status&&C.message){const R=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(xt).indexOf(H)>=0?H:xt.UNKNOWN}(C.status);g(new Xt(R,C.message))}else g(new Xt(xt.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Xt(xt.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{jt(Wa,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(l);jt(Wa,`RPC '${t}' ${c} sending request:`,l),m.send(e,"POST",_,a,15)})}Wo(t,e,a){const l=A_(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=tT(),g=$5(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(m.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,e,a),m.encodeInitMessageHeaders=!0;const E=c.join("");jt(Wa,`Creating RPC '${t}' stream ${l}: ${E}`,m);const A=h.createWebChannel(E,m);let D=!1,C=!1;const R=new VN({Fo:U=>{C?jt(Wa,`Not sending because RPC '${t}' stream ${l} is closed:`,U):(D||(jt(Wa,`Opening RPC '${t}' stream ${l} transport.`),A.open(),D=!0),jt(Wa,`RPC '${t}' stream ${l} sending:`,U),A.send(U))},Mo:()=>A.close()}),P=(U,H,N)=>{U.listen(H,x=>{try{N(x)}catch(L){setTimeout(()=>{throw L},0)}})};return P(A,em.EventType.OPEN,()=>{C||(jt(Wa,`RPC '${t}' stream ${l} transport opened.`),R.Qo())}),P(A,em.EventType.CLOSE,()=>{C||(C=!0,jt(Wa,`RPC '${t}' stream ${l} transport closed`),R.Uo())}),P(A,em.EventType.ERROR,U=>{C||(C=!0,Ah(Wa,`RPC '${t}' stream ${l} transport errored:`,U),R.Uo(new Xt(xt.UNAVAILABLE,"The operation could not be completed")))}),P(A,em.EventType.MESSAGE,U=>{var H;if(!C){const N=U.data[0];ie(!!N);const x=N,L=(x==null?void 0:x.error)||((H=x[0])===null||H===void 0?void 0:H.error);if(L){jt(Wa,`RPC '${t}' stream ${l} received error:`,L);const F=L.status;let K=function(I){const V=ki[I];if(V!==void 0)return XT(V)}(F),j=L.message;K===void 0&&(K=xt.INTERNAL,j="Unknown error status: "+F+" with message "+L.message),C=!0,R.Uo(new Xt(K,j)),A.close()}else jt(Wa,`RPC '${t}' stream ${l} received:`,N),R.Ko(N)}}),P(g,J5.STAT_EVENT,U=>{U.stat===n_.PROXY?jt(Wa,`RPC '${t}' stream ${l} detected buffering proxy`):U.stat===n_.NOPROXY&&jt(Wa,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof window<"u"?window:null}function Np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(i){return new Lw(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(t,e,a=1e3,l=1.5,c=6e4){this.Ti=t,this.timerId=e,this.Go=a,this.zo=l,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),l=Math.max(0,e-a);l>0&&jt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="PersistentStream";class x3{constructor(t,e,a,l,c,h,g,m){this.Ti=t,this.n_=a,this.r_=l,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new N3(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===xt.RESOURCE_EXHAUSTED?(yr(e.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===xt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,l])=>{this.i_===e&&this.V_(a,l)},a=>{t(()=>{const l=new Xt(xt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(l)})})}V_(t,e){const a=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{a(()=>this.m_(l))}),this.stream.onMessage(l=>{a(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return jt(CS,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(jt(CS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LN extends x3{constructor(t,e,a,l,c,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,a,l,h),this.serializer=c}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=Bw(this.serializer,t),a=function(c){if(!("targetChange"in c))return le.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?le.min():h.readTime?_r(h.readTime):le.min()}(t);return this.listener.p_(e,a)}y_(t){const e={};e.database=__(this.serializer),e.addTarget=function(c,h){let g;const m=h.target;if(g=qp(m)?{documents:i3(c,m)}:{query:a3(c,m).ht},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=JT(c,h.resumeToken);const _=p_(c,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo(le.min())>0){g.readTime=Zf(c,h.snapshotVersion.toTimestamp());const _=p_(c,h.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const a=Fw(this.serializer,t);a&&(e.labels=a),this.I_(e)}w_(t){const e={};e.database=__(this.serializer),e.removeTarget=t,this.I_(e)}}class zN extends x3{constructor(t,e,a,l,c,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,a,l,h),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return ie(!!t.streamToken),this.lastStreamToken=t.streamToken,ie(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){ie(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=Gw(t.writeResults,t.commitTime),a=_r(t.commitTime);return this.listener.v_(a,e)}C_(){const t={};t.database=__(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(a=>Qp(this.serializer,a))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{}class BN extends kN{constructor(t,e,a,l){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=a,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new Xt(xt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.So(t,y_(e,a),l,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Xt(xt.UNKNOWN,c.toString())})}Co(t,e,a,l,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Co(t,y_(e,a),l,h,g,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Xt(xt.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class GN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(yr(e),this.N_=!1):jt("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="RemoteStore";class FN{constructor(t,e,a,l,c){this.localStore=t,this.datastore=e,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(h=>{a.enqueueAndForget(async()=>{Vh(this)&&(jt(Dh,"Restarting streams for network reachability change."),await async function(m){const _=be(m);_.W_.add(4),await Bm(_),_.j_.set("Unknown"),_.W_.delete(4),await Ny(_)}(this))})}),this.j_=new GN(a,l)}}async function Ny(i){if(Vh(i))for(const t of i.G_)await t(!0)}async function Bm(i){for(const t of i.G_)await t(!1)}function D3(i,t){const e=be(i);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),bv(e)?Tv(e):ad(e).c_()&&Sv(e,t))}function Ev(i,t){const e=be(i),a=ad(e);e.K_.delete(t),a.c_()&&I3(e,t),e.K_.size===0&&(a.c_()?a.P_():Vh(e)&&e.j_.set("Unknown"))}function Sv(i,t){if(i.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(le.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ad(i).y_(t)}function I3(i,t){i.H_.Ne(t),ad(i).w_(t)}function Tv(i){i.H_=new Mw({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>i.K_.get(t)||null,it:()=>i.datastore.serializer.databaseId}),ad(i).start(),i.j_.B_()}function bv(i){return Vh(i)&&!ad(i).u_()&&i.K_.size>0}function Vh(i){return be(i).W_.size===0}function O3(i){i.H_=void 0}async function jN(i){i.j_.set("Online")}async function HN(i){i.K_.forEach((t,e)=>{Sv(i,t)})}async function qN(i,t){O3(i),bv(i)?(i.j_.q_(t),Tv(i)):i.j_.set("Unknown")}async function KN(i,t,e){if(i.j_.set("Online"),t instanceof WT&&t.state===2&&t.cause)try{await async function(l,c){const h=c.cause;for(const g of c.targetIds)l.K_.has(g)&&(await l.remoteSyncer.rejectListen(g,h),l.K_.delete(g),l.H_.removeTarget(g))}(i,t)}catch(a){jt(Dh,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await $p(i,a)}else if(t instanceof wp?i.H_.We(t):t instanceof ZT?i.H_.Ze(t):i.H_.je(t),!e.isEqual(le.min()))try{const a=await R3(i.localStore);e.compareTo(a)>=0&&await function(c,h){const g=c.H_.ot(h);return g.targetChanges.forEach((m,_)=>{if(m.resumeToken.approximateByteSize()>0){const E=c.K_.get(_);E&&c.K_.set(_,E.withResumeToken(m.resumeToken,h))}}),g.targetMismatches.forEach((m,_)=>{const E=c.K_.get(m);if(!E)return;c.K_.set(m,E.withResumeToken(Bi.EMPTY_BYTE_STRING,E.snapshotVersion)),I3(c,m);const A=new au(E.target,m,_,E.sequenceNumber);Sv(c,A)}),c.remoteSyncer.applyRemoteEvent(g)}(i,e)}catch(a){jt(Dh,"Failed to raise snapshot:",a),await $p(i,a)}}async function $p(i,t,e){if(!bc(t))throw t;i.W_.add(1),await Bm(i),i.j_.set("Offline"),e||(e=()=>R3(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{jt(Dh,"Retrying IndexedDB access"),await e(),i.W_.delete(1),await Ny(i)})}function M3(i,t){return t().catch(e=>$p(i,e,t))}async function Gm(i){const t=be(i),e=yc(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:ph;for(;YN(t);)try{const l=await NN(t.localStore,a);if(l===null){t.U_.length===0&&e.P_();break}a=l.batchId,QN(t,l)}catch(l){await $p(t,l)}V3(t)&&P3(t)}function YN(i){return Vh(i)&&i.U_.length<10}function QN(i,t){i.U_.push(t);const e=yc(i);e.c_()&&e.S_&&e.b_(t.mutations)}function V3(i){return Vh(i)&&!yc(i).u_()&&i.U_.length>0}function P3(i){yc(i).start()}async function XN(i){yc(i).C_()}async function ZN(i){const t=yc(i);for(const e of i.U_)t.b_(e.mutations)}async function WN(i,t,e){const a=i.U_.shift(),l=uv.from(a,t,e);await M3(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),await Gm(i)}async function JN(i,t){t&&yc(i).S_&&await async function(a,l){if(function(h){return Iw(h)&&h!==xt.ABORTED}(l.code)){const c=a.U_.shift();yc(a).h_(),await M3(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l)),await Gm(a)}}(i,t),V3(i)&&P3(i)}async function RS(i,t){const e=be(i);e.asyncQueue.verifyOperationInProgress(),jt(Dh,"RemoteStore received new credentials");const a=Vh(e);e.W_.add(3),await Bm(e),a&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ny(e)}async function $N(i,t){const e=be(i);t?(e.W_.delete(2),await Ny(e)):t||(e.W_.add(2),await Bm(e),e.j_.set("Unknown"))}function ad(i){return i.J_||(i.J_=function(e,a,l){const c=be(e);return c.M_(),new LN(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(i.datastore,i.asyncQueue,{xo:jN.bind(null,i),No:HN.bind(null,i),Lo:qN.bind(null,i),p_:KN.bind(null,i)}),i.G_.push(async t=>{t?(i.J_.h_(),bv(i)?Tv(i):i.j_.set("Unknown")):(await i.J_.stop(),O3(i))})),i.J_}function yc(i){return i.Y_||(i.Y_=function(e,a,l){const c=be(e);return c.M_(),new zN(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:XN.bind(null,i),Lo:JN.bind(null,i),D_:ZN.bind(null,i),v_:WN.bind(null,i)}),i.G_.push(async t=>{t?(i.Y_.h_(),await Gm(i)):(await i.Y_.stop(),i.U_.length>0&&(jt(Dh,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(t,e,a,l,c){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,a,l,c){const h=Date.now()+a,g=new Av(t,e,h,l,c);return g.start(a),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(xt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cv(i,t){if(yr("AsyncQueue",`${t}: ${i}`),bc(i))return new Xt(xt.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{static emptySet(t){return new Lf(t.comparator)}constructor(t){this.comparator=t?(e,a)=>t(e,a)||Zt.comparator(e.key,a.key):(e,a)=>Zt.comparator(e.key,a.key),this.keyedMap=nm(),this.sortedSet=new Xn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,a)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Lf)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;e.hasNext();){const l=e.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const a=new Lf;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=e,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.Z_=new Xn(Zt.comparator)}track(t){const e=t.doc.key,a=this.Z_.get(e);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(e,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(e):t.type===1&&a.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):te():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,a)=>{t.push(a)}),t}}class Wf{constructor(t,e,a,l,c,h,g,m,_){this.query=t,this.docs=e,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=m,this.hasCachedResults=_}static fromInitialDocuments(t,e,a,l,c){const h=[];return e.forEach(g=>{h.push({type:0,doc:g})}),new Wf(t,e,Lf.emptySet(e),h,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,a=t.docChanges;if(e.length!==a.length)return!1;for(let l=0;l<e.length;l++)if(e[l].type!==a[l].type||!e[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class ex{constructor(){this.queries=NS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,a){const l=be(e),c=l.queries;l.queries=NS(),c.forEach((h,g)=>{for(const m of g.ta)m.onError(a)})})(this,new Xt(xt.ABORTED,"Firestore shutting down"))}}function NS(){return new fu(i=>UT(i),vy)}async function U3(i,t){const e=be(i);let a=3;const l=t.query;let c=e.queries.get(l);c?!c.na()&&t.ra()&&(a=2):(c=new tx,a=t.ra()?0:1);try{switch(a){case 0:c.ea=await e.onListen(l,!0);break;case 1:c.ea=await e.onListen(l,!1);break;case 2:await e.onFirstRemoteStoreListen(l)}}catch(h){const g=Cv(h,`Initialization of query '${Df(t.query)}' failed`);return void t.onError(g)}e.queries.set(l,c),c.ta.push(t),t.sa(e.onlineState),c.ea&&t.oa(c.ea)&&Rv(e)}async function L3(i,t){const e=be(i),a=t.query;let l=3;const c=e.queries.get(a);if(c){const h=c.ta.indexOf(t);h>=0&&(c.ta.splice(h,1),c.ta.length===0?l=t.ra()?0:1:!c.na()&&t.ra()&&(l=2))}switch(l){case 0:return e.queries.delete(a),e.onUnlisten(a,!0);case 1:return e.queries.delete(a),e.onUnlisten(a,!1);case 2:return e.onLastRemoteStoreUnlisten(a);default:return}}function nx(i,t){const e=be(i);let a=!1;for(const l of t){const c=l.query,h=e.queries.get(c);if(h){for(const g of h.ta)g.oa(l)&&(a=!0);h.ea=l}}a&&Rv(e)}function ix(i,t,e){const a=be(i),l=a.queries.get(t);if(l)for(const c of l.ta)c.onError(e);a.queries.delete(t)}function Rv(i){i.ia.forEach(t=>{t.next()})}var C_,xS;(xS=C_||(C_={}))._a="default",xS.Cache="cache";class z3{constructor(t,e,a){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const l of t.docChanges)l.type!==3&&a.push(l);t=new Wf(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const a=e!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Wf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==C_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(t){this.key=t}}class B3{constructor(t){this.key=t}}class ax{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ze(),this.mutatedKeys=ze(),this.ya=LT(t),this.wa=new Lf(this.ya)}get Sa(){return this.fa}ba(t,e){const a=e?e.Da:new wS,l=e?e.wa:this.wa;let c=e?e.mutatedKeys:this.mutatedKeys,h=l,g=!1;const m=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((E,A)=>{const D=l.get(E),C=zm(this.query,A)?A:null,R=!!D&&this.mutatedKeys.has(D.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;D&&C?D.data.isEqual(C.data)?R!==P&&(a.track({type:3,doc:C}),U=!0):this.va(D,C)||(a.track({type:2,doc:C}),U=!0,(m&&this.ya(C,m)>0||_&&this.ya(C,_)<0)&&(g=!0)):!D&&C?(a.track({type:0,doc:C}),U=!0):D&&!C&&(a.track({type:1,doc:D}),U=!0,(m||_)&&(g=!0)),U&&(C?(h=h.add(C),c=P?c.add(E):c.delete(E)):(h=h.delete(E),c=c.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),c=c.delete(E.key),a.track({type:1,doc:E})}return{wa:h,Da:a,ls:g,mutatedKeys:c}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,a,l){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const h=t.Da.X_();h.sort((E,A)=>function(C,R){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return P(C)-P(R)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(a),l=l!=null&&l;const g=e&&!l?this.Fa():[],m=this.pa.size===0&&this.current&&!l?1:0,_=m!==this.ga;return this.ga=m,h.length!==0||_?{snapshot:new Wf(this.query,t.wa,c,h,t.mutatedKeys,m===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:g}:{Ma:g}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new wS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=ze(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const e=[];return t.forEach(a=>{this.pa.has(a)||e.push(new B3(a))}),this.pa.forEach(a=>{t.has(a)||e.push(new k3(a))}),e}Oa(t){this.fa=t.gs,this.pa=ze();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Wf.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const wv="SyncEngine";class rx{constructor(t,e,a){this.query=t,this.targetId=e,this.view=a}}class sx{constructor(t){this.key=t,this.Ba=!1}}class lx{constructor(t,e,a,l,c,h){this.localStore=t,this.remoteStore=e,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new fu(g=>UT(g),vy),this.qa=new Map,this.Qa=new Set,this.$a=new Xn(Zt.comparator),this.Ua=new Map,this.Ka=new mv,this.Wa={},this.Ga=new Map,this.za=xh.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function ox(i,t,e=!0){const a=K3(i);let l;const c=a.ka.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Na()):l=await G3(a,t,e,!0),l}async function ux(i,t){const e=K3(i);await G3(e,t,!0,!1)}async function G3(i,t,e,a){const l=await xN(i.localStore,Ys(t)),c=l.targetId,h=i.sharedClientState.addLocalQueryTarget(c,e);let g;return a&&(g=await cx(i,t,c,h==="current",l.resumeToken)),i.isPrimaryClient&&e&&D3(i.remoteStore,l),g}async function cx(i,t,e,a,l){i.Ha=(A,D,C)=>async function(P,U,H,N){let x=U.view.ba(H);x.ls&&(x=await SS(P.localStore,U.query,!1).then(({documents:j})=>U.view.ba(j,x)));const L=N&&N.targetChanges.get(U.targetId),F=N&&N.targetMismatches.get(U.targetId)!=null,K=U.view.applyChanges(x,P.isPrimaryClient,L,F);return IS(P,U.targetId,K.Ma),K.snapshot}(i,A,D,C);const c=await SS(i.localStore,t,!0),h=new ax(t,c.gs),g=h.ba(c.documents),m=km.createSynthesizedTargetChangeForCurrentChange(e,a&&i.onlineState!=="Offline",l),_=h.applyChanges(g,i.isPrimaryClient,m);IS(i,e,_.Ma);const E=new rx(t,e,h);return i.ka.set(t,E),i.qa.has(e)?i.qa.get(e).push(t):i.qa.set(e,[t]),_.snapshot}async function hx(i,t,e){const a=be(i),l=a.ka.get(t),c=a.qa.get(l.targetId);if(c.length>1)return a.qa.set(l.targetId,c.filter(h=>!vy(h,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await b_(a.localStore,l.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(l.targetId),e&&Ev(a.remoteStore,l.targetId),R_(a,l.targetId)}).catch(Oh)):(R_(a,l.targetId),await b_(a.localStore,l.targetId,!0))}async function fx(i,t){const e=be(i),a=e.ka.get(t),l=e.qa.get(a.targetId);e.isPrimaryClient&&l.length===1&&(e.sharedClientState.removeLocalQueryTarget(a.targetId),Ev(e.remoteStore,a.targetId))}async function dx(i,t,e){const a=Y3(i);try{const l=await function(h,g){const m=be(h),_=gi.now(),E=g.reduce((C,R)=>C.add(R.key),ze());let A,D;return m.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=gs(),P=ze();return m.ds.getEntries(C,E).next(U=>{R=U,R.forEach((H,N)=>{N.isValidDocument()||(P=P.add(H))})}).next(()=>m.localDocuments.getOverlayedDocuments(C,R)).next(U=>{A=U;const H=[];for(const N of g){const x=xw(N,A.get(N.key).overlayedDocument);x!=null&&H.push(new Ac(N.key,x,wT(x.value.mapValue),qr.exists(!0)))}return m.mutationQueue.addMutationBatch(C,_,H,g)}).next(U=>{D=U;const H=U.applyToLocalDocumentSet(A,P);return m.documentOverlayCache.saveOverlays(C,U.batchId,H)})}).then(()=>({batchId:D.batchId,changes:kT(A)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(l.batchId),function(h,g,m){let _=h.Wa[h.currentUser.toKey()];_||(_=new Xn(_e)),_=_.insert(g,m),h.Wa[h.currentUser.toKey()]=_}(a,l.batchId,e),await Fm(a,l.changes),await Gm(a.remoteStore)}catch(l){const c=Cv(l,"Failed to persist write");e.reject(c)}}async function F3(i,t){const e=be(i);try{const a=await RN(e.localStore,t);t.targetChanges.forEach((l,c)=>{const h=e.Ua.get(c);h&&(ie(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?h.Ba=!0:l.modifiedDocuments.size>0?ie(h.Ba):l.removedDocuments.size>0&&(ie(h.Ba),h.Ba=!1))}),await Fm(e,a,t)}catch(a){await Oh(a)}}function DS(i,t,e){const a=be(i);if(a.isPrimaryClient&&e===0||!a.isPrimaryClient&&e===1){const l=[];a.ka.forEach((c,h)=>{const g=h.view.sa(t);g.snapshot&&l.push(g.snapshot)}),function(h,g){const m=be(h);m.onlineState=g;let _=!1;m.queries.forEach((E,A)=>{for(const D of A.ta)D.sa(g)&&(_=!0)}),_&&Rv(m)}(a.eventManager,t),l.length&&a.La.p_(l),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function gx(i,t,e){const a=be(i);a.sharedClientState.updateQueryState(t,"rejected",e);const l=a.Ua.get(t),c=l&&l.key;if(c){let h=new Xn(Zt.comparator);h=h.insert(c,Ci.newNoDocument(c,le.min()));const g=ze().add(c),m=new by(le.min(),new Map,new Xn(_e),h,g);await F3(a,m),a.$a=a.$a.remove(c),a.Ua.delete(t),Nv(a)}else await b_(a.localStore,t,!1).then(()=>R_(a,t,e)).catch(Oh)}async function mx(i,t){const e=be(i),a=t.batch.batchId;try{const l=await CN(e.localStore,t);H3(e,a,null),j3(e,a),e.sharedClientState.updateMutationState(a,"acknowledged"),await Fm(e,l)}catch(l){await Oh(l)}}async function px(i,t,e){const a=be(i);try{const l=await function(h,g){const m=be(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return m.mutationQueue.lookupMutationBatch(_,g).next(A=>(ie(A!==null),E=A.keys(),m.mutationQueue.removeMutationBatch(_,A))).next(()=>m.mutationQueue.performConsistencyCheck(_)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(_,E,g)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>m.localDocuments.getDocuments(_,E))})}(a.localStore,t);H3(a,t,e),j3(a,t),a.sharedClientState.updateMutationState(t,"rejected",e),await Fm(a,l)}catch(l){await Oh(l)}}function j3(i,t){(i.Ga.get(t)||[]).forEach(e=>{e.resolve()}),i.Ga.delete(t)}function H3(i,t,e){const a=be(i);let l=a.Wa[a.currentUser.toKey()];if(l){const c=l.get(t);c&&(e?c.reject(e):c.resolve(),l=l.remove(t)),a.Wa[a.currentUser.toKey()]=l}}function R_(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const a of i.qa.get(t))i.ka.delete(a),e&&i.La.Ja(a,e);i.qa.delete(t),i.isPrimaryClient&&i.Ka.br(t).forEach(a=>{i.Ka.containsKey(a)||q3(i,a)})}function q3(i,t){i.Qa.delete(t.path.canonicalString());const e=i.$a.get(t);e!==null&&(Ev(i.remoteStore,e),i.$a=i.$a.remove(t),i.Ua.delete(e),Nv(i))}function IS(i,t,e){for(const a of e)a instanceof k3?(i.Ka.addReference(a.key,t),yx(i,a)):a instanceof B3?(jt(wv,"Document no longer in limbo: "+a.key),i.Ka.removeReference(a.key,t),i.Ka.containsKey(a.key)||q3(i,a.key)):te()}function yx(i,t){const e=t.key,a=e.path.canonicalString();i.$a.get(e)||i.Qa.has(a)||(jt(wv,"New document in limbo: "+e),i.Qa.add(a),Nv(i))}function Nv(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const t=i.Qa.values().next().value;i.Qa.delete(t);const e=new Zt(En.fromString(t)),a=i.za.next();i.Ua.set(a,new sx(e)),i.$a=i.$a.insert(e,a),D3(i.remoteStore,new au(Ys(_y(e.path)),a,"TargetPurposeLimboResolution",qs.ae))}}async function Fm(i,t,e){const a=be(i),l=[],c=[],h=[];a.ka.isEmpty()||(a.ka.forEach((g,m)=>{h.push(a.Ha(m,t,e).then(_=>{var E;if((_||e)&&a.isPrimaryClient){const A=_?!_.fromCache:(E=e==null?void 0:e.targetChanges.get(m.targetId))===null||E===void 0?void 0:E.current;a.sharedClientState.updateQueryState(m.targetId,A?"current":"not-current")}if(_){l.push(_);const A=_v.Yi(m.targetId,_);c.push(A)}}))}),await Promise.all(h),a.La.p_(l),await async function(m,_){const E=be(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>_t.forEach(_,D=>_t.forEach(D.Hi,C=>E.persistence.referenceDelegate.addReference(A,D.targetId,C)).next(()=>_t.forEach(D.Ji,C=>E.persistence.referenceDelegate.removeReference(A,D.targetId,C)))))}catch(A){if(!bc(A))throw A;jt(vv,"Failed to update sequence numbers: "+A)}for(const A of _){const D=A.targetId;if(!A.fromCache){const C=E.Ts.get(D),R=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(R);E.Ts=E.Ts.insert(D,P)}}}(a.localStore,c))}async function _x(i,t){const e=be(i);if(!e.currentUser.isEqual(t)){jt(wv,"User change. New user:",t.toKey());const a=await C3(e.localStore,t);e.currentUser=t,function(c,h){c.Ga.forEach(g=>{g.forEach(m=>{m.reject(new Xt(xt.CANCELLED,h))})}),c.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Fm(e,a.Rs)}}function vx(i,t){const e=be(i),a=e.Ua.get(t);if(a&&a.Ba)return ze().add(a.key);{let l=ze();const c=e.qa.get(t);if(!c)return l;for(const h of c){const g=e.ka.get(h);l=l.unionWith(g.view.Sa)}return l}}function K3(i){const t=be(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=F3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gx.bind(null,t),t.La.p_=nx.bind(null,t.eventManager),t.La.Ja=ix.bind(null,t.eventManager),t}function Y3(i){const t=be(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=px.bind(null,t),t}class xm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wy(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return A3(this.persistence,new b3,t.initialUser,this.serializer)}Xa(t){return new pv(Ry.ri,this.serializer)}Za(t){return new w3}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xm.provider={build:()=>new xm};class Ex extends xm{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){ie(this.persistence.referenceDelegate instanceof Jp);const a=this.persistence.referenceDelegate.garbageCollector;return new _3(a,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?$a.withCacheSize(this.cacheSizeBytes):$a.DEFAULT;return new pv(a=>Jp.ri(a,e),this.serializer)}}class Sx extends xm{constructor(t,e,a){super(),this.ru=t,this.cacheSizeBytes=e,this.forceOwnership=a,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await Y3(this.ru.syncEngine),await Gm(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return A3(this.persistence,new b3,t.initialUser,this.serializer)}tu(t,e){const a=this.persistence.referenceDelegate.garbageCollector;return new _3(a,t.asyncQueue,e)}nu(t,e){const a=new wR(e,this.persistence);return new RR(t.asyncQueue,a)}Xa(t){const e=SN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),a=this.cacheSizeBytes!==void 0?$a.withCacheSize(this.cacheSizeBytes):$a.DEFAULT;return new yv(this.synchronizeTabs,e,t.clientId,a,t.asyncQueue,UN(),Np(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new w3}}class ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>DS(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=_x.bind(null,this.syncEngine),await $N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ex}()}createDatastore(t){const e=wy(t.databaseInfo.databaseId),a=function(c){return new PN(c)}(t.databaseInfo);return function(c,h,g,m){return new BN(c,h,g,m)}(t.authCredentials,t.appCheckCredentials,a,e)}createRemoteStore(t){return function(a,l,c,h,g){return new FN(a,l,c,h,g)}(this.localStore,this.datastore,t.asyncQueue,e=>DS(this.syncEngine,e,0),function(){return AS.D()?new AS:new IN}())}createSyncEngine(t,e){return function(l,c,h,g,m,_,E){const A=new lx(l,c,h,g,m,_);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(l){const c=be(l);jt(Dh,"RemoteStore shutting down."),c.W_.add(5),await Bm(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):yr("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="FirestoreClient";class Tx{constructor(t,e,a,l,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=a,this.databaseInfo=l,this.user=Ia.UNAUTHENTICATED,this.clientId=iT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async h=>{jt(_c,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(a,h=>(jt(_c,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const a=Cv(e,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function H1(i,t){i.asyncQueue.verifyOperationInProgress(),jt(_c,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let a=e.initialUser;i.setCredentialChangeListener(async l=>{a.isEqual(l)||(await C3(t.localStore,l),a=l)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function OS(i,t){i.asyncQueue.verifyOperationInProgress();const e=await bx(i);jt(_c,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(a=>RS(t.remoteStore,a)),i.setAppCheckTokenChangeListener((a,l)=>RS(t.remoteStore,l)),i._onlineComponents=t}async function bx(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){jt(_c,"Using user provided OfflineComponentProvider");try{await H1(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(l){return l.name==="FirebaseError"?l.code===xt.FAILED_PRECONDITION||l.code===xt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(e))throw e;Ah("Error using user provided cache. Falling back to memory cache: "+e),await H1(i,new xm)}}else jt(_c,"Using default OfflineComponentProvider"),await H1(i,new Ex(void 0));return i._offlineComponents}async function X3(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(jt(_c,"Using user provided OnlineComponentProvider"),await OS(i,i._uninitializedComponentsProvider._online)):(jt(_c,"Using default OnlineComponentProvider"),await OS(i,new ty))),i._onlineComponents}function Ax(i){return X3(i).then(t=>t.syncEngine)}async function w_(i){const t=await X3(i),e=t.eventManager;return e.onListen=ox.bind(null,t.syncEngine),e.onUnlisten=hx.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=ux.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=fx.bind(null,t.syncEngine),e}function Cx(i,t,e={}){const a=new su;return i.asyncQueue.enqueueAndForget(async()=>function(c,h,g,m,_){const E=new Q3({next:D=>{E.su(),h.enqueueAndForget(()=>L3(c,A)),D.fromCache&&m.source==="server"?_.reject(new Xt(xt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),A=new z3(g,E,{includeMetadataChanges:!0,Ta:!0});return U3(c,A)}(await w_(i),i.asyncQueue,t,e,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(i,t,e){if(!e)throw new Xt(xt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function Rx(i,t,e,a){if(t===!0&&a===!0)throw new Xt(xt.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function VS(i){if(!Zt.isDocumentKey(i))throw new Xt(xt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function PS(i){if(Zt.isDocumentKey(i))throw new Xt(xt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function xy(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":te()}function _o(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Xt(xt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=xy(i);throw new Xt(xt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="firestore.googleapis.com",US=!0;class LS{constructor(t){var e,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J3,this.ssl=US}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:US;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=g3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<aN)throw new Xt(xt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Rx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z3((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Xt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Xt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Xt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,l){return a.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dy{constructor(t,e,a,l){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new gR;switch(a.type){case"firstParty":return new _R(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Xt(xt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=MS.get(e);a&&(jt("ComponentProvider","Removing Datastore"),MS.delete(e),a.terminate())}(this),Promise.resolve()}}function wx(i,t,e,a={}){var l;const c=(i=_o(i,Dy))._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),g=`${t}:${e}`;c.host!==J3&&c.host!==g&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:!1,emulatorOptions:a});if(!vh(m,h)&&(i._setSettings(m),a.mockUserToken)){let _,E;if(typeof a.mockUserToken=="string")_=a.mockUserToken,E=Ia.MOCK_USER;else{_=NA(a.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);const A=a.mockUserToken.sub||a.mockUserToken.user_id;if(!A)throw new Xt(xt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ia(A)}i._authCredentials=new mR(new eT(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,e,a){this.converter=e,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Cc(this.firestore,t,this._query)}}class Kr{constructor(t,e,a){this.converter=e,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kr(this.firestore,t,this._key)}}class gc extends Cc{constructor(t,e,a){super(t,e,_y(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kr(this.firestore,null,new Zt(t))}withConverter(t){return new gc(this.firestore,t,this._path)}}function xv(i,t,...e){if(i=er(i),W3("collection","path",t),i instanceof Dy){const a=En.fromString(t,...e);return PS(a),new gc(i,null,a)}{if(!(i instanceof Kr||i instanceof gc))throw new Xt(xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(En.fromString(t,...e));return PS(a),new gc(i.firestore,null,a)}}function $3(i,t,...e){if(i=er(i),arguments.length===1&&(t=iT.newId()),W3("doc","path",t),i instanceof Dy){const a=En.fromString(t,...e);return VS(a),new Kr(i,null,new Zt(a))}{if(!(i instanceof Kr||i instanceof gc))throw new Xt(xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(En.fromString(t,...e));return VS(a),new Kr(i.firestore,i instanceof gc?i.converter:null,new Zt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="AsyncQueue";class kS{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new N3(this,"async_queue_retry"),this.Su=()=>{const a=Np();a&&jt(zS,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const e=Np();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Np();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new su;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!bc(t))throw t;jt(zS,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const l=function(h){let g=h.message||"";return h.stack&&(g=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),g}(a);throw yr("INTERNAL UNHANDLED ERROR: ",l),a}).then(a=>(this.pu=!1,a))));return this.bu=e,e}enqueueAfterDelay(t,e,a){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const l=Av.createAndSchedule(this,t,e,a,c=>this.Fu(c));return this.fu.push(l),l}Du(){this.gu&&te()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,a)=>e.targetTimeMs-a.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function BS(i){return function(e,a){if(typeof e!="object"||e===null)return!1;const l=e;for(const c of a)if(c in l&&typeof l[c]=="function")return!0;return!1}(i,["next","error","complete"])}class Ih extends Dy{constructor(t,e,a,l){super(t,e,a,l),this.type="firestore",this._queue=new kS,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kS(t),this._firestoreClient=void 0,await t}}}function Nx(i,t){const e=typeof i=="object"?i:f5(),a=typeof i=="string"?i:Hp,l=z_(e,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=RA("firestore");c&&wx(l,...c)}return l}function Dv(i){if(i._terminated)throw new Xt(xt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||tb(i),i._firestoreClient}function tb(i){var t,e,a;const l=i._freezeSettings(),c=function(g,m,_,E){return new nw(g,m,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Z3(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,l);i._componentsProvider||!((e=l.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((a=l.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),i._firestoreClient=new Tx(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(g){const m=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(m),_online:m}}(i._componentsProvider))}function xx(i,t){Ah("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();return Dx(i,ty.provider,{build:a=>new Sx(a,e.cacheSizeBytes,void 0)}),Promise.resolve()}function Dx(i,t,e){if((i=_o(i,Ih))._firestoreClient||i._terminated)throw new Xt(xt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new Xt(xt.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:t,_offline:e},tb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jf(Bi.fromBase64String(t))}catch(e){throw new Xt(xt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Jf(Bi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Xt(xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xt(xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xt(xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _e(this._lat,t._lat)||_e(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=/^__.*__$/;class Ox{constructor(t,e,a){this.data=t,this.fieldMask=e,this.fieldTransforms=a}toMutation(t,e){return this.fieldMask!==null?new Ac(t,this.data,this.fieldMask,e,this.fieldTransforms):new id(t,this.data,e,this.fieldTransforms)}}function nb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Vv{constructor(t,e,a,l,c,h){this.settings=t,this.databaseId=e,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Vv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const a=(e=this.path)===null||e===void 0?void 0:e.child(t),l=this.ku({path:a,Qu:!1});return l.$u(t),l}Uu(t){var e;const a=(e=this.path)===null||e===void 0?void 0:e.child(t),l=this.ku({path:a,Qu:!1});return l.Bu(),l}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return ey(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(nb(this.Lu)&&Ix.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class Mx{constructor(t,e,a){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=a||wy(t)}ju(t,e,a,l=!1){return new Vv({Lu:t,methodName:e,zu:a,path:di.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ib(i){const t=i._freezeSettings(),e=wy(i._databaseId);return new Mx(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Vx(i,t,e,a,l,c={}){const h=i.ju(c.merge||c.mergeFields?2:0,t,e,l);sb("Data must be an object, but it was:",h,a);const g=ab(a,h);let m,_;if(c.merge)m=new Ks(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const E=[];for(const A of c.mergeFields){const D=Ux(t,A,e);if(!h.contains(D))throw new Xt(xt.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);zx(E,D)||E.push(D)}m=new Ks(E),_=h.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,_=h.fieldTransforms;return new Ox(new Hr(g),m,_)}function Px(i,t,e,a=!1){return Pv(e,i.ju(a?4:3,t))}function Pv(i,t){if(rb(i=er(i)))return sb("Unsupported field value:",t,i),ab(i,t);if(i instanceof eb)return function(a,l){if(!nb(l.Lu))throw l.Wu(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,l){const c=[];let h=0;for(const g of a){let m=Pv(g,l.Ku(h));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),h++}return{arrayValue:{values:c}}}(i,t)}return function(a,l){if((a=er(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Tw(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=gi.fromDate(a);return{timestampValue:Zf(l.serializer,c)}}if(a instanceof gi){const c=new gi(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Zf(l.serializer,c)}}if(a instanceof Ov)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Jf)return{bytesValue:JT(l.serializer,a._byteString)};if(a instanceof Kr){const c=l.databaseId,h=a.firestore._databaseId;if(!h.isEqual(c))throw l.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:fv(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Mv)return function(h,g){return{mapValue:{fields:{[av]:{stringValue:rv},[Hf]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw g.Wu("VectorValues must only contain numeric values.");return lv(g.serializer,_)})}}}}}}(a,l);throw l.Wu(`Unsupported field value: ${xy(a)}`)}(i,t)}function ab(i,t){const e={};return _T(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mh(i,(a,l)=>{const c=Pv(l,t.qu(a));c!=null&&(e[a]=c)}),{mapValue:{fields:e}}}function rb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gi||i instanceof Ov||i instanceof Jf||i instanceof Kr||i instanceof eb||i instanceof Mv)}function sb(i,t,e){if(!rb(e)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(e)){const a=xy(e);throw a==="an object"?t.Wu(i+" a custom object"):t.Wu(i+" "+a)}}function Ux(i,t,e){if((t=er(t))instanceof Iv)return t._internalPath;if(typeof t=="string")return lb(i,t);throw ey("Field path arguments must be of type string or ",i,!1,void 0,e)}const Lx=new RegExp("[~\\*/\\[\\]]");function lb(i,t,e){if(t.search(Lx)>=0)throw ey(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Iv(...t.split("."))._internalPath}catch{throw ey(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function ey(i,t,e,a,l){const c=a&&!a.isEmpty(),h=l!==void 0;let g=`Function ${t}() called with invalid data`;e&&(g+=" (via `toFirestore()`)"),g+=". ";let m="";return(c||h)&&(m+=" (found",c&&(m+=` in field ${a}`),h&&(m+=` in document ${l}`),m+=")"),new Xt(xt.INVALID_ARGUMENT,g+i+m)}function zx(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,e,a,l,c){this._firestore=t,this._userDataWriter=e,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Uv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class kx extends ob{data(){return super.data()}}function Uv(i,t){return typeof t=="string"?lb(i,t):t instanceof Iv?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Xt(xt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class cb extends Lv{}function hb(i,t,...e){let a=[];t instanceof Lv&&a.push(t),a=a.concat(e),function(c){const h=c.filter(m=>m instanceof kv).length,g=c.filter(m=>m instanceof zv).length;if(h>1||h>0&&g>0)throw new Xt(xt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const l of a)i=l._apply(i);return i}class zv extends cb{constructor(t,e,a){super(),this._field=t,this._op=e,this._value=a,this.type="where"}static _create(t,e,a){return new zv(t,e,a)}_apply(t){const e=this._parse(t);return db(t._query,e),new Cc(t.firestore,t.converter,g_(t._query,e))}_parse(t){const e=ib(t.firestore);return function(c,h,g,m,_,E,A){let D;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Xt(xt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){FS(A,E);const R=[];for(const P of A)R.push(GS(m,c,P));D={arrayValue:{values:R}}}else D=GS(m,c,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||FS(A,E),D=Px(g,h,A,E==="in"||E==="not-in");return Ze.create(_,E,D)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class kv extends Lv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new kv(t,e)}_parse(t){const e=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return e.length===1?e[0]:Cn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(l,c){let h=l;const g=c.getFlattenedFilters();for(const m of g)db(h,m),h=g_(h,m)}(t._query,e),new Cc(t.firestore,t.converter,g_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bv extends cb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Bv(t,e)}_apply(t){const e=function(l,c,h){if(l.startAt!==null)throw new Xt(xt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Xt(xt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rm(c,h)}(t._query,this._field,this._direction);return new Cc(t.firestore,t.converter,function(l,c){const h=l.explicitOrderBy.concat([c]);return new nd(l.path,l.collectionGroup,h,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(t._query,e))}}function fb(i,t="asc"){const e=t,a=Uv("orderBy",i);return Bv._create(a,e)}function GS(i,t,e){if(typeof(e=er(e))=="string"){if(e==="")throw new Xt(xt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PT(t)&&e.indexOf("/")!==-1)throw new Xt(xt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const a=t.path.child(En.fromString(e));if(!Zt.isDocumentKey(a))throw new Xt(xt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Am(i,new Zt(a))}if(e instanceof Kr)return Am(i,e._key);throw new Xt(xt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xy(e)}.`)}function FS(i,t){if(!Array.isArray(i)||i.length===0)throw new Xt(xt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function db(i,t){const e=function(l,c){for(const h of l)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(i.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Xt(xt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(xt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Bx{convertValue(t,e="none"){switch(mc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(cu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw te()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const a={};return Mh(t,(l,c)=>{a[l]=this.convertValue(c,e)}),a}convertVectorValue(t){var e,a,l;const c=(l=(a=(e=t.fields)===null||e===void 0?void 0:e[Hf].arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.map(h=>Qn(h.doubleValue));return new Mv(c)}convertGeoPoint(t){return new Ov(Qn(t.latitude),Qn(t.longitude))}convertArray(t,e){return(t.values||[]).map(a=>this.convertValue(a,e))}convertServerTimestamp(t,e){switch(e){case"previous":const a=py(t);return a==null?null:this.convertValue(a,e);case"estimate":return this.convertTimestamp(Tm(t));default:return null}}convertTimestamp(t){const e=uu(t);return new gi(e.seconds,e.nanos)}convertDocumentKey(t,e){const a=En.fromString(t);ie(o3(a));const l=new Ch(a.get(1),a.get(3)),c=new Zt(a.popFirst(5));return l.isEqual(e)||yr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(i,t,e){let a;return a=i?i.toFirestore(t):t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gb extends ob{constructor(t,e,a,l,c,h){super(t,e,a,l,h),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new xp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const a=this._document.data.field(Uv("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,e.serverTimestamps)}}}class xp extends gb{data(t={}){return super.data(t)}}class mb{constructor(t,e,a,l){this._firestore=t,this._userDataWriter=e,this._snapshot=l,this.metadata=new rm(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(a=>{t.call(e,new xp(this._firestore,this._userDataWriter,a.key,a,new rm(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xt(xt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map(g=>{const m=new xp(l._firestore,l._userDataWriter,g.doc.key,g.doc,new rm(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}})}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const m=new xp(l._firestore,l._userDataWriter,g.doc.key,g.doc,new rm(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,E=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),E=h.indexOf(g.doc.key)),{type:Fx(g.type),doc:m,oldIndex:_,newIndex:E}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class Gv extends Bx{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kr(this.firestore,null,e)}}function jx(i){i=_o(i,Cc);const t=_o(i.firestore,Ih),e=Dv(t),a=new Gv(t);return ub(i._query),Cx(e,i._query).then(l=>new mb(t,a,i,l))}function Hx(i,t,e){i=_o(i,Kr);const a=_o(i.firestore,Ih),l=Gx(i.converter,t);return pb(a,[Vx(ib(a),"setDoc",i._key,l,i.converter!==null,e).toMutation(i._key,qr.none())])}function qx(i){return pb(_o(i.firestore,Ih),[new Ty(i._key,qr.none())])}function Kx(i,...t){var e,a,l;i=er(i);let c={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||BS(t[h])||(c=t[h],h++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(BS(t[h])){const A=t[h];t[h]=(e=A.next)===null||e===void 0?void 0:e.bind(A),t[h+1]=(a=A.error)===null||a===void 0?void 0:a.bind(A),t[h+2]=(l=A.complete)===null||l===void 0?void 0:l.bind(A)}let m,_,E;if(i instanceof Kr)_=_o(i.firestore,Ih),E=_y(i._key.path),m={next:A=>{t[h]&&t[h](Yx(_,i,A))},error:t[h+1],complete:t[h+2]};else{const A=_o(i,Cc);_=_o(A.firestore,Ih),E=A._query;const D=new Gv(_);m={next:C=>{t[h]&&t[h](new mb(_,D,A,C))},error:t[h+1],complete:t[h+2]},ub(i._query)}return function(D,C,R,P){const U=new Q3(P),H=new z3(C,U,R);return D.asyncQueue.enqueueAndForget(async()=>U3(await w_(D),H)),()=>{U.su(),D.asyncQueue.enqueueAndForget(async()=>L3(await w_(D),H))}}(Dv(_),E,g,m)}function pb(i,t){return function(a,l){const c=new su;return a.asyncQueue.enqueueAndForget(async()=>dx(await Ax(a),l,c)),c.promise}(Dv(i),t)}function Yx(i,t,e){const a=e.docs.get(t._key),l=new Gv(i);return new gb(i,l,t._key,a,new rm(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(l){ed=l})($f),zf(new Eh("firestore",(a,{instanceIdentifier:l,options:c})=>{const h=a.getProvider("app").getImmediate(),g=new Ih(new pR(a.getProvider("auth-internal")),new vR(h,a.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Xt(xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(_.options.projectId,E)}(h,l),h);return c=Object.assign({useFetchStreams:e},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),hc(T4,b4,t),hc(T4,b4,"esm2017")})();const Qx={apiKey:"AIzaSyCa-qKXECagC4jNvLdw7MnVWWqitAJ3z-U",authDomain:"football-tactics-board-d5405.firebaseapp.com",projectId:"football-tactics-board-d5405",storageBucket:"football-tactics-board-d5405.appspot.com",messagingSenderId:"456088278412",appId:"1:456088278412:web:67965a307d9a84783632a9"},yb=h5(Qx),jm=fR(yb),Hm=Nx(yb);try{xx(Hm),console.log("Offline persistence enabled")}catch(i){console.error("Error enabling offline persistence:",i)}const Xx=new tu,Zx=async(i,t)=>{try{return await Z7(jm,i,t)}catch(e){throw console.error("Error registering with email and password:",e),e}},Wx=async(i,t)=>{try{return await W7(jm,i,t)}catch(e){throw console.error("Error logging in with email and password:",e),e}},Jx=async()=>{try{return await SC(jm,Xx)}catch(i){throw console.error("Error signing in with Google:",i),i}},$x=async()=>{try{await eC(jm)}catch(i){throw console.error("Error signing out:",i),i}},tD=async(i,t)=>{try{console.log("Saving board for user:",i,t.name);const e=xv(Hm,"users",i,"boards"),a={...t,updatedAt:new Date().toISOString(),userId:i};return await Hx($3(e,t.name),a),!0}catch(e){throw console.error("Error saving tactics board:",e),e}},eD=async i=>{try{console.log("Getting boards for user:",i);const t=xv(Hm,"users",i,"boards"),e=hb(t,fb("updatedAt","desc")),a=await jx(e),l=[];return a.forEach(c=>{l.push(c.data())}),console.log("Fetched boards:",l.length),l}catch(t){throw console.error("Error getting user tactics boards:",t),t}},nD=(i,t)=>{if(!i)return()=>{};console.log("Setting up real-time listener for user:",i);const e=xv(Hm,"users",i,"boards"),a=hb(e,fb("updatedAt","desc"));return Kx(a,l=>{const c=[];l.forEach(h=>{c.push(h.data())}),console.log("Real-time update, fetched boards:",c.length),t(c)},l=>{console.error("Error in real-time listener:",l)})},iD=async(i,t)=>{try{return console.log("Deleting board:",i,t),await qx($3(Hm,"users",i,"boards",t)),!0}catch(e){throw console.error("Error deleting tactics board:",e),e}},aD=i=>tC(jm,i),_b=Gt.createContext(),Iy=()=>Gt.useContext(_b),rD=({children:i})=>{const[t,e]=Gt.useState(null),[a,l]=Gt.useState(!0),[c,h]=Gt.useState(null),g=async(C,R)=>{try{h(null),await Zx(C,R)}catch(P){throw h(P.message),P}},m=async(C,R)=>{try{h(null),await Wx(C,R)}catch(P){throw h(P.message),P}},_=async()=>{try{h(null),await Jx()}catch(C){throw h(C.message),C}},E=async()=>{try{h(null),await $x()}catch(C){throw h(C.message),C}},A=()=>{h(null)};Gt.useEffect(()=>aD(R=>{e(R),l(!1)}),[]);const D={currentUser:t,loading:a,error:c,signup:g,login:m,loginWithGoogle:_,logout:E,clearError:A};return tt.jsx(_b.Provider,{value:D,children:!a&&i})},sD=({onClose:i})=>{const[t,e]=Gt.useState(""),[a,l]=Gt.useState(""),[c,h]=Gt.useState(!1),{login:g,loginWithGoogle:m,error:_,clearError:E}=Iy(),A=async C=>{C.preventDefault();try{h(!0),E(),await g(t,a),i()}catch(R){console.error(R)}finally{h(!1)}},D=async()=>{try{h(!0),E(),await m(),i()}catch(C){console.error(C)}finally{h(!1)}};return tt.jsxs("div",{className:"auth-container",children:[tt.jsxs("div",{className:"auth-header",children:[tt.jsx("h2",{children:"Login"}),tt.jsx("button",{className:"close-button",onClick:i,children:""})]}),_&&tt.jsx("div",{className:"auth-error",children:_}),tt.jsxs("form",{onSubmit:A,className:"auth-form",children:[tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{htmlFor:"email",children:"Email"}),tt.jsx("input",{type:"email",id:"email",value:t,onChange:C=>e(C.target.value),required:!0,disabled:c})]}),tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{htmlFor:"password",children:"Password"}),tt.jsx("input",{type:"password",id:"password",value:a,onChange:C=>l(C.target.value),required:!0,disabled:c})]}),tt.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?"Logging in...":"Login"})]}),tt.jsx("div",{className:"social-login",children:tt.jsxs("button",{className:"google-button",onClick:D,disabled:c,children:[tt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[tt.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),tt.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),tt.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),tt.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),tt.jsx("span",{children:"Continue with Google"})]})})]})},lD=({onClose:i})=>{const[t,e]=Gt.useState(""),[a,l]=Gt.useState(""),[c,h]=Gt.useState(""),[g,m]=Gt.useState(!1),[_,E]=Gt.useState(""),{signup:A,loginWithGoogle:D,error:C,clearError:R}=Iy(),P=async H=>{if(H.preventDefault(),a!==c){E("Passwords do not match");return}else E("");try{m(!0),R(),await A(t,a),i()}catch(N){console.error(N)}finally{m(!1)}},U=async()=>{try{m(!0),R(),await D(),i()}catch(H){console.error(H)}finally{m(!1)}};return tt.jsxs("div",{className:"auth-container",children:[tt.jsxs("div",{className:"auth-header",children:[tt.jsx("h2",{children:"Create Account"}),tt.jsx("button",{className:"close-button",onClick:i,children:""})]}),C&&tt.jsx("div",{className:"auth-error",children:C}),_&&tt.jsx("div",{className:"auth-error",children:_}),tt.jsxs("form",{onSubmit:P,className:"auth-form",children:[tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{htmlFor:"email",children:"Email"}),tt.jsx("input",{type:"email",id:"email",value:t,onChange:H=>e(H.target.value),required:!0,disabled:g})]}),tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{htmlFor:"password",children:"Password"}),tt.jsx("input",{type:"password",id:"password",value:a,onChange:H=>l(H.target.value),required:!0,disabled:g})]}),tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),tt.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:H=>h(H.target.value),required:!0,disabled:g})]}),tt.jsx("button",{type:"submit",className:"auth-button",disabled:g,children:g?"Creating Account...":"Create Account"})]}),tt.jsxs("div",{className:"social-login",children:[tt.jsx("p",{className:"or-divider",children:"or"}),tt.jsxs("button",{className:"google-button",onClick:U,disabled:g,children:[tt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[tt.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),tt.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),tt.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),tt.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),tt.jsx("span",{children:"Sign up with Google"})]})]})]})},oD=({onClose:i,initialView:t="login"})=>{const[e,a]=Gt.useState(t),l=()=>{a(e==="login"?"register":"login")};return tt.jsx("div",{className:"auth-modal-overlay",onClick:i,children:tt.jsx("div",{className:"auth-modal",onClick:c=>c.stopPropagation(),children:e==="login"?tt.jsxs(tt.Fragment,{children:[tt.jsx(sD,{onClose:i}),tt.jsx("div",{className:"auth-toggle",children:tt.jsxs("p",{children:["Don't have an account? ",tt.jsx("button",{onClick:l,children:"Sign Up"})]})})]}):tt.jsxs(tt.Fragment,{children:[tt.jsx(lD,{onClose:i}),tt.jsx("div",{className:"auth-toggle",children:tt.jsxs("p",{children:["Already have an account? ",tt.jsx("button",{onClick:l,children:"Log In"})]})})]})})})},uD=({onClose:i})=>{var l,c;const{currentUser:t,logout:e}=Iy(),a=async()=>{try{await e(),i()}catch(h){console.error("Error logging out:",h)}};return tt.jsxs("div",{className:"user-profile",children:[tt.jsxs("div",{className:"profile-header",children:[tt.jsx("h3",{children:"User Profile"}),tt.jsx("button",{className:"close-button",onClick:i,children:""})]}),tt.jsxs("div",{className:"profile-content",children:[tt.jsx("div",{className:"profile-avatar",children:t!=null&&t.photoURL?tt.jsx("img",{src:t.photoURL,alt:"User Avatar"}):tt.jsx("div",{className:"avatar-placeholder",children:((l=t==null?void 0:t.email)==null?void 0:l.charAt(0).toUpperCase())||"U"})}),tt.jsxs("div",{className:"profile-info",children:[tt.jsx("p",{className:"profile-email",children:(t==null?void 0:t.email)||"No email available"}),tt.jsxs("p",{className:"profile-id",children:["User ID: ",((c=t==null?void 0:t.uid)==null?void 0:c.substring(0,8))||"Unknown"]})]}),tt.jsx("button",{className:"logout-button",onClick:a,children:"Sign Out"})]})]})};function cD(){const[i,t]=Gt.useState(null),[e,a]=Gt.useState("#FF0000"),[l,c]=Gt.useState([]),[h,g]=Gt.useState([]),[m,_]=Gt.useState(!1),[E,A]=Gt.useState(null),[D,C]=Gt.useState(null),[R,P]=Gt.useState([]),[U,H]=Gt.useState(null),[N,x]=Gt.useState(!1),[L,F]=Gt.useState({}),[K,j]=Gt.useState(!1),[M,I]=Gt.useState(null),[V,B]=Gt.useState(""),[Y,b]=Gt.useState(""),[q,G]=Gt.useState(!1),[X,et]=Gt.useState(""),[st,pt]=Gt.useState([]),[Q,rt]=Gt.useState([{shapes:[],players:[],playerNumbers:{}}]),[bt,lt]=Gt.useState(0),[dt,Nt]=Gt.useState(!1),[Vt,nt]=Gt.useState(!1),[ht,Dt]=Gt.useState({width:window.innerWidth,height:window.innerHeight}),[It,qt]=Gt.useState(!1),[Yt,ce]=Gt.useState(!0),[pe,ae]=Gt.useState(null),[Ke,ve]=Gt.useState(null),[Je,Gi]=Gt.useState(!1),[un,Oi]=Gt.useState(null),[He,Fn]=Gt.useState(null),[Ie,Fi]=Gt.useState(!1),[Re,Ye]=Gt.useState(!1),[Zn,ji]=Gt.useState(!1),[we,Wn]=Gt.useState({numbers:Array(11).fill("").map(($,yt)=>(yt+1).toString()),names:Array(11).fill(""),formation:"442",side:"left",teamColor:"#FF0000"}),[Sn,$e]=Gt.useState(null),[Ve,Ji]=Gt.useState(!1),[wi,jn]=Gt.useState({id:"",number:"",name:""}),[Yr,Xs]=Gt.useState(!1),[Zs,$i]=Gt.useState(""),[vr,ta]=Gt.useState({x:0,y:0}),[Jn,Hi]=Gt.useState("board"),[Hn,ya]=Gt.useState([]),[Mi,Ma]=Gt.useState(""),[Ce,Qr]=Gt.useState(-1),[nr,qi]=Gt.useState(!1),[Va,ps]=Gt.useState(!1),[$n,ti]=Gt.useState(!1),[rn,ye]=Gt.useState(!1),[ir,Pa]=Gt.useState(!1),[Ws,Ua]=Gt.useState(!1),[ys,_a]=Gt.useState(""),{currentUser:kn,loading:ea}=Iy(),Tn=105/68,dn=Ie?0:240,La=60,cn=()=>{const $=ht.width-(Ie?0:dn)-40,yt=ht.height-La-40,Lt=Ie?!0:dt;let Ot;if(Lt){const Pt=$*Tn;Pt<=yt?Ot={width:$,height:Pt}:Ot={width:yt/Tn,height:yt}}else{const Pt=$/Tn;Pt<=yt?Ot={width:$,height:Pt}:Ot={width:yt*Tn,height:yt}}return Ot},[va,na]=Gt.useState(cn()),Wt=va.width,Jt=va.height;Gt.useEffect(()=>{const $=cn();na($)},[ht,dt]),Gt.useEffect(()=>{Er.current.width===0&&(Er.current={...va})},[va]);const ei=15,du=Gt.useRef(null),_s=Gt.useRef(null),Er=Gt.useRef({width:0,height:0});Gt.useEffect(()=>{const $=()=>{const yt=window.innerWidth,Lt=window.innerHeight;Dt({width:yt,height:Lt});const Ot=yt<768;Ot!==Ie&&(Fi(Ot),Ot?(Ye(!1),dt||Nt(!0)):dt&&Nt(!1)),Ot&&!dt&&Nt(!0)};return window.addEventListener("resize",$),$(),()=>window.removeEventListener("resize",$)},[Ie,dt]),Gt.useEffect(()=>{const $=Er.current,{width:yt,height:Lt}=va;if($.width>0&&$.height>0&&(yt!==$.width||Lt!==$.height)&&(h.length>0||l.length>0)){const Ot=yt/$.width,Pt=Lt/$.height;if(Ot!==1||Pt!==1){if(console.log("Scaling elements to match new pitch size",Ot,Pt),h.length>0){const ue=h.map(zt=>({...zt,x:zt.x*Ot,y:zt.y*Pt}));g(ue)}if(l.length>0){const ue=l.map(zt=>{if(zt.type==="line"||zt.type==="arrow"){const Ht=[];for(let re=0;re<zt.points.length;re+=2)Ht.push(zt.points[re]*Ot,zt.points[re+1]*Pt);return{...zt,points:Ht}}else{if(zt.type==="box")return{...zt,x:zt.x*Ot,y:zt.y*Pt,width:zt.width*Ot,height:zt.height*Pt};if(zt.type==="circle")return{...zt,x:zt.x*Ot,y:zt.y*Pt,width:zt.width*Ot,height:zt.height*Pt};if(zt.type==="football"||zt.type==="cone")return{...zt,x:zt.x*Ot,y:zt.y*Pt,radius:zt.radius*Math.min(Ot,Pt)}}return zt});c(ue)}}}Er.current={...va}},[va]),Gt.useEffect(()=>{if(h.length>0||l.length>0){const $=cn();Er.current={...$}}},[dt]),Gt.useEffect(()=>{if(l.length===0){const $=cn(),yt=`football-default-${Date.now()}`,Lt={id:yt,x:$.width/2,y:$.height/2,radius:10,color:"#FFFFFF",type:"football",isDefault:!0};c([Lt]),Fn(yt),nt(!0)}},[]),Gt.useEffect(()=>{if(Vt){const $={shapes:[...l],players:[...h],playerNumbers:{...L}};if(bt<Q.length-1){const yt=Q.slice(0,bt+1);rt([...yt,$])}else rt([...Q,$]);lt(bt+1),nt(!1)}},[Vt]),Gt.useEffect(()=>{q&&_s.current&&_s.current.focus()},[q]);const Eo=$=>{const Lt=h.filter(Pt=>Pt.color===$).map(Pt=>L[Pt.id]||0);let Ot=1;for(;Lt.includes(Ot);)Ot++;return Ot},mi=$=>{i===$?(t(null),$==="select"&&P([])):(t($),i==="select"&&$!=="select"&&P([])),$e(null),C(null)},Sr=$=>{Sn===$?$e(null):($e($),t(null))},Vn=$=>{a($),Yt&&!pe?ae($):!Yt&&!Ke&&ve($)},Ni=$=>{var Pt,ue;const yt=$.target===$.target.getStage(),Lt=$.target.getStage();let Ot=Lt.getPointerPosition();if(!Ot&&$.evt.touches&&$.evt.touches.length>0){const zt=$.evt.touches[0],Ht=Lt.container().getBoundingClientRect();Ot={x:zt.clientX-Ht.left,y:zt.clientY-Ht.top}}if(Ot){if(yt){if(!i){C(null),P([]);return}if(i==="select"){x(!0),H({x:Ot.x,y:Ot.y,width:0,height:0}),$.evt.shiftKey||(P([]),C(null));return}if(Je&&!m){const zt=h.filter(Ht=>Ht.color===(un==="home"?pe:Ke));P(zt.map(Ht=>Ht.id)),_(!0);return}}else{const zt=$.target.id(),re=((ue=(Pt=$.target.getParent())==null?void 0:Pt.attrs)==null?void 0:ue.id)||zt;if(i==="delete"&&re){wn(re);return}if(Sn==="team"&&re&&re.startsWith("player")){const ge=h.find(ni=>ni.id===re);if(ge){Ml(ge.color);return}}if(Sn==="player"&&re&&re.startsWith("player")){const ge=h.find(ni=>ni.id===re);if(ge){ia(ge);return}}if(i==="select"){$.evt.shiftKey?R.includes(re)&&P(R.filter(ge=>ge!==re)):R.includes(re)||P([...R,re]),C(re);return}if(!i||i==="delete"||i==="select"){C(re),i==="select"?$.evt.shiftKey?R.includes(re)||P([...R,re]):P([re]):P([]);return}}if(i&&(yt||i!=="delete")){if(i==="player"){const zt=Eo(e),Ht={id:`player-${h.length}-${Date.now()}`,x:Ot.x,y:Ot.y,radius:ei,color:e,type:"player"};g([...h,Ht]),F({...L,[Ht.id]:zt}),nt(!0);return}if(i==="football"){const zt={id:`football-${l.length}-${Date.now()}`,x:Ot.x,y:Ot.y,radius:10,color:"#FFFFFF",type:"football"};c([...l,zt]),nt(!0);return}if(i==="cone"){const zt={id:`cone-${l.length}-${Date.now()}`,x:Ot.x,y:Ot.y,color:"#FFFF00",strokeColor:"#000000",type:"cone"};c([...l,zt]),nt(!0);return}if(i==="text"){ta({x:Ot.x,y:Ot.y}),$i(""),Xs(!0);return}if(_(!0),i==="line"||i==="arrow"){const zt={id:`${i}-${l.length}-${Date.now()}`,points:[Ot.x,Ot.y,Ot.x,Ot.y],color:e,type:i};A(zt)}else if(i==="box"){const zt={id:`box-${l.length}-${Date.now()}`,x:Ot.x,y:Ot.y,width:0,height:0,color:e,type:"box"};A(zt)}else if(i==="circle"){const zt={id:`circle-${l.length}-${Date.now()}`,x:Ot.x,y:Ot.y,width:0,height:0,color:e,type:"circle"};A(zt)}}}},So=$=>{const yt=$.target.getStage();let Lt=yt.getPointerPosition();if(!Lt&&$.evt.touches&&$.evt.touches.length>0){const Ot=$.evt.touches[0],Pt=yt.container().getBoundingClientRect();Lt={x:Ot.clientX-Pt.left,y:Ot.clientY-Pt.top}}if(Lt){if(N&&i==="select"){H({...U,width:Lt.x-U.x,height:Lt.y-U.y});return}if(m){if(i==="line"||i==="arrow"){const Ot={...E,points:[E.points[0],E.points[1],Lt.x,Lt.y]};A(Ot)}else if(i==="box"){const Ot={...E,width:Lt.x-E.x,height:Lt.y-E.y};A(Ot)}else if(i==="circle"){const Ot={...E,width:Lt.x-E.x,height:Lt.y-E.y};A(Ot)}}}},To=$=>{const yt=$.target.getStage();let Lt=yt.getPointerPosition();if(!Lt&&$.evt.changedTouches&&$.evt.changedTouches.length>0){const Ot=$.evt.changedTouches[0],Pt=yt.container().getBoundingClientRect();Lt={x:Ot.clientX-Pt.left,y:Ot.clientY-Pt.top}}if(Lt){if(N){const Ot=vs(U),Pt=h.filter(ge=>Es(ge.x,ge.y,Ot)),ue=l.filter(ge=>{if(ge.type==="line"||ge.type==="arrow"){for(let ni=0;ni<ge.points.length;ni+=2)if(Es(ge.points[ni],ge.points[ni+1],Ot))return!0;return!1}else{const ni=ge.x+(ge.width?ge.width/2:0),$r=ge.y+(ge.height?ge.height/2:0);return Es(ni,$r,Ot)}}),zt=Pt.map(ge=>ge.id),Ht=ue.map(ge=>ge.id),re=[...zt,...Ht];P(re),H(null),x(!1);return}m&&(c([...l,E]),A(null),nt(!0))}},vs=$=>({x:$.width>=0?$.x:$.x+$.width,y:$.height>=0?$.y:$.y+$.height,width:Math.abs($.width),height:Math.abs($.height)}),Es=($,yt,Lt)=>$>=Lt.x&&$<=Lt.x+Lt.width&&yt>=Lt.y&&yt<=Lt.y+Lt.height,Ki=$=>{const yt=$.target.id();if(C(yt),i==="select"&&!R.includes(yt)&&P([...R,yt]),Je&&yt.startsWith("player")){const Lt=h.find(Pt=>Pt.id===yt);if(!Lt)return;const Ot=Yt?pe:Ke;if(Lt.color===Ot&&Lt.isGoalkeeper)return}},Vi=$=>{const yt=$.target.id();if(yt.startsWith("player")){const Lt=h.find(ue=>ue.id===yt);if(!Lt)return;const Ot=$.target.x()-Lt.x,Pt=$.target.y()-Lt.y;if(Je){const ue=Yt?pe:Ke;if(Lt.color===ue){if(Lt.isGoalkeeper){const Ht=h.map(re=>re.id===yt?{...re,x:re.x,y:re.y}:re);g(Ht);return}const zt=h.map(Ht=>Ht.color===Lt.color&&!Ht.isGoalkeeper?{...Ht,x:Ht.x+Ot,y:Ht.y+Pt}:Ht);g(zt),nt(!0)}else{const zt=h.map(Ht=>Ht.id===yt?{...Ht,x:$.target.x(),y:$.target.y()}:Ht);g(zt),nt(!0)}}else if(i==="select"&&R.length>1&&R.includes(yt)){const ue=h.map(Ht=>R.includes(Ht.id)?{...Ht,x:Ht.x+Ot,y:Ht.y+Pt}:Ht),zt=l.map(Ht=>{if(R.includes(Ht.id))if(Ht.type==="line"||Ht.type==="arrow"){const re=[...Ht.points];for(let ge=0;ge<re.length;ge+=2)re[ge]+=Ot,re[ge+1]+=Pt;return{...Ht,points:re}}else{if(Ht.type==="box"||Ht.type==="football")return{...Ht,x:$.target.x(),y:$.target.y()};if(Ht.type==="circle")return{...Ht,x:$.target.x()-Ht.width/2,y:$.target.y()-Ht.height/2}}return Ht});g(ue),c(zt),nt(!0)}else{const ue=h.map(zt=>zt.id===yt?{...zt,x:$.target.x(),y:$.target.y()}:zt);g(ue),nt(!0)}}else{const Lt=l.find(ue=>ue.id===yt);if(!Lt)return;let Ot,Pt;if(Lt.type==="line"||Lt.type==="arrow"?(Ot=$.target.points()[0]-Lt.points[0],Pt=$.target.points()[1]-Lt.points[1]):(Ot=$.target.x()-Lt.x,Pt=$.target.y()-Lt.y),i==="select"&&R.length>1&&R.includes(yt)){const ue=h.map(Ht=>R.includes(Ht.id)?{...Ht,x:Ht.x+Ot,y:Ht.y+Pt}:Ht),zt=l.map(Ht=>{if(R.includes(Ht.id))if(Ht.type==="line"||Ht.type==="arrow"){const re=[...Ht.points];for(let ge=0;ge<re.length;ge+=2)re[ge]+=Ot,re[ge+1]+=Pt;return{...Ht,points:re}}else{if(Ht.type==="box"||Ht.type==="football")return{...Ht,x:$.target.x(),y:$.target.y()};if(Ht.type==="circle")return{...Ht,x:$.target.x()-Ht.width/2,y:$.target.y()-Ht.height/2}}return Ht});g(ue),c(zt),nt(!0)}else{const ue=l.map(zt=>{if(zt.id===yt)if(zt.type==="line"||zt.type==="arrow"){const Ht=[...zt.points];for(let re=0;re<Ht.length;re+=2)Ht[re]+=Ot,Ht[re+1]+=Pt;return{...zt,points:Ht}}else{if(zt.type==="box"||zt.type==="football")return{...zt,x:$.target.x(),y:$.target.y()};if(zt.type==="circle")return{...zt,x:$.target.x()-zt.width/2,y:$.target.y()-zt.height/2}}return zt});c(ue),nt(!0)}}},wn=$=>{if($&&$!==He){if($.startsWith("player")){const yt=h.filter(Lt=>Lt.id!==$);g(yt)}else{const yt=l.filter(Lt=>Lt.id!==$);c(yt)}C(null),nt(!0)}},Xr=()=>{mi("delete")},Ss=()=>{const $=l.find(yt=>yt.id===He);c($?[$]:[]),g([]),F({}),C(null),nt(!0)},Js=()=>{if(bt>0){const $=bt-1,yt=Q[$];let Lt=[...yt.shapes];if(!Lt.find(Pt=>Pt.id===He)&&He){const Pt=l.find(ue=>ue.id===He);Pt&&Lt.push(Pt)}c(Lt),g(yt.players),F(yt.playerNumbers),lt($),C(null)}},Qe=()=>{if(bt<Q.length-1){const $=bt+1,yt=Q[$];let Lt=[...yt.shapes];if(!Lt.find(Pt=>Pt.id===He)&&He){const Pt=l.find(ue=>ue.id===He);Pt&&Lt.push(Pt)}c(Lt),g(yt.players),F(yt.playerNumbers),lt($),C(null)}},Ts=$=>{const yt=$.target.value.replace(/[^0-9]/g,"");B(yt)},Ea=$=>{b($.target.value)},Sa=$=>{$.preventDefault(),M&&V&&(typeof L[M.id]=="object"?F({...L,[M.id]:{...L[M.id],number:V,name:Y}}):F({...L,[M.id]:{number:V,name:Y}}),nt(!0)),j(!1),I(null)},Il=$=>{($.key==="Delete"||$.key==="Backspace")&&D&&wn(D),$.key==="`"&&!K&&(G(yt=>!yt),$.preventDefault())},bs=$=>{et($.target.value)},bo=$=>{if($.preventDefault(),X.trim()){const yt={type:"feedback",text:X,timestamp:new Date().toLocaleTimeString()};console.log("User Feedback:",X),pt(Lt=>[...Lt,yt]),et("")}},$s=($,yt,Lt)=>{let Ot;switch($){case"442":Ot=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.4,y:.2},{x:.4,y:.4},{x:.4,y:.6},{x:.4,y:.8},{x:.6,y:.4},{x:.6,y:.6}];break;case"433":Ot=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.4,y:.35},{x:.4,y:.5},{x:.4,y:.65},{x:.65,y:.25},{x:.65,y:.5},{x:.65,y:.75}];break;case"4231":Ot=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.35,y:.4},{x:.35,y:.6},{x:.5,y:.25},{x:.5,y:.5},{x:.5,y:.75},{x:.65,y:.5}];break;case"532":Ot=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.35},{x:.2,y:.5},{x:.2,y:.65},{x:.2,y:.8},{x:.4,y:.3},{x:.4,y:.5},{x:.4,y:.7},{x:.65,y:.4},{x:.65,y:.6}];break;default:Ot=[]}return yt&&(Ot=Ot.map(Pt=>({x:Pt.x,y:1-Pt.y}))),yt||(Ot=Ot.map(Pt=>({x:1-Pt.x,y:Pt.y}))),Lt&&(yt?Ot=Ot.map(Pt=>({x:Pt.y,y:1-Pt.x})):Ot=Ot.map(Pt=>({x:Pt.y,y:Pt.x}))),Ot};Gt.useEffect(()=>{if(!ea)if(kn){const $=nD(kn.uid,yt=>{ya(yt)});return ye(!0),eD(kn.uid).then(yt=>{ya(yt)}).catch(yt=>{console.error("Error loading initial boards:",yt)}).finally(()=>{ye(!1)}),()=>$()}else{const $=localStorage.getItem("footballTacticsBoards");if($)try{const yt=JSON.parse($);ya(yt)}catch(yt){console.error("Error loading saved boards from localStorage:",yt)}}},[kn,ea]);const gu=()=>{if(!kn){_a("save"),Pa(!0);return}Hi(Jn==="save"?"board":"save"),Ma(""),Qr(-1),qi(!1)},mu=()=>{if(!kn){_a("load"),Pa(!0);return}Hi(Jn==="load"?"board":"load"),Ma(""),Qr(-1)},za=async()=>{if(!Mi.trim())return;if(Ce!==-1&&!nr){qi(!0);return}ti(!0);const $={name:Mi.trim(),date:new Date().toISOString(),shapes:l,players:h,playerNumbers:L,homeTeamColor:pe,awayTeamColor:Ke,verticalOrientation:dt};try{if(kn)await tD(kn.uid,$);else{let yt;Ce!==-1?(yt=[...Hn],yt[Ce]=$):yt=[...Hn,$],ya(yt),localStorage.setItem("footballTacticsBoards",JSON.stringify(yt))}Hi("board"),qi(!1)}catch(yt){console.error("Error saving board:",yt),alert("Failed to save your board. Please try again.")}finally{ti(!1)}},Ta=()=>{if(Ce!==-1){ye(!0);try{const $=Hn[Ce];c($.shapes||[]),g($.players||[]),F($.playerNumbers||{}),ae($.homeTeamColor||null),ve($.awayTeamColor||null),Nt($.verticalOrientation||!1);const yt=$.shapes.find(Lt=>Lt.isDefault===!0);yt&&Fn(yt.id),Hi("board"),nt(!0)}catch($){console.error("Error loading board:",$),alert("Failed to load your board. Please try again.")}finally{ye(!1)}}},Zr=$=>{Qr($),Ma(Hn[$].name),qi(!1)},ar=async()=>{if(Ce!==-1){if(!Va){ps(!0);return}ye(!0);try{if(kn)await iD(kn.uid,Hn[Ce].name);else{const $=[...Hn];$.splice(Ce,1),ya($),localStorage.setItem("footballTacticsBoards",JSON.stringify($))}Qr(-1),Ma(""),ps(!1)}catch($){console.error("Error deleting board:",$),alert("Failed to delete your board. Please try again.")}finally{ye(!1)}}},rr=()=>{Hi("board"),Ma(""),Qr(-1),qi(!1),ps(!1)},sr=()=>{Pa(!1),_a("")};Gt.useEffect(()=>{kn&&ys&&(ys==="save"?Hi("save"):ys==="load"&&Hi("load"),_a(""))},[kn,ys]);const Ol=($,yt)=>{switch($){case"442":return["GK","RB","RCB","LCB","LB","RM","RCM","LCM","LM","RS","LS"][yt];case"433":return["GK","RB","RCB","LCB","LB","RDM","CDM","LDM","RW","CF","LW"][yt];case"4231":return["GK","RB","RCB","LCB","LB","RDM","LDM","RAM","CAM","LAM","ST"][yt];case"532":return["GK","RWB","RCB","CB","LCB","LWB","RCM","CM","LCM","RS","LS"][yt];default:return`P${yt}`}},Ao=()=>{Wn({numbers:Array(11).fill("").map(($,yt)=>(yt+1).toString()),names:Array(11).fill(""),formation:"442",side:"left",teamColor:e}),ji(!0)},Tr=()=>{ji(!1),$e(null)},Yi=($,yt,Lt)=>{const Ot={...we};Ot[Lt][yt]=$.target.value,Wn(Ot)},lr=$=>{Wn({...we,formation:$})},ka=$=>{Wn({...we,side:$})},As=$=>{Wn({...we,teamColor:$})},Wr=()=>{if(we.numbers.some(ue=>!ue)){alert("Please enter numbers for all players");return}const $=h.filter(ue=>ue.color!==we.teamColor),yt=we.side==="left",Ot=$s(we.formation,yt,dt).map((ue,zt)=>({id:`player-${$.length+zt}-${Date.now()+zt}`,x:ue.x*Wt,y:ue.y*Jt,radius:ei,color:we.teamColor,type:"player",team:yt?"home":"away",isGoalkeeper:zt===0})),Pt={};Ot.forEach((ue,zt)=>{Pt[ue.id]={number:we.numbers[zt],name:we.names[zt]}}),g([...$,...Ot]),F({...L,...Pt}),yt?(ae(we.teamColor),ce(!0)):(ve(we.teamColor),ce(!1)),nt(!0),Tr()},Ml=$=>{const yt=h.filter(zt=>zt.color===$);if(yt.length===0)return;const Lt=yt[0].team==="home",Ot="442",Pt=Array(11).fill("").map((zt,Ht)=>(Ht+1).toString()),ue=Array(11).fill("");yt.forEach(zt=>{var re,ge,ni;const Ht=yt.findIndex($r=>$r.id===zt.id);Ht>=0&&Ht<11&&(typeof L[zt.id]=="object"?(Pt[Ht]=((re=L[zt.id])==null?void 0:re.number)||"",ue[Ht]=((ge=L[zt.id])==null?void 0:ge.name)||""):Pt[Ht]=((ni=L[zt.id])==null?void 0:ni.toString())||"")}),Wn({numbers:Pt,names:ue,formation:Ot,side:Lt?"left":"right",teamColor:$}),ji(!0)},ia=$=>{var Ot,Pt,ue;if(!$)return;let yt="",Lt="";typeof L[$.id]=="object"?(yt=((Ot=L[$.id])==null?void 0:Ot.number)||"",Lt=((Pt=L[$.id])==null?void 0:Pt.name)||""):yt=((ue=L[$.id])==null?void 0:ue.toString())||"",jn({id:$.id,number:yt,name:Lt}),Ji(!0)},aa=()=>{Ji(!1),$e(null)},Cs=()=>{const{id:$,number:yt,name:Lt}=wi;$&&yt&&(F({...L,[$]:{number:yt,name:Lt}}),nt(!0)),aa()},qn=($,yt)=>{jn({...wi,[yt]:$.target.value})},[tn,br]=Gt.useState(!1),Rs=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),br(!1)):(document.documentElement.requestFullscreen().catch($=>{console.log(`Error attempting to enable fullscreen: ${$.message}`)}),br(!0))};Gt.useEffect(()=>{const $=()=>{br(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",$),()=>{document.removeEventListener("fullscreenchange",$)}},[]);const Co=()=>{Ye(!Re)},Ba=$=>{if($==null||$.preventDefault(),Zs.trim()){const yt={id:`text-${l.length}-${Date.now()}`,x:vr.x,y:vr.y,text:Zs.trim(),color:e,type:"text"};c([...l,yt]),nt(!0)}Xs(!1)},Jr=()=>{Xs(!1)},or=$=>{$i($.target.value)};return tt.jsxs("div",{className:"tactics-board",tabIndex:0,onKeyDown:Il,children:[tt.jsx("h1",{children:"Football Tactics Board"}),tt.jsxs("div",{className:`main-container ${Ie?"mobile-view":""}`,children:[Ie&&tt.jsx("button",{className:`mobile-menu-toggle ${Re?"open":""}`,onClick:Co,"aria-label":"Toggle menu",children:tt.jsxs("div",{className:"menu-icon",children:[tt.jsx("span",{}),tt.jsx("span",{}),tt.jsx("span",{})]})}),Ie&&Re&&tt.jsx("div",{className:"mobile-menu-overlay",onClick:()=>Ye(!1)}),tt.jsxs("div",{className:`sidebar-toolbar ${Ie?"mobile":""} ${Re?"open":""}`,children:[tt.jsxs("div",{className:"toolbar-section color-section",children:[Ie&&tt.jsx("button",{className:"mobile-menu-close",onClick:()=>Ye(!1),"aria-label":"Close menu",children:""}),tt.jsx("div",{className:"current-color-display",children:tt.jsx("div",{className:"color-circle",style:{backgroundColor:e}})}),tt.jsxs("div",{className:"colors-grid",children:[tt.jsx("button",{className:e==="#FF0000"?"active":"",onClick:()=>Vn("#FF0000"),style:{backgroundColor:"#FF0000"}}),tt.jsx("button",{className:e==="#0000FF"?"active":"",onClick:()=>Vn("#0000FF"),style:{backgroundColor:"#0000FF"}}),tt.jsx("button",{className:e==="#00FF00"?"active":"",onClick:()=>Vn("#00FF00"),style:{backgroundColor:"#00FF00"}}),tt.jsx("button",{className:e==="#FFFF00"?"active":"",onClick:()=>Vn("#FFFF00"),style:{backgroundColor:"#FFFF00"}}),tt.jsx("button",{className:e==="#000000"?"active":"",onClick:()=>Vn("#000000"),style:{backgroundColor:"#000000"}}),tt.jsx("button",{className:e==="#FFFFFF"?"active":"",onClick:()=>Vn("#FFFFFF"),style:{backgroundColor:"#FFFFFF",border:"1px solid #333"}}),tt.jsx("button",{className:e==="#FFA500"?"active":"",onClick:()=>Vn("#FFA500"),style:{backgroundColor:"#FFA500"}}),tt.jsx("button",{className:e==="#800080"?"active":"",onClick:()=>Vn("#800080"),style:{backgroundColor:"#800080"}}),tt.jsx("button",{className:"color-picker-button",title:"Color Picker",children:tt.jsx("input",{type:"color",value:e,onChange:$=>Vn($.target.value)})})]})]}),tt.jsxs("div",{className:"toolbar-section",children:[tt.jsx("h3",{children:"Draw"}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="line"?"active":"",onClick:()=>mi("line"),children:"Line"}),tt.jsx("button",{className:i==="arrow"?"active":"",onClick:()=>mi("arrow"),children:"Arrow"})]}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="box"?"active":"",onClick:()=>mi("box"),children:"Rectangle"}),tt.jsx("button",{className:i==="circle"?"active":"",onClick:()=>mi("circle"),children:"Circle"})]}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="cone"?"active":"",onClick:()=>mi("cone"),children:"Cone"}),tt.jsx("button",{className:i==="text"?"active":"",onClick:()=>mi("text"),children:"Text"})]})]}),tt.jsxs("div",{className:"toolbar-section",children:[tt.jsx("h3",{children:"Tools"}),tt.jsx("div",{className:"category-label",children:"Team"}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{onClick:Ao,children:"Add"}),tt.jsx("button",{className:Sn==="team"?"active":"",onClick:()=>Sr("team"),children:"Edit"})]}),tt.jsx("div",{className:"category-label",children:"Player"}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="player"?"active":"",onClick:()=>mi("player"),children:"Add"}),tt.jsx("button",{className:Sn==="player"?"active":"",onClick:()=>Sr("player"),children:"Edit"})]}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="football"?"active":"",onClick:()=>mi("football"),children:"Ball"}),tt.jsx("button",{className:i==="select"?"active":"",onClick:()=>mi("select"),children:"Select"})]})]}),tt.jsxs("div",{className:"toolbar-section",children:[tt.jsx("h3",{children:"Edit"}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{className:i==="delete"?"active":"",onClick:Xr,children:"Delete"}),tt.jsx("button",{onClick:Ss,children:"Clear"})]}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{onClick:Js,disabled:bt<=0,className:bt<=0?"disabled":"",children:"Undo"}),tt.jsx("button",{onClick:Qe,disabled:bt>=Q.length-1,className:bt>=Q.length-1?"disabled":"",children:"Redo"})]})]}),tt.jsxs("div",{className:"toolbar-section",children:[tt.jsx("h3",{children:"Options"}),tt.jsxs("div",{className:"button-row",children:[tt.jsx("button",{onClick:gu,className:Jn==="save"?"active":"",children:"Save"}),tt.jsx("button",{onClick:mu,className:Jn==="load"?"active":"",children:"Load"})]}),tt.jsx("div",{className:"button-row",children:kn?tt.jsx("button",{onClick:()=>Ua(!0),children:"Profile"}):tt.jsx("button",{onClick:()=>Pa(!0),children:"Login / Sign Up"})})]})]}),tt.jsx("div",{className:`canvas-container ${Ie?"mobile-view":""}`,style:{width:Wt,height:Jt},children:Jn==="board"?tt.jsxs(tt.Fragment,{children:[tt.jsx(yA,{ref:du,width:Wt,height:Jt,onMouseDown:Ni,onMouseMove:So,onMouseUp:To,onTouchStart:Ni,onTouchMove:So,onTouchEnd:To,children:tt.jsxs(pA,{children:[tt.jsx(Hs,{x:0,y:0,width:Wt,height:Jt,fill:"#4CAF50",stroke:"#FFFFFF",strokeWidth:2}),dt?tt.jsxs(tt.Fragment,{children:[tt.jsx($u,{x:Wt/2,y:Jt/2,radius:Wt/5,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Kg,{points:[0,Jt/2,Wt,Jt/2],stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:(Wt-Wt*.275)/2,y:0,width:Wt*.275,height:Jt*.055,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:(Wt-Wt*.275)/2,y:Jt-Jt*.055,width:Wt*.275,height:Jt*.055,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:(Wt-Wt*.6)/2,y:0,width:Wt*.6,height:Jt*.16,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:(Wt-Wt*.6)/2,y:Jt-Jt*.16,width:Wt*.6,height:Jt*.16,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx($u,{x:Wt/2,y:Jt*.11,radius:Wt/150,fill:"#FFFFFF"}),tt.jsx($u,{x:Wt/2,y:Jt-Jt*.11,radius:Wt/150,fill:"#FFFFFF"}),tt.jsx(rp,{x:Wt/2,y:Jt*.905,innerRadius:Wt*.2,outerRadius:Wt*.2,angle:120,rotation:210,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(rp,{x:Wt/2,y:Jt-Jt*.905,innerRadius:Wt*.2,outerRadius:Wt*.2,angle:120,rotation:30,stroke:"#FFFFFF",strokeWidth:2})]}):tt.jsxs(tt.Fragment,{children:[tt.jsx($u,{x:Wt/2,y:Jt/2,radius:Jt/5,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Kg,{points:[Wt/2,0,Wt/2,Jt],stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:0,y:(Jt-Jt*.275)/2,width:Wt*.055,height:Jt*.275,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:Wt-Wt*.055,y:(Jt-Jt*.275)/2,width:Wt*.055,height:Jt*.275,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:0,y:(Jt-Jt*.6)/2,width:Wt*.16,height:Jt*.6,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(Hs,{x:Wt-Wt*.16,y:(Jt-Jt*.6)/2,width:Wt*.16,height:Jt*.6,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx($u,{x:Wt*.11,y:Jt/2,radius:Jt/150,fill:"#FFFFFF"}),tt.jsx($u,{x:Wt-Wt*.11,y:Jt/2,radius:Jt/150,fill:"#FFFFFF"}),tt.jsx(rp,{x:Wt*.095,y:Jt/2,innerRadius:Jt*.2,outerRadius:Jt*.2,angle:120,rotation:300,stroke:"#FFFFFF",strokeWidth:2}),tt.jsx(rp,{x:Wt-Wt*.095,y:Jt/2,innerRadius:Jt*.2,outerRadius:Jt*.2,angle:120,rotation:120,stroke:"#FFFFFF",strokeWidth:2})]}),l.map($=>$.type==="line"?tt.jsx(Kg,{id:$.id,points:$.points,stroke:$.color,strokeWidth:3,onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi},$.id):$.type==="arrow"?tt.jsx(qE,{id:$.id,points:$.points,pointerLength:10,pointerWidth:10,stroke:$.color,strokeWidth:3,onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi},$.id):$.type==="box"?tt.jsx(Hs,{id:$.id,x:$.x,y:$.y,width:$.width,height:$.height,stroke:$.color,strokeWidth:3,fill:"transparent",onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi},$.id):$.type==="circle"?tt.jsx(HE,{id:$.id,x:$.x+$.width/2,y:$.y+$.height/2,radiusX:Math.abs($.width/2),radiusY:Math.abs($.height/2),stroke:$.color,strokeWidth:3,fill:"transparent",onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi,dragBoundFunc:yt=>({x:yt.x,y:yt.y})},$.id):$.type==="football"?tt.jsx($u,{id:$.id,x:$.x,y:$.y,radius:$.radius,fill:"#FFFFFF",stroke:"#000000",strokeWidth:1,onClick:()=>!i&&C($.id),opacity:D===$.id?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:yt=>{const Lt=yt.target.id(),Ot=l.map(Pt=>Pt.id===Lt?{...Pt,x:yt.target.x(),y:yt.target.y()}:Pt);c(Ot),nt(!0)}},$.id):$.type==="cone"?tt.jsx(D1,{id:$.id,x:$.x,y:$.y,onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi,children:tt.jsx(Kg,{points:[0,-15,10,10,-10,10],closed:!0,fill:$.color,stroke:$.strokeColor,strokeWidth:2})},$.id):$.type==="text"?tt.jsx(D1,{id:$.id,x:$.x,y:$.y,onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,draggable:!0,onDragStart:Ki,onDragEnd:Vi,children:tt.jsx(I1,{text:$.text,fill:$.color,fontSize:16,fontStyle:"bold"})},$.id):null),E&&(E.type==="line"?tt.jsx(Kg,{points:E.points,stroke:E.color,strokeWidth:3,dashEnabled:!0,dash:[5,5]}):E.type==="arrow"?tt.jsx(qE,{points:E.points,pointerLength:10,pointerWidth:10,stroke:E.color,strokeWidth:3,dashEnabled:!0,dash:[5,5]}):E.type==="box"?tt.jsx(Hs,{x:E.x,y:E.y,width:E.width,height:E.height,stroke:E.color,strokeWidth:3,dashEnabled:!0,dash:[5,5],fill:"transparent"}):E.type==="circle"?tt.jsx(HE,{x:E.x+E.width/2,y:E.y+E.height/2,radiusX:Math.abs(E.width/2),radiusY:Math.abs(E.height/2),stroke:E.color,strokeWidth:3,dashEnabled:!0,dash:[5,5],fill:"transparent"}):null),U?tt.jsx(Hs,{x:U.x,y:U.y,width:U.width,height:U.height,fill:"rgba(0, 150, 255, 0.1)",stroke:"rgba(0, 150, 255, 0.8)",strokeWidth:1,dash:[5,5]}):null,h.map($=>{var yt,Lt,Ot;return tt.jsxs(D1,{id:$.id,x:$.x,y:$.y,draggable:!0,onDragStart:Ki,onDragEnd:Vi,onClick:()=>!i&&C($.id),opacity:D===$.id||R.includes($.id)?.7:1,children:[tt.jsx($u,{id:$.id,x:0,y:0,radius:ei,fill:$.color,stroke:"#000000",strokeWidth:2}),tt.jsx(I1,{x:-4,y:-6,text:typeof L[$.id]=="object"?((yt=L[$.id])==null?void 0:yt.number)||"":((Lt=L[$.id])==null?void 0:Lt.toString())||"",fill:"#FFFFFF",fontSize:12,fontStyle:"bold"}),((Ot=L[$.id])==null?void 0:Ot.name)&&tt.jsx(I1,{x:-15,y:ei+5,text:L[$.id].name,fill:"#000000",fontSize:10,width:ei*2,align:"center"})]},$.id)})]})}),tt.jsx("div",{className:"fullscreen-button",onClick:Rs,children:tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:tn?tt.jsx("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}):tt.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]}):Jn==="save"?tt.jsxs("div",{className:"save-load-container",children:[tt.jsx("h2",{children:"Save Tactics Board"}),tt.jsxs("div",{className:"save-input-row",children:[tt.jsx("input",{type:"text",value:Mi,onChange:$=>Ma($.target.value),placeholder:"Enter a name for this save",className:"save-name-input",disabled:$n}),tt.jsx("button",{onClick:za,disabled:!Mi.trim()||$n,className:!Mi.trim()||$n?"disabled":"",children:$n?"Saving...":Ce!==-1?"Update":"Save New"}),tt.jsx("button",{onClick:ar,disabled:Ce===-1||rn,className:Ce===-1||rn?"disabled":"",children:rn?"Deleting...":"Delete"}),tt.jsx("button",{onClick:rr,disabled:$n||rn,children:"Cancel"})]}),nr&&tt.jsxs("div",{className:"overwrite-confirm",children:[tt.jsxs("p",{children:['Are you sure you want to overwrite "',Hn[Ce].name,'"?']}),tt.jsxs("div",{className:"confirm-buttons",children:[tt.jsx("button",{onClick:za,children:"Yes, Overwrite"}),tt.jsx("button",{onClick:()=>qi(!1),children:"Cancel"})]})]}),Va&&tt.jsxs("div",{className:"overwrite-confirm delete-confirm",children:[tt.jsxs("p",{children:['Are you sure you want to delete "',Hn[Ce].name,'"?']}),tt.jsxs("div",{className:"confirm-buttons",children:[tt.jsx("button",{onClick:ar,children:"Yes, Delete"}),tt.jsx("button",{onClick:()=>ps(!1),children:"Cancel"})]})]}),tt.jsxs("div",{className:"saved-boards-list",children:[tt.jsx("h3",{children:"Existing Saves"}),Hn.length===0?tt.jsx("p",{className:"no-saves-message",children:"No saved boards yet. Create your first one!"}):tt.jsx("div",{className:"board-items",children:Hn.map(($,yt)=>tt.jsxs("div",{className:`board-item ${Ce===yt?"selected":""}`,onClick:()=>Zr(yt),children:[tt.jsx("div",{className:"board-name",children:$.name}),tt.jsx("div",{className:"board-date",children:new Date($.date).toLocaleString()})]},yt))})]})]}):Jn==="load"?tt.jsxs("div",{className:"save-load-container",children:[tt.jsx("h2",{children:"Load Tactics Board"}),tt.jsxs("div",{className:"save-input-row",children:[tt.jsx("input",{type:"text",value:Mi,placeholder:"Select a save to load",readOnly:!0,className:"save-name-input"}),tt.jsx("button",{onClick:Ta,disabled:Ce===-1||rn,className:Ce===-1||rn?"disabled":"",children:rn?"Loading...":"Load"}),tt.jsx("button",{onClick:rr,disabled:rn,children:"Cancel"})]}),tt.jsxs("div",{className:"saved-boards-list",children:[tt.jsx("h3",{children:"Available Boards"}),rn&&tt.jsx("p",{className:"loading-message",children:"Loading your saved boards..."}),!rn&&Hn.length===0?tt.jsx("p",{className:"no-saves-message",children:"No saved boards available to load."}):tt.jsx("div",{className:"board-items",children:Hn.map(($,yt)=>tt.jsxs("div",{className:`board-item ${Ce===yt?"selected":""}`,onClick:()=>Zr(yt),children:[tt.jsx("div",{className:"board-name",children:$.name}),tt.jsx("div",{className:"board-date",children:new Date($.date).toLocaleString()})]},yt))})]})]}):null})]}),Zn&&tt.jsx("div",{className:"modal-overlay",children:tt.jsxs("div",{className:"team-dialog",children:[tt.jsxs("div",{className:"team-dialog-header",children:[tt.jsx("h2",{children:"Create Team"}),tt.jsx("button",{className:"close-button",onClick:Tr,children:""})]}),tt.jsxs("div",{className:"team-dialog-body",children:[tt.jsxs("div",{className:"team-options",children:[tt.jsxs("div",{className:"formation-options",children:[tt.jsx("label",{children:"Formation:"}),tt.jsxs("div",{className:"formation-buttons",children:[tt.jsx("button",{className:we.formation==="442"?"active":"",onClick:()=>lr("442"),children:"4-4-2"}),tt.jsx("button",{className:we.formation==="433"?"active":"",onClick:()=>lr("433"),children:"4-3-3"}),tt.jsx("button",{className:we.formation==="4231"?"active":"",onClick:()=>lr("4231"),children:"4-2-3-1"}),tt.jsx("button",{className:we.formation==="532"?"active":"",onClick:()=>lr("532"),children:"5-3-2"})]})]}),tt.jsxs("div",{className:"side-options",children:[tt.jsx("label",{children:"Side:"}),tt.jsxs("div",{className:"side-buttons",children:[tt.jsx("button",{className:we.side==="left"?"active":"",onClick:()=>ka("left"),children:"Left"}),tt.jsx("button",{className:we.side==="right"?"active":"",onClick:()=>ka("right"),children:"Right"})]})]}),tt.jsxs("div",{className:"color-option",children:[tt.jsx("label",{children:"Team Color:"}),tt.jsxs("div",{className:"color-picker",children:[tt.jsx("div",{className:"color-preview",style:{backgroundColor:we.teamColor}}),tt.jsx("input",{type:"color",value:we.teamColor,onChange:$=>As($.target.value)})]})]})]}),tt.jsxs("div",{className:"player-inputs",children:[tt.jsxs("div",{className:"player-input-headers",children:[tt.jsx("div",{className:"player-number-header",children:"Number"}),tt.jsx("div",{className:"player-name-header",children:"Name"})]}),we.numbers.map(($,yt)=>tt.jsxs("div",{className:"player-input-row",children:[tt.jsx("div",{className:"player-position",children:yt===0?"GK":Ol(we.formation,yt)}),tt.jsx("input",{type:"text",className:"player-number-input",value:$,onChange:Lt=>Yi(Lt,yt,"numbers"),placeholder:`#${yt+1}`}),tt.jsx("input",{type:"text",className:"player-name-input",value:we.names[yt],onChange:Lt=>Yi(Lt,yt,"names"),placeholder:"Player name"})]},yt))]})]}),tt.jsxs("div",{className:"team-dialog-footer",children:[tt.jsx("button",{className:"cancel-button",onClick:Tr,children:"Cancel"}),tt.jsx("button",{className:"confirm-button",onClick:Wr,children:"Confirm"})]})]})}),K&&M&&tt.jsx("div",{className:"number-editor-overlay",children:tt.jsxs("div",{className:"number-editor",children:[tt.jsx("h3",{children:"Edit Player Number"}),tt.jsxs("form",{onSubmit:Sa,children:[tt.jsx("input",{type:"text",value:V,onChange:Ts,placeholder:"Number",pattern:"[0-9]*",inputMode:"numeric",autoFocus:!0}),tt.jsx("input",{type:"text",value:Y,onChange:Ea,placeholder:"Player name"}),tt.jsxs("div",{className:"buttons",children:[tt.jsx("button",{type:"submit",children:"Save"}),tt.jsx("button",{type:"button",onClick:()=>j(!1),children:"Cancel"})]})]})]})}),Ve&&tt.jsx("div",{className:"modal-overlay",children:tt.jsxs("div",{className:"player-edit-dialog",children:[tt.jsxs("div",{className:"player-edit-header",children:[tt.jsx("h2",{children:"Edit Player"}),tt.jsx("button",{className:"close-button",onClick:aa,children:""})]}),tt.jsx("div",{className:"player-edit-body",children:tt.jsxs("div",{className:"player-edit-form",children:[tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{children:"Number:"}),tt.jsx("input",{type:"text",value:wi.number,onChange:$=>qn($,"number"),placeholder:"Player number"})]}),tt.jsxs("div",{className:"form-group",children:[tt.jsx("label",{children:"Name:"}),tt.jsx("input",{type:"text",value:wi.name,onChange:$=>qn($,"name"),placeholder:"Player name"})]})]})}),tt.jsxs("div",{className:"player-edit-footer",children:[tt.jsx("button",{className:"cancel-button",onClick:aa,children:"Cancel"}),tt.jsx("button",{className:"confirm-button",onClick:Cs,children:"Confirm"})]})]})}),q&&tt.jsx("div",{className:"console-overlay",children:tt.jsxs("div",{className:"console-container",children:[tt.jsxs("div",{className:"console-header",children:[tt.jsx("h3",{children:"Feedback Console"}),tt.jsx("button",{className:"close-button",onClick:()=>G(!1),children:""})]}),tt.jsx("div",{className:"console-output",children:st.length>0?st.map(($,yt)=>tt.jsxs("div",{className:"console-entry",children:[tt.jsxs("span",{className:"console-timestamp",children:["[",$.timestamp,"]"]}),tt.jsx("span",{className:"console-message",children:$.text})]},yt)):tt.jsx("div",{className:"console-placeholder",children:"Type your feedback for the developer"})}),tt.jsxs("form",{className:"console-input-container",onSubmit:bo,children:[tt.jsx("input",{ref:_s,type:"text",className:"console-input",value:X,onChange:bs,placeholder:"Type your feedback here..."}),tt.jsx("button",{type:"submit",className:"console-send-button",children:"Send"})]})]})}),Yr&&tt.jsx("div",{className:"number-editor-overlay",children:tt.jsxs("div",{className:"number-editor",children:[tt.jsx("h3",{children:"Add Text"}),tt.jsxs("form",{onSubmit:Ba,children:[tt.jsx("input",{type:"text",value:Zs,onChange:or,placeholder:"Enter text",autoFocus:!0}),tt.jsxs("div",{className:"buttons",children:[tt.jsx("button",{type:"submit",children:"Confirm"}),tt.jsx("button",{type:"button",onClick:Jr,children:"Cancel"})]})]})]})}),ir&&tt.jsx(oD,{onClose:sr}),Ws&&tt.jsx(uD,{onClose:()=>Ua(!1)})]})}c6.createRoot(document.getElementById("root")).render(tt.jsx(Gt.StrictMode,{children:tt.jsx(rD,{children:tt.jsx(cD,{})})}));
