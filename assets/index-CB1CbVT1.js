(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(u){if(u.ep)return;u.ep=!0;const c=n(u);fetch(u.href,c)}})();var y2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vp={exports:{}},ud={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function MS(){if(v2)return ud;v2=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,u,c){var d=null;if(c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),"key"in u){c={};for(var m in u)m!=="key"&&(c[m]=u[m])}else c=u;return u=c.ref,{$$typeof:a,type:r,key:d,ref:u!==void 0?u:null,props:c}}return ud.Fragment=t,ud.jsx=n,ud.jsxs=n,ud}var _2;function VS(){return _2||(_2=1,Vp.exports=MS()),Vp.exports}var $=VS(),Up={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function US(){if(S2)return Ne;S2=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),O=Symbol.iterator;function U(X){return X===null||typeof X!="object"?null:(X=O&&X[O]||X["@@iterator"],typeof X=="function"?X:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,I={};function L(X,st,Tt){this.props=X,this.context=st,this.refs=I,this.updater=Tt||C}L.prototype.isReactComponent={},L.prototype.setState=function(X,st){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,st,"setState")},L.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function F(){}F.prototype=L.prototype;function D(X,st,Tt){this.props=X,this.context=st,this.refs=I,this.updater=Tt||C}var x=D.prototype=new F;x.constructor=D,R(x,L.prototype),x.isPureReactComponent=!0;var z=Array.isArray,H={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function j(X,st,Tt,lt,dt,Nt){return Tt=Nt.ref,{$$typeof:a,type:X,key:st,ref:Tt!==void 0?Tt:null,props:Nt}}function V(X,st){return j(X.type,st,void 0,void 0,void 0,X.props)}function w(X){return typeof X=="object"&&X!==null&&X.$$typeof===a}function M(X){var st={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Tt){return st[Tt]})}var k=/\/+/g;function K(X,st){return typeof X=="object"&&X!==null&&X.key!=null?M(""+X.key):st.toString(36)}function T(){}function q(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(T,T):(X.status="pending",X.then(function(st){X.status==="pending"&&(X.status="fulfilled",X.value=st)},function(st){X.status==="pending"&&(X.status="rejected",X.reason=st)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function G(X,st,Tt,lt,dt){var Nt=typeof X;(Nt==="undefined"||Nt==="boolean")&&(X=null);var Vt=!1;if(X===null)Vt=!0;else switch(Nt){case"bigint":case"string":case"number":Vt=!0;break;case"object":switch(X.$$typeof){case a:case t:Vt=!0;break;case b:return Vt=X._init,G(Vt(X._payload),st,Tt,lt,dt)}}if(Vt)return dt=dt(X),Vt=lt===""?"."+K(X,0):lt,z(dt)?(Tt="",Vt!=null&&(Tt=Vt.replace(k,"$&/")+"/"),G(dt,st,Tt,"",function(Dt){return Dt})):dt!=null&&(w(dt)&&(dt=V(dt,Tt+(dt.key==null||X&&X.key===dt.key?"":(""+dt.key).replace(k,"$&/")+"/")+Vt)),st.push(dt)),1;Vt=0;var nt=lt===""?".":lt+":";if(z(X))for(var ht=0;ht<X.length;ht++)lt=X[ht],Nt=nt+K(lt,ht),Vt+=G(lt,st,Tt,Nt,dt);else if(ht=U(X),typeof ht=="function")for(X=ht.call(X),ht=0;!(lt=X.next()).done;)lt=lt.value,Nt=nt+K(lt,ht++),Vt+=G(lt,st,Tt,Nt,dt);else if(Nt==="object"){if(typeof X.then=="function")return G(q(X),st,Tt,lt,dt);throw st=String(X),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return Vt}function Q(X,st,Tt){if(X==null)return X;var lt=[],dt=0;return G(X,lt,"","",function(Nt){return st.call(Tt,Nt,dt++)}),lt}function et(X){if(X._status===-1){var st=X._result;st=st(),st.then(function(Tt){(X._status===0||X._status===-1)&&(X._status=1,X._result=Tt)},function(Tt){(X._status===0||X._status===-1)&&(X._status=2,X._result=Tt)}),X._status===-1&&(X._status=0,X._result=st)}if(X._status===1)return X._result.default;throw X._result}var rt=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function pt(){}return Ne.Children={map:Q,forEach:function(X,st,Tt){Q(X,function(){st.apply(this,arguments)},Tt)},count:function(X){var st=0;return Q(X,function(){st++}),st},toArray:function(X){return Q(X,function(st){return st})||[]},only:function(X){if(!w(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Ne.Component=L,Ne.Fragment=n,Ne.Profiler=u,Ne.PureComponent=D,Ne.StrictMode=r,Ne.Suspense=v,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ne.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ne.cache=function(X){return function(){return X.apply(null,arguments)}},Ne.cloneElement=function(X,st,Tt){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var lt=R({},X.props),dt=X.key,Nt=void 0;if(st!=null)for(Vt in st.ref!==void 0&&(Nt=void 0),st.key!==void 0&&(dt=""+st.key),st)!Y.call(st,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&st.ref===void 0||(lt[Vt]=st[Vt]);var Vt=arguments.length-2;if(Vt===1)lt.children=Tt;else if(1<Vt){for(var nt=Array(Vt),ht=0;ht<Vt;ht++)nt[ht]=arguments[ht+2];lt.children=nt}return j(X.type,dt,void 0,void 0,Nt,lt)},Ne.createContext=function(X){return X={$$typeof:d,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:c,_context:X},X},Ne.createElement=function(X,st,Tt){var lt,dt={},Nt=null;if(st!=null)for(lt in st.key!==void 0&&(Nt=""+st.key),st)Y.call(st,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(dt[lt]=st[lt]);var Vt=arguments.length-2;if(Vt===1)dt.children=Tt;else if(1<Vt){for(var nt=Array(Vt),ht=0;ht<Vt;ht++)nt[ht]=arguments[ht+2];dt.children=nt}if(X&&X.defaultProps)for(lt in Vt=X.defaultProps,Vt)dt[lt]===void 0&&(dt[lt]=Vt[lt]);return j(X,Nt,void 0,void 0,null,dt)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(X){return{$$typeof:m,render:X}},Ne.isValidElement=w,Ne.lazy=function(X){return{$$typeof:b,_payload:{_status:-1,_result:X},_init:et}},Ne.memo=function(X,st){return{$$typeof:_,type:X,compare:st===void 0?null:st}},Ne.startTransition=function(X){var st=H.T,Tt={};H.T=Tt;try{var lt=X(),dt=H.S;dt!==null&&dt(Tt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(pt,rt)}catch(Nt){rt(Nt)}finally{H.T=st}},Ne.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ne.use=function(X){return H.H.use(X)},Ne.useActionState=function(X,st,Tt){return H.H.useActionState(X,st,Tt)},Ne.useCallback=function(X,st){return H.H.useCallback(X,st)},Ne.useContext=function(X){return H.H.useContext(X)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(X,st){return H.H.useDeferredValue(X,st)},Ne.useEffect=function(X,st){return H.H.useEffect(X,st)},Ne.useId=function(){return H.H.useId()},Ne.useImperativeHandle=function(X,st,Tt){return H.H.useImperativeHandle(X,st,Tt)},Ne.useInsertionEffect=function(X,st){return H.H.useInsertionEffect(X,st)},Ne.useLayoutEffect=function(X,st){return H.H.useLayoutEffect(X,st)},Ne.useMemo=function(X,st){return H.H.useMemo(X,st)},Ne.useOptimistic=function(X,st){return H.H.useOptimistic(X,st)},Ne.useReducer=function(X,st,Tt){return H.H.useReducer(X,st,Tt)},Ne.useRef=function(X){return H.H.useRef(X)},Ne.useState=function(X){return H.H.useState(X)},Ne.useSyncExternalStore=function(X,st,Tt){return H.H.useSyncExternalStore(X,st,Tt)},Ne.useTransition=function(){return H.H.useTransition()},Ne.version="19.0.0",Ne}var E2;function Dm(){return E2||(E2=1,Up.exports=US()),Up.exports}var Gt=Dm();const qa=B1(Gt);var Ip={exports:{}},cd={},Lp={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function IS(){return T2||(T2=1,function(a){function t(Q,et){var rt=Q.length;Q.push(et);t:for(;0<rt;){var pt=rt-1>>>1,X=Q[pt];if(0<u(X,et))Q[pt]=et,Q[rt]=X,rt=pt;else break t}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var et=Q[0],rt=Q.pop();if(rt!==et){Q[0]=rt;t:for(var pt=0,X=Q.length,st=X>>>1;pt<st;){var Tt=2*(pt+1)-1,lt=Q[Tt],dt=Tt+1,Nt=Q[dt];if(0>u(lt,rt))dt<X&&0>u(Nt,lt)?(Q[pt]=Nt,Q[dt]=rt,pt=dt):(Q[pt]=lt,Q[Tt]=rt,pt=Tt);else if(dt<X&&0>u(Nt,rt))Q[pt]=Nt,Q[dt]=rt,pt=dt;else break t}}return et}function u(Q,et){var rt=Q.sortIndex-et.sortIndex;return rt!==0?rt:Q.id-et.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();a.unstable_now=function(){return d.now()-m}}var v=[],_=[],b=1,O=null,U=3,C=!1,R=!1,I=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function x(Q){for(var et=n(_);et!==null;){if(et.callback===null)r(_);else if(et.startTime<=Q)r(_),et.sortIndex=et.expirationTime,t(v,et);else break;et=n(_)}}function z(Q){if(I=!1,x(Q),!R)if(n(v)!==null)R=!0,q();else{var et=n(_);et!==null&&G(z,et.startTime-Q)}}var H=!1,Y=-1,j=5,V=-1;function w(){return!(a.unstable_now()-V<j)}function M(){if(H){var Q=a.unstable_now();V=Q;var et=!0;try{t:{R=!1,I&&(I=!1,F(Y),Y=-1),C=!0;var rt=U;try{e:{for(x(Q),O=n(v);O!==null&&!(O.expirationTime>Q&&w());){var pt=O.callback;if(typeof pt=="function"){O.callback=null,U=O.priorityLevel;var X=pt(O.expirationTime<=Q);if(Q=a.unstable_now(),typeof X=="function"){O.callback=X,x(Q),et=!0;break e}O===n(v)&&r(v),x(Q)}else r(v);O=n(v)}if(O!==null)et=!0;else{var st=n(_);st!==null&&G(z,st.startTime-Q),et=!1}}break t}finally{O=null,U=rt,C=!1}et=void 0}}finally{et?k():H=!1}}}var k;if(typeof D=="function")k=function(){D(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,T=K.port2;K.port1.onmessage=M,k=function(){T.postMessage(null)}}else k=function(){L(M,0)};function q(){H||(H=!0,k())}function G(Q,et){Y=L(function(){Q(a.unstable_now())},et)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Q){Q.callback=null},a.unstable_continueExecution=function(){R||C||(R=!0,q())},a.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Q?Math.floor(1e3/Q):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_getFirstCallbackNode=function(){return n(v)},a.unstable_next=function(Q){switch(U){case 1:case 2:case 3:var et=3;break;default:et=U}var rt=U;U=et;try{return Q()}finally{U=rt}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Q,et){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var rt=U;U=Q;try{return et()}finally{U=rt}},a.unstable_scheduleCallback=function(Q,et,rt){var pt=a.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?pt+rt:pt):rt=pt,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=rt+X,Q={id:b++,callback:et,priorityLevel:Q,startTime:rt,expirationTime:X,sortIndex:-1},rt>pt?(Q.sortIndex=rt,t(_,Q),n(v)===null&&Q===n(_)&&(I?(F(Y),Y=-1):I=!0,G(z,rt-pt))):(Q.sortIndex=X,t(v,Q),R||C||(R=!0,q())),Q},a.unstable_shouldYield=w,a.unstable_wrapCallback=function(Q){var et=U;return function(){var rt=U;U=et;try{return Q.apply(this,arguments)}finally{U=rt}}}}(Pp)),Pp}var b2;function k1(){return b2||(b2=1,Lp.exports=IS()),Lp.exports}var zp={exports:{}},ja={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function LS(){if(A2)return ja;A2=1;var a=Dm();function t(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(v,_,b){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:O==null?null:""+O,children:v,containerInfo:_,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ja.createPortal=function(v,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(v,_,null,b)},ja.flushSync=function(v){var _=d.T,b=r.p;try{if(d.T=null,r.p=2,v)return v()}finally{d.T=_,r.p=b,r.d.f()}},ja.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(v,_))},ja.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},ja.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var b=_.as,O=m(b,_.crossOrigin),U=typeof _.integrity=="string"?_.integrity:void 0,C=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?r.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:O,integrity:U,fetchPriority:C}):b==="script"&&r.d.X(v,{crossOrigin:O,integrity:U,fetchPriority:C,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},ja.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=m(_.as,_.crossOrigin);r.d.M(v,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(v)},ja.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,O=m(b,_.crossOrigin);r.d.L(v,b,{crossOrigin:O,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},ja.preloadModule=function(v,_){if(typeof v=="string")if(_){var b=m(_.as,_.crossOrigin);r.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(v)},ja.requestFormReset=function(v){r.d.r(v)},ja.unstable_batchedUpdates=function(v,_){return v(_)},ja.useFormState=function(v,_,b){return d.H.useFormState(v,_,b)},ja.useFormStatus=function(){return d.H.useHostTransitionStatus()},ja.version="19.0.0",ja}var C2;function PS(){if(C2)return zp.exports;C2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),zp.exports=LS(),zp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function zS(){if(R2)return cd;R2=1;var a=k1(),t=Dm(),n=PS();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var j=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===j?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v:return"Fragment";case m:return"Portal";case b:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case C:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case R:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return i=e.displayName||null,i!==null?i:V(e.type)||"Memo";case D:i=e._payload,e=e._init;try{return V(e(i))}catch{}}return null}var w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,k,K;function T(e){if(k===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||"",K=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+e+K}var q=!1;function G(e,i){if(!e||q)return"";q=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(At){var St=At}Reflect.construct(e,[],It)}else{try{It.call()}catch(At){St=At}e.call(It.prototype)}}else{try{throw Error()}catch(At){St=At}(It=e())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(At){if(At&&St&&typeof At.stack=="string")return[At.stack,St.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=h.DetermineComponentFrameRoot(),B=S[0],Z=S[1];if(B&&Z){var it=B.split(`
`),ut=Z.split(`
`);for(p=h=0;h<it.length&&!it[h].includes("DetermineComponentFrameRoot");)h++;for(;p<ut.length&&!ut[p].includes("DetermineComponentFrameRoot");)p++;if(h===it.length||p===ut.length)for(h=it.length-1,p=ut.length-1;1<=h&&0<=p&&it[h]!==ut[p];)p--;for(;1<=h&&0<=p;h--,p--)if(it[h]!==ut[p]){if(h!==1||p!==1)do if(h--,p--,0>p||it[h]!==ut[p]){var wt=`
`+it[h].replace(" at new "," at ");return e.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",e.displayName)),wt}while(1<=h&&0<=p);break}}}finally{q=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?T(o):""}function Q(e){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return e=G(e.type,!1),e;case 11:return e=G(e.type.render,!1),e;case 1:return e=G(e.type,!0),e;default:return""}}function et(e){try{var i="";do i+=Q(e),e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function rt(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function pt(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function X(e){if(rt(e)!==e)throw Error(r(188))}function st(e){var i=e.alternate;if(!i){if(i=rt(e),i===null)throw Error(r(188));return i!==e?null:e}for(var o=e,h=i;;){var p=o.return;if(p===null)break;var S=p.alternate;if(S===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===o)return X(p),e;if(S===h)return X(p),i;S=S.sibling}throw Error(r(188))}if(o.return!==h.return)o=p,h=S;else{for(var B=!1,Z=p.child;Z;){if(Z===o){B=!0,o=p,h=S;break}if(Z===h){B=!0,h=p,o=S;break}Z=Z.sibling}if(!B){for(Z=S.child;Z;){if(Z===o){B=!0,o=S,h=p;break}if(Z===h){B=!0,h=S,o=p;break}Z=Z.sibling}if(!B)throw Error(r(189))}}if(o.alternate!==h)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:i}function Tt(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=Tt(e),i!==null)return i;e=e.sibling}return null}var lt=Array.isArray,dt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nt={pending:!1,data:null,method:null,action:null},Vt=[],nt=-1;function ht(e){return{current:e}}function Dt(e){0>nt||(e.current=Vt[nt],Vt[nt]=null,nt--)}function xt(e,i){nt++,Vt[nt]=e.current,e.current=i}var jt=ht(null),Kt=ht(null),le=ht(null),de=ht(null);function ne(e,i){switch(xt(le,i),xt(Kt,e),xt(jt,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Ky(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=Ky(e),i=Yy(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Dt(jt),xt(jt,i)}function Fe(){Dt(jt),Dt(Kt),Dt(le)}function me(e){e.memoizedState!==null&&xt(de,e);var i=jt.current,o=Yy(i,e.type);i!==o&&(xt(Kt,e),xt(jt,o))}function Ze(e){Kt.current===e&&(Dt(jt),Dt(Kt)),de.current===e&&(Dt(de),ad._currentValue=Nt)}var Oi=Object.prototype.hasOwnProperty,rn=a.unstable_scheduleCallback,bi=a.unstable_cancelCallback,He=a.unstable_shouldYield,Ln=a.unstable_requestPaint,De=a.unstable_now,Mi=a.unstable_getCurrentPriorityLevel,Ae=a.unstable_ImmediatePriority,qe=a.unstable_UserBlockingPriority,Fn=a.unstable_NormalPriority,Vi=a.unstable_LowPriority,Ce=a.unstable_IdlePriority,qn=a.log,vn=a.unstable_setDisableYieldValue,We=null,Me=null;function ji(e){if(Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(We,e,void 0,(e.current.flags&128)===128)}catch{}}function vi(e){if(typeof qn=="function"&&vn(e),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(We,e)}catch{}}var Pn=Math.clz32?Math.clz32:zr,Ps=Math.log,Pr=Math.LN2;function zr(e){return e>>>=0,e===0?32:31-(Ps(e)/Pr|0)|0}var Fi=128,ls=4194304;function qi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kn(e,i){var o=e.pendingLanes;if(o===0)return 0;var h=0,p=e.suspendedLanes,S=e.pingedLanes,B=e.warmLanes;e=e.finishedLanes!==0;var Z=o&134217727;return Z!==0?(o=Z&~p,o!==0?h=qi(o):(S&=Z,S!==0?h=qi(S):e||(B=Z&~B,B!==0&&(h=qi(B))))):(Z=o&~p,Z!==0?h=qi(Z):S!==0?h=qi(S):e||(B=o&~B,B!==0&&(h=qi(B)))),h===0?0:i!==0&&i!==h&&(i&p)===0&&(p=h&-h,B=i&-i,p>=B||p===32&&(B&4194176)!==0)?i:h}function Ui(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function zn(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ki(){var e=Fi;return Fi<<=1,(Fi&4194176)===0&&(Fi=128),e}function Ai(){var e=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),e}function wa(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function be(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zs(e,i,o,h,p,S){var B=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var Z=e.entanglements,it=e.expirationTimes,ut=e.hiddenUpdates;for(o=B&~o;0<o;){var wt=31-Pn(o),It=1<<wt;Z[wt]=0,it[wt]=-1;var St=ut[wt];if(St!==null)for(ut[wt]=null,wt=0;wt<St.length;wt++){var At=St[wt];At!==null&&(At.lane&=-536870913)}o&=~It}h!==0&&Qa(e,h,0),S!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=S&~(B&~i))}function Qa(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var h=31-Pn(i);e.entangledLanes|=i,e.entanglements[h]=e.entanglements[h]|1073741824|o&4194218}function Ii(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var h=31-Pn(o),p=1<<h;p&i|e[h]&i&&(e[h]|=i),o&=~p}}function Na(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ar(){var e=dt.p;return e!==0?e:(e=window.event,e===void 0?32:h2(e.type))}function Li(e,i){var o=dt.p;try{return dt.p=e,i()}finally{dt.p=o}}var Mn=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Mn,Se="__reactProps$"+Mn,Yi="__reactContainer$"+Mn,Da="__reactEvents$"+Mn,Bn="__reactListeners$"+Mn,xa="__reactHandles$"+Mn,sr="__reactResources$"+Mn,os="__reactMarker$"+Mn;function Bs(e){delete e[Vn],delete e[Se],delete e[Da],delete e[Bn],delete e[xa]}function Ci(e){var i=e[Vn];if(i)return i;for(var o=e.parentNode;o;){if(i=o[Yi]||o[Vn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=Zy(e);e!==null;){if(o=e[Vn])return o;e=Zy(e)}return i}e=o,o=e.parentNode}return null}function ln(e){if(e=e[Vn]||e[Yi]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function cn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Jt(e){var i=e[sr];return i||(i=e[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(e){e[os]=!0}var Za=new Set,Xi={};function si(e,i){kn(e,i),kn(e+"Capture",i)}function kn(e,i){for(Xi[e]=i,e=0;e<i.length;e++)Za.add(i[e])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},Qi={};function Sl(e){return Oi.call(Qi,e)?!0:Oi.call(Br,e)?!1:fa.test(e)?Qi[e]=!0:(Br[e]=!0,!1)}function us(e,i,o){if(Sl(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function cs(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Zi(e,i,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+h)}}function ri(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wa(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function hs(e){var i=Wa(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),h=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,S=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(B){h=""+B,S.call(this,B)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(B){h=""+B},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ks(e){e._valueTracker||(e._valueTracker=hs(e))}function El(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return e&&(h=Wa(e)?e.checked?"true":"false":e.value),e=h,e!==o?(i.setValue(e),!0):!1}function rr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fs=/[\n"\\]/g;function An(e){return e.replace(fs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Gs(e,i,o,h,p,S,B,Z){e.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.type=B:e.removeAttribute("type"),i!=null?B==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ri(i)):e.value!==""+ri(i)&&(e.value=""+ri(i)):B!=="submit"&&B!=="reset"||e.removeAttribute("value"),i!=null?kr(e,B,ri(i)):o!=null?kr(e,B,ri(o)):h!=null&&e.removeAttribute("value"),p==null&&S!=null&&(e.defaultChecked=!!S),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.name=""+ri(Z):e.removeAttribute("name")}function lr(e,i,o,h,p,S,B,Z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.type=S),i!=null||o!=null){if(!(S!=="submit"&&S!=="reset"||i!=null))return;o=o!=null?""+ri(o):"",i=i!=null?""+ri(i):o,Z||i===e.value||(e.value=i),e.defaultValue=i}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=Z?e.checked:!!h,e.defaultChecked=!!h,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(e.name=B)}function kr(e,i,o){i==="number"&&rr(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ke(e,i,o,h){if(e=e.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=i.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&h&&(e[o].defaultSelected=!0)}else{for(o=""+ri(o),i=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,h&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function or(e,i,o){if(i!=null&&(i=""+ri(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+ri(o):""}function da(e,i,o,h){if(i==null){if(h!=null){if(o!=null)throw Error(r(92));if(lt(h)){if(1<h.length)throw Error(r(93));h=h[0]}o=h}o==null&&(o=""),i=o}o=ri(i),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h)}function ga(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var Tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ur(e,i,o){var h=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":h?e.setProperty(i,o):typeof o!="number"||o===0||Tl.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function bl(e,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var p in i)h=i[p],i.hasOwnProperty(p)&&o[p]!==h&&ur(e,p,h)}else for(var S in i)i.hasOwnProperty(S)&&ur(e,S,i[S])}function Gr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(e){return fo.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ma=null;function cr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ds=null,Ma=null;function Va(e){var i=ln(e);if(i&&(e=i.stateNode)){var o=e[Se]||null;t:switch(e=i.stateNode,i.type){case"input":if(Gs(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==e&&h.form===e.form){var p=h[Se]||null;if(!p)throw Error(r(90));Gs(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)h=o[i],h.form===e.form&&El(h)}break t;case"textarea":or(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Ke(e,!!o.multiple,i,!1)}}}var Hs=!1;function Al(e,i,o){if(Hs)return e(i,o);Hs=!0;try{var h=e(i);return h}finally{if(Hs=!1,(ds!==null||Ma!==null)&&(zo(),ds&&(i=ds,e=Ma,Ma=ds=null,Va(i),e)))for(i=0;i<e.length;i++)Va(e[i])}}function hr(e,i){var o=e.stateNode;if(o===null)return null;var h=o[Se]||null;if(h===null)return null;o=h[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Wi=!1;if(Pi)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{Wi=!1}var Ja=null,gs=null,js=null;function Hr(){if(js)return js;var e,i=gs,o=i.length,h,p="value"in Ja?Ja.value:Ja.textContent,S=p.length;for(e=0;e<o&&i[e]===p[e];e++);var B=o-e;for(h=1;h<=B&&i[o-h]===p[S-h];h++);return js=p.slice(e,1<h?1-h:void 0)}function Ji(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function dr(){return!1}function Yn(e){function i(o,h,p,S,B){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=S,this.target=B,this.currentTarget=null;for(var Z in e)e.hasOwnProperty(Z)&&(o=e[Z],this[Z]=o?o(S):S[Z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?$i:dr,this.isPropagationStopped=dr,this}return M(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),i}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=Yn(Je),mr=M({},Je,{view:0,detail:0}),tt=Yn(mr),yt,Ut,Ct,Ht=M({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ct&&(Ct&&e.type==="mousemove"?(yt=e.screenX-Ct.screenX,Ut=e.screenY-Ct.screenY):Ut=yt=0,Ct=e),yt)},movementY:function(e){return"movementY"in e?e.movementY:Ut}}),ee=Yn(Ht),Lt=M({},Ht,{dataTransfer:0}),Ft=Yn(Lt),Qt=M({},mr,{relatedTarget:0}),he=Yn(Qt),li=M({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),Fs=Yn(li),rc=M({},Je,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),go=Yn(rc),mo=M({},Je,{data:0}),po=Yn(mo),Cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=oc[e])?!!i[e]:!1}function jr(){return yo}var uc=M({},mr,{key:function(e){if(e.key){var i=Cl[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rl=Yn(uc),eu=M({},Ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vo=Yn(eu),pr=M({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),nu=Yn(pr),cc=M({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),ms=Yn(cc),iu=M({},Ht,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),au=Yn(iu),ta=M({},Je,{newState:0,oldState:0}),qs=Yn(ta),ps=[9,13,27,32],ys=Pi&&"CompositionEvent"in window,g=null;Pi&&"documentMode"in document&&(g=document.documentMode);var A=Pi&&"TextEvent"in window&&!g,P=Pi&&(!ys||g&&8<g&&11>=g),J=" ",ct=!1;function bt(e,i){switch(e){case"keyup":return ps.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ze=!1;function Un(e,i){switch(e){case"compositionend":return qt(i);case"keypress":return i.which!==32?null:(ct=!0,J);case"textInput":return e=i.data,e===J&&ct?null:e;default:return null}}function Be(e,i){if(ze)return e==="compositionend"||!ys&&bt(e,i)?(e=Hr(),js=gs=Ja=null,ze=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return P&&i.locale!=="ko"?null:i.data;default:return null}}var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oi(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Xn[e.type]:i==="textarea"}function Qn(e,i,o,h){ds?Ma?Ma.push(h):Ma=[h]:ds=h,i=Ng(i,"onChange"),0<i.length&&(o=new gr("onChange","change",null,o,h),e.push({event:o,listeners:i}))}var Ri=null,vs=null;function su(e){Gy(e,0)}function hc(e){var i=cn(e);if(El(i))return e}function th(e,i){if(e==="change")return i}var eh=!1;if(Pi){var nh;if(Pi){var ru="oninput"in document;if(!ru){var lu=document.createElement("div");lu.setAttribute("oninput","return;"),ru=typeof lu.oninput=="function"}nh=ru}else nh=!1;eh=nh&&(!document.documentMode||9<document.documentMode)}function Nn(){Ri&&(Ri.detachEvent("onpropertychange",x0),vs=Ri=null)}function x0(e){if(e.propertyName==="value"&&hc(vs)){var i=[];Qn(i,vs,e,cr(e)),Al(su,i)}}function tp(e,i,o){e==="focusin"?(Nn(),Ri=i,vs=o,Ri.attachEvent("onpropertychange",x0)):e==="focusout"&&Nn()}function O0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hc(vs)}function fc(e,i){if(e==="click")return hc(i)}function wl(e,i){if(e==="input"||e==="change")return hc(i)}function M0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ua=typeof Object.is=="function"?Object.is:M0;function Ks(e,i){if(Ua(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!Oi.call(i,p)||!Ua(e[p],i[p]))return!1}return!0}function Ia(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hf(e,i){var o=Ia(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=i&&h>=i)return{node:o,offset:i-e};e=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ia(o)}}function ff(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?ff(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function df(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=rr(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=rr(e.document)}return i}function dc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function gf(e,i){var o=df(i);i=e.focusedElem;var h=e.selectionRange;if(o!==i&&i&&i.ownerDocument&&ff(i.ownerDocument.documentElement,i)){if(h!==null&&dc(i)){if(e=h.start,o=h.end,o===void 0&&(o=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(o,i.value.length);else if(o=(e=i.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var p=i.textContent.length,S=Math.min(h.start,p);h=h.end===void 0?S:Math.min(h.end,p),!o.extend&&S>h&&(p=h,h=S,S=p),p=hf(i,S);var B=hf(i,h);p&&B&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==B.node||o.focusOffset!==B.offset)&&(e=e.createRange(),e.setStart(p.node,p.offset),o.removeAllRanges(),S>h?(o.addRange(e),o.extend(B.node,B.offset)):(e.setEnd(B.node,B.offset),o.addRange(e)))}}for(e=[],o=i;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)o=e[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ih=Pi&&"documentMode"in document&&11>=document.documentMode,_o=null,mf=null,ou=null,ah=!1;function _s(e,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ah||_o==null||_o!==rr(h)||(h=_o,"selectionStart"in h&&dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ou&&Ks(ou,h)||(ou=h,h=Ng(mf,"onSelect"),0<h.length&&(i=new gr("onSelect","select",null,i,o),e.push({event:i,listeners:h}),i.target=_o)))}function Fr(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var So={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},pf={},sh={};Pi&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function ui(e){if(pf[e])return pf[e];if(!So[e])return e;var i=So[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in sh)return pf[e]=i[o];return e}var yf=ui("animationend"),La=ui("animationiteration"),vf=ui("animationstart"),qr=ui("transitionrun"),uu=ui("transitionstart"),Nl=ui("transitioncancel"),rh=ui("transitionend"),lh=new Map,Kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ss(e,i){lh.set(e,i),si(i,[e])}var zi=[],yr=0,Yr=0;function gc(){for(var e=yr,i=Yr=yr=0;i<e;){var o=zi[i];zi[i++]=null;var h=zi[i];zi[i++]=null;var p=zi[i];zi[i++]=null;var S=zi[i];if(zi[i++]=null,h!==null&&p!==null){var B=h.pending;B===null?p.next=p:(p.next=B.next,B.next=p),h.pending=p}S!==0&&pc(o,p,S)}}function mc(e,i,o,h){zi[yr++]=e,zi[yr++]=i,zi[yr++]=o,zi[yr++]=h,Yr|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Eo(e,i,o,h){return mc(e,i,o,h),yc(e)}function Xr(e,i){return mc(e,null,null,i),yc(e)}function pc(e,i,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var p=!1,S=e.return;S!==null;)S.childLanes|=o,h=S.alternate,h!==null&&(h.childLanes|=o),S.tag===22&&(e=S.stateNode,e===null||e._visibility&1||(p=!0)),e=S,S=S.return;p&&i!==null&&e.tag===3&&(S=e.stateNode,p=31-Pn(o),S=S.hiddenUpdates,e=S[p],e===null?S[p]=[i]:e.push(i),i.lane=o|536870912)}function yc(e){if(50<xs)throw xs=0,ml=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Dl={},oh=new WeakMap;function Pa(e,i){if(typeof e=="object"&&e!==null){var o=oh.get(e);return o!==void 0?o:(i={value:e,source:i,stack:et(i)},oh.set(e,i),i)}return{value:e,source:i,stack:et(i)}}var To=[],xl=0,ea=null,vc=0,En=[],$a=0,Qr=null,vr=1,Zr="";function pa(e,i){To[xl++]=vc,To[xl++]=ea,ea=e,vc=i}function _f(e,i,o){En[$a++]=vr,En[$a++]=Zr,En[$a++]=Qr,Qr=e;var h=vr;e=Zr;var p=32-Pn(h)-1;h&=~(1<<p),o+=1;var S=32-Pn(i)+p;if(30<S){var B=p-p%5;S=(h&(1<<B)-1).toString(32),h>>=B,p-=B,vr=1<<32-Pn(i)+p|o<<p|h,Zr=S+e}else vr=1<<S|o<<p|h,Zr=e}function _c(e){e.return!==null&&(pa(e,1),_f(e,1,0))}function Ol(e){for(;e===ea;)ea=To[--xl],To[xl]=null,vc=To[--xl],To[xl]=null;for(;e===Qr;)Qr=En[--$a],En[$a]=null,Zr=En[--$a],En[$a]=null,vr=En[--$a],En[$a]=null}var na=null,wi=null,$e=!1,Es=null,Ts=!1,Sc=Error(r(519));function bo(e){var i=Error(r(418,""));throw _r(Pa(i,e)),Sc}function V0(e){var i=e.stateNode,o=e.type,h=e.memoizedProps;switch(i[Vn]=e,i[Se]=h,o){case"dialog":en("cancel",i),en("close",i);break;case"iframe":case"object":case"embed":en("load",i);break;case"video":case"audio":for(o=0;o<$f.length;o++)en($f[o],i);break;case"source":en("error",i);break;case"img":case"image":case"link":en("error",i),en("load",i);break;case"details":en("toggle",i);break;case"input":en("invalid",i),lr(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),ks(i);break;case"select":en("invalid",i);break;case"textarea":en("invalid",i),da(i,h.value,h.defaultValue,h.children),ks(i)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||h.suppressHydrationWarning===!0||qy(i.textContent,o)?(h.popover!=null&&(en("beforetoggle",i),en("toggle",i)),h.onScroll!=null&&en("scroll",i),h.onScrollEnd!=null&&en("scrollend",i),h.onClick!=null&&(i.onclick=Dg),i=!0):i=!1,i||bo(e)}function U0(e){for(na=e.return;na;)switch(na.tag){case 3:case 27:Ts=!0;return;case 5:case 13:Ts=!1;return;default:na=na.return}}function cu(e){if(e!==na)return!1;if(!$e)return U0(e),$e=!0,!1;var i=!1,o;if((o=e.tag!==3&&e.tag!==27)&&((o=e.tag===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Sp(e.type,e.memoizedProps)),o=!o),o&&(i=!0),i&&wi&&bo(e),U0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(i===0){wi=yl(e.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;e=e.nextSibling}wi=null}}else wi=na?yl(e.stateNode.nextSibling):null;return!0}function hu(){wi=na=null,$e=!1}function _r(e){Es===null?Es=[e]:Es.push(e)}var Ml=Error(r(460)),Sf=Error(r(474)),uh={then:function(){}};function I0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ec(){}function Vl(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(Ec,Ec),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Ml?Error(r(483)):e;default:if(typeof i.status=="string")i.then(Ec,Ec);else{if(e=gn,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(h){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=h}},function(h){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Ml?Error(r(483)):e}throw fu=i,Ml}}var fu=null;function on(){if(fu===null)throw Error(r(459));var e=fu;return fu=null,e}var Ul=null,Tc=0;function bc(e){var i=Tc;return Tc+=1,Ul===null&&(Ul=[]),Vl(Ul,e,i)}function Ac(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function ch(e,i){throw i.$$typeof===c?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function L0(e){var i=e._init;return i(e._payload)}function P0(e){function i(gt,ot){if(e){var vt=gt.deletions;vt===null?(gt.deletions=[ot],gt.flags|=16):vt.push(ot)}}function o(gt,ot){if(!e)return null;for(;ot!==null;)i(gt,ot),ot=ot.sibling;return null}function h(gt){for(var ot=new Map;gt!==null;)gt.key!==null?ot.set(gt.key,gt):ot.set(gt.index,gt),gt=gt.sibling;return ot}function p(gt,ot){return gt=Sa(gt,ot),gt.index=0,gt.sibling=null,gt}function S(gt,ot,vt){return gt.index=vt,e?(vt=gt.alternate,vt!==null?(vt=vt.index,vt<ot?(gt.flags|=33554434,ot):vt):(gt.flags|=33554434,ot)):(gt.flags|=1048576,ot)}function B(gt){return e&&gt.alternate===null&&(gt.flags|=33554434),gt}function Z(gt,ot,vt,Ot){return ot===null||ot.tag!==6?(ot=di(vt,gt.mode,Ot),ot.return=gt,ot):(ot=p(ot,vt),ot.return=gt,ot)}function it(gt,ot,vt,Ot){var Wt=vt.type;return Wt===v?wt(gt,ot,vt.props.children,Ot,vt.key):ot!==null&&(ot.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===D&&L0(Wt)===ot.type)?(ot=p(ot,vt.props),Ac(ot,vt),ot.return=gt,ot):(ot=wu(vt.type,vt.key,vt.props,null,gt.mode,Ot),Ac(ot,vt),ot.return=gt,ot)}function ut(gt,ot,vt,Ot){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==vt.containerInfo||ot.stateNode.implementation!==vt.implementation?(ot=Lc(vt,gt.mode,Ot),ot.return=gt,ot):(ot=p(ot,vt.children||[]),ot.return=gt,ot)}function wt(gt,ot,vt,Ot,Wt){return ot===null||ot.tag!==7?(ot=$l(vt,gt.mode,Ot,Wt),ot.return=gt,ot):(ot=p(ot,vt),ot.return=gt,ot)}function It(gt,ot,vt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=di(""+ot,gt.mode,vt),ot.return=gt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case d:return vt=wu(ot.type,ot.key,ot.props,null,gt.mode,vt),Ac(vt,ot),vt.return=gt,vt;case m:return ot=Lc(ot,gt.mode,vt),ot.return=gt,ot;case D:var Ot=ot._init;return ot=Ot(ot._payload),It(gt,ot,vt)}if(lt(ot)||Y(ot))return ot=$l(ot,gt.mode,vt,null),ot.return=gt,ot;if(typeof ot.then=="function")return It(gt,bc(ot),vt);if(ot.$$typeof===C)return It(gt,wh(gt,ot),vt);ch(gt,ot)}return null}function St(gt,ot,vt,Ot){var Wt=ot!==null?ot.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Wt!==null?null:Z(gt,ot,""+vt,Ot);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case d:return vt.key===Wt?it(gt,ot,vt,Ot):null;case m:return vt.key===Wt?ut(gt,ot,vt,Ot):null;case D:return Wt=vt._init,vt=Wt(vt._payload),St(gt,ot,vt,Ot)}if(lt(vt)||Y(vt))return Wt!==null?null:wt(gt,ot,vt,Ot,null);if(typeof vt.then=="function")return St(gt,ot,bc(vt),Ot);if(vt.$$typeof===C)return St(gt,ot,wh(gt,vt),Ot);ch(gt,vt)}return null}function At(gt,ot,vt,Ot,Wt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return gt=gt.get(vt)||null,Z(ot,gt,""+Ot,Wt);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case d:return gt=gt.get(Ot.key===null?vt:Ot.key)||null,it(ot,gt,Ot,Wt);case m:return gt=gt.get(Ot.key===null?vt:Ot.key)||null,ut(ot,gt,Ot,Wt);case D:var Ge=Ot._init;return Ot=Ge(Ot._payload),At(gt,ot,vt,Ot,Wt)}if(lt(Ot)||Y(Ot))return gt=gt.get(vt)||null,wt(ot,gt,Ot,Wt,null);if(typeof Ot.then=="function")return At(gt,ot,vt,bc(Ot),Wt);if(Ot.$$typeof===C)return At(gt,ot,vt,wh(ot,Ot),Wt);ch(ot,Ot)}return null}function te(gt,ot,vt,Ot){for(var Wt=null,Ge=null,ie=ot,ce=ot=0,ua=null;ie!==null&&ce<vt.length;ce++){ie.index>ce?(ua=ie,ie=null):ua=ie.sibling;var un=St(gt,ie,vt[ce],Ot);if(un===null){ie===null&&(ie=ua);break}e&&ie&&un.alternate===null&&i(gt,ie),ot=S(un,ot,ce),Ge===null?Wt=un:Ge.sibling=un,Ge=un,ie=ua}if(ce===vt.length)return o(gt,ie),$e&&pa(gt,ce),Wt;if(ie===null){for(;ce<vt.length;ce++)ie=It(gt,vt[ce],Ot),ie!==null&&(ot=S(ie,ot,ce),Ge===null?Wt=ie:Ge.sibling=ie,Ge=ie);return $e&&pa(gt,ce),Wt}for(ie=h(ie);ce<vt.length;ce++)ua=At(ie,gt,ce,vt[ce],Ot),ua!==null&&(e&&ua.alternate!==null&&ie.delete(ua.key===null?ce:ua.key),ot=S(ua,ot,ce),Ge===null?Wt=ua:Ge.sibling=ua,Ge=ua);return e&&ie.forEach(function(Lu){return i(gt,Lu)}),$e&&pa(gt,ce),Wt}function Ee(gt,ot,vt,Ot){if(vt==null)throw Error(r(151));for(var Wt=null,Ge=null,ie=ot,ce=ot=0,ua=null,un=vt.next();ie!==null&&!un.done;ce++,un=vt.next()){ie.index>ce?(ua=ie,ie=null):ua=ie.sibling;var Lu=St(gt,ie,un.value,Ot);if(Lu===null){ie===null&&(ie=ua);break}e&&ie&&Lu.alternate===null&&i(gt,ie),ot=S(Lu,ot,ce),Ge===null?Wt=Lu:Ge.sibling=Lu,Ge=Lu,ie=ua}if(un.done)return o(gt,ie),$e&&pa(gt,ce),Wt;if(ie===null){for(;!un.done;ce++,un=vt.next())un=It(gt,un.value,Ot),un!==null&&(ot=S(un,ot,ce),Ge===null?Wt=un:Ge.sibling=un,Ge=un);return $e&&pa(gt,ce),Wt}for(ie=h(ie);!un.done;ce++,un=vt.next())un=At(ie,gt,ce,un.value,Ot),un!==null&&(e&&un.alternate!==null&&ie.delete(un.key===null?ce:un.key),ot=S(un,ot,ce),Ge===null?Wt=un:Ge.sibling=un,Ge=un);return e&&ie.forEach(function(OS){return i(gt,OS)}),$e&&pa(gt,ce),Wt}function pi(gt,ot,vt,Ot){if(typeof vt=="object"&&vt!==null&&vt.type===v&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case d:t:{for(var Wt=vt.key;ot!==null;){if(ot.key===Wt){if(Wt=vt.type,Wt===v){if(ot.tag===7){o(gt,ot.sibling),Ot=p(ot,vt.props.children),Ot.return=gt,gt=Ot;break t}}else if(ot.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===D&&L0(Wt)===ot.type){o(gt,ot.sibling),Ot=p(ot,vt.props),Ac(Ot,vt),Ot.return=gt,gt=Ot;break t}o(gt,ot);break}else i(gt,ot);ot=ot.sibling}vt.type===v?(Ot=$l(vt.props.children,gt.mode,Ot,vt.key),Ot.return=gt,gt=Ot):(Ot=wu(vt.type,vt.key,vt.props,null,gt.mode,Ot),Ac(Ot,vt),Ot.return=gt,gt=Ot)}return B(gt);case m:t:{for(Wt=vt.key;ot!==null;){if(ot.key===Wt)if(ot.tag===4&&ot.stateNode.containerInfo===vt.containerInfo&&ot.stateNode.implementation===vt.implementation){o(gt,ot.sibling),Ot=p(ot,vt.children||[]),Ot.return=gt,gt=Ot;break t}else{o(gt,ot);break}else i(gt,ot);ot=ot.sibling}Ot=Lc(vt,gt.mode,Ot),Ot.return=gt,gt=Ot}return B(gt);case D:return Wt=vt._init,vt=Wt(vt._payload),pi(gt,ot,vt,Ot)}if(lt(vt))return te(gt,ot,vt,Ot);if(Y(vt)){if(Wt=Y(vt),typeof Wt!="function")throw Error(r(150));return vt=Wt.call(vt),Ee(gt,ot,vt,Ot)}if(typeof vt.then=="function")return pi(gt,ot,bc(vt),Ot);if(vt.$$typeof===C)return pi(gt,ot,wh(gt,vt),Ot);ch(gt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,ot!==null&&ot.tag===6?(o(gt,ot.sibling),Ot=p(ot,vt),Ot.return=gt,gt=Ot):(o(gt,ot),Ot=di(vt,gt.mode,Ot),Ot.return=gt,gt=Ot),B(gt)):o(gt,ot)}return function(gt,ot,vt,Ot){try{Tc=0;var Wt=pi(gt,ot,vt,Ot);return Ul=null,Wt}catch(ie){if(ie===Ml)throw ie;var Ge=ni(29,ie,null,gt.mode);return Ge.lanes=Ot,Ge.return=gt,Ge}finally{}}}var Wr=P0(!0),Jr=P0(!1),Ao=ht(null),Co=ht(0);function Il(e,i){e=gl,xt(Co,e),xt(Ao,i),gl=e|i.baseLanes}function hh(){xt(Co,gl),xt(Ao,Ao.current)}function Cc(){gl=Co.current,Dt(Ao),Dt(Co)}var za=ht(null),Sr=null;function $r(e){var i=e.alternate;xt(ci,ci.current&1),xt(za,e),Sr===null&&(i===null||Ao.current!==null||i.memoizedState!==null)&&(Sr=e)}function Ef(e){if(e.tag===22){if(xt(ci,ci.current),xt(za,e),Sr===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(Sr=e)}}else tl()}function tl(){xt(ci,ci.current),xt(za,za.current)}function Er(e){Dt(za),Sr===e&&(Sr=null),Dt(ci)}var ci=ht(0);function du(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ve=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},ep=a.unstable_scheduleCallback,ts=a.unstable_NormalPriority,Zn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new Ve,data:new Map,refCount:0}}function Ll(e){e.refCount--,e.refCount===0&&ep(ts,function(){e.controller.abort()})}var Tr=null,Pl=0,Ro=0,zl=null;function np(e,i){if(Tr===null){var o=Tr=[];Pl=0,Ro=hp(),zl={status:"pending",value:void 0,then:function(h){o.push(h)}}}return Pl++,i.then(bf,bf),i}function bf(){if(--Pl===0&&Tr!==null){zl!==null&&(zl.status="fulfilled");var e=Tr;Tr=null,Ro=0,zl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Bl(e,i){var o=[],h={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){h.status="fulfilled",h.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(h.status="rejected",h.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),h}var fh=w.S;w.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&np(e,i),fh!==null&&fh(e,i)};var el=ht(null);function Rc(){var e=el.current;return e!==null?e:gn.pooledCache}function gu(e,i){i===null?xt(el,el.current):xt(el,i.pool)}function nl(){var e=Rc();return e===null?null:{parent:Zn._currentValue,pool:e}}var il=0,Re=null,hn=null,hi=null,ue=!1,kl=!1,Gl=!1,mu=0,Hl=0,pu=null,ip=0;function Gn(){throw Error(r(321))}function wo(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Ua(e[o],i[o]))return!1;return!0}function Af(e,i,o,h,p,S){return il=S,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=e===null||e.memoizedState===null?Fl:sl,Gl=!1,S=o(h,p),Gl=!1,kl&&(S=B0(i,o,h,p)),z0(e),S}function z0(e){w.H=Ar;var i=hn!==null&&hn.next!==null;if(il=0,hi=hn=Re=null,ue=!1,Hl=0,pu=null,i)throw Error(r(300));e===null||_i||(e=e.dependencies,e!==null&&Eu(e)&&(_i=!0))}function B0(e,i,o,h){Re=e;var p=0;do{if(kl&&(pu=null),Hl=0,kl=!1,25<=p)throw Error(r(301));if(p+=1,hi=hn=null,e.updateQueue!=null){var S=e.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}w.H=xo,S=i(o,h)}while(kl);return S}function ap(){var e=w.H,i=e.useState()[0];return i=typeof i.then=="function"?Nc(i):i,e=e.useState()[0],(hn!==null?hn.memoizedState:null)!==e&&(Re.flags|=1024),i}function Cf(){var e=mu!==0;return mu=0,e}function wc(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function dh(e){if(ue){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ue=!1}il=0,hi=hn=Re=null,kl=!1,Hl=mu=0,pu=null}function Bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Re.memoizedState=hi=e:hi=hi.next=e,hi}function Wn(){if(hn===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=hn.next;var i=hi===null?Re.memoizedState:hi.next;if(i!==null)hi=i,hn=e;else{if(e===null)throw Re.alternate===null?Error(r(467)):Error(r(310));hn=e,e={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},hi===null?Re.memoizedState=hi=e:hi=hi.next=e}return hi}var gh;gh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Nc(e){var i=Hl;return Hl+=1,pu===null&&(pu=[]),e=Vl(pu,e,i),i=Re,(hi===null?i.memoizedState:hi.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Fl:sl),e}function yu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nc(e);if(e.$$typeof===C)return ia(e)}throw Error(r(438,String(e)))}function Ys(e){var i=null,o=Re.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var h=Re.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=gh(),Re.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),h=0;h<e;h++)o[h]=z;return i.index++,o}function Dn(e,i){return typeof i=="function"?i(e):i}function Xs(e){var i=Wn();return Ba(i,hn,e)}function Ba(e,i,o){var h=e.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=e.baseQueue,S=h.pending;if(S!==null){if(p!==null){var B=p.next;p.next=S.next,S.next=B}i.baseQueue=p=S,h.pending=null}if(S=e.baseState,p===null)e.memoizedState=S;else{i=p.next;var Z=B=null,it=null,ut=i,wt=!1;do{var It=ut.lane&-536870913;if(It!==ut.lane?(se&It)===It:(il&It)===It){var St=ut.revertLane;if(St===0)it!==null&&(it=it.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),It===Ro&&(wt=!0);else if((il&St)===St){ut=ut.next,St===Ro&&(wt=!0);continue}else It={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},it===null?(Z=it=It,B=S):it=it.next=It,Re.lanes|=St,er|=St;It=ut.action,Gl&&o(S,It),S=ut.hasEagerState?ut.eagerState:o(S,It)}else St={lane:It,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},it===null?(Z=it=St,B=S):it=it.next=St,Re.lanes|=It,er|=It;ut=ut.next}while(ut!==null&&ut!==i);if(it===null?B=S:it.next=Z,!Ua(S,e.memoizedState)&&(_i=!0,wt&&(o=zl,o!==null)))throw o;e.memoizedState=S,e.baseState=B,e.baseQueue=it,h.lastRenderedState=S}return p===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function mh(e){var i=Wn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var h=o.dispatch,p=o.pending,S=i.memoizedState;if(p!==null){o.pending=null;var B=p=p.next;do S=e(S,B.action),B=B.next;while(B!==p);Ua(S,i.memoizedState)||(_i=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),o.lastRenderedState=S}return[S,h]}function k0(e,i,o){var h=Re,p=Wn(),S=$e;if(S){if(o===void 0)throw Error(r(407));o=o()}else o=i();var B=!Ua((hn||p).memoizedState,o);if(B&&(p.memoizedState=o,_i=!0),p=p.queue,Df(G0.bind(null,h,p,e),[e]),p.getSnapshot!==i||B||hi!==null&&hi.memoizedState.tag&1){if(h.flags|=2048,br(9,jl.bind(null,h,p,o,i),{destroy:void 0},null),gn===null)throw Error(r(349));S||(il&60)!==0||ya(h,i,o)}return o}function ya(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=Re.updateQueue,i===null?(i=gh(),Re.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function jl(e,i,o,h){i.value=o,i.getSnapshot=h,H0(i)&&j0(e)}function G0(e,i,o){return o(function(){H0(i)&&j0(e)})}function H0(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Ua(e,o)}catch{return!0}}function j0(e){var i=Xr(e,2);i!==null&&mi(i,e,2)}function Rf(e){var i=Bi();if(typeof e=="function"){var o=e;if(e=o(),Gl){vi(!0);try{o()}finally{vi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},i}function wf(e,i,o,h){return e.baseState=o,Ba(e,hn,typeof h=="function"?h:Dn)}function sp(e,i,o,h,p){if(Sh(e))throw Error(r(485));if(e=i.action,e!==null){var S={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){S.listeners.push(B)}};w.T!==null?o(!0):S.isTransition=!1,h(S),o=i.pending,o===null?(S.next=i.pending=S,Nf(i,S)):(S.next=o.next,i.pending=o.next=S)}}function Nf(e,i){var o=i.action,h=i.payload,p=e.state;if(i.isTransition){var S=w.T,B={};w.T=B;try{var Z=o(p,h),it=w.S;it!==null&&it(B,Z),F0(e,i,Z)}catch(ut){al(e,i,ut)}finally{w.T=S}}else try{S=o(p,h),F0(e,i,S)}catch(ut){al(e,i,ut)}}function F0(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){No(e,i,h)},function(h){return al(e,i,h)}):No(e,i,o)}function No(e,i,o){i.status="fulfilled",i.value=o,q0(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,Nf(e,o)))}function al(e,i,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=o,q0(i),i=i.next;while(i!==h)}e.action=null}function q0(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function K0(e,i){return i}function Y0(e,i){if($e){var o=gn.formState;if(o!==null){t:{var h=Re;if($e){if(wi){e:{for(var p=wi,S=Ts;p.nodeType!==8;){if(!S){p=null;break e}if(p=yl(p.nextSibling),p===null){p=null;break e}}S=p.data,p=S==="F!"||S==="F"?p:null}if(p){wi=yl(p.nextSibling),h=p.data==="F!";break t}}bo(h)}h=!1}h&&(i=o[0])}}return o=Bi(),o.memoizedState=o.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K0,lastRenderedState:i},o.queue=h,o=Vf.bind(null,Re,h),h.dispatch=o,h=Rf(!1),S=Dc.bind(null,Re,!1,h.queue),h=Bi(),p={state:i,dispatch:null,action:e,pending:null},h.queue=p,o=sp.bind(null,Re,p,S,o),p.dispatch=o,h.memoizedState=e,[i,o,!1]}function vu(e){var i=Wn();return X0(i,hn,e)}function X0(e,i,o){i=Ba(e,i,K0)[0],e=Xs(Dn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Nc(i):i;var h=Wn(),p=h.queue,S=p.dispatch;return o!==h.memoizedState&&(Re.flags|=2048,br(9,rp.bind(null,p,o),{destroy:void 0},null)),[i,S,e]}function rp(e,i){e.action=i}function Q0(e){var i=Wn(),o=hn;if(o!==null)return X0(i,o,e);Wn(),i=i.memoizedState,o=Wn();var h=o.queue.dispatch;return o.memoizedState=e,[i,h,!1]}function br(e,i,o,h){return e={tag:e,create:i,inst:o,deps:h,next:null},i=Re.updateQueue,i===null&&(i=gh(),Re.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,i.lastEffect=e),e}function Z0(){return Wn().memoizedState}function ph(e,i,o,h){var p=Bi();Re.flags|=e,p.memoizedState=br(1|i,o,{destroy:void 0},h===void 0?null:h)}function yh(e,i,o,h){var p=Wn();h=h===void 0?null:h;var S=p.memoizedState.inst;hn!==null&&h!==null&&wo(h,hn.memoizedState.deps)?p.memoizedState=br(i,o,S,h):(Re.flags|=e,p.memoizedState=br(1|i,o,S,h))}function W0(e,i){ph(8390656,8,e,i)}function Df(e,i){yh(2048,8,e,i)}function J0(e,i){return yh(4,2,e,i)}function $0(e,i){return yh(4,4,e,i)}function tg(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function eg(e,i,o){o=o!=null?o.concat([e]):null,yh(4,4,tg.bind(null,i,e),o)}function xf(){}function ng(e,i){var o=Wn();i=i===void 0?null:i;var h=o.memoizedState;return i!==null&&wo(i,h[1])?h[0]:(o.memoizedState=[e,i],e)}function ig(e,i){var o=Wn();i=i===void 0?null:i;var h=o.memoizedState;if(i!==null&&wo(i,h[1]))return h[0];if(h=e(),Gl){vi(!0);try{e()}finally{vi(!1)}}return o.memoizedState=[h,i],h}function vh(e,i,o){return o===void 0||(il&1073741824)!==0?e.memoizedState=i:(e.memoizedState=o,e=ss(),Re.lanes|=e,er|=e,o)}function ag(e,i,o,h){return Ua(o,i)?o:Ao.current!==null?(e=vh(e,o,h),Ua(e,i)||(_i=!0),e):(il&42)===0?(_i=!0,e.memoizedState=o):(e=ss(),Re.lanes|=e,er|=e,i)}function sg(e,i,o,h,p){var S=dt.p;dt.p=S!==0&&8>S?S:8;var B=w.T,Z={};w.T=Z,Dc(e,!1,i,o);try{var it=p(),ut=w.S;if(ut!==null&&ut(Z,it),it!==null&&typeof it=="object"&&typeof it.then=="function"){var wt=Bl(it,h);Do(e,i,wt,Ta(e))}else Do(e,i,h,Ta(e))}catch(It){Do(e,i,{then:function(){},status:"rejected",reason:It},Ta())}finally{dt.p=S,w.T=B}}function lp(){}function Of(e,i,o,h){if(e.tag!==5)throw Error(r(476));var p=rg(e).queue;sg(e,p,i,Nt,o===null?lp:function(){return lg(e),o(h)})}function rg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Nt,baseState:Nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:Nt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function lg(e){var i=rg(e).next.queue;Do(e,i,{},Ta())}function _h(){return ia(ad)}function Mf(){return Wn().memoizedState}function og(){return Wn().memoizedState}function ug(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ta();e=is(o);var h=as(i,e,o);h!==null&&(mi(h,i,o),Yl(h,i,o)),i={cache:Tf()},e.payload=i;return}i=i.return}}function cg(e,i,o){var h=Ta();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Sh(e)?hg(i,o):(o=Eo(e,i,o,h),o!==null&&(mi(o,e,h),fg(o,i,h)))}function Vf(e,i,o){var h=Ta();Do(e,i,o,h)}function Do(e,i,o,h){var p={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sh(e))hg(i,p);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var B=i.lastRenderedState,Z=S(B,o);if(p.hasEagerState=!0,p.eagerState=Z,Ua(Z,B))return mc(e,i,p,0),gn===null&&gc(),!1}catch{}finally{}if(o=Eo(e,i,p,h),o!==null)return mi(o,e,h),fg(o,i,h),!0}return!1}function Dc(e,i,o,h){if(h={lane:2,revertLane:hp(),action:h,hasEagerState:!1,eagerState:null,next:null},Sh(e)){if(i)throw Error(r(479))}else i=Eo(e,o,h,2),i!==null&&mi(i,e,2)}function Sh(e){var i=e.alternate;return e===Re||i!==null&&i===Re}function hg(e,i){kl=ue=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function fg(e,i,o){if((o&4194176)!==0){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ii(e,o)}}var Ar={readContext:ia,use:yu,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn};Ar.useCacheRefresh=Gn,Ar.useMemoCache=Gn,Ar.useHostTransitionStatus=Gn,Ar.useFormState=Gn,Ar.useActionState=Gn,Ar.useOptimistic=Gn;var Fl={readContext:ia,use:yu,useCallback:function(e,i){return Bi().memoizedState=[e,i===void 0?null:i],e},useContext:ia,useEffect:W0,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,ph(4194308,4,tg.bind(null,i,e),o)},useLayoutEffect:function(e,i){return ph(4194308,4,e,i)},useInsertionEffect:function(e,i){ph(4,2,e,i)},useMemo:function(e,i){var o=Bi();i=i===void 0?null:i;var h=e();if(Gl){vi(!0);try{e()}finally{vi(!1)}}return o.memoizedState=[h,i],h},useReducer:function(e,i,o){var h=Bi();if(o!==void 0){var p=o(i);if(Gl){vi(!0);try{o(i)}finally{vi(!1)}}}else p=i;return h.memoizedState=h.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},h.queue=e,e=e.dispatch=cg.bind(null,Re,e),[h.memoizedState,e]},useRef:function(e){var i=Bi();return e={current:e},i.memoizedState=e},useState:function(e){e=Rf(e);var i=e.queue,o=Vf.bind(null,Re,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:xf,useDeferredValue:function(e,i){var o=Bi();return vh(o,e,i)},useTransition:function(){var e=Rf(!1);return e=sg.bind(null,Re,e.queue,!0,!1),Bi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var h=Re,p=Bi();if($e){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),gn===null)throw Error(r(349));(se&60)!==0||ya(h,i,o)}p.memoizedState=o;var S={value:o,getSnapshot:i};return p.queue=S,W0(G0.bind(null,h,S,e),[e]),h.flags|=2048,br(9,jl.bind(null,h,S,o,i),{destroy:void 0},null),o},useId:function(){var e=Bi(),i=gn.identifierPrefix;if($e){var o=Zr,h=vr;o=(h&~(1<<32-Pn(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=mu++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=ip++,i=":"+i+"r"+o.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return Bi().memoizedState=ug.bind(null,Re)}};Fl.useMemoCache=Ys,Fl.useHostTransitionStatus=_h,Fl.useFormState=Y0,Fl.useActionState=Y0,Fl.useOptimistic=function(e){var i=Bi();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Dc.bind(null,Re,!0,o),o.dispatch=i,[e,i]};var sl={readContext:ia,use:yu,useCallback:ng,useContext:ia,useEffect:Df,useImperativeHandle:eg,useInsertionEffect:J0,useLayoutEffect:$0,useMemo:ig,useReducer:Xs,useRef:Z0,useState:function(){return Xs(Dn)},useDebugValue:xf,useDeferredValue:function(e,i){var o=Wn();return ag(o,hn.memoizedState,e,i)},useTransition:function(){var e=Xs(Dn)[0],i=Wn().memoizedState;return[typeof e=="boolean"?e:Nc(e),i]},useSyncExternalStore:k0,useId:Mf};sl.useCacheRefresh=og,sl.useMemoCache=Ys,sl.useHostTransitionStatus=_h,sl.useFormState=vu,sl.useActionState=vu,sl.useOptimistic=function(e,i){var o=Wn();return wf(o,hn,e,i)};var xo={readContext:ia,use:yu,useCallback:ng,useContext:ia,useEffect:Df,useImperativeHandle:eg,useInsertionEffect:J0,useLayoutEffect:$0,useMemo:ig,useReducer:mh,useRef:Z0,useState:function(){return mh(Dn)},useDebugValue:xf,useDeferredValue:function(e,i){var o=Wn();return hn===null?vh(o,e,i):ag(o,hn.memoizedState,e,i)},useTransition:function(){var e=mh(Dn)[0],i=Wn().memoizedState;return[typeof e=="boolean"?e:Nc(e),i]},useSyncExternalStore:k0,useId:Mf};xo.useCacheRefresh=og,xo.useMemoCache=Ys,xo.useHostTransitionStatus=_h,xo.useFormState=Q0,xo.useActionState=Q0,xo.useOptimistic=function(e,i){var o=Wn();return hn!==null?wf(o,hn,e,i):(o.baseState=e,[e,o.queue.dispatch])};function Uf(e,i,o,h){i=e.memoizedState,o=o(h,i),o=o==null?i:M({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var If={isMounted:function(e){return(e=e._reactInternals)?rt(e)===e:!1},enqueueSetState:function(e,i,o){e=e._reactInternals;var h=Ta(),p=is(h);p.payload=i,o!=null&&(p.callback=o),i=as(e,p,h),i!==null&&(mi(i,e,h),Yl(i,e,h))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var h=Ta(),p=is(h);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=as(e,p,h),i!==null&&(mi(i,e,h),Yl(i,e,h))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Ta(),h=is(o);h.tag=2,i!=null&&(h.callback=i),i=as(e,h,o),i!==null&&(mi(i,e,o),Yl(i,e,o))}};function dg(e,i,o,h,p,S,B){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,S,B):i.prototype&&i.prototype.isPureReactComponent?!Ks(o,h)||!Ks(p,S):!0}function gg(e,i,o,h){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==e&&If.enqueueReplaceState(i,i.state,null)}function Oo(e,i){var o=i;if("ref"in i){o={};for(var h in i)h!=="ref"&&(o[h]=i[h])}if(e=e.defaultProps){o===i&&(o=M({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}var Eh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mg(e){Eh(e)}function pg(e){console.error(e)}function yg(e){Eh(e)}function Th(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function vg(e,i,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Lf(e,i,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(e,i)},o}function Pf(e){return e=is(e),e.tag=3,e}function _g(e,i,o,h){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var S=h.value;e.payload=function(){return p(S)},e.callback=function(){vg(i,o,h)}}var B=o.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(e.callback=function(){vg(i,o,h),typeof p!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})})}function op(e,i,o,h,p){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=o.alternate,i!==null&&Oc(i,o,p,!0),o=za.current,o!==null){switch(o.tag){case 13:return Sr===null?Bc():o.alternate===null&&wn===0&&(wn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,h===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([h]):i.add(h),ve(e,h,p)),!1;case 22:return o.flags|=65536,h===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([h]):o.add(h)),ve(e,h,p)),!1}throw Error(r(435,o.tag))}return ve(e,h,p),Bc(),!1}if($e)return i=za.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,h!==Sc&&(e=Error(r(422),{cause:h}),_r(Pa(e,o)))):(h!==Sc&&(i=Error(r(423),{cause:h}),_r(Pa(i,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,h=Pa(h,o),p=Lf(e.stateNode,h,p),bu(e,p),wn!==4&&(wn=2)),!1;var S=Error(r(520),{cause:h});if(S=Pa(S,o),zc===null?zc=[S]:zc.push(S),wn!==4&&(wn=2),i===null)return!0;h=Pa(h,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Lf(o.stateNode,h,e),bu(o,e),!1;case 1:if(i=o.type,S=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(gi===null||!gi.has(S))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Pf(p),_g(p,e,o,h),bu(o,p),!1}o=o.return}while(o!==null);return!1}var es=Error(r(461)),_i=!1;function Si(e,i,o,h){i.child=e===null?Jr(i,null,o,h):Wr(i,e.child,o,h)}function zf(e,i,o,h,p){o=o.render;var S=i.ref;if("ref"in h){var B={};for(var Z in h)Z!=="ref"&&(B[Z]=h[Z])}else B=h;return Vo(i),h=Af(e,i,o,B,S,p),Z=Cf(),e!==null&&!_i?(wc(e,i,p),Jn(e,i,p)):($e&&Z&&_c(i),i.flags|=1,Si(e,i,h,p),i.child)}function Bf(e,i,o,h,p){if(e===null){var S=o.type;return typeof S=="function"&&!fl(S)&&S.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=S,kf(e,i,S,h,p)):(e=wu(o.type,null,h,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(S=e.child,!Yf(e,p)){var B=S.memoizedProps;if(o=o.compare,o=o!==null?o:Ks,o(B,h)&&e.ref===i.ref)return Jn(e,i,p)}return i.flags|=1,e=Sa(S,h),e.ref=i.ref,e.return=i,i.child=e}function kf(e,i,o,h,p){if(e!==null){var S=e.memoizedProps;if(Ks(S,h)&&e.ref===i.ref)if(_i=!1,i.pendingProps=h=S,Yf(e,p))(e.flags&131072)!==0&&(_i=!0);else return i.lanes=e.lanes,Jn(e,i,p)}return Hf(e,i,o,h,p)}function Sg(e,i,o){var h=i.pendingProps,p=h.children,S=(i.stateNode._pendingVisibility&2)!==0,B=e!==null?e.memoizedState:null;if(_u(e,i),h.mode==="hidden"||S){if((i.flags&128)!==0){if(h=B!==null?B.baseLanes|o:o,e!==null){for(p=i.child=e.child,S=0;p!==null;)S=S|p.lanes|p.childLanes,p=p.sibling;i.childLanes=S&~h}else i.childLanes=0,i.child=null;return Gf(e,i,h,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(i,B!==null?B.cachePool:null),B!==null?Il(i,B):hh(),Ef(i);else return i.lanes=i.childLanes=536870912,Gf(e,i,B!==null?B.baseLanes|o:o,o)}else B!==null?(gu(i,B.cachePool),Il(i,B),tl(),i.memoizedState=null):(e!==null&&gu(i,null),hh(),tl());return Si(e,i,p,o),i.child}function Gf(e,i,o,h){var p=Rc();return p=p===null?null:{parent:Zn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},e!==null&&gu(i,null),hh(),Ef(i),e!==null&&Oc(e,i,h,!0),null}function _u(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(e===null||e.ref!==o)&&(i.flags|=2097664)}}function Hf(e,i,o,h,p){return Vo(i),o=Af(e,i,o,h,void 0,p),h=Cf(),e!==null&&!_i?(wc(e,i,p),Jn(e,i,p)):($e&&h&&_c(i),i.flags|=1,Si(e,i,o,p),i.child)}function Eg(e,i,o,h,p,S){return Vo(i),i.updateQueue=null,o=B0(i,h,o,p),z0(e),h=Cf(),e!==null&&!_i?(wc(e,i,S),Jn(e,i,S)):($e&&h&&_c(i),i.flags|=1,Si(e,i,o,S),i.child)}function Tg(e,i,o,h,p){if(Vo(i),i.stateNode===null){var S=Dl,B=o.contextType;typeof B=="object"&&B!==null&&(S=ia(B)),S=new o(h,S),i.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=If,i.stateNode=S,S._reactInternals=i,S=i.stateNode,S.props=h,S.state=i.memoizedState,S.refs={},va(i),B=o.contextType,S.context=typeof B=="object"&&B!==null?ia(B):Dl,S.state=i.memoizedState,B=o.getDerivedStateFromProps,typeof B=="function"&&(Uf(i,o,B,h),S.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(B=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),B!==S.state&&If.enqueueReplaceState(S,S.state,null),Zs(i,h,S,p),aa(),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(e===null){S=i.stateNode;var Z=i.memoizedProps,it=Oo(o,Z);S.props=it;var ut=S.context,wt=o.contextType;B=Dl,typeof wt=="object"&&wt!==null&&(B=ia(wt));var It=o.getDerivedStateFromProps;wt=typeof It=="function"||typeof S.getSnapshotBeforeUpdate=="function",Z=i.pendingProps!==Z,wt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Z||ut!==B)&&gg(i,S,h,B),fi=!1;var St=i.memoizedState;S.state=St,Zs(i,h,S,p),aa(),ut=i.memoizedState,Z||St!==ut||fi?(typeof It=="function"&&(Uf(i,o,It,h),ut=i.memoizedState),(it=fi||dg(i,o,it,h,St,ut,B))?(wt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=ut),S.props=h,S.state=ut,S.context=B,h=it):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{S=i.stateNode,Nh(e,i),B=i.memoizedProps,wt=Oo(o,B),S.props=wt,It=i.pendingProps,St=S.context,ut=o.contextType,it=Dl,typeof ut=="object"&&ut!==null&&(it=ia(ut)),Z=o.getDerivedStateFromProps,(ut=typeof Z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(B!==It||St!==it)&&gg(i,S,h,it),fi=!1,St=i.memoizedState,S.state=St,Zs(i,h,S,p),aa();var At=i.memoizedState;B!==It||St!==At||fi||e!==null&&e.dependencies!==null&&Eu(e.dependencies)?(typeof Z=="function"&&(Uf(i,o,Z,h),At=i.memoizedState),(wt=fi||dg(i,o,wt,h,St,At,it)||e!==null&&e.dependencies!==null&&Eu(e.dependencies))?(ut||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,At,it),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,At,it)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||B===e.memoizedProps&&St===e.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&St===e.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=At),S.props=h,S.state=At,S.context=it,h=wt):(typeof S.componentDidUpdate!="function"||B===e.memoizedProps&&St===e.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&St===e.memoizedState||(i.flags|=1024),h=!1)}return S=h,_u(e,i),h=(i.flags&128)!==0,S||h?(S=i.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:S.render(),i.flags|=1,e!==null&&h?(i.child=Wr(i,e.child,null,p),i.child=Wr(i,null,o,p)):Si(e,i,o,p),i.memoizedState=S.state,e=i.child):e=Jn(e,i,p),e}function jf(e,i,o,h){return hu(),i.flags|=256,Si(e,i,o,h),i.child}var Ff={dehydrated:null,treeContext:null,retryLane:0};function Ni(e){return{baseLanes:e,cachePool:nl()}}function bh(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Ea),e}function bg(e,i,o){var h=i.pendingProps,p=!1,S=(i.flags&128)!==0,B;if((B=S)||(B=e!==null&&e.memoizedState===null?!1:(ci.current&2)!==0),B&&(p=!0,i.flags&=-129),B=(i.flags&32)!==0,i.flags&=-33,e===null){if($e){if(p?$r(i):tl(),$e){var Z=wi,it;if(it=Z){t:{for(it=Z,Z=Ts;it.nodeType!==8;){if(!Z){Z=null;break t}if(it=yl(it.nextSibling),it===null){Z=null;break t}}Z=it}Z!==null?(i.memoizedState={dehydrated:Z,treeContext:Qr!==null?{id:vr,overflow:Zr}:null,retryLane:536870912},it=ni(18,null,null,0),it.stateNode=Z,it.return=i,i.child=it,na=i,wi=null,it=!0):it=!1}it||bo(i)}if(Z=i.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Z.data==="$!"?i.lanes=16:i.lanes=536870912,null;Er(i)}return Z=h.children,h=h.fallback,p?(tl(),p=i.mode,Z=Kf({mode:"hidden",children:Z},p),h=$l(h,p,o,null),Z.return=i,h.return=i,Z.sibling=h,i.child=Z,p=i.child,p.memoizedState=Ni(o),p.childLanes=bh(e,B,o),i.memoizedState=Ff,h):($r(i),qf(i,Z))}if(it=e.memoizedState,it!==null&&(Z=it.dehydrated,Z!==null)){if(S)i.flags&256?($r(i),i.flags&=-257,i=Ah(e,i,o)):i.memoizedState!==null?(tl(),i.child=e.child,i.flags|=128,i=null):(tl(),p=h.fallback,Z=i.mode,h=Kf({mode:"visible",children:h.children},Z),p=$l(p,Z,o,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,Wr(i,e.child,null,o),h=i.child,h.memoizedState=Ni(o),h.childLanes=bh(e,B,o),i.memoizedState=Ff,i=p);else if($r(i),Z.data==="$!"){if(B=Z.nextSibling&&Z.nextSibling.dataset,B)var ut=B.dgst;B=ut,h=Error(r(419)),h.stack="",h.digest=B,_r({value:h,source:null,stack:null}),i=Ah(e,i,o)}else if(_i||Oc(e,i,o,!1),B=(o&e.childLanes)!==0,_i||B){if(B=gn,B!==null){if(h=o&-o,(h&42)!==0)h=1;else switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=64;break;case 268435456:h=134217728;break;default:h=0}if(h=(h&(B.suspendedLanes|o))!==0?0:h,h!==0&&h!==it.retryLane)throw it.retryLane=h,Xr(e,h),mi(B,e,h),es}Z.data==="$?"||Bc(),i=Ah(e,i,o)}else Z.data==="$?"?(i.flags|=128,i.child=e.child,i=ko.bind(null,e),Z._reactRetry=i,i=null):(e=it.treeContext,wi=yl(Z.nextSibling),na=i,$e=!0,Es=null,Ts=!1,e!==null&&(En[$a++]=vr,En[$a++]=Zr,En[$a++]=Qr,vr=e.id,Zr=e.overflow,Qr=i),i=qf(i,h.children),i.flags|=4096);return i}return p?(tl(),p=h.fallback,Z=i.mode,it=e.child,ut=it.sibling,h=Sa(it,{mode:"hidden",children:h.children}),h.subtreeFlags=it.subtreeFlags&31457280,ut!==null?p=Sa(ut,p):(p=$l(p,Z,o,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,Z=e.child.memoizedState,Z===null?Z=Ni(o):(it=Z.cachePool,it!==null?(ut=Zn._currentValue,it=it.parent!==ut?{parent:ut,pool:ut}:it):it=nl(),Z={baseLanes:Z.baseLanes|o,cachePool:it}),p.memoizedState=Z,p.childLanes=bh(e,B,o),i.memoizedState=Ff,h):($r(i),o=e.child,e=o.sibling,o=Sa(o,{mode:"visible",children:h.children}),o.return=i,o.sibling=null,e!==null&&(B=i.deletions,B===null?(i.deletions=[e],i.flags|=16):B.push(e)),i.child=o,i.memoizedState=null,o)}function qf(e,i){return i=Kf({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Kf(e,i){return Qf(e,i,0,null)}function Ah(e,i,o){return Wr(i,e.child,null,o),e=qf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ch(e,i,o){e.lanes|=i;var h=e.alternate;h!==null&&(h.lanes|=i),ns(e.return,i,o)}function ql(e,i,o,h,p){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=o,S.tailMode=p)}function Mo(e,i,o){var h=i.pendingProps,p=h.revealOrder,S=h.tail;if(Si(e,i,h.children,o),h=ci.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ch(e,o,i);else if(e.tag===19)Ch(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(xt(ci,h),p){case"forwards":for(o=i.child,p=null;o!==null;)e=o.alternate,e!==null&&du(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),ql(i,!1,p,o,S);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&du(e)===null){i.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}ql(i,!0,o,null,S);break;case"together":ql(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Jn(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),er|=i.lanes,(o&i.childLanes)===0)if(e!==null){if(Oc(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,o=Sa(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=Sa(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function Yf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Eu(e)))}function up(e,i,o){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),Kl(i,Zn,e.memoizedState.cache),hu();break;case 27:case 5:me(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:Kl(i,i.type,i.memoizedProps.value);break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?($r(i),i.flags|=128,null):(o&i.child.childLanes)!==0?bg(e,i,o):($r(i),e=Jn(e,i,o),e!==null?e.sibling:null);$r(i);break;case 19:var p=(e.flags&128)!==0;if(h=(o&i.childLanes)!==0,h||(Oc(e,i,o,!1),h=(o&i.childLanes)!==0),p){if(h)return Mo(e,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xt(ci,ci.current),h)break;return null;case 22:case 23:return i.lanes=0,Sg(e,i,o);case 24:Kl(i,Zn,e.memoizedState.cache)}return Jn(e,i,o)}function xc(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)_i=!0;else{if(!Yf(e,o)&&(i.flags&128)===0)return _i=!1,up(e,i,o);_i=(e.flags&131072)!==0}else _i=!1,$e&&(i.flags&1048576)!==0&&_f(i,vc,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var h=i.elementType,p=h._init;if(h=p(h._payload),i.type=h,typeof h=="function")fl(h)?(e=Oo(h,e),i.tag=1,i=Tg(null,i,h,e,o)):(i.tag=0,i=Hf(null,i,h,e,o));else{if(h!=null){if(p=h.$$typeof,p===R){i.tag=11,i=zf(null,i,h,e,o);break t}else if(p===F){i.tag=14,i=Bf(null,i,h,e,o);break t}}throw i=V(h)||h,Error(r(306,i,""))}}return i;case 0:return Hf(e,i,i.type,i.pendingProps,o);case 1:return h=i.type,p=Oo(h,i.pendingProps),Tg(e,i,h,p,o);case 3:t:{if(ne(i,i.stateNode.containerInfo),e===null)throw Error(r(387));var S=i.pendingProps;p=i.memoizedState,h=p.element,Nh(e,i),Zs(i,S,null,o);var B=i.memoizedState;if(S=B.cache,Kl(i,Zn,S),S!==p.cache&&Rh(i,[Zn],o,!0),aa(),S=B.element,p.isDehydrated)if(p={element:S,isDehydrated:!1,cache:B.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=jf(e,i,S,o);break t}else if(S!==h){h=Pa(Error(r(424)),i),_r(h),i=jf(e,i,S,o);break t}else for(wi=yl(i.stateNode.containerInfo.firstChild),na=i,$e=!0,Es=null,Ts=!0,o=Jr(i,null,S,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(hu(),S===h){i=Jn(e,i,o);break t}Si(e,i,S,o)}i=i.child}return i;case 26:return _u(e,i),e===null?(o=t2(i.type,null,i.pendingProps,null))?i.memoizedState=o:$e||(o=i.type,e=i.pendingProps,h=xg(le.current).createElement(o),h[Vn]=i,h[Se]=e,ba(h,o,e),Xt(h),i.stateNode=h):i.memoizedState=t2(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return me(i),e===null&&$e&&(h=i.stateNode=Wy(i.type,i.pendingProps,le.current),na=i,Ts=!0,wi=yl(h.firstChild)),h=i.pendingProps.children,e!==null||$e?Si(e,i,h,o):i.child=Wr(i,null,h,o),_u(e,i),i.child;case 5:return e===null&&$e&&((p=h=wi)&&(h=lS(h,i.type,i.pendingProps,Ts),h!==null?(i.stateNode=h,na=i,wi=yl(h.firstChild),Ts=!1,p=!0):p=!1),p||bo(i)),me(i),p=i.type,S=i.pendingProps,B=e!==null?e.memoizedProps:null,h=S.children,Sp(p,S)?h=null:B!==null&&Sp(p,B)&&(i.flags|=32),i.memoizedState!==null&&(p=Af(e,i,ap,null,null,o),ad._currentValue=p),_u(e,i),Si(e,i,h,o),i.child;case 6:return e===null&&$e&&((e=o=wi)&&(o=oS(o,i.pendingProps,Ts),o!==null?(i.stateNode=o,na=i,wi=null,e=!0):e=!1),e||bo(i)),null;case 13:return bg(e,i,o);case 4:return ne(i,i.stateNode.containerInfo),h=i.pendingProps,e===null?i.child=Wr(i,null,h,o):Si(e,i,h,o),i.child;case 11:return zf(e,i,i.type,i.pendingProps,o);case 7:return Si(e,i,i.pendingProps,o),i.child;case 8:return Si(e,i,i.pendingProps.children,o),i.child;case 12:return Si(e,i,i.pendingProps.children,o),i.child;case 10:return h=i.pendingProps,Kl(i,i.type,h.value),Si(e,i,h.children,o),i.child;case 9:return p=i.type._context,h=i.pendingProps.children,Vo(i),p=ia(p),h=h(p),i.flags|=1,Si(e,i,h,o),i.child;case 14:return Bf(e,i,i.type,i.pendingProps,o);case 15:return kf(e,i,i.type,i.pendingProps,o);case 19:return Mo(e,i,o);case 22:return Sg(e,i,o);case 24:return Vo(i),h=ia(Zn),e===null?(p=Rc(),p===null&&(p=gn,S=Tf(),p.pooledCache=S,S.refCount++,S!==null&&(p.pooledCacheLanes|=o),p=S),i.memoizedState={parent:h,cache:p},va(i),Kl(i,Zn,p)):((e.lanes&o)!==0&&(Nh(e,i),Zs(i,null,null,o),aa()),p=e.memoizedState,S=i.memoizedState,p.parent!==h?(p={parent:h,cache:h},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Kl(i,Zn,h)):(h=S.cache,Kl(i,Zn,h),h!==p.cache&&Rh(i,[Zn],o,!0))),Si(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var Su=ht(null),Cr=null,Qs=null;function Kl(e,i,o){xt(Su,i._currentValue),i._currentValue=o}function rl(e){e._currentValue=Su.current,Dt(Su)}function ns(e,i,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),e===o)break;e=e.return}}function Rh(e,i,o,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var S=p.dependencies;if(S!==null){var B=p.child;S=S.firstContext;t:for(;S!==null;){var Z=S;S=p;for(var it=0;it<i.length;it++)if(Z.context===i[it]){S.lanes|=o,Z=S.alternate,Z!==null&&(Z.lanes|=o),ns(S.return,o,e),h||(B=null);break t}S=Z.next}}else if(p.tag===18){if(B=p.return,B===null)throw Error(r(341));B.lanes|=o,S=B.alternate,S!==null&&(S.lanes|=o),ns(B,o,e),B=null}else B=p.child;if(B!==null)B.return=p;else for(B=p;B!==null;){if(B===e){B=null;break}if(p=B.sibling,p!==null){p.return=B.return,B=p;break}B=B.return}p=B}}function Oc(e,i,o,h){e=null;for(var p=i,S=!1;p!==null;){if(!S){if((p.flags&524288)!==0)S=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var B=p.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var Z=p.type;Ua(p.pendingProps.value,B.value)||(e!==null?e.push(Z):e=[Z])}}else if(p===de.current){if(B=p.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(ad):e=[ad])}p=p.return}e!==null&&Rh(i,e,o,h),i.flags|=262144}function Eu(e){for(e=e.firstContext;e!==null;){if(!Ua(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vo(e){Cr=e,Qs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ia(e){return Tu(Cr,e)}function wh(e,i){return Cr===null&&Vo(e),Tu(e,i)}function Tu(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Qs===null){if(e===null)throw Error(r(308));Qs=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Qs=Qs.next=i;return o}var fi=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function as(e,i,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(ye&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,i=yc(e),pc(e,null,o),i}return mc(e,h,i,o),yc(e)}function Yl(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ii(e,o)}}function bu(e,i){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,S=null;if(o=o.firstBaseUpdate,o!==null){do{var B={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};S===null?p=S=B:S=S.next=B,o=o.next}while(o!==null);S===null?p=S=i:S=S.next=i}else p=S=i;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var ka=!1;function aa(){if(ka){var e=zl;if(e!==null)throw e}}function Zs(e,i,o,h){ka=!1;var p=e.updateQueue;fi=!1;var S=p.firstBaseUpdate,B=p.lastBaseUpdate,Z=p.shared.pending;if(Z!==null){p.shared.pending=null;var it=Z,ut=it.next;it.next=null,B===null?S=ut:B.next=ut,B=it;var wt=e.alternate;wt!==null&&(wt=wt.updateQueue,Z=wt.lastBaseUpdate,Z!==B&&(Z===null?wt.firstBaseUpdate=ut:Z.next=ut,wt.lastBaseUpdate=it))}if(S!==null){var It=p.baseState;B=0,wt=ut=it=null,Z=S;do{var St=Z.lane&-536870913,At=St!==Z.lane;if(At?(se&St)===St:(h&St)===St){St!==0&&St===Ro&&(ka=!0),wt!==null&&(wt=wt.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});t:{var te=e,Ee=Z;St=i;var pi=o;switch(Ee.tag){case 1:if(te=Ee.payload,typeof te=="function"){It=te.call(pi,It,St);break t}It=te;break t;case 3:te.flags=te.flags&-65537|128;case 0:if(te=Ee.payload,St=typeof te=="function"?te.call(pi,It,St):te,St==null)break t;It=M({},It,St);break t;case 2:fi=!0}}St=Z.callback,St!==null&&(e.flags|=64,At&&(e.flags|=8192),At=p.callbacks,At===null?p.callbacks=[St]:At.push(St))}else At={lane:St,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},wt===null?(ut=wt=At,it=It):wt=wt.next=At,B|=St;if(Z=Z.next,Z===null){if(Z=p.shared.pending,Z===null)break;At=Z,Z=At.next,At.next=null,p.lastBaseUpdate=At,p.shared.pending=null}}while(!0);wt===null&&(it=It),p.baseState=it,p.firstBaseUpdate=ut,p.lastBaseUpdate=wt,S===null&&(p.shared.lanes=0),er|=B,e.lanes=B,e.memoizedState=It}}function Rr(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function wr(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Rr(o[e],i)}function $n(e,i){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&e)===e){h=void 0;var S=o.create,B=o.inst;h=S(),B.destroy=h}o=o.next}while(o!==p)}}catch(Z){zt(i,i.return,Z)}}function bs(e,i,o){try{var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var S=p.next;h=S;do{if((h.tag&e)===e){var B=h.inst,Z=B.destroy;if(Z!==void 0){B.destroy=void 0,p=i;var it=o;try{Z()}catch(ut){zt(p,it,ut)}}}h=h.next}while(h!==S)}}catch(ut){zt(i,i.return,ut)}}function ll(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{wr(i,o)}catch(h){zt(e,e.return,h)}}}function Mc(e,i,o){o.props=Oo(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){zt(e,i,h)}}function ti(e,i){try{var o=e.ref;if(o!==null){var h=e.stateNode;switch(e.tag){case 26:case 27:case 5:var p=h;break;default:p=h}typeof o=="function"?e.refCleanup=o(p):o.current=p}}catch(S){zt(e,i,S)}}function dn(e,i){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(p){zt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){zt(e,i,p)}else o.current=null}function tn(e){var i=e.type,o=e.memoizedProps,h=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(p){zt(e,e.return,p)}}function As(e,i,o){try{var h=e.stateNode;nS(h,e.type,o,i),h[Se]=i}catch(p){zt(e,e.return,p)}}function Ws(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Vc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ws(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ga(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(e,i):o.insertBefore(e,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(e,o)):(i=o,i.appendChild(e)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Dg));else if(h!==4&&h!==27&&(e=e.child,e!==null))for(Ga(e,i,o),e=e.sibling;e!==null;)Ga(e,i,o),e=e.sibling}function ol(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(h!==4&&h!==27&&(e=e.child,e!==null))for(ol(e,i,o),e=e.sibling;e!==null;)ol(e,i,o),e=e.sibling}var Js=!1,Cn=!1,Xl=!1,Dh=typeof WeakSet=="function"?WeakSet:Set,ei=null,xh=!1;function Au(e,i){if(e=e.containerInfo,vp=Lg,e=df(e),dc(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,S=h.focusNode;h=h.focusOffset;try{o.nodeType,S.nodeType}catch{o=null;break t}var B=0,Z=-1,it=-1,ut=0,wt=0,It=e,St=null;e:for(;;){for(var At;It!==o||p!==0&&It.nodeType!==3||(Z=B+p),It!==S||h!==0&&It.nodeType!==3||(it=B+h),It.nodeType===3&&(B+=It.nodeValue.length),(At=It.firstChild)!==null;)St=It,It=At;for(;;){if(It===e)break e;if(St===o&&++ut===p&&(Z=B),St===S&&++wt===h&&(it=B),(At=It.nextSibling)!==null)break;It=St,St=It.parentNode}It=At}o=Z===-1||it===-1?null:{start:Z,end:it}}else o=null}o=o||{start:0,end:0}}else o=null;for(_p={focusedElem:e,selectionRange:o},Lg=!1,ei=i;ei!==null;)if(i=ei,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ei=e;else for(;ei!==null;){switch(i=ei,S=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&S!==null){e=void 0,o=i,p=S.memoizedProps,S=S.memoizedState,h=o.stateNode;try{var te=Oo(o.type,p,o.elementType===o.type);e=h.getSnapshotBeforeUpdate(te,S),h.__reactInternalSnapshotBeforeUpdate=e}catch(Ee){zt(o,o.return,Ee)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)bp(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,ei=e;break}ei=i.return}return te=xh,xh=!1,te}function Cu(e,i,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Nr(e,o),h&4&&$n(5,o);break;case 1:if(Nr(e,o),h&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(Z){zt(o,o.return,Z)}else{var p=Oo(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){zt(o,o.return,Z)}}h&64&&ll(o),h&512&&ti(o,o.return);break;case 3:if(Nr(e,o),h&64&&(h=o.updateQueue,h!==null)){if(e=null,o.child!==null)switch(o.child.tag){case 27:case 5:e=o.child.stateNode;break;case 1:e=o.child.stateNode}try{wr(h,e)}catch(Z){zt(o,o.return,Z)}}break;case 26:Nr(e,o),h&512&&ti(o,o.return);break;case 27:case 5:Nr(e,o),i===null&&h&4&&tn(o),h&512&&ti(o,o.return);break;case 12:Nr(e,o);break;case 13:Nr(e,o),h&4&&Ag(e,o);break;case 22:if(p=o.memoizedState!==null||Js,!p){i=i!==null&&i.memoizedState!==null||Cn;var S=Js,B=Cn;Js=p,(Cn=i)&&!B?tr(e,o,(o.subtreeFlags&8772)!==0):Nr(e,o),Js=S,Cn=B}h&512&&(o.memoizedProps.mode==="manual"?ti(o,o.return):dn(o,o.return));break;default:Nr(e,o)}}function Oh(e){var i=e.alternate;i!==null&&(e.alternate=null,Oh(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Bs(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rn=null,Di=!1;function sa(e,i,o){for(o=o.child;o!==null;)Mh(e,i,o),o=o.sibling}function Mh(e,i,o){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(We,o)}catch{}switch(o.tag){case 26:Cn||dn(o,i),sa(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Cn||dn(o,i);var h=Rn,p=Di;for(Rn=o.stateNode,sa(e,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);Bs(o),Rn=h,Di=p;break;case 5:Cn||dn(o,i);case 6:p=Rn;var S=Di;if(Rn=null,sa(e,i,o),Rn=p,Di=S,Rn!==null)if(Di)try{e=Rn,h=o.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)}catch(B){zt(o,i,B)}else try{Rn.removeChild(o.stateNode)}catch(B){zt(o,i,B)}break;case 18:Rn!==null&&(Di?(i=Rn,o=o.stateNode,i.nodeType===8?Tp(i.parentNode,o):i.nodeType===1&&Tp(i,o),od(i)):Tp(Rn,o.stateNode));break;case 4:h=Rn,p=Di,Rn=o.stateNode.containerInfo,Di=!0,sa(e,i,o),Rn=h,Di=p;break;case 0:case 11:case 14:case 15:Cn||bs(2,o,i),Cn||bs(4,o,i),sa(e,i,o);break;case 1:Cn||(dn(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Mc(o,i,h)),sa(e,i,o);break;case 21:sa(e,i,o);break;case 22:Cn||dn(o,i),Cn=(h=Cn)||o.memoizedState!==null,sa(e,i,o),Cn=h;break;default:sa(e,i,o)}}function Ag(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{od(e)}catch(o){zt(i,i.return,o)}}function Uc(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Dh),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Dh),i;default:throw Error(r(435,e.tag))}}function Ic(e,i){var o=Uc(e);i.forEach(function(h){var p=_t.bind(null,e,h);o.has(h)||(o.add(h),h.then(p,p))})}function _a(e,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h],S=e,B=i,Z=B;t:for(;Z!==null;){switch(Z.tag){case 27:case 5:Rn=Z.stateNode,Di=!1;break t;case 3:Rn=Z.stateNode.containerInfo,Di=!0;break t;case 4:Rn=Z.stateNode.containerInfo,Di=!0;break t}Z=Z.return}if(Rn===null)throw Error(r(160));Mh(S,B,p),Rn=null,Di=!1,S=p.alternate,S!==null&&(S.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Uo(i,e),i=i.sibling}var ra=null;function Uo(e,i){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_a(i,e),la(e),h&4&&(bs(3,e,e.return),$n(3,e),bs(5,e,e.return));break;case 1:_a(i,e),la(e),h&512&&(Cn||o===null||dn(o,o.return)),h&64&&Js&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var p=ra;if(_a(i,e),la(e),h&512&&(Cn||o===null||dn(o,o.return)),h&4){var S=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){t:{h=e.type,o=e.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":S=p.getElementsByTagName("title")[0],(!S||S[os]||S[Vn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=p.createElement(h),p.head.insertBefore(S,p.querySelector("head > title"))),ba(S,h,o),S[Vn]=e,Xt(S),h=S;break t;case"link":var B=i2("link","href",p).get(h+(o.href||""));if(B){for(var Z=0;Z<B.length;Z++)if(S=B[Z],S.getAttribute("href")===(o.href==null?null:o.href)&&S.getAttribute("rel")===(o.rel==null?null:o.rel)&&S.getAttribute("title")===(o.title==null?null:o.title)&&S.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){B.splice(Z,1);break e}}S=p.createElement(h),ba(S,h,o),p.head.appendChild(S);break;case"meta":if(B=i2("meta","content",p).get(h+(o.content||""))){for(Z=0;Z<B.length;Z++)if(S=B[Z],S.getAttribute("content")===(o.content==null?null:""+o.content)&&S.getAttribute("name")===(o.name==null?null:o.name)&&S.getAttribute("property")===(o.property==null?null:o.property)&&S.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&S.getAttribute("charset")===(o.charSet==null?null:o.charSet)){B.splice(Z,1);break e}}S=p.createElement(h),ba(S,h,o),p.head.appendChild(S);break;default:throw Error(r(468,h))}S[Vn]=e,Xt(S),h=S}e.stateNode=h}else a2(p,e.type,e.stateNode);else e.stateNode=n2(p,h,e.memoizedProps);else S!==h?(S===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):S.count--,h===null?a2(p,e.type,e.stateNode):n2(p,h,e.memoizedProps)):h===null&&e.stateNode!==null&&As(e,e.memoizedProps,o.memoizedProps)}break;case 27:if(h&4&&e.alternate===null){p=e.stateNode,S=e.memoizedProps;try{for(var it=p.firstChild;it;){var ut=it.nextSibling,wt=it.nodeName;it[os]||wt==="HEAD"||wt==="BODY"||wt==="SCRIPT"||wt==="STYLE"||wt==="LINK"&&it.rel.toLowerCase()==="stylesheet"||p.removeChild(it),it=ut}for(var It=e.type,St=p.attributes;St.length;)p.removeAttributeNode(St[0]);ba(p,It,S),p[Vn]=e,p[Se]=S}catch(te){zt(e,e.return,te)}}case 5:if(_a(i,e),la(e),h&512&&(Cn||o===null||dn(o,o.return)),e.flags&32){p=e.stateNode;try{ga(p,"")}catch(te){zt(e,e.return,te)}}h&4&&e.stateNode!=null&&(p=e.memoizedProps,As(e,p,o!==null?o.memoizedProps:p)),h&1024&&(Xl=!0);break;case 6:if(_a(i,e),la(e),h&4){if(e.stateNode===null)throw Error(r(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(te){zt(e,e.return,te)}}break;case 3:if(Vg=null,p=ra,ra=Og(i.containerInfo),_a(i,e),ra=p,la(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{od(i.containerInfo)}catch(te){zt(e,e.return,te)}Xl&&(Xl=!1,Ql(e));break;case 4:h=ra,ra=Og(e.stateNode.containerInfo),_a(i,e),la(e),ra=h;break;case 12:_a(i,e),la(e);break;case 13:_a(i,e),la(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(we=De()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ic(e,h)));break;case 22:if(h&512&&(Cn||o===null||dn(o,o.return)),it=e.memoizedState!==null,ut=o!==null&&o.memoizedState!==null,wt=Js,It=Cn,Js=wt||it,Cn=It||ut,_a(i,e),Cn=It,Js=wt,la(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,h&8192&&(i._visibility=it?i._visibility&-2:i._visibility|1,it&&(i=Js||Cn,o===null||ut||i||$s(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(o=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){ut=o=i;try{if(p=ut.stateNode,it)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{B=ut.stateNode,Z=ut.memoizedProps.style;var At=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;B.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(te){zt(ut,ut.return,te)}}}else if(i.tag===6){if(o===null){ut=i;try{ut.stateNode.nodeValue=it?"":ut.memoizedProps}catch(te){zt(ut,ut.return,te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Ic(e,o))));break;case 19:_a(i,e),la(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ic(e,h)));break;case 21:break;default:_a(i,e),la(e)}}function la(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var o=e.return;o!==null;){if(Ws(o)){var h=o;break t}o=o.return}throw Error(r(160))}switch(h.tag){case 27:var p=h.stateNode,S=Vc(e);ol(e,S,p);break;case 5:var B=h.stateNode;h.flags&32&&(ga(B,""),h.flags&=-33);var Z=Vc(e);ol(e,Z,B);break;case 3:case 4:var it=h.stateNode.containerInfo,ut=Vc(e);Ga(e,ut,it);break;default:throw Error(r(161))}}}catch(wt){zt(e,e.return,wt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ql(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ql(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Nr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cu(e,i.alternate,i),i=i.sibling}function $s(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:bs(4,i,i.return),$s(i);break;case 1:dn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Mc(i,i.return,o),$s(i);break;case 26:case 27:case 5:dn(i,i.return),$s(i);break;case 22:dn(i,i.return),i.memoizedState===null&&$s(i);break;default:$s(i)}e=e.sibling}}function tr(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,p=e,S=i,B=S.flags;switch(S.tag){case 0:case 11:case 15:tr(p,S,o),$n(4,S);break;case 1:if(tr(p,S,o),h=S,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ut){zt(h,h.return,ut)}if(h=S,p=h.updateQueue,p!==null){var Z=h.stateNode;try{var it=p.shared.hiddenCallbacks;if(it!==null)for(p.shared.hiddenCallbacks=null,p=0;p<it.length;p++)Rr(it[p],Z)}catch(ut){zt(h,h.return,ut)}}o&&B&64&&ll(S),ti(S,S.return);break;case 26:case 27:case 5:tr(p,S,o),o&&h===null&&B&4&&tn(S),ti(S,S.return);break;case 12:tr(p,S,o);break;case 13:tr(p,S,o),o&&B&4&&Ag(p,S);break;case 22:S.memoizedState===null&&tr(p,S,o),ti(S,S.return);break;default:tr(p,S,o)}i=i.sibling}}function Ha(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Ll(o))}function Cs(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ll(e))}function Tn(e,i,o,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ul(e,i,o,h),i=i.sibling}function ul(e,i,o,h){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Tn(e,i,o,h),p&2048&&$n(9,i);break;case 3:Tn(e,i,o,h),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ll(e)));break;case 12:if(p&2048){Tn(e,i,o,h),e=i.stateNode;try{var S=i.memoizedProps,B=S.id,Z=S.onPostCommit;typeof Z=="function"&&Z(B,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(it){zt(i,i.return,it)}}else Tn(e,i,o,h);break;case 23:break;case 22:S=i.stateNode,i.memoizedState!==null?S._visibility&4?Tn(e,i,o,h):nn(e,i):S._visibility&4?Tn(e,i,o,h):(S._visibility|=4,pe(e,i,o,h,(i.subtreeFlags&10256)!==0)),p&2048&&Ha(i.alternate,i);break;case 24:Tn(e,i,o,h),p&2048&&Cs(i.alternate,i);break;default:Tn(e,i,o,h)}}function pe(e,i,o,h,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var S=e,B=i,Z=o,it=h,ut=B.flags;switch(B.tag){case 0:case 11:case 15:pe(S,B,Z,it,p),$n(8,B);break;case 23:break;case 22:var wt=B.stateNode;B.memoizedState!==null?wt._visibility&4?pe(S,B,Z,it,p):nn(S,B):(wt._visibility|=4,pe(S,B,Z,it,p)),p&&ut&2048&&Ha(B.alternate,B);break;case 24:pe(S,B,Z,it,p),p&&ut&2048&&Cs(B.alternate,B);break;default:pe(S,B,Z,it,p)}i=i.sibling}}function nn(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,h=i,p=h.flags;switch(h.tag){case 22:nn(o,h),p&2048&&Ha(h.alternate,h);break;case 24:nn(o,h),p&2048&&Cs(h.alternate,h);break;default:nn(o,h)}i=i.sibling}}var xn=8192;function cl(e){if(e.subtreeFlags&xn)for(e=e.child;e!==null;)Io(e),e=e.sibling}function Io(e){switch(e.tag){case 26:cl(e),e.flags&xn&&e.memoizedState!==null&&ES(ra,e.memoizedState,e.memoizedProps);break;case 5:cl(e);break;case 3:case 4:var i=ra;ra=Og(e.stateNode.containerInfo),cl(e),ra=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=xn,xn=16777216,cl(e),xn=i):cl(e));break;default:cl(e)}}function Zl(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Wl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];ei=h,Cg(h,e)}Zl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ru(e),e=e.sibling}function Ru(e){switch(e.tag){case 0:case 11:case 15:Wl(e),e.flags&2048&&bs(9,e,e.return);break;case 3:Wl(e);break;case 12:Wl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,hl(e)):Wl(e);break;default:Wl(e)}}function hl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];ei=h,Cg(h,e)}Zl(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:bs(8,i,i.return),hl(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,hl(i));break;default:hl(i)}e=e.sibling}}function Cg(e,i){for(;ei!==null;){var o=ei;switch(o.tag){case 0:case 11:case 15:bs(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ll(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,ei=h;else t:for(o=e;ei!==null;){h=ei;var p=h.sibling,S=h.return;if(Oh(h),h===o){ei=null;break t}if(p!==null){p.return=S,ei=p;break t}ei=S}}}function Xf(e,i,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(e,i,o,h){return new Xf(e,i,o,h)}function fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sa(e,i){var o=e.alternate;return o===null?(o=ni(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&31457280,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Jl(e,i){e.flags&=31457282;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function wu(e,i,o,h,p,S){var B=0;if(h=e,typeof e=="function")fl(e)&&(B=1);else if(typeof e=="string")B=_S(e,o,jt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case v:return $l(o.children,p,S,i);case _:B=8,p|=24;break;case b:return e=ni(12,o,i,p|2),e.elementType=b,e.lanes=S,e;case I:return e=ni(13,o,i,p),e.elementType=I,e.lanes=S,e;case L:return e=ni(19,o,i,p),e.elementType=L,e.lanes=S,e;case x:return Qf(o,p,S,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case C:B=10;break t;case U:B=9;break t;case R:B=11;break t;case F:B=14;break t;case D:B=16,h=null;break t}B=29,o=Error(r(130,e===null?"null":typeof e,"")),h=null}return i=ni(B,o,i,p),i.elementType=e,i.type=h,i.lanes=S,i}function $l(e,i,o,h){return e=ni(7,e,h,i),e.lanes=o,e}function Qf(e,i,o,h){e=ni(22,e,h,i),e.elementType=x,e.lanes=o;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var S=p._current;if(S===null)throw Error(r(456));if((p._pendingVisibility&2)===0){var B=Xr(S,2);B!==null&&(p._pendingVisibility|=2,mi(B,S,2))}},attach:function(){var S=p._current;if(S===null)throw Error(r(456));if((p._pendingVisibility&2)!==0){var B=Xr(S,2);B!==null&&(p._pendingVisibility&=-3,mi(B,S,2))}}};return e.stateNode=p,e}function di(e,i,o){return e=ni(6,e,null,i),e.lanes=o,e}function Lc(e,i,o){return i=ni(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Rs(e){e.flags|=4}function to(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!s2(i)){if(i=za.current,i!==null&&((se&4194176)===se?Sr!==null:(se&62914560)!==se&&(se&536870912)===0||i!==Sr))throw fu=uh,Sf;e.flags|=8192}}function ws(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ai():536870912,e.lanes|=i,xr|=i)}function Pc(e,i){if(!$e)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function In(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(i)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&31457280,h|=p.flags&31457280,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=h,e.childLanes=o,i}function cp(e,i,o){var h=i.pendingProps;switch(Ol(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(i),null;case 1:return In(i),null;case 3:return o=i.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),rl(Zn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(cu(i)?Rs(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Es!==null&&(Os(Es),Es=null))),In(i),null;case 26:return o=i.memoizedState,e===null?(Rs(i),o!==null?(In(i),to(i,o)):(In(i),i.flags&=-16777217)):o?o!==e.memoizedState?(Rs(i),In(i),to(i,o)):(In(i),i.flags&=-16777217):(e.memoizedProps!==h&&Rs(i),In(i),i.flags&=-16777217),null;case 27:Ze(i),o=le.current;var p=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Rs(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return In(i),null}e=jt.current,cu(i)?V0(i):(e=Wy(p,h,o),i.stateNode=e,Rs(i))}return In(i),null;case 5:if(Ze(i),o=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Rs(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return In(i),null}if(e=jt.current,cu(i))V0(i);else{switch(p=xg(le.current),e){case 1:e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?p.createElement(o,{is:h.is}):p.createElement(o)}}e[Vn]=i,e[Se]=h;t:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break t;for(;p.sibling===null;){if(p.return===null||p.return===i)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=e;t:switch(ba(e,o,h),o){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Rs(i)}}return In(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==h&&Rs(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(e=le.current,cu(i)){if(e=i.stateNode,o=i.memoizedProps,h=null,p=na,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}e[Vn]=i,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||qy(e.nodeValue,o)),e||bo(i)}else e=xg(e).createTextNode(h),e[Vn]=i,i.stateNode=e}return In(i),null;case 13:if(h=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=cu(i),h!==null&&h.dehydrated!==null){if(e===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Vn]=i}else hu(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;In(i),p=!1}else Es!==null&&(Os(Es),Es=null),p=!0;if(!p)return i.flags&256?(Er(i),i):(Er(i),null)}if(Er(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=h!==null,e=e!==null&&e.memoizedState!==null,o){h=i.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var S=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==p&&(h.flags|=2048)}return o!==e&&o&&(i.child.flags|=8192),ws(i,i.updateQueue),In(i),null;case 4:return Fe(),e===null&&mp(i.stateNode.containerInfo),In(i),null;case 10:return rl(i.type),In(i),null;case 19:if(Dt(ci),p=i.memoizedState,p===null)return In(i),null;if(h=(i.flags&128)!==0,S=p.rendering,S===null)if(h)Pc(p,!1);else{if(wn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(S=du(e),S!==null){for(i.flags|=128,Pc(p,!1),e=S.updateQueue,i.updateQueue=e,ws(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)Jl(o,e),o=o.sibling;return xt(ci,ci.current&1|2),i.child}e=e.sibling}p.tail!==null&&De()>Ie&&(i.flags|=128,h=!0,Pc(p,!1),i.lanes=4194304)}else{if(!h)if(e=du(S),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,ws(i,e),Pc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!$e)return In(i),null}else 2*De()-p.renderingStartTime>Ie&&o!==536870912&&(i.flags|=128,h=!0,Pc(p,!1),i.lanes=4194304);p.isBackwards?(S.sibling=i.child,i.child=S):(e=p.last,e!==null?e.sibling=S:i.child=S,p.last=S)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=De(),i.sibling=null,e=ci.current,xt(ci,h?e&1|2:e&1),i):(In(i),null);case 22:case 23:return Er(i),Cc(),h=i.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(o&536870912)!==0&&(i.flags&128)===0&&(In(i),i.subtreeFlags&6&&(i.flags|=8192)):In(i),o=i.updateQueue,o!==null&&ws(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==o&&(i.flags|=2048),e!==null&&Dt(el),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),rl(Zn),In(i),null;case 25:return null}throw Error(r(156,i.tag))}function Hn(e,i){switch(Ol(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return rl(Zn),Fe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ze(i),null;case 13:if(Er(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));hu()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Dt(ci),null;case 4:return Fe(),null;case 10:return rl(i.type),null;case 22:case 23:return Er(i),Cc(),e!==null&&Dt(el),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return rl(Zn),null;case 25:return null;default:return null}}function Zf(e,i){switch(Ol(i),i.tag){case 3:rl(Zn),Fe();break;case 26:case 27:case 5:Ze(i);break;case 4:Fe();break;case 13:Er(i);break;case 19:Dt(ci);break;case 10:rl(i.type);break;case 22:case 23:Er(i),Cc(),e!==null&&Dt(el);break;case 24:rl(Zn)}}var Lo={getCacheForType:function(e){var i=ia(Zn),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o}},dl=typeof WeakMap=="function"?WeakMap:Map,ye=0,gn=null,xe=null,se=0,_n=0,an=null,ii=!1,oa=!1,eo=!1,gl=0,wn=0,er=0,Dr=0,Nu=0,Ea=0,xr=0,zc=null,Ue=null,mn=!1,we=0,Ie=1/0,fn=null,gi=null,Ns=!1,Ds=null,Po=0,nr=0,On=null,xs=0,ml=null;function Ta(){if((ye&2)!==0&&se!==0)return se&-se;if(w.T!==null){var e=Ro;return e!==0?e:hp()}return ar()}function ss(){Ea===0&&(Ea=(se&536870912)===0||$e?Ki():536870912);var e=za.current;return e!==null&&(e.flags|=32),Ea}function mi(e,i,o){(e===gn&&_n===2||e.cancelPendingCommit!==null)&&(pl(e,0),rs(e,se,Ea,!1)),be(e,o),((ye&2)===0||e!==gn)&&(e===gn&&((ye&2)===0&&(Dr|=o),wn===4&&rs(e,se,Ea,!1)),Sn(e))}function Du(e,i,o){if((ye&6)!==0)throw Error(r(327));var h=!o&&(i&60)===0&&(i&e.expiredLanes)===0||Ui(e,i),p=h?s(e,i):Bo(e,i,!0),S=h;do{if(p===0){oa&&!h&&rs(e,i,0,!1);break}else if(p===6)rs(e,i,0,!ii);else{if(o=e.current.alternate,S&&!Wf(o)){p=Bo(e,i,!1),S=!1;continue}if(p===2){if(S=i,e.errorRecoveryDisabledLanes&S)var B=0;else B=e.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){i=B;t:{var Z=e;p=zc;var it=Z.current.memoizedState.isDehydrated;if(it&&(pl(Z,B).flags|=256),B=Bo(Z,B,!1),B!==2){if(eo&&!it){Z.errorRecoveryDisabledLanes|=S,Dr|=S,p=4;break t}S=Ue,Ue=p,S!==null&&Os(S)}p=B}if(S=!1,p!==2)continue}}if(p===1){pl(e,0),rs(e,i,0,!0);break}t:{switch(h=e,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){rs(h,i,Ea,!ii);break t}break;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(r(329))}if(h.finishedWork=o,h.finishedLanes=i,(i&62914560)===i&&(S=we+300-De(),10<S)){if(rs(h,i,Ea,!ii),Kn(h,0)!==0)break t;h.timeoutHandle=Xy(Vh.bind(null,h,o,Ue,fn,mn,i,Ea,Dr,xr,ii,2,-0,0),S);break t}Vh(h,o,Ue,fn,mn,i,Ea,Dr,xr,ii,0,-0,0)}}break}while(!0);Sn(e)}function Os(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function Vh(e,i,o,h,p,S,B,Z,it,ut,wt,It,St){var At=i.subtreeFlags;if((At&8192||(At&16785408)===16785408)&&(id={stylesheets:null,count:0,unsuspend:SS},Io(i),i=TS(),i!==null)){e.cancelPendingCommit=i(at.bind(null,e,o,h,p,B,Z,it,1,It,St)),rs(e,S,B,!ut);return}at(e,o,h,p,B,Z,it,wt,It,St)}function Wf(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var p=o[h],S=p.getSnapshot;p=p.value;try{if(!Ua(S(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function rs(e,i,o,h){i&=~Nu,i&=~Dr,e.suspendedLanes|=i,e.pingedLanes&=~i,h&&(e.warmLanes|=i),h=e.expirationTimes;for(var p=i;0<p;){var S=31-Pn(p),B=1<<S;h[S]=-1,p&=~B}o!==0&&Qa(e,o,i)}function zo(){return(ye&6)===0?(ke(0),!1):!0}function Or(){if(xe!==null){if(_n===0)var e=xe.return;else e=xe,Qs=Cr=null,dh(e),Ul=null,Tc=0,e=xe;for(;e!==null;)Zf(e.alternate,e),e=e.return;xe=null}}function pl(e,i){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,aS(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Or(),gn=e,xe=o=Sa(e.current,null),se=i,_n=0,an=null,ii=!1,oa=Ui(e,i),eo=!1,xr=Ea=Nu=Dr=er=wn=0,Ue=zc=null,mn=!1,(i&8)!==0&&(i|=i&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=i;0<h;){var p=31-Pn(h),S=1<<p;i|=e[p],h&=~S}return gl=i,gc(),o}function no(e,i){Re=null,w.H=Ar,i===Ml?(i=on(),_n=3):i===Sf?(i=on(),_n=4):_n=i===es?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,an=i,xe===null&&(wn=1,Th(e,Pa(i,e.current)))}function xu(){var e=w.H;return w.H=Ar,e===null?Ar:e}function Uh(){var e=w.A;return w.A=Lo,e}function Bc(){wn=4,ii||(se&4194176)!==se&&za.current!==null||(oa=!0),(er&134217727)===0&&(Dr&134217727)===0||gn===null||rs(gn,se,Ea,!1)}function Bo(e,i,o){var h=ye;ye|=2;var p=xu(),S=Uh();(gn!==e||se!==i)&&(fn=null,pl(e,i)),i=!1;var B=wn;t:do try{if(_n!==0&&xe!==null){var Z=xe,it=an;switch(_n){case 8:Or(),B=6;break t;case 3:case 2:case 6:za.current===null&&(i=!0);var ut=_n;if(_n=0,an=null,E(e,Z,it,ut),o&&oa){B=0;break t}break;default:ut=_n,_n=0,an=null,E(e,Z,it,ut)}}Jf(),B=wn;break}catch(wt){no(e,wt)}while(!0);return i&&e.shellSuspendCounter++,Qs=Cr=null,ye=h,w.H=p,w.A=S,xe===null&&(gn=null,se=0,gc()),B}function Jf(){for(;xe!==null;)f(xe)}function s(e,i){var o=ye;ye|=2;var h=xu(),p=Uh();gn!==e||se!==i?(fn=null,Ie=De()+500,pl(e,i)):oa=Ui(e,i);t:do try{if(_n!==0&&xe!==null){i=xe;var S=an;e:switch(_n){case 1:_n=0,an=null,E(e,i,S,1);break;case 2:if(I0(S)){_n=0,an=null,y(i);break}i=function(){_n===2&&gn===e&&(_n=7),Sn(e)},S.then(i,i);break t;case 3:_n=7;break t;case 4:_n=5;break t;case 7:I0(S)?(_n=0,an=null,y(i)):(_n=0,an=null,E(e,i,S,7));break;case 5:var B=null;switch(xe.tag){case 26:B=xe.memoizedState;case 5:case 27:var Z=xe;if(!B||s2(B)){_n=0,an=null;var it=Z.sibling;if(it!==null)xe=it;else{var ut=Z.return;ut!==null?(xe=ut,N(ut)):xe=null}break e}}_n=0,an=null,E(e,i,S,5);break;case 6:_n=0,an=null,E(e,i,S,6);break;case 8:Or(),wn=6;break t;default:throw Error(r(462))}}l();break}catch(wt){no(e,wt)}while(!0);return Qs=Cr=null,w.H=h,w.A=p,ye=o,xe!==null?0:(gn=null,se=0,gc(),wn)}function l(){for(;xe!==null&&!He();)f(xe)}function f(e){var i=xc(e.alternate,e,gl);e.memoizedProps=e.pendingProps,i===null?N(e):xe=i}function y(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=Eg(o,i,i.pendingProps,i.type,void 0,se);break;case 11:i=Eg(o,i,i.pendingProps,i.type.render,i.ref,se);break;case 5:dh(i);default:Zf(o,i),i=xe=Jl(i,gl),i=xc(o,i,gl)}e.memoizedProps=e.pendingProps,i===null?N(e):xe=i}function E(e,i,o,h){Qs=Cr=null,dh(i),Ul=null,Tc=0;var p=i.return;try{if(op(e,p,i,o,se)){wn=1,Th(e,Pa(o,e.current)),xe=null;return}}catch(S){if(p!==null)throw xe=p,S;wn=1,Th(e,Pa(o,e.current)),xe=null;return}i.flags&32768?($e||h===1?e=!0:oa||(se&536870912)!==0?e=!1:(ii=e=!0,(h===2||h===3||h===6)&&(h=za.current,h!==null&&h.tag===13&&(h.flags|=16384))),W(i,e)):N(i)}function N(e){var i=e;do{if((i.flags&32768)!==0){W(i,ii);return}e=i.return;var o=cp(i.alternate,i,gl);if(o!==null){xe=o;return}if(i=i.sibling,i!==null){xe=i;return}xe=i=e}while(i!==null);wn===0&&(wn=5)}function W(e,i){do{var o=Hn(e.alternate,e);if(o!==null){o.flags&=32767,xe=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){xe=e;return}xe=e=o}while(e!==null);wn=6,xe=null}function at(e,i,o,h,p,S,B,Z,it,ut){var wt=w.T,It=dt.p;try{dt.p=2,w.T=null,mt(e,i,o,h,It,p,S,B,Z,it,ut)}finally{w.T=wt,dt.p=It}}function mt(e,i,o,h,p,S,B,Z){do kt();while(Ds!==null);if((ye&6)!==0)throw Error(r(327));var it=e.finishedWork;if(h=e.finishedLanes,it===null)return null;if(e.finishedWork=null,e.finishedLanes=0,it===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var ut=it.lanes|it.childLanes;if(ut|=Yr,zs(e,h,ut,S,B,Z),e===gn&&(xe=gn=null,se=0),(it.subtreeFlags&10256)===0&&(it.flags&10256)===0||Ns||(Ns=!0,nr=ut,On=o,ft(Fn,function(){return kt(),null})),o=(it.flags&15990)!==0,(it.subtreeFlags&15990)!==0||o?(o=w.T,w.T=null,S=dt.p,dt.p=2,B=ye,ye|=4,Au(e,it),Uo(it,e),gf(_p,e.containerInfo),Lg=!!vp,_p=vp=null,e.current=it,Cu(e,it.alternate,it),Ln(),ye=B,dt.p=S,w.T=o):e.current=it,Ns?(Ns=!1,Ds=e,Po=h):Rt(e,ut),ut=e.pendingLanes,ut===0&&(gi=null),ji(it.stateNode),Sn(e),i!==null)for(p=e.onRecoverableError,it=0;it<i.length;it++)ut=i[it],p(ut.value,{componentStack:ut.stack});return(Po&3)!==0&&kt(),ut=e.pendingLanes,(h&4194218)!==0&&(ut&42)!==0?e===ml?xs++:(xs=0,ml=e):xs=0,ke(0),null}function Rt(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Ll(i)))}function kt(){if(Ds!==null){var e=Ds,i=nr;nr=0;var o=Na(Po),h=w.T,p=dt.p;try{if(dt.p=32>o?32:o,w.T=null,Ds===null)var S=!1;else{o=On,On=null;var B=Ds,Z=Po;if(Ds=null,Po=0,(ye&6)!==0)throw Error(r(331));var it=ye;if(ye|=4,Ru(B.current),ul(B,B.current,Z,o),ye=it,ke(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(We,B)}catch{}S=!0}return S}finally{dt.p=p,w.T=h,Rt(e,i)}}return!1}function Yt(e,i,o){i=Pa(o,i),i=Lf(e.stateNode,i,2),e=as(e,i,2),e!==null&&(be(e,2),Sn(e))}function zt(e,i,o){if(e.tag===3)Yt(e,e,o);else for(;i!==null;){if(i.tag===3){Yt(i,e,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(gi===null||!gi.has(h))){e=Pa(o,e),o=Pf(2),h=as(i,o,2),h!==null&&(_g(o,h,i,e),be(h,2),Sn(h));break}}i=i.return}}function ve(e,i,o){var h=e.pingCache;if(h===null){h=e.pingCache=new dl;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(o)||(eo=!0,p.add(o),e=Ms.bind(null,e,i,o),i.then(e,e))}function Ms(e,i,o){var h=e.pingCache;h!==null&&h.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,gn===e&&(se&o)===o&&(wn===4||wn===3&&(se&62914560)===se&&300>De()-we?(ye&2)===0&&pl(e,0):Nu|=o,xr===se&&(xr=0)),Sn(e)}function Ou(e,i){i===0&&(i=Ai()),e=Xr(e,i),e!==null&&(be(e,i),Sn(e))}function ko(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),Ou(e,o)}function _t(e,i){var o=0;switch(e.tag){case 13:var h=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(i),Ou(e,o)}function ft(e,i){return rn(e,i)}var Et=null,Pt=null,$t=!1,pn=!1,oe=!1,Oe=0;function Sn(e){e!==Pt&&e.next===null&&(Pt===null?Et=Pt=e:Pt=Pt.next=e),pn=!0,$t||($t=!0,Q3(io))}function ke(e,i){if(!oe&&pn){oe=!0;do for(var o=!1,h=Et;h!==null;){if(e!==0){var p=h.pendingLanes;if(p===0)var S=0;else{var B=h.suspendedLanes,Z=h.pingedLanes;S=(1<<31-Pn(42|e)+1)-1,S&=p&~(B&~Z),S=S&201326677?S&201326677|1:S?S|2:0}S!==0&&(o=!0,zy(h,S))}else S=se,S=Kn(h,h===gn?S:0),(S&3)===0||Ui(h,S)||(o=!0,zy(h,S));h=h.next}while(o);oe=!1}}function io(){pn=$t=!1;var e=0;Oe!==0&&(iS()&&(e=Oe),Oe=0);for(var i=De(),o=null,h=Et;h!==null;){var p=h.next,S=Rg(h,i);S===0?(h.next=null,o===null?Et=p:o.next=p,p===null&&(Pt=o)):(o=h,(e!==0||(S&3)!==0)&&(pn=!0)),h=p}ke(e)}function Rg(e,i){for(var o=e.suspendedLanes,h=e.pingedLanes,p=e.expirationTimes,S=e.pendingLanes&-62914561;0<S;){var B=31-Pn(S),Z=1<<B,it=p[B];it===-1?((Z&o)===0||(Z&h)!==0)&&(p[B]=zn(Z,i)):it<=i&&(e.expiredLanes|=Z),S&=~Z}if(i=gn,o=se,o=Kn(e,e===i?o:0),h=e.callbackNode,o===0||e===i&&_n===2||e.cancelPendingCommit!==null)return h!==null&&h!==null&&bi(h),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ui(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(h!==null&&bi(h),Na(o)){case 2:case 8:o=qe;break;case 32:o=Fn;break;case 268435456:o=Ce;break;default:o=Fn}return h=Py.bind(null,e),o=rn(o,h),e.callbackPriority=i,e.callbackNode=o,i}return h!==null&&h!==null&&bi(h),e.callbackPriority=2,e.callbackNode=null,2}function Py(e,i){var o=e.callbackNode;if(kt()&&e.callbackNode!==o)return null;var h=se;return h=Kn(e,e===gn?h:0),h===0?null:(Du(e,h,i),Rg(e,De()),e.callbackNode!=null&&e.callbackNode===o?Py.bind(null,e):null)}function zy(e,i){if(kt())return null;Du(e,i,!0)}function Q3(e){sS(function(){(ye&6)!==0?rn(Ae,e):e()})}function hp(){return Oe===0&&(Oe=Ki()),Oe}function By(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Oa(""+e)}function ky(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function Z3(e,i,o,h,p){if(i==="submit"&&o&&o.stateNode===p){var S=By((p[Se]||null).action),B=h.submitter;B&&(i=(i=B[Se]||null)?By(i.formAction):B.getAttribute("formAction"),i!==null&&(S=i,B=null));var Z=new gr("action","action",null,h,p);e.push({event:Z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Oe!==0){var it=B?ky(p,B):new FormData(p);Of(o,{pending:!0,data:it,method:p.method,action:S},null,it)}}else typeof S=="function"&&(Z.preventDefault(),it=B?ky(p,B):new FormData(p),Of(o,{pending:!0,data:it,method:p.method,action:S},S,it))},currentTarget:p}]})}}for(var fp=0;fp<Kr.length;fp++){var dp=Kr[fp],W3=dp.toLowerCase(),J3=dp[0].toUpperCase()+dp.slice(1);Ss(W3,"on"+J3)}Ss(yf,"onAnimationEnd"),Ss(La,"onAnimationIteration"),Ss(vf,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(qr,"onTransitionRun"),Ss(uu,"onTransitionStart"),Ss(Nl,"onTransitionCancel"),Ss(rh,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($f));function Gy(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],p=h.event;h=h.listeners;t:{var S=void 0;if(i)for(var B=h.length-1;0<=B;B--){var Z=h[B],it=Z.instance,ut=Z.currentTarget;if(Z=Z.listener,it!==S&&p.isPropagationStopped())break t;S=Z,p.currentTarget=ut;try{S(p)}catch(wt){Eh(wt)}p.currentTarget=null,S=it}else for(B=0;B<h.length;B++){if(Z=h[B],it=Z.instance,ut=Z.currentTarget,Z=Z.listener,it!==S&&p.isPropagationStopped())break t;S=Z,p.currentTarget=ut;try{S(p)}catch(wt){Eh(wt)}p.currentTarget=null,S=it}}}}function en(e,i){var o=i[Da];o===void 0&&(o=i[Da]=new Set);var h=e+"__bubble";o.has(h)||(Hy(i,e,2,!1),o.add(h))}function gp(e,i,o){var h=0;i&&(h|=4),Hy(o,e,h,i)}var wg="_reactListening"+Math.random().toString(36).slice(2);function mp(e){if(!e[wg]){e[wg]=!0,Za.forEach(function(o){o!=="selectionchange"&&($3.has(o)||gp(o,!1,e),gp(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[wg]||(i[wg]=!0,gp("selectionchange",!1,i))}}function Hy(e,i,o,h){switch(h2(i)){case 2:var p=CS;break;case 8:p=RS;break;default:p=Np}o=p.bind(null,i,o,e),p=void 0,!Wi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?e.addEventListener(i,o,{capture:!0,passive:p}):e.addEventListener(i,o,!0):p!==void 0?e.addEventListener(i,o,{passive:p}):e.addEventListener(i,o,!1)}function pp(e,i,o,h,p){var S=h;if((i&1)===0&&(i&2)===0&&h!==null)t:for(;;){if(h===null)return;var B=h.tag;if(B===3||B===4){var Z=h.stateNode.containerInfo;if(Z===p||Z.nodeType===8&&Z.parentNode===p)break;if(B===4)for(B=h.return;B!==null;){var it=B.tag;if((it===3||it===4)&&(it=B.stateNode.containerInfo,it===p||it.nodeType===8&&it.parentNode===p))return;B=B.return}for(;Z!==null;){if(B=Ci(Z),B===null)return;if(it=B.tag,it===5||it===6||it===26||it===27){h=S=B;continue t}Z=Z.parentNode}}h=h.return}Al(function(){var ut=S,wt=cr(o),It=[];t:{var St=lh.get(e);if(St!==void 0){var At=gr,te=e;switch(e){case"keypress":if(Ji(o)===0)break t;case"keydown":case"keyup":At=Rl;break;case"focusin":te="focus",At=he;break;case"focusout":te="blur",At=he;break;case"beforeblur":case"afterblur":At=he;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=ee;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=Ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=nu;break;case yf:case La:case vf:At=Fs;break;case rh:At=ms;break;case"scroll":case"scrollend":At=tt;break;case"wheel":At=au;break;case"copy":case"cut":case"paste":At=go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=vo;break;case"toggle":case"beforetoggle":At=qs}var Ee=(i&4)!==0,pi=!Ee&&(e==="scroll"||e==="scrollend"),gt=Ee?St!==null?St+"Capture":null:St;Ee=[];for(var ot=ut,vt;ot!==null;){var Ot=ot;if(vt=Ot.stateNode,Ot=Ot.tag,Ot!==5&&Ot!==26&&Ot!==27||vt===null||gt===null||(Ot=hr(ot,gt),Ot!=null&&Ee.push(td(ot,Ot,vt))),pi)break;ot=ot.return}0<Ee.length&&(St=new At(St,te,null,o,wt),It.push({event:St,listeners:Ee}))}}if((i&7)===0){t:{if(St=e==="mouseover"||e==="pointerover",At=e==="mouseout"||e==="pointerout",St&&o!==ma&&(te=o.relatedTarget||o.fromElement)&&(Ci(te)||te[Yi]))break t;if((At||St)&&(St=wt.window===wt?wt:(St=wt.ownerDocument)?St.defaultView||St.parentWindow:window,At?(te=o.relatedTarget||o.toElement,At=ut,te=te?Ci(te):null,te!==null&&(pi=rt(te),Ee=te.tag,te!==pi||Ee!==5&&Ee!==27&&Ee!==6)&&(te=null)):(At=null,te=ut),At!==te)){if(Ee=ee,Ot="onMouseLeave",gt="onMouseEnter",ot="mouse",(e==="pointerout"||e==="pointerover")&&(Ee=vo,Ot="onPointerLeave",gt="onPointerEnter",ot="pointer"),pi=At==null?St:cn(At),vt=te==null?St:cn(te),St=new Ee(Ot,ot+"leave",At,o,wt),St.target=pi,St.relatedTarget=vt,Ot=null,Ci(wt)===ut&&(Ee=new Ee(gt,ot+"enter",te,o,wt),Ee.target=vt,Ee.relatedTarget=pi,Ot=Ee),pi=Ot,At&&te)e:{for(Ee=At,gt=te,ot=0,vt=Ee;vt;vt=Ih(vt))ot++;for(vt=0,Ot=gt;Ot;Ot=Ih(Ot))vt++;for(;0<ot-vt;)Ee=Ih(Ee),ot--;for(;0<vt-ot;)gt=Ih(gt),vt--;for(;ot--;){if(Ee===gt||gt!==null&&Ee===gt.alternate)break e;Ee=Ih(Ee),gt=Ih(gt)}Ee=null}else Ee=null;At!==null&&jy(It,St,At,Ee,!1),te!==null&&pi!==null&&jy(It,pi,te,Ee,!0)}}t:{if(St=ut?cn(ut):window,At=St.nodeName&&St.nodeName.toLowerCase(),At==="select"||At==="input"&&St.type==="file")var Wt=th;else if(oi(St))if(eh)Wt=wl;else{Wt=O0;var Ge=tp}else At=St.nodeName,!At||At.toLowerCase()!=="input"||St.type!=="checkbox"&&St.type!=="radio"?ut&&Gr(ut.elementType)&&(Wt=th):Wt=fc;if(Wt&&(Wt=Wt(e,ut))){Qn(It,Wt,o,wt);break t}Ge&&Ge(e,St,ut),e==="focusout"&&ut&&St.type==="number"&&ut.memoizedProps.value!=null&&kr(St,"number",St.value)}switch(Ge=ut?cn(ut):window,e){case"focusin":(oi(Ge)||Ge.contentEditable==="true")&&(_o=Ge,mf=ut,ou=null);break;case"focusout":ou=mf=_o=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,_s(It,o,wt);break;case"selectionchange":if(ih)break;case"keydown":case"keyup":_s(It,o,wt)}var ie;if(ys)t:{switch(e){case"compositionstart":var ce="onCompositionStart";break t;case"compositionend":ce="onCompositionEnd";break t;case"compositionupdate":ce="onCompositionUpdate";break t}ce=void 0}else ze?bt(e,o)&&(ce="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ce="onCompositionStart");ce&&(P&&o.locale!=="ko"&&(ze||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&ze&&(ie=Hr()):(Ja=wt,gs="value"in Ja?Ja.value:Ja.textContent,ze=!0)),Ge=Ng(ut,ce),0<Ge.length&&(ce=new po(ce,e,null,o,wt),It.push({event:ce,listeners:Ge}),ie?ce.data=ie:(ie=qt(o),ie!==null&&(ce.data=ie)))),(ie=A?Un(e,o):Be(e,o))&&(ce=Ng(ut,"onBeforeInput"),0<ce.length&&(Ge=new po("onBeforeInput","beforeinput",null,o,wt),It.push({event:Ge,listeners:ce}),Ge.data=ie)),Z3(It,e,ut,o,wt)}Gy(It,i)})}function td(e,i,o){return{instance:e,listener:i,currentTarget:o}}function Ng(e,i){for(var o=i+"Capture",h=[];e!==null;){var p=e,S=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||S===null||(p=hr(e,o),p!=null&&h.unshift(td(e,p,S)),p=hr(e,i),p!=null&&h.push(td(e,p,S))),e=e.return}return h}function Ih(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jy(e,i,o,h,p){for(var S=i._reactName,B=[];o!==null&&o!==h;){var Z=o,it=Z.alternate,ut=Z.stateNode;if(Z=Z.tag,it!==null&&it===h)break;Z!==5&&Z!==26&&Z!==27||ut===null||(it=ut,p?(ut=hr(o,S),ut!=null&&B.unshift(td(o,ut,it))):p||(ut=hr(o,S),ut!=null&&B.push(td(o,ut,it)))),o=o.return}B.length!==0&&e.push({event:i,listeners:B})}var tS=/\r\n?/g,eS=/\u0000|\uFFFD/g;function Fy(e){return(typeof e=="string"?e:""+e).replace(tS,`
`).replace(eS,"")}function qy(e,i){return i=Fy(i),Fy(e)===i}function Dg(){}function bn(e,i,o,h,p,S){switch(o){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||ga(e,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&ga(e,""+h);break;case"className":cs(e,"class",h);break;case"tabIndex":cs(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":cs(e,o,h);break;case"style":bl(e,h,S);break;case"data":if(i!=="object"){cs(e,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=Oa(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(o==="formAction"?(i!=="input"&&bn(e,i,"name",p.name,p,null),bn(e,i,"formEncType",p.formEncType,p,null),bn(e,i,"formMethod",p.formMethod,p,null),bn(e,i,"formTarget",p.formTarget,p,null)):(bn(e,i,"encType",p.encType,p,null),bn(e,i,"method",p.method,p,null),bn(e,i,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=Oa(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=Dg);break;case"onScroll":h!=null&&en("scroll",e);break;case"onScrollEnd":h!=null&&en("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=Oa(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":en("beforetoggle",e),en("toggle",e),us(e,"popover",h);break;case"xlinkActuate":Zi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Zi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Zi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Zi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Zi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Zi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Zi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Zi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Zi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":us(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ho.get(o)||o,us(e,o,h))}}function yp(e,i,o,h,p,S){switch(o){case"style":bl(e,h,S);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"children":typeof h=="string"?ga(e,h):(typeof h=="number"||typeof h=="bigint")&&ga(e,""+h);break;case"onScroll":h!=null&&en("scroll",e);break;case"onScrollEnd":h!=null&&en("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Dg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xi.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),S=e[Se]||null,S=S!=null?S[o]:null,typeof S=="function"&&e.removeEventListener(i,S,p),typeof h=="function")){typeof S!="function"&&S!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,h,p);break t}o in e?e[o]=h:h===!0?e.setAttribute(o,""):us(e,o,h)}}}function ba(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":en("error",e),en("load",e);var h=!1,p=!1,S;for(S in o)if(o.hasOwnProperty(S)){var B=o[S];if(B!=null)switch(S){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:bn(e,i,S,B,o,null)}}p&&bn(e,i,"srcSet",o.srcSet,o,null),h&&bn(e,i,"src",o.src,o,null);return;case"input":en("invalid",e);var Z=S=B=p=null,it=null,ut=null;for(h in o)if(o.hasOwnProperty(h)){var wt=o[h];if(wt!=null)switch(h){case"name":p=wt;break;case"type":B=wt;break;case"checked":it=wt;break;case"defaultChecked":ut=wt;break;case"value":S=wt;break;case"defaultValue":Z=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(r(137,i));break;default:bn(e,i,h,wt,o,null)}}lr(e,S,Z,it,ut,B,p,!1),ks(e);return;case"select":en("invalid",e),h=B=S=null;for(p in o)if(o.hasOwnProperty(p)&&(Z=o[p],Z!=null))switch(p){case"value":S=Z;break;case"defaultValue":B=Z;break;case"multiple":h=Z;default:bn(e,i,p,Z,o,null)}i=S,o=B,e.multiple=!!h,i!=null?Ke(e,!!h,i,!1):o!=null&&Ke(e,!!h,o,!0);return;case"textarea":en("invalid",e),S=p=h=null;for(B in o)if(o.hasOwnProperty(B)&&(Z=o[B],Z!=null))switch(B){case"value":h=Z;break;case"defaultValue":p=Z;break;case"children":S=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:bn(e,i,B,Z,o,null)}da(e,h,p,S),ks(e);return;case"option":for(it in o)if(o.hasOwnProperty(it)&&(h=o[it],h!=null))switch(it){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:bn(e,i,it,h,o,null)}return;case"dialog":en("cancel",e),en("close",e);break;case"iframe":case"object":en("load",e);break;case"video":case"audio":for(h=0;h<$f.length;h++)en($f[h],e);break;case"image":en("error",e),en("load",e);break;case"details":en("toggle",e);break;case"embed":case"source":case"link":en("error",e),en("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in o)if(o.hasOwnProperty(ut)&&(h=o[ut],h!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:bn(e,i,ut,h,o,null)}return;default:if(Gr(i)){for(wt in o)o.hasOwnProperty(wt)&&(h=o[wt],h!==void 0&&yp(e,i,wt,h,o,void 0));return}}for(Z in o)o.hasOwnProperty(Z)&&(h=o[Z],h!=null&&bn(e,i,Z,h,o,null))}function nS(e,i,o,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,S=null,B=null,Z=null,it=null,ut=null,wt=null;for(At in o){var It=o[At];if(o.hasOwnProperty(At)&&It!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":it=It;default:h.hasOwnProperty(At)||bn(e,i,At,null,h,It)}}for(var St in h){var At=h[St];if(It=o[St],h.hasOwnProperty(St)&&(At!=null||It!=null))switch(St){case"type":S=At;break;case"name":p=At;break;case"checked":ut=At;break;case"defaultChecked":wt=At;break;case"value":B=At;break;case"defaultValue":Z=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,i));break;default:At!==It&&bn(e,i,St,At,h,It)}}Gs(e,B,Z,it,ut,wt,S,p);return;case"select":At=B=Z=St=null;for(S in o)if(it=o[S],o.hasOwnProperty(S)&&it!=null)switch(S){case"value":break;case"multiple":At=it;default:h.hasOwnProperty(S)||bn(e,i,S,null,h,it)}for(p in h)if(S=h[p],it=o[p],h.hasOwnProperty(p)&&(S!=null||it!=null))switch(p){case"value":St=S;break;case"defaultValue":Z=S;break;case"multiple":B=S;default:S!==it&&bn(e,i,p,S,h,it)}i=Z,o=B,h=At,St!=null?Ke(e,!!o,St,!1):!!h!=!!o&&(i!=null?Ke(e,!!o,i,!0):Ke(e,!!o,o?[]:"",!1));return;case"textarea":At=St=null;for(Z in o)if(p=o[Z],o.hasOwnProperty(Z)&&p!=null&&!h.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:bn(e,i,Z,null,h,p)}for(B in h)if(p=h[B],S=o[B],h.hasOwnProperty(B)&&(p!=null||S!=null))switch(B){case"value":St=p;break;case"defaultValue":At=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==S&&bn(e,i,B,p,h,S)}or(e,St,At);return;case"option":for(var te in o)if(St=o[te],o.hasOwnProperty(te)&&St!=null&&!h.hasOwnProperty(te))switch(te){case"selected":e.selected=!1;break;default:bn(e,i,te,null,h,St)}for(it in h)if(St=h[it],At=o[it],h.hasOwnProperty(it)&&St!==At&&(St!=null||At!=null))switch(it){case"selected":e.selected=St&&typeof St!="function"&&typeof St!="symbol";break;default:bn(e,i,it,St,h,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)St=o[Ee],o.hasOwnProperty(Ee)&&St!=null&&!h.hasOwnProperty(Ee)&&bn(e,i,Ee,null,h,St);for(ut in h)if(St=h[ut],At=o[ut],h.hasOwnProperty(ut)&&St!==At&&(St!=null||At!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,i));break;default:bn(e,i,ut,St,h,At)}return;default:if(Gr(i)){for(var pi in o)St=o[pi],o.hasOwnProperty(pi)&&St!==void 0&&!h.hasOwnProperty(pi)&&yp(e,i,pi,void 0,h,St);for(wt in h)St=h[wt],At=o[wt],!h.hasOwnProperty(wt)||St===At||St===void 0&&At===void 0||yp(e,i,wt,St,h,At);return}}for(var gt in o)St=o[gt],o.hasOwnProperty(gt)&&St!=null&&!h.hasOwnProperty(gt)&&bn(e,i,gt,null,h,St);for(It in h)St=h[It],At=o[It],!h.hasOwnProperty(It)||St===At||St==null&&At==null||bn(e,i,It,St,h,At)}var vp=null,_p=null;function xg(e){return e.nodeType===9?e:e.ownerDocument}function Ky(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Sp(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ep=null;function iS(){var e=window.event;return e&&e.type==="popstate"?e===Ep?!1:(Ep=e,!0):(Ep=null,!1)}var Xy=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,sS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(e){return Qy.resolve(null).then(e).catch(rS)}:Xy;function rS(e){setTimeout(function(){throw e})}function Tp(e,i){var o=i,h=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){e.removeChild(p),od(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);od(i)}function bp(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":bp(o),Bs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function lS(e,i,o,h){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[os])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(S=e.getAttribute("rel"),S==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(S!==p.rel||e.getAttribute("href")!==(p.href==null?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(S=e.getAttribute("src"),(S!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&S&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var S=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===S)return e}else return e;if(e=yl(e.nextSibling),e===null)break}return null}function oS(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=yl(e.nextSibling),e===null))return null;return e}function yl(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function Zy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}function Wy(e,i,o){switch(i=xg(o),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}var Mr=new Map,Jy=new Set;function Og(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Go=dt.d;dt.d={f:uS,r:cS,D:hS,C:fS,L:dS,m:gS,X:pS,S:mS,M:yS};function uS(){var e=Go.f(),i=zo();return e||i}function cS(e){var i=ln(e);i!==null&&i.tag===5&&i.type==="form"?lg(i):Go.r(e)}var Lh=typeof document>"u"?null:document;function $y(e,i,o){var h=Lh;if(h&&typeof i=="string"&&i){var p=An(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Jy.has(p)||(Jy.add(p),e={rel:e,crossOrigin:o,href:i},h.querySelector(p)===null&&(i=h.createElement("link"),ba(i,"link",e),Xt(i),h.head.appendChild(i)))}}function hS(e){Go.D(e),$y("dns-prefetch",e,null)}function fS(e,i){Go.C(e,i),$y("preconnect",e,i)}function dS(e,i,o){Go.L(e,i,o);var h=Lh;if(h&&e&&i){var p='link[rel="preload"][as="'+An(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+An(o.imageSizes)+'"]')):p+='[href="'+An(e)+'"]';var S=p;switch(i){case"style":S=Ph(e);break;case"script":S=zh(e)}Mr.has(S)||(e=M({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),Mr.set(S,e),h.querySelector(p)!==null||i==="style"&&h.querySelector(ed(S))||i==="script"&&h.querySelector(nd(S))||(i=h.createElement("link"),ba(i,"link",e),Xt(i),h.head.appendChild(i)))}}function gS(e,i){Go.m(e,i);var o=Lh;if(o&&e){var h=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+An(h)+'"][href="'+An(e)+'"]',S=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=zh(e)}if(!Mr.has(S)&&(e=M({rel:"modulepreload",href:e},i),Mr.set(S,e),o.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nd(S)))return}h=o.createElement("link"),ba(h,"link",e),Xt(h),o.head.appendChild(h)}}}function mS(e,i,o){Go.S(e,i,o);var h=Lh;if(h&&e){var p=Jt(h).hoistableStyles,S=Ph(e);i=i||"default";var B=p.get(S);if(!B){var Z={loading:0,preload:null};if(B=h.querySelector(ed(S)))Z.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":i},o),(o=Mr.get(S))&&Ap(e,o);var it=B=h.createElement("link");Xt(it),ba(it,"link",e),it._p=new Promise(function(ut,wt){it.onload=ut,it.onerror=wt}),it.addEventListener("load",function(){Z.loading|=1}),it.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Mg(B,i,h)}B={type:"stylesheet",instance:B,count:1,state:Z},p.set(S,B)}}}function pS(e,i){Go.X(e,i);var o=Lh;if(o&&e){var h=Jt(o).hoistableScripts,p=zh(e),S=h.get(p);S||(S=o.querySelector(nd(p)),S||(e=M({src:e,async:!0},i),(i=Mr.get(p))&&Cp(e,i),S=o.createElement("script"),Xt(S),ba(S,"link",e),o.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(p,S))}}function yS(e,i){Go.M(e,i);var o=Lh;if(o&&e){var h=Jt(o).hoistableScripts,p=zh(e),S=h.get(p);S||(S=o.querySelector(nd(p)),S||(e=M({src:e,async:!0,type:"module"},i),(i=Mr.get(p))&&Cp(e,i),S=o.createElement("script"),Xt(S),ba(S,"link",e),o.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(p,S))}}function t2(e,i,o,h){var p=(p=le.current)?Og(p):null;if(!p)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ph(o.href),o=Jt(p).hoistableStyles,h=o.get(i),h||(h={type:"style",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Ph(o.href);var S=Jt(p).hoistableStyles,B=S.get(e);if(B||(p=p.ownerDocument||p,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(e,B),(S=p.querySelector(ed(e)))&&!S._p&&(B.instance=S,B.state.loading=5),Mr.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mr.set(e,o),S||vS(p,e,o,B.state))),i&&h===null)throw Error(r(528,""));return B}if(i&&h!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=zh(o),o=Jt(p).hoistableScripts,h=o.get(i),h||(h={type:"script",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ph(e){return'href="'+An(e)+'"'}function ed(e){return'link[rel="stylesheet"]['+e+"]"}function e2(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function vS(e,i,o,h){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=e.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),ba(i,"link",o),Xt(i),e.head.appendChild(i))}function zh(e){return'[src="'+An(e)+'"]'}function nd(e){return"script[async]"+e}function n2(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var h=e.querySelector('style[data-href~="'+An(o.href)+'"]');if(h)return i.instance=h,Xt(h),h;var p=M({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),Xt(h),ba(h,"style",p),Mg(h,o.precedence,e),i.instance=h;case"stylesheet":p=Ph(o.href);var S=e.querySelector(ed(p));if(S)return i.state.loading|=4,i.instance=S,Xt(S),S;h=e2(o),(p=Mr.get(p))&&Ap(h,p),S=(e.ownerDocument||e).createElement("link"),Xt(S);var B=S;return B._p=new Promise(function(Z,it){B.onload=Z,B.onerror=it}),ba(S,"link",h),i.state.loading|=4,Mg(S,o.precedence,e),i.instance=S;case"script":return S=zh(o.src),(p=e.querySelector(nd(S)))?(i.instance=p,Xt(p),p):(h=o,(p=Mr.get(S))&&(h=M({},o),Cp(h,p)),e=e.ownerDocument||e,p=e.createElement("script"),Xt(p),ba(p,"link",h),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,Mg(h,o.precedence,e));return i.instance}function Mg(e,i,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,S=p,B=0;B<h.length;B++){var Z=h[B];if(Z.dataset.precedence===i)S=Z;else if(S!==p)break}S?S.parentNode.insertBefore(e,S.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function Ap(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Cp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Vg=null;function i2(e,i,o){if(Vg===null){var h=new Map,p=Vg=new Map;p.set(o,h)}else p=Vg,h=p.get(o),h||(h=new Map,p.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var S=o[p];if(!(S[os]||S[Vn]||e==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var B=S.getAttribute(i)||"";B=e+B;var Z=h.get(B);Z?Z.push(S):h.set(B,[S])}}return h}function a2(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function _S(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function s2(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var id=null;function SS(){}function ES(e,i,o){if(id===null)throw Error(r(475));var h=id;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=Ph(o.href),S=e.querySelector(ed(p));if(S){e=S._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=Ug.bind(h),e.then(h,h)),i.state.loading|=4,i.instance=S,Xt(S);return}S=e.ownerDocument||e,o=e2(o),(p=Mr.get(p))&&Ap(o,p),S=S.createElement("link"),Xt(S);var B=S;B._p=new Promise(function(Z,it){B.onload=Z,B.onerror=it}),ba(S,"link",o),i.instance=S}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(h.count++,i=Ug.bind(h),e.addEventListener("load",i),e.addEventListener("error",i))}}function TS(){if(id===null)throw Error(r(475));var e=id;return e.stylesheets&&e.count===0&&Rp(e,e.stylesheets),0<e.count?function(i){var o=setTimeout(function(){if(e.stylesheets&&Rp(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Ug(){if(this.count--,this.count===0){if(this.stylesheets)Rp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ig=null;function Rp(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ig=new Map,i.forEach(bS,e),Ig=null,Ug.call(e))}function bS(e,i){if(!(i.state.loading&4)){var o=Ig.get(e);if(o)var h=o.get(null);else{o=new Map,Ig.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<p.length;S++){var B=p[S];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(o.set(B.dataset.precedence,B),h=B)}h&&o.set(null,h)}p=i.instance,B=p.getAttribute("data-precedence"),S=o.get(B)||h,S===h&&o.set(null,p),o.set(B,p),this.count++,h=Ug.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),S?S.parentNode.insertBefore(p,S.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var ad={$$typeof:C,Provider:null,Consumer:null,_currentValue:Nt,_currentValue2:Nt,_threadCount:0};function AS(e,i,o,h,p,S,B,Z){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.hiddenUpdates=wa(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=S,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function r2(e,i,o,h,p,S,B,Z,it,ut,wt,It){return e=new AS(e,i,o,B,Z,it,ut,It),i=1,S===!0&&(i|=24),S=ni(3,null,null,i),e.current=S,S.stateNode=e,i=Tf(),i.refCount++,e.pooledCache=i,i.refCount++,S.memoizedState={element:h,isDehydrated:o,cache:i},va(S),e}function l2(e){return e?(e=Dl,e):Dl}function o2(e,i,o,h,p,S){p=l2(p),h.context===null?h.context=p:h.pendingContext=p,h=is(i),h.payload={element:o},S=S===void 0?null:S,S!==null&&(h.callback=S),o=as(e,h,i),o!==null&&(mi(o,e,i),Yl(o,e,i))}function u2(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function wp(e,i){u2(e,i),(e=e.alternate)&&u2(e,i)}function c2(e){if(e.tag===13){var i=Xr(e,67108864);i!==null&&mi(i,e,67108864),wp(e,67108864)}}var Lg=!0;function CS(e,i,o,h){var p=w.T;w.T=null;var S=dt.p;try{dt.p=2,Np(e,i,o,h)}finally{dt.p=S,w.T=p}}function RS(e,i,o,h){var p=w.T;w.T=null;var S=dt.p;try{dt.p=8,Np(e,i,o,h)}finally{dt.p=S,w.T=p}}function Np(e,i,o,h){if(Lg){var p=Dp(h);if(p===null)pp(e,i,h,Pg,o),f2(e,h);else if(NS(p,e,i,o,h))h.stopPropagation();else if(f2(e,h),i&4&&-1<wS.indexOf(e)){for(;p!==null;){var S=ln(p);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var B=qi(S.pendingLanes);if(B!==0){var Z=S;for(Z.pendingLanes|=2,Z.entangledLanes|=2;B;){var it=1<<31-Pn(B);Z.entanglements[1]|=it,B&=~it}Sn(S),(ye&6)===0&&(Ie=De()+500,ke(0))}}break;case 13:Z=Xr(S,2),Z!==null&&mi(Z,S,2),zo(),wp(S,2)}if(S=Dp(h),S===null&&pp(e,i,h,Pg,o),S===p)break;p=S}p!==null&&h.stopPropagation()}else pp(e,i,h,null,o)}}function Dp(e){return e=cr(e),xp(e)}var Pg=null;function xp(e){if(Pg=null,e=Ci(e),e!==null){var i=rt(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=pt(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Pg=e,null}function h2(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mi()){case Ae:return 2;case qe:return 8;case Fn:case Vi:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var Op=!1,Mu=null,Vu=null,Uu=null,sd=new Map,rd=new Map,Iu=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f2(e,i){switch(e){case"focusin":case"focusout":Mu=null;break;case"dragenter":case"dragleave":Vu=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":sd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(i.pointerId)}}function ld(e,i,o,h,p,S){return e===null||e.nativeEvent!==S?(e={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:S,targetContainers:[p]},i!==null&&(i=ln(i),i!==null&&c2(i)),e):(e.eventSystemFlags|=h,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function NS(e,i,o,h,p){switch(i){case"focusin":return Mu=ld(Mu,e,i,o,h,p),!0;case"dragenter":return Vu=ld(Vu,e,i,o,h,p),!0;case"mouseover":return Uu=ld(Uu,e,i,o,h,p),!0;case"pointerover":var S=p.pointerId;return sd.set(S,ld(sd.get(S)||null,e,i,o,h,p)),!0;case"gotpointercapture":return S=p.pointerId,rd.set(S,ld(rd.get(S)||null,e,i,o,h,p)),!0}return!1}function d2(e){var i=Ci(e.target);if(i!==null){var o=rt(i);if(o!==null){if(i=o.tag,i===13){if(i=pt(o),i!==null){e.blockedOn=i,Li(e.priority,function(){if(o.tag===13){var h=Ta(),p=Xr(o,h);p!==null&&mi(p,o,h),wp(o,h)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zg(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Dp(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);ma=h,o.target.dispatchEvent(h),ma=null}else return i=ln(o),i!==null&&c2(i),e.blockedOn=o,!1;i.shift()}return!0}function g2(e,i,o){zg(e)&&o.delete(i)}function DS(){Op=!1,Mu!==null&&zg(Mu)&&(Mu=null),Vu!==null&&zg(Vu)&&(Vu=null),Uu!==null&&zg(Uu)&&(Uu=null),sd.forEach(g2),rd.forEach(g2)}function Bg(e,i){e.blockedOn===i&&(e.blockedOn=null,Op||(Op=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,DS)))}var kg=null;function m2(e){kg!==e&&(kg=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){kg===e&&(kg=null);for(var i=0;i<e.length;i+=3){var o=e[i],h=e[i+1],p=e[i+2];if(typeof h!="function"){if(xp(h||o)===null)continue;break}var S=ln(o);S!==null&&(e.splice(i,3),i-=3,Of(S,{pending:!0,data:p,method:o.method,action:h},h,p))}}))}function od(e){function i(it){return Bg(it,e)}Mu!==null&&Bg(Mu,e),Vu!==null&&Bg(Vu,e),Uu!==null&&Bg(Uu,e),sd.forEach(i),rd.forEach(i);for(var o=0;o<Iu.length;o++){var h=Iu[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<Iu.length&&(o=Iu[0],o.blockedOn===null);)d2(o),o.blockedOn===null&&Iu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var p=o[h],S=o[h+1],B=p[Se]||null;if(typeof S=="function")B||m2(o);else if(B){var Z=null;if(S&&S.hasAttribute("formAction")){if(p=S,B=S[Se]||null)Z=B.formAction;else if(xp(p)!==null)continue}else Z=B.action;typeof Z=="function"?o[h+1]=Z:(o.splice(h,3),h-=3),m2(o)}}}function Mp(e){this._internalRoot=e}Gg.prototype.render=Mp.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,h=Ta();o2(o,h,e,i,null,null)},Gg.prototype.unmount=Mp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&kt(),o2(e.current,2,null,e,null,null),zo(),i[Yi]=null}};function Gg(e){this._internalRoot=e}Gg.prototype.unstable_scheduleHydration=function(e){if(e){var i=ar();e={blockedOn:null,target:e,priority:i};for(var o=0;o<Iu.length&&i!==0&&i<Iu[o].priority;o++);Iu.splice(o,0,e),o===0&&d2(e)}};var p2=t.version;if(p2!=="19.0.0")throw Error(r(527,p2,"19.0.0"));dt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=st(i),e=e!==null?Tt(e):null,e=e===null?null:e.stateNode,e};var xS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Ci,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{We=Hg.inject(xS),Me=Hg}catch{}}return cd.createRoot=function(e,i){if(!u(e))throw Error(r(299));var o=!1,h="",p=mg,S=pg,B=yg,Z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(B=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Z=i.unstable_transitionCallbacks)),i=r2(e,1,!1,null,null,o,h,p,S,B,Z,null),e[Yi]=i.current,mp(e.nodeType===8?e.parentNode:e),new Mp(i)},cd.hydrateRoot=function(e,i,o){if(!u(e))throw Error(r(299));var h=!1,p="",S=mg,B=pg,Z=yg,it=null,ut=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(B=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(it=o.unstable_transitionCallbacks),o.formState!==void 0&&(ut=o.formState)),i=r2(e,1,!0,i,o??null,h,p,S,B,Z,it,ut),i.context=l2(null),o=i.current,h=Ta(),p=is(h),p.callback=null,as(o,p,h),i.current.lanes=h,be(i,h),Sn(i),e[Yi]=i.current,mp(e),new Gg(i)},cd.version="19.0.0",cd}var w2;function BS(){if(w2)return Ip.exports;w2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Ip.exports=zS(),Ip.exports}var kS=BS(),Jg={exports:{}},hd={},Bp={},kp={},N2;function Pe(){return N2||(N2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof y2<"u"?y2:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.20",isBrowser:n(),isUnminified:/param/.test((function(u){}).toString()),dblClickWindow:400,getAngle(u){return a.Konva.angleDeg?u*t:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var u;return(u=a.Konva.Transformer)===null||u===void 0?void 0:u.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(u){a.glob.Konva=u}};const r=u=>{a.Konva[u.prototype.getClassName()]=u};a._registerNode=r,a.Konva._injectGlobal(a.Konva)}(kp)),kp}var Gp={},D2;function yi(){return D2||(D2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const t=Pe();class n{constructor(z=[1,0,0,1,0,0]){this.dirty=!1,this.m=z&&z.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(z){z.m[0]=this.m[0],z.m[1]=this.m[1],z.m[2]=this.m[2],z.m[3]=this.m[3],z.m[4]=this.m[4],z.m[5]=this.m[5]}point(z){const H=this.m;return{x:H[0]*z.x+H[2]*z.y+H[4],y:H[1]*z.x+H[3]*z.y+H[5]}}translate(z,H){return this.m[4]+=this.m[0]*z+this.m[2]*H,this.m[5]+=this.m[1]*z+this.m[3]*H,this}scale(z,H){return this.m[0]*=z,this.m[1]*=z,this.m[2]*=H,this.m[3]*=H,this}rotate(z){const H=Math.cos(z),Y=Math.sin(z),j=this.m[0]*H+this.m[2]*Y,V=this.m[1]*H+this.m[3]*Y,w=this.m[0]*-Y+this.m[2]*H,M=this.m[1]*-Y+this.m[3]*H;return this.m[0]=j,this.m[1]=V,this.m[2]=w,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(z,H){const Y=this.m[0]+this.m[2]*H,j=this.m[1]+this.m[3]*H,V=this.m[2]+this.m[0]*z,w=this.m[3]+this.m[1]*z;return this.m[0]=Y,this.m[1]=j,this.m[2]=V,this.m[3]=w,this}multiply(z){const H=this.m[0]*z.m[0]+this.m[2]*z.m[1],Y=this.m[1]*z.m[0]+this.m[3]*z.m[1],j=this.m[0]*z.m[2]+this.m[2]*z.m[3],V=this.m[1]*z.m[2]+this.m[3]*z.m[3],w=this.m[0]*z.m[4]+this.m[2]*z.m[5]+this.m[4],M=this.m[1]*z.m[4]+this.m[3]*z.m[5]+this.m[5];return this.m[0]=H,this.m[1]=Y,this.m[2]=j,this.m[3]=V,this.m[4]=w,this.m[5]=M,this}invert(){const z=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),H=this.m[3]*z,Y=-this.m[1]*z,j=-this.m[2]*z,V=this.m[0]*z,w=z*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=z*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=H,this.m[1]=Y,this.m[2]=j,this.m[3]=V,this.m[4]=w,this.m[5]=M,this}getMatrix(){return this.m}decompose(){const z=this.m[0],H=this.m[1],Y=this.m[2],j=this.m[3],V=this.m[4],w=this.m[5],M=z*j-H*Y,k={x:V,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(z!=0||H!=0){const K=Math.sqrt(z*z+H*H);k.rotation=H>0?Math.acos(z/K):-Math.acos(z/K),k.scaleX=K,k.scaleY=M/K,k.skewX=(z*Y+H*j)/M,k.skewY=0}else if(Y!=0||j!=0){const K=Math.sqrt(Y*Y+j*j);k.rotation=Math.PI/2-(j>0?Math.acos(-Y/K):-Math.acos(Y/K)),k.scaleX=M/K,k.scaleY=K,k.skewX=0,k.skewY=(z*Y+H*j)/M}return k.rotation=a.Util._getRotation(k.rotation),k}}a.Transform=n;const r="[object Array]",u="[object Number]",c="[object String]",d="[object Boolean]",m=Math.PI/180,v=180/Math.PI,_="#",b="",O="0",U="Konva warning: ",C="Konva error: ",R="rgb(",I={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},L=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let F=[];const D=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};a.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===r},_isNumber(x){return Object.prototype.toString.call(x)===u&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===c},_isBoolean(x){return Object.prototype.toString.call(x)===d},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const z=x[0];return z==="#"||z==="."||z===z.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){F.push(x),F.length===1&&D(function(){const z=F;F=[],z.forEach(function(H){H()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,z){const H=a.Util.createImageElement();H.onload=function(){z(H)},H.src=x},_rgbToHex(x,z,H){return((1<<24)+(x<<16)+(z<<8)+H).toString(16).slice(1)},_hexToRgb(x){x=x.replace(_,b);const z=parseInt(x,16);return{r:z>>16&255,g:z>>8&255,b:z&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=O+x;return _+x},getRGB(x){let z;return x in I?(z=I[x],{r:z[0],g:z[1],b:z[2]}):x[0]===_?this._hexToRgb(x.substring(1)):x.substr(0,4)===R?(z=L.exec(x.replace(/ /g,"")),{r:parseInt(z[1],10),g:parseInt(z[2],10),b:parseInt(z[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",a.Util._namedColorToRBA(x)||a.Util._hex3ColorToRGBA(x)||a.Util._hex4ColorToRGBA(x)||a.Util._hex6ColorToRGBA(x)||a.Util._hex8ColorToRGBA(x)||a.Util._rgbColorToRGBA(x)||a.Util._rgbaColorToRGBA(x)||a.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const z=I[x.toLowerCase()];return z?{r:z[0],g:z[1],b:z[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const z=x.split(/ *, */).map(Number);return{r:z[0],g:z[1],b:z[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const z=x.split(/ *, */).map((H,Y)=>H.slice(-1)==="%"?Y===3?parseInt(H)/100:parseInt(H)/100*255:Number(H));return{r:z[0],g:z[1],b:z[2],a:z[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[z,...H]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),Y=Number(H[0])/360,j=Number(H[1])/100,V=Number(H[2])/100;let w,M,k;if(j===0)return k=V*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};V<.5?w=V*(1+j):w=V+j-V*j;const K=2*V-w,T=[0,0,0];for(let q=0;q<3;q++)M=Y+1/3*-(q-1),M<0&&M++,M>1&&M--,6*M<1?k=K+(w-K)*6*M:2*M<1?k=w:3*M<2?k=K+(w-K)*(2/3-M)*6:k=K,T[q]=k*255;return{r:Math.round(T[0]),g:Math.round(T[1]),b:Math.round(T[2]),a:1}}},haveIntersection(x,z){return!(z.x>x.x+x.width||z.x+z.width<x.x||z.y>x.y+x.height||z.y+z.height<x.y)},cloneObject(x){const z={};for(const H in x)this._isPlainObject(x[H])?z[H]=this.cloneObject(x[H]):this._isArray(x[H])?z[H]=this.cloneArray(x[H]):z[H]=x[H];return z},cloneArray(x){return x.slice(0)},degToRad(x){return x*m},radToDeg(x){return x*v},_degToRad(x){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(x)},_radToDeg(x){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?a.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(C+x)},error(x){console.error(C+x)},warn(x){t.Konva.showWarnings&&console.warn(U+x)},each(x,z){for(const H in x)z(H,x[H])},_inRange(x,z,H){return z<=x&&x<H},_getProjectionToSegment(x,z,H,Y,j,V){let w,M,k;const K=(x-H)*(x-H)+(z-Y)*(z-Y);if(K==0)w=x,M=z,k=(j-H)*(j-H)+(V-Y)*(V-Y);else{const T=((j-x)*(H-x)+(V-z)*(Y-z))/K;T<0?(w=x,M=z,k=(x-j)*(x-j)+(z-V)*(z-V)):T>1?(w=H,M=Y,k=(H-j)*(H-j)+(Y-V)*(Y-V)):(w=x+T*(H-x),M=z+T*(Y-z),k=(w-j)*(w-j)+(M-V)*(M-V))}return[w,M,k]},_getProjectionToLine(x,z,H){const Y=a.Util.cloneObject(x);let j=Number.MAX_VALUE;return z.forEach(function(V,w){if(!H&&w===z.length-1)return;const M=z[(w+1)%z.length],k=a.Util._getProjectionToSegment(V.x,V.y,M.x,M.y,x.x,x.y),K=k[0],T=k[1],q=k[2];q<j&&(Y.x=K,Y.y=T,j=q)}),Y},_prepareArrayForTween(x,z,H){const Y=[],j=[];if(x.length>z.length){const w=z;z=x,x=w}for(let w=0;w<x.length;w+=2)Y.push({x:x[w],y:x[w+1]});for(let w=0;w<z.length;w+=2)j.push({x:z[w],y:z[w+1]});const V=[];return j.forEach(function(w){const M=a.Util._getProjectionToLine(w,Y,H);V.push(M.x),V.push(M.y)}),V},_prepareToStringify(x){let z;x.visitedByCircularReferenceRemoval=!0;for(const H in x)if(x.hasOwnProperty(H)&&x[H]&&typeof x[H]=="object"){if(z=Object.getOwnPropertyDescriptor(x,H),x[H].visitedByCircularReferenceRemoval||a.Util._isElement(x[H]))if(z.configurable)delete x[H];else return null;else if(a.Util._prepareToStringify(x[H])===null)if(z.configurable)delete x[H];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,z){for(const H in z)x[H]=z[H];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(z=>{z.width=0,z.height=0})},drawRoundedRectPath(x,z,H,Y){let j=0,V=0,w=0,M=0;typeof Y=="number"?j=V=w=M=Math.min(Y,z/2,H/2):(j=Math.min(Y[0]||0,z/2,H/2),V=Math.min(Y[1]||0,z/2,H/2),M=Math.min(Y[2]||0,z/2,H/2),w=Math.min(Y[3]||0,z/2,H/2)),x.moveTo(j,0),x.lineTo(z-V,0),x.arc(z-V,V,V,Math.PI*3/2,0,!1),x.lineTo(z,H-M),x.arc(z-M,H-M,M,0,Math.PI/2,!1),x.lineTo(w,H),x.arc(w,H-w,w,Math.PI/2,Math.PI,!1),x.lineTo(0,j),x.arc(j,j,j,Math.PI,Math.PI*3/2,!1)}}}(Gp)),Gp}var fd={},Hp={},Vs={},x2;function Qe(){if(x2)return Vs;x2=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.RGBComponent=r,Vs.alphaComponent=u,Vs.getNumberValidator=c,Vs.getNumberOrArrayOfNumbersValidator=d,Vs.getNumberOrAutoValidator=m,Vs.getStringValidator=v,Vs.getStringOrGradientValidator=_,Vs.getFunctionValidator=b,Vs.getNumberArrayValidator=O,Vs.getBooleanValidator=U,Vs.getComponentValidator=C;const a=Pe(),t=yi();function n(R){return t.Util._isString(R)?'"'+R+'"':Object.prototype.toString.call(R)==="[object Number]"||t.Util._isBoolean(R)?R:Object.prototype.toString.call(R)}function r(R){return R>255?255:R<0?0:Math.round(R)}function u(R){return R>1?1:R<1e-4?1e-4:R}function c(){if(a.Konva.isUnminified)return function(R,I){return t.Util._isNumber(R)||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a number.'),R}}function d(R){if(a.Konva.isUnminified)return function(I,L){let F=t.Util._isNumber(I),D=t.Util._isArray(I)&&I.length==R;return!F&&!D&&t.Util.warn(n(I)+' is a not valid value for "'+L+'" attribute. The value should be a number or Array<number>('+R+")"),I}}function m(){if(a.Konva.isUnminified)return function(R,I){var L=t.Util._isNumber(R),F=R==="auto";return L||F||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a number or "auto".'),R}}function v(){if(a.Konva.isUnminified)return function(R,I){return t.Util._isString(R)||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a string.'),R}}function _(){if(a.Konva.isUnminified)return function(R,I){const L=t.Util._isString(R),F=Object.prototype.toString.call(R)==="[object CanvasGradient]"||R&&R.addColorStop;return L||F||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a string or a native gradient.'),R}}function b(){if(a.Konva.isUnminified)return function(R,I){return t.Util._isFunction(R)||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a function.'),R}}function O(){if(a.Konva.isUnminified)return function(R,I){const L=Int8Array?Object.getPrototypeOf(Int8Array):null;return L&&R instanceof L||(t.Util._isArray(R)?R.forEach(function(F){t.Util._isNumber(F)||t.Util.warn('"'+I+'" attribute has non numeric element '+F+". Make sure that all elements are numbers.")}):t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a array of numbers.')),R}}function U(){if(a.Konva.isUnminified)return function(R,I){var L=R===!0||R===!1;return L||t.Util.warn(n(R)+' is a not valid value for "'+I+'" attribute. The value should be a boolean.'),R}}function C(R){if(a.Konva.isUnminified)return function(I,L){return I==null||t.Util.isObject(I)||t.Util.warn(n(I)+' is a not valid value for "'+L+'" attribute. The value should be an object with properties '+R),I}}return Vs}var O2;function je(){return O2||(O2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const t=yi(),n=Qe(),r="get",u="set";a.Factory={addGetterSetter(c,d,m,v,_){a.Factory.addGetter(c,d,m),a.Factory.addSetter(c,d,v,_),a.Factory.addOverloadedGetterSetter(c,d)},addGetter(c,d,m){var v=r+t.Util._capitalize(d);c.prototype[v]=c.prototype[v]||function(){const _=this.attrs[d];return _===void 0?m:_}},addSetter(c,d,m,v){var _=u+t.Util._capitalize(d);c.prototype[_]||a.Factory.overWriteSetter(c,d,m,v)},overWriteSetter(c,d,m,v){var _=u+t.Util._capitalize(d);c.prototype[_]=function(b){return m&&b!==void 0&&b!==null&&(b=m.call(this,b,d)),this._setAttr(d,b),v&&v.call(this),this}},addComponentsGetterSetter(c,d,m,v,_){const b=m.length,O=t.Util._capitalize,U=r+O(d),C=u+O(d);c.prototype[U]=function(){const I={};for(let L=0;L<b;L++){const F=m[L];I[F]=this.getAttr(d+O(F))}return I};const R=(0,n.getComponentValidator)(m);c.prototype[C]=function(I){const L=this.attrs[d];v&&(I=v.call(this,I,d)),R&&R.call(this,I,d);for(const F in I)I.hasOwnProperty(F)&&this._setAttr(d+O(F),I[F]);return I||m.forEach(F=>{this._setAttr(d+O(F),void 0)}),this._fireChangeEvent(d,L,I),_&&_.call(this),this},a.Factory.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter(c,d){var m=t.Util._capitalize(d),v=u+m,_=r+m;c.prototype[d]=function(){return arguments.length?(this[v](arguments[0]),this):this[_]()}},addDeprecatedGetterSetter(c,d,m,v){t.Util.error("Adding deprecated "+d);const _=r+t.Util._capitalize(d),b=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[_]=function(){t.Util.error(b);const O=this.attrs[d];return O===void 0?m:O},a.Factory.addSetter(c,d,v,function(){t.Util.error(b)}),a.Factory.addOverloadedGetterSetter(c,d)},backCompat(c,d){t.Util.each(d,function(m,v){const _=c.prototype[v],b=r+t.Util._capitalize(m),O=u+t.Util._capitalize(m);function U(){_.apply(this,arguments),t.Util.error('"'+m+'" method is deprecated and will be removed soon. Use ""'+v+'" instead.')}c.prototype[m]=U,c.prototype[b]=U,c.prototype[O]=U})},afterSetFilter(){this._filterUpToDate=!1}}}(Hp)),Hp}var Ho={},jo={},M2;function f4(){if(M2)return jo;M2=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.HitContext=jo.SceneContext=jo.Context=void 0;const a=yi(),t=Pe();function n(F){const D=[],x=F.length,z=a.Util;for(let H=0;H<x;H++){let Y=F[H];z._isNumber(Y)?Y=Math.round(Y*1e3)/1e3:z._isString(Y)||(Y=Y+""),D.push(Y)}return D}const r=",",u="(",c=")",d="([",m="])",v=";",_="()",b="=",O=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],U=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],C=100;let R=class{constructor(D){this.canvas=D,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(D){D.fillEnabled()&&this._fill(D)}_fill(D){}strokeShape(D){D.hasStroke()&&this._stroke(D)}_stroke(D){}fillStrokeShape(D){D.attrs.fillAfterStrokeEnabled?(this.strokeShape(D),this.fillShape(D)):(this.fillShape(D),this.strokeShape(D))}getTrace(D,x){let z=this.traceArr,H=z.length,Y="",j,V,w,M;for(j=0;j<H;j++)V=z[j],w=V.method,w?(M=V.args,Y+=w,D?Y+=_:a.Util._isArray(M[0])?Y+=d+M.join(r)+m:(x&&(M=M.map(k=>typeof k=="number"?Math.floor(k):k)),Y+=u+M.join(r)+c)):(Y+=V.property,D||(Y+=b+V.val)),Y+=v;return Y}clearTrace(){this.traceArr=[]}_trace(D){let x=this.traceArr,z;x.push(D),z=x.length,z>=C&&x.shift()}reset(){const D=this.getCanvas().getPixelRatio();this.setTransform(1*D,0,0,1*D,0,0)}getCanvas(){return this.canvas}clear(D){const x=this.getCanvas();D?this.clearRect(D.x||0,D.y||0,D.width||0,D.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(D){const x=D.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(D){const x=D.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(D){const x=D.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(D,x){this._context[D]=x}arc(D,x,z,H,Y,j){this._context.arc(D,x,z,H,Y,j)}arcTo(D,x,z,H,Y){this._context.arcTo(D,x,z,H,Y)}beginPath(){this._context.beginPath()}bezierCurveTo(D,x,z,H,Y,j){this._context.bezierCurveTo(D,x,z,H,Y,j)}clearRect(D,x,z,H){this._context.clearRect(D,x,z,H)}clip(...D){this._context.clip.apply(this._context,D)}closePath(){this._context.closePath()}createImageData(D,x){const z=arguments;if(z.length===2)return this._context.createImageData(D,x);if(z.length===1)return this._context.createImageData(D)}createLinearGradient(D,x,z,H){return this._context.createLinearGradient(D,x,z,H)}createPattern(D,x){return this._context.createPattern(D,x)}createRadialGradient(D,x,z,H,Y,j){return this._context.createRadialGradient(D,x,z,H,Y,j)}drawImage(D,x,z,H,Y,j,V,w,M){const k=arguments,K=this._context;k.length===3?K.drawImage(D,x,z):k.length===5?K.drawImage(D,x,z,H,Y):k.length===9&&K.drawImage(D,x,z,H,Y,j,V,w,M)}ellipse(D,x,z,H,Y,j,V,w){this._context.ellipse(D,x,z,H,Y,j,V,w)}isPointInPath(D,x,z,H){return z?this._context.isPointInPath(z,D,x,H):this._context.isPointInPath(D,x,H)}fill(...D){this._context.fill.apply(this._context,D)}fillRect(D,x,z,H){this._context.fillRect(D,x,z,H)}strokeRect(D,x,z,H){this._context.strokeRect(D,x,z,H)}fillText(D,x,z,H){H?this._context.fillText(D,x,z,H):this._context.fillText(D,x,z)}measureText(D){return this._context.measureText(D)}getImageData(D,x,z,H){return this._context.getImageData(D,x,z,H)}lineTo(D,x){this._context.lineTo(D,x)}moveTo(D,x){this._context.moveTo(D,x)}rect(D,x,z,H){this._context.rect(D,x,z,H)}roundRect(D,x,z,H,Y){this._context.roundRect(D,x,z,H,Y)}putImageData(D,x,z){this._context.putImageData(D,x,z)}quadraticCurveTo(D,x,z,H){this._context.quadraticCurveTo(D,x,z,H)}restore(){this._context.restore()}rotate(D){this._context.rotate(D)}save(){this._context.save()}scale(D,x){this._context.scale(D,x)}setLineDash(D){this._context.setLineDash?this._context.setLineDash(D):"mozDash"in this._context?this._context.mozDash=D:"webkitLineDash"in this._context&&(this._context.webkitLineDash=D)}getLineDash(){return this._context.getLineDash()}setTransform(D,x,z,H,Y,j){this._context.setTransform(D,x,z,H,Y,j)}stroke(D){D?this._context.stroke(D):this._context.stroke()}strokeText(D,x,z,H){this._context.strokeText(D,x,z,H)}transform(D,x,z,H,Y,j){this._context.transform(D,x,z,H,Y,j)}translate(D,x){this._context.translate(D,x)}_enableTrace(){let D=this,x=O.length,z=this.setAttr,H,Y;const j=function(V){let w=D[V],M;D[V]=function(){return Y=n(Array.prototype.slice.call(arguments,0)),M=w.apply(D,arguments),D._trace({method:V,args:Y}),M}};for(H=0;H<x;H++)j(O[H]);D.setAttr=function(){z.apply(D,arguments);const V=arguments[0];let w=arguments[1];(V==="shadowOffsetX"||V==="shadowOffsetY"||V==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),D._trace({property:V,val:w})}}_applyGlobalCompositeOperation(D){const x=D.attrs.globalCompositeOperation;!x||x==="source-over"||this.setAttr("globalCompositeOperation",x)}};jo.Context=R,U.forEach(function(F){Object.defineProperty(R.prototype,F,{get(){return this._context[F]},set(D){this._context[F]=D}})});class I extends R{constructor(D,{willReadFrequently:x=!1}={}){super(D),this._context=D._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(D){const x=D.fill();this.setAttr("fillStyle",x),D._fillFunc(this)}_fillPattern(D){this.setAttr("fillStyle",D._getFillPattern()),D._fillFunc(this)}_fillLinearGradient(D){const x=D._getLinearGradient();x&&(this.setAttr("fillStyle",x),D._fillFunc(this))}_fillRadialGradient(D){const x=D._getRadialGradient();x&&(this.setAttr("fillStyle",x),D._fillFunc(this))}_fill(D){const x=D.fill(),z=D.getFillPriority();if(x&&z==="color"){this._fillColor(D);return}const H=D.getFillPatternImage();if(H&&z==="pattern"){this._fillPattern(D);return}const Y=D.getFillLinearGradientColorStops();if(Y&&z==="linear-gradient"){this._fillLinearGradient(D);return}const j=D.getFillRadialGradientColorStops();if(j&&z==="radial-gradient"){this._fillRadialGradient(D);return}x?this._fillColor(D):H?this._fillPattern(D):Y?this._fillLinearGradient(D):j&&this._fillRadialGradient(D)}_strokeLinearGradient(D){const x=D.getStrokeLinearGradientStartPoint(),z=D.getStrokeLinearGradientEndPoint(),H=D.getStrokeLinearGradientColorStops(),Y=this.createLinearGradient(x.x,x.y,z.x,z.y);if(H){for(let j=0;j<H.length;j+=2)Y.addColorStop(H[j],H[j+1]);this.setAttr("strokeStyle",Y)}}_stroke(D){const x=D.dash(),z=D.getStrokeScaleEnabled();if(D.hasStroke()){if(!z){this.save();const Y=this.getCanvas().getPixelRatio();this.setTransform(Y,0,0,Y,0,0)}this._applyLineCap(D),x&&D.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",D.dashOffset())),this.setAttr("lineWidth",D.strokeWidth()),D.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),D.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(D):this.setAttr("strokeStyle",D.stroke()),D._strokeFunc(this),z||this.restore()}}_applyShadow(D){var x,z,H;const Y=(x=D.getShadowRGBA())!==null&&x!==void 0?x:"black",j=(z=D.getShadowBlur())!==null&&z!==void 0?z:5,V=(H=D.getShadowOffset())!==null&&H!==void 0?H:{x:0,y:0},w=D.getAbsoluteScale(),M=this.canvas.getPixelRatio(),k=w.x*M,K=w.y*M;this.setAttr("shadowColor",Y),this.setAttr("shadowBlur",j*Math.min(Math.abs(k),Math.abs(K))),this.setAttr("shadowOffsetX",V.x*k),this.setAttr("shadowOffsetY",V.y*K)}}jo.SceneContext=I;class L extends R{constructor(D){super(D),this._context=D._canvas.getContext("2d",{willReadFrequently:!0})}_fill(D){this.save(),this.setAttr("fillStyle",D.colorKey),D._fillFuncHit(this),this.restore()}strokeShape(D){D.hasHitStroke()&&this._stroke(D)}_stroke(D){if(D.hasHitStroke()){const x=D.getStrokeScaleEnabled();if(!x){this.save();const Y=this.getCanvas().getPixelRatio();this.setTransform(Y,0,0,Y,0,0)}this._applyLineCap(D);const z=D.hitStrokeWidth(),H=z==="auto"?D.strokeWidth():z;this.setAttr("lineWidth",H),this.setAttr("strokeStyle",D.colorKey),D._strokeFuncHit(this),x||this.restore()}}}return jo.HitContext=L,jo}var V2;function xm(){if(V2)return Ho;V2=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.HitCanvas=Ho.SceneCanvas=Ho.Canvas=void 0;const a=yi(),t=f4(),n=Pe();let r;function u(){if(r)return r;const v=a.Util.createCanvasElement(),_=v.getContext("2d");return r=function(){const b=n.Konva._global.devicePixelRatio||1,O=_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1;return b/O}(),a.Util.releaseCanvas(v),r}let c=class{constructor(_){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const O=(_||{}).pixelRatio||n.Konva.pixelRatio||u();this.pixelRatio=O,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(_){const b=this.pixelRatio;this.pixelRatio=_,this.setSize(this.getWidth()/b,this.getHeight()/b)}setWidth(_){this.width=this._canvas.width=_*this.pixelRatio,this._canvas.style.width=_+"px";const b=this.pixelRatio;this.getContext()._context.scale(b,b)}setHeight(_){this.height=this._canvas.height=_*this.pixelRatio,this._canvas.style.height=_+"px";const b=this.pixelRatio;this.getContext()._context.scale(b,b)}getWidth(){return this.width}getHeight(){return this.height}setSize(_,b){this.setWidth(_||0),this.setHeight(b||0)}toDataURL(_,b){try{return this._canvas.toDataURL(_,b)}catch{try{return this._canvas.toDataURL()}catch(U){return a.Util.error("Unable to get data URL. "+U.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Ho.Canvas=c;class d extends c{constructor(_={width:0,height:0,willReadFrequently:!1}){super(_),this.context=new t.SceneContext(this,{willReadFrequently:_.willReadFrequently}),this.setSize(_.width,_.height)}}Ho.SceneCanvas=d;class m extends c{constructor(_={width:0,height:0}){super(_),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(_.width,_.height)}}return Ho.HitCanvas=m,Ho}var jp={},U2;function G1(){return U2||(U2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const t=Pe(),n=yi();a.DD={get isDragging(){let r=!1;return a.DD._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return a.DD._dragElements.forEach(u=>{r=u.node}),r},_dragElements:new Map,_drag(r){const u=[];a.DD._dragElements.forEach((c,d)=>{const{node:m}=c,v=m.getStage();v.setPointersPositions(r),c.pointerId===void 0&&(c.pointerId=n.Util._getFirstPointerId(r));const _=v._changedPointerPositions.find(b=>b.id===c.pointerId);if(_){if(c.dragStatus!=="dragging"){const b=m.dragDistance();if(Math.max(Math.abs(_.x-c.startPointerPos.x),Math.abs(_.y-c.startPointerPos.y))<b||(m.startDrag({evt:r}),!m.isDragging()))return}m._setDragPosition(r,c),u.push(m)}}),u.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:r},!0)})},_endDragBefore(r){const u=[];a.DD._dragElements.forEach(c=>{const{node:d}=c,m=d.getStage();if(r&&m.setPointersPositions(r),!m._changedPointerPositions.find(b=>b.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(a.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const _=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;_&&u.indexOf(_)===-1&&u.push(_)}),u.forEach(c=>{c.draw()})},_endDragAfter(r){a.DD._dragElements.forEach((u,c)=>{u.dragStatus==="stopped"&&u.node.fire("dragend",{type:"dragend",target:u.node,evt:r},!0),u.dragStatus!=="dragging"&&a.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("touchcancel",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1),window.addEventListener("touchcancel",a.DD._endDragAfter,!1))}(jp)),jp}var I2;function Ti(){if(I2)return fd;I2=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.Node=void 0;const a=yi(),t=je(),n=xm(),r=Pe(),u=G1(),c=Qe(),d="absoluteOpacity",m="allEventListeners",v="absoluteTransform",_="absoluteScale",b="canvas",O="Change",U="children",C="konva",R="listening",I="mouseenter",L="mouseleave",F="set",D="Shape",x=" ",z="stage",H="transform",Y="Stage",j="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let w=1,M=class f1{constructor(T){this._id=w++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(T),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(T){(T===H||T===v)&&this._cache.get(T)?this._cache.get(T).dirty=!0:T?this._cache.delete(T):this._cache.clear()}_getCache(T,q){let G=this._cache.get(T);return(G===void 0||(T===H||T===v)&&G.dirty===!0)&&(G=q.call(this),this._cache.set(T,G)),G}_calculate(T,q,G){if(!this._attachedDepsListeners.get(T)){const Q=q.map(et=>et+"Change.konva").join(x);this.on(Q,()=>{this._clearCache(T)}),this._attachedDepsListeners.set(T,!0)}return this._getCache(T,G)}_getCanvasCache(){return this._cache.get(b)}_clearSelfAndDescendantCache(T){this._clearCache(T),T===v&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(b)){const{scene:T,filter:q,hit:G}=this._cache.get(b);a.Util.releaseCanvas(T,q,G),this._cache.delete(b)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(T){const q=T||{};let G={};(q.x===void 0||q.y===void 0||q.width===void 0||q.height===void 0)&&(G=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let Q=Math.ceil(q.width||G.width),et=Math.ceil(q.height||G.height),rt=q.pixelRatio,pt=q.x===void 0?Math.floor(G.x):q.x,X=q.y===void 0?Math.floor(G.y):q.y,st=q.offset||0,Tt=q.drawBorder||!1,lt=q.hitCanvasPixelRatio||1;if(!Q||!et){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const dt=Math.abs(Math.round(G.x)-pt)>.5?1:0,Nt=Math.abs(Math.round(G.y)-X)>.5?1:0;Q+=st*2+dt,et+=st*2+Nt,pt-=st,X-=st;const Vt=new n.SceneCanvas({pixelRatio:rt,width:Q,height:et}),nt=new n.SceneCanvas({pixelRatio:rt,width:0,height:0,willReadFrequently:!0}),ht=new n.HitCanvas({pixelRatio:lt,width:Q,height:et}),Dt=Vt.getContext(),xt=ht.getContext();return ht.isCache=!0,Vt.isCache=!0,this._cache.delete(b),this._filterUpToDate=!1,q.imageSmoothingEnabled===!1&&(Vt.getContext()._context.imageSmoothingEnabled=!1,nt.getContext()._context.imageSmoothingEnabled=!1),Dt.save(),xt.save(),Dt.translate(-pt,-X),xt.translate(-pt,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(_),this.drawScene(Vt,this),this.drawHit(ht,this),this._isUnderCache=!1,Dt.restore(),xt.restore(),Tt&&(Dt.save(),Dt.beginPath(),Dt.rect(0,0,Q,et),Dt.closePath(),Dt.setAttr("strokeStyle","red"),Dt.setAttr("lineWidth",5),Dt.stroke(),Dt.restore()),this._cache.set(b,{scene:Vt,filter:nt,hit:ht,x:pt,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(b)}getClientRect(T){throw new Error('abstract "getClientRect" method call')}_transformedRect(T,q){const G=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}];let Q=1/0,et=1/0,rt=-1/0,pt=-1/0;const X=this.getAbsoluteTransform(q);return G.forEach(function(st){const Tt=X.point(st);Q===void 0&&(Q=rt=Tt.x,et=pt=Tt.y),Q=Math.min(Q,Tt.x),et=Math.min(et,Tt.y),rt=Math.max(rt,Tt.x),pt=Math.max(pt,Tt.y)}),{x:Q,y:et,width:rt-Q,height:pt-et}}_drawCachedSceneCanvas(T){T.save(),T._applyOpacity(this),T._applyGlobalCompositeOperation(this);const q=this._getCanvasCache();T.translate(q.x,q.y);const G=this._getCachedSceneCanvas(),Q=G.pixelRatio;T.drawImage(G._canvas,0,0,G.width/Q,G.height/Q),T.restore()}_drawCachedHitCanvas(T){const q=this._getCanvasCache(),G=q.hit;T.save(),T.translate(q.x,q.y),T.drawImage(G._canvas,0,0,G.width/G.pixelRatio,G.height/G.pixelRatio),T.restore()}_getCachedSceneCanvas(){let T=this.filters(),q=this._getCanvasCache(),G=q.scene,Q=q.filter,et=Q.getContext(),rt,pt,X,st;if(T){if(!this._filterUpToDate){const Tt=G.pixelRatio;Q.setSize(G.width/G.pixelRatio,G.height/G.pixelRatio);try{for(rt=T.length,et.clear(),et.drawImage(G._canvas,0,0,G.getWidth()/Tt,G.getHeight()/Tt),pt=et.getImageData(0,0,Q.getWidth(),Q.getHeight()),X=0;X<rt;X++){if(st=T[X],typeof st!="function"){a.Util.error("Filter should be type of function, but got "+typeof st+" instead. Please check correct filters");continue}st.call(this,pt),et.putImageData(pt,0,0)}}catch(lt){a.Util.error("Unable to apply filter. "+lt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return Q}return G}on(T,q){if(this._cache&&this._cache.delete(m),arguments.length===3)return this._delegate.apply(this,arguments);let G=T.split(x),Q=G.length,et,rt,pt,X,st;for(et=0;et<Q;et++)rt=G[et],pt=rt.split("."),X=pt[0],st=pt[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:st,handler:q});return this}off(T,q){let G=(T||"").split(x),Q=G.length,et,rt,pt,X,st,Tt;if(this._cache&&this._cache.delete(m),!T)for(rt in this.eventListeners)this._off(rt);for(et=0;et<Q;et++)if(pt=G[et],X=pt.split("."),st=X[0],Tt=X[1],st)this.eventListeners[st]&&this._off(st,Tt,q);else for(rt in this.eventListeners)this._off(rt,Tt,q);return this}dispatchEvent(T){const q={target:this,type:T.type,evt:T};return this.fire(T.type,q),this}addEventListener(T,q){return this.on(T,function(G){q.call(this,G.evt)}),this}removeEventListener(T){return this.off(T),this}_delegate(T,q,G){const Q=this;this.on(T,function(et){const rt=et.target.findAncestors(q,!0,Q);for(let pt=0;pt<rt.length;pt++)et=a.Util.cloneObject(et),et.currentTarget=rt[pt],G.call(rt[pt],et)})}remove(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(z),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(R)}_remove(){this._clearCaches();const T=this.getParent();T&&T.children&&(T.children.splice(this.index,1),T._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(T){const q="get"+a.Util._capitalize(T);return a.Util._isFunction(this[q])?this[q]():this.attrs[T]}getAncestors(){let T=this.getParent(),q=[];for(;T;)q.push(T),T=T.getParent();return q}getAttrs(){return this.attrs||{}}setAttrs(T){return this._batchTransformChanges(()=>{let q,G;if(!T)return this;for(q in T)q!==U&&(G=F+a.Util._capitalize(q),a.Util._isFunction(this[G])?this[G](T[q]):this._setAttr(q,T[q]))}),this}isListening(){return this._getCache(R,this._isListening)}_isListening(T){if(!this.listening())return!1;const G=this.getParent();return G&&G!==T&&this!==T?G._isListening(T):!0}isVisible(){return this._getCache(j,this._isVisible)}_isVisible(T){if(!this.visible())return!1;const G=this.getParent();return G&&G!==T&&this!==T?G._isVisible(T):!0}shouldDrawHit(T,q=!1){if(T)return this._isVisible(T)&&this._isListening(T);const G=this.getLayer();let Q=!1;u.DD._dragElements.forEach(rt=>{rt.dragStatus==="dragging"&&(rt.node.nodeType==="Stage"||rt.node.getLayer()===G)&&(Q=!0)});const et=!q&&!r.Konva.hitOnDragEnabled&&(Q||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!et}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let T=this.getDepth(),q=this,G=0,Q,et,rt,pt;function X(Tt){for(Q=[],et=Tt.length,rt=0;rt<et;rt++)pt=Tt[rt],G++,pt.nodeType!==D&&(Q=Q.concat(pt.getChildren().slice())),pt._id===q._id&&(rt=et);Q.length>0&&Q[0].getDepth()<=T&&X(Q)}const st=this.getStage();return q.nodeType!==Y&&st&&X(st.getChildren()),G}getDepth(){let T=0,q=this.parent;for(;q;)T++,q=q.parent;return T}_batchTransformChanges(T){this._batchingTransformChange=!0,T(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(H),this._clearSelfAndDescendantCache(v)),this._needClearTransformCache=!1}setPosition(T){return this._batchTransformChanges(()=>{this.x(T.x),this.y(T.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const T=this.getStage();if(!T)return null;const q=T.getPointerPosition();if(!q)return null;const G=this.getAbsoluteTransform().copy();return G.invert(),G.point(q)}getAbsolutePosition(T){let q=!1,G=this.parent;for(;G;){if(G.isCached()){q=!0;break}G=G.parent}q&&!T&&(T=!0);const Q=this.getAbsoluteTransform(T).getMatrix(),et=new a.Transform,rt=this.offset();return et.m=Q.slice(),et.translate(rt.x,rt.y),et.getTranslation()}setAbsolutePosition(T){const{x:q,y:G,...Q}=this._clearTransform();this.attrs.x=q,this.attrs.y=G,this._clearCache(H);const et=this._getAbsoluteTransform().copy();return et.invert(),et.translate(T.x,T.y),T={x:this.attrs.x+et.getTranslation().x,y:this.attrs.y+et.getTranslation().y},this._setTransform(Q),this.setPosition({x:T.x,y:T.y}),this._clearCache(H),this._clearSelfAndDescendantCache(v),this}_setTransform(T){let q;for(q in T)this.attrs[q]=T[q]}_clearTransform(){const T={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,T}move(T){let q=T.x,G=T.y,Q=this.x(),et=this.y();return q!==void 0&&(Q+=q),G!==void 0&&(et+=G),this.setPosition({x:Q,y:et}),this}_eachAncestorReverse(T,q){let G=[],Q=this.getParent(),et,rt;if(!(q&&q._id===this._id)){for(G.unshift(this);Q&&(!q||Q._id!==q._id);)G.unshift(Q),Q=Q.parent;for(et=G.length,rt=0;rt<et;rt++)T(G[rt])}}rotate(T){return this.rotation(this.rotation()+T),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const T=this.index,q=this.parent.getChildren().length;return T<q-1?(this.parent.children.splice(T,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const T=this.index,q=this.parent.getChildren().length;return T<q-1?(this.parent.children.splice(T,1),this.parent.children.splice(T+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.splice(T-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(T){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(T<0||T>=this.parent.children.length)&&a.Util.warn("Unexpected value "+T+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const q=this.index;return this.parent.children.splice(q,1),this.parent.children.splice(T,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(d,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let T=this.opacity();const q=this.getParent();return q&&!q._isUnderCache&&(T*=q.getAbsoluteOpacity()),T}moveTo(T){return this.getParent()!==T&&(this._remove(),T.add(this)),this}toObject(){let T=this.getAttrs(),q,G,Q,et,rt;const pt={attrs:{},className:this.getClassName()};for(q in T)G=T[q],rt=a.Util.isObject(G)&&!a.Util._isPlainObject(G)&&!a.Util._isArray(G),!rt&&(Q=typeof this[q]=="function"&&this[q],delete T[q],et=Q?Q.call(this):null,T[q]=G,et!==G&&(pt.attrs[q]=G));return a.Util._prepareToStringify(pt)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(T,q,G){const Q=[];q&&this._isMatch(T)&&Q.push(this);let et=this.parent;for(;et;){if(et===G)return Q;et._isMatch(T)&&Q.push(et),et=et.parent}return Q}isAncestorOf(T){return!1}findAncestor(T,q,G){return this.findAncestors(T,q,G)[0]}_isMatch(T){if(!T)return!1;if(typeof T=="function")return T(this);let q=T.replace(/ /g,"").split(","),G=q.length,Q,et;for(Q=0;Q<G;Q++)if(et=q[Q],a.Util.isValidSelector(et)||(a.Util.warn('Selector "'+et+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),et.charAt(0)==="#"){if(this.id()===et.slice(1))return!0}else if(et.charAt(0)==="."){if(this.hasName(et.slice(1)))return!0}else if(this.className===et||this.nodeType===et)return!0;return!1}getLayer(){const T=this.getParent();return T?T.getLayer():null}getStage(){return this._getCache(z,this._getStage)}_getStage(){const T=this.getParent();return T?T.getStage():null}fire(T,q={},G){return q.target=q.target||this,G?this._fireAndBubble(T,q):this._fire(T,q),this}getAbsoluteTransform(T){return T?this._getAbsoluteTransform(T):this._getCache(v,this._getAbsoluteTransform)}_getAbsoluteTransform(T){let q;if(T)return q=new a.Transform,this._eachAncestorReverse(function(G){const Q=G.transformsEnabled();Q==="all"?q.multiply(G.getTransform()):Q==="position"&&q.translate(G.x()-G.offsetX(),G.y()-G.offsetY())},T),q;{q=this._cache.get(v)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(q):q.reset();const G=this.transformsEnabled();if(G==="all")q.multiply(this.getTransform());else if(G==="position"){const Q=this.attrs.x||0,et=this.attrs.y||0,rt=this.attrs.offsetX||0,pt=this.attrs.offsetY||0;q.translate(Q-rt,et-pt)}return q.dirty=!1,q}}getAbsoluteScale(T){let q=this;for(;q;)q._isUnderCache&&(T=q),q=q.getParent();const Q=this.getAbsoluteTransform(T).decompose();return{x:Q.scaleX,y:Q.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(H,this._getTransform)}_getTransform(){var T,q;const G=this._cache.get(H)||new a.Transform;G.reset();const Q=this.x(),et=this.y(),rt=r.Konva.getAngle(this.rotation()),pt=(T=this.attrs.scaleX)!==null&&T!==void 0?T:1,X=(q=this.attrs.scaleY)!==null&&q!==void 0?q:1,st=this.attrs.skewX||0,Tt=this.attrs.skewY||0,lt=this.attrs.offsetX||0,dt=this.attrs.offsetY||0;return(Q!==0||et!==0)&&G.translate(Q,et),rt!==0&&G.rotate(rt),(st!==0||Tt!==0)&&G.skew(st,Tt),(pt!==1||X!==1)&&G.scale(pt,X),(lt!==0||dt!==0)&&G.translate(-1*lt,-1*dt),G.dirty=!1,G}clone(T){let q=a.Util.cloneObject(this.attrs),G,Q,et,rt,pt;for(G in T)q[G]=T[G];const X=new this.constructor(q);for(G in this.eventListeners)for(Q=this.eventListeners[G],et=Q.length,rt=0;rt<et;rt++)pt=Q[rt],pt.name.indexOf(C)<0&&(X.eventListeners[G]||(X.eventListeners[G]=[]),X.eventListeners[G].push(pt));return X}_toKonvaCanvas(T){T=T||{};const q=this.getClientRect(),G=this.getStage(),Q=T.x!==void 0?T.x:Math.floor(q.x),et=T.y!==void 0?T.y:Math.floor(q.y),rt=T.pixelRatio||1,pt=new n.SceneCanvas({width:T.width||Math.ceil(q.width)||(G?G.width():0),height:T.height||Math.ceil(q.height)||(G?G.height():0),pixelRatio:rt}),X=pt.getContext(),st=new n.SceneCanvas({width:pt.width/pt.pixelRatio+Math.abs(Q),height:pt.height/pt.pixelRatio+Math.abs(et),pixelRatio:pt.pixelRatio});return T.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(Q||et)&&X.translate(-1*Q,-1*et),this.drawScene(pt,void 0,st),X.restore(),pt}toCanvas(T){return this._toKonvaCanvas(T)._canvas}toDataURL(T){T=T||{};const q=T.mimeType||null,G=T.quality||null,Q=this._toKonvaCanvas(T).toDataURL(q,G);return T.callback&&T.callback(Q),Q}toImage(T){return new Promise((q,G)=>{try{const Q=T==null?void 0:T.callback;Q&&delete T.callback,a.Util._urlToImage(this.toDataURL(T),function(et){q(et),Q==null||Q(et)})}catch(Q){G(Q)}})}toBlob(T){return new Promise((q,G)=>{try{const Q=T==null?void 0:T.callback;Q&&delete T.callback,this.toCanvas(T).toBlob(et=>{q(et),Q==null||Q(et)},T==null?void 0:T.mimeType,T==null?void 0:T.quality)}catch(Q){G(Q)}})}setSize(T){return this.width(T.width),this.height(T.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(T,q,G){let Q=this.eventListeners[T],et,rt,pt;for(et=0;et<Q.length;et++)if(rt=Q[et].name,pt=Q[et].handler,(rt!=="konva"||q==="konva")&&(!q||rt===q)&&(!G||G===pt)){if(Q.splice(et,1),Q.length===0){delete this.eventListeners[T];break}et--}}_fireChangeEvent(T,q,G){this._fire(T+O,{oldVal:q,newVal:G})}addName(T){if(!this.hasName(T)){const q=this.name(),G=q?q+" "+T:T;this.name(G)}return this}hasName(T){if(!T)return!1;const q=this.name();return q?(q||"").split(/\s/g).indexOf(T)!==-1:!1}removeName(T){const q=(this.name()||"").split(/\s/g),G=q.indexOf(T);return G!==-1&&(q.splice(G,1),this.name(q.join(" "))),this}setAttr(T,q){const G=this[F+a.Util._capitalize(T)];return a.Util._isFunction(G)?G.call(this,q):this._setAttr(T,q),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const T=this.getLayer()||this.getStage();T==null||T.batchDraw()}}_setAttr(T,q){const G=this.attrs[T];G===q&&!a.Util.isObject(q)||(q==null?delete this.attrs[T]:this.attrs[T]=q,this._shouldFireChangeEvents&&this._fireChangeEvent(T,G,q),this._requestDraw())}_setComponentAttr(T,q,G){let Q;G!==void 0&&(Q=this.attrs[T],Q||(this.attrs[T]=this.getAttr(T)),this.attrs[T][q]=G,this._fireChangeEvent(T,Q,G))}_fireAndBubble(T,q,G){if(q&&this.nodeType===D&&(q.target=this),!((T===I||T===L)&&(G&&(this===G||this.isAncestorOf&&this.isAncestorOf(G))||this.nodeType==="Stage"&&!G))){this._fire(T,q);const et=(T===I||T===L)&&G&&G.isAncestorOf&&G.isAncestorOf(this)&&!G.isAncestorOf(this.parent);(q&&!q.cancelBubble||!q)&&this.parent&&this.parent.isListening()&&!et&&(G&&G.parent?this._fireAndBubble.call(this.parent,T,q,G):this._fireAndBubble.call(this.parent,T,q))}}_getProtoListeners(T){var q,G,Q;const et=(q=this._cache.get(m))!==null&&q!==void 0?q:{};let rt=et==null?void 0:et[T];if(rt===void 0){rt=[];let pt=Object.getPrototypeOf(this);for(;pt;){const X=(Q=(G=pt.eventListeners)===null||G===void 0?void 0:G[T])!==null&&Q!==void 0?Q:[];rt.push(...X),pt=Object.getPrototypeOf(pt)}et[T]=rt,this._cache.set(m,et)}return rt}_fire(T,q){q=q||{},q.currentTarget=this,q.type=T;const G=this._getProtoListeners(T);if(G)for(var Q=0;Q<G.length;Q++)G[Q].handler.call(this,q);const et=this.eventListeners[T];if(et)for(var Q=0;Q<et.length;Q++)et[Q].handler.call(this,q)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(T){const q=T?T.pointerId:void 0,G=this.getStage(),Q=this.getAbsolutePosition();if(!G)return;const et=G._getPointerById(q)||G._changedPointerPositions[0]||Q;u.DD._dragElements.set(this._id,{node:this,startPointerPos:et,offset:{x:et.x-Q.x,y:et.y-Q.y},dragStatus:"ready",pointerId:q})}startDrag(T,q=!0){u.DD._dragElements.has(this._id)||this._createDragElement(T);const G=u.DD._dragElements.get(this._id);G.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:T&&T.evt},q)}_setDragPosition(T,q){const G=this.getStage()._getPointerById(q.pointerId);if(!G)return;let Q={x:G.x-q.offset.x,y:G.y-q.offset.y};const et=this.dragBoundFunc();if(et!==void 0){const rt=et.call(this,Q,T);rt?Q=rt:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==Q.x||this._lastPos.y!==Q.y)&&(this.setAbsolutePosition(Q),this._requestDraw()),this._lastPos=Q}stopDrag(T){const q=u.DD._dragElements.get(this._id);q&&(q.dragStatus="stopped"),u.DD._endDragBefore(T),u.DD._endDragAfter(T)}setDraggable(T){this._setAttr("draggable",T),this._dragChange()}isDragging(){const T=u.DD._dragElements.get(this._id);return T?T.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(T){if(!(!(T.evt.button!==void 0)||r.Konva.dragButtons.indexOf(T.evt.button)>=0)||this.isDragging())return;let Q=!1;u.DD._dragElements.forEach(et=>{this.isAncestorOf(et.node)&&(Q=!0)}),Q||this._createDragElement(T)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const q=u.DD._dragElements.get(this._id),G=q&&q.dragStatus==="dragging",Q=q&&q.dragStatus==="ready";G?this.stopDrag():Q&&u.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(T={x:0,y:0}){const q=this.getStage();if(!q)return!1;const G={x:-T.x,y:-T.y,width:q.width()+2*T.x,height:q.height()+2*T.y};return a.Util.haveIntersection(G,this.getClientRect())}static create(T,q){return a.Util._isString(T)&&(T=JSON.parse(T)),this._createNode(T,q)}static _createNode(T,q){let G=f1.prototype.getClassName.call(T),Q=T.children,et,rt,pt;q&&(T.attrs.container=q),r.Konva[G]||(a.Util.warn('Can not find a node with class name "'+G+'". Fallback to "Shape".'),G="Shape");const X=r.Konva[G];if(et=new X(T.attrs),Q)for(rt=Q.length,pt=0;pt<rt;pt++)et.add(f1._createNode(Q[pt]));return et}};fd.Node=M,M.prototype.nodeType="Node",M.prototype._attrsAffectingSize=[],M.prototype.eventListeners={},M.prototype.on.call(M.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(H),this._clearSelfAndDescendantCache(v)}),M.prototype.on.call(M.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(j)}),M.prototype.on.call(M.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(R)}),M.prototype.on.call(M.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(d)});const k=t.Factory.addGetterSetter;return k(M,"zIndex"),k(M,"absolutePosition"),k(M,"position"),k(M,"x",0,(0,c.getNumberValidator)()),k(M,"y",0,(0,c.getNumberValidator)()),k(M,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),k(M,"opacity",1,(0,c.getNumberValidator)()),k(M,"name","",(0,c.getStringValidator)()),k(M,"id","",(0,c.getStringValidator)()),k(M,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"scale",["x","y"]),k(M,"scaleX",1,(0,c.getNumberValidator)()),k(M,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"skew",["x","y"]),k(M,"skewX",0,(0,c.getNumberValidator)()),k(M,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"offset",["x","y"]),k(M,"offsetX",0,(0,c.getNumberValidator)()),k(M,"offsetY",0,(0,c.getNumberValidator)()),k(M,"dragDistance",void 0,(0,c.getNumberValidator)()),k(M,"width",0,(0,c.getNumberValidator)()),k(M,"height",0,(0,c.getNumberValidator)()),k(M,"listening",!0,(0,c.getBooleanValidator)()),k(M,"preventDefault",!0,(0,c.getBooleanValidator)()),k(M,"filters",void 0,function(K){return this._filterUpToDate=!1,K}),k(M,"visible",!0,(0,c.getBooleanValidator)()),k(M,"transformsEnabled","all",(0,c.getStringValidator)()),k(M,"size"),k(M,"dragBoundFunc"),k(M,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(M,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),fd}var dd={},L2;function Om(){if(L2)return dd;L2=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.Container=void 0;const a=je(),t=Ti(),n=Qe();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const d=this.children||[],m=[];return d.forEach(function(v){c(v)&&m.push(v)}),m}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let m=0;m<c.length;m++)this.add(c[m]);return this}const d=c[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const d=this._generalFind(c,!0);return d.length>0?d[0]:void 0}_generalFind(c,d){const m=[];return this._descendants(v=>{const _=v._isMatch(c);return _&&m.push(v),!!(_&&d)}),m}_descendants(c){let d=!1;const m=this.getChildren();for(const v of m){if(d=c(v),d)return!0;if(v.hasChildren()&&(d=v._descendants(c),d))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(d=>{c.children.push(d.toObject())}),c}isAncestorOf(c){let d=c.getParent();for(;d;){if(d._id===this._id)return!0;d=d.getParent()}return!1}clone(c){const d=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(m){d.add(m.clone())}),d}getAllIntersections(c){const d=[];return this.find("Shape").forEach(m=>{m.isVisible()&&m.intersects(c)&&d.push(m)}),d}_clearSelfAndDescendantCache(c){var d;super._clearSelfAndDescendantCache(c),!this.isCached()&&((d=this.children)===null||d===void 0||d.forEach(function(m){m._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(d,m){d.index=m}),this._requestDraw()}drawScene(c,d,m){const v=this.getLayer(),_=c||v&&v.getCanvas(),b=_&&_.getContext(),O=this._getCanvasCache(),U=O&&O.scene,C=_&&_.isCache;if(!this.isVisible()&&!C)return this;if(U){b.save();const R=this.getAbsoluteTransform(d).getMatrix();b.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedSceneCanvas(b),b.restore()}else this._drawChildren("drawScene",_,d,m);return this}drawHit(c,d){if(!this.shouldDrawHit(d))return this;const m=this.getLayer(),v=c||m&&m.hitCanvas,_=v&&v.getContext(),b=this._getCanvasCache();if(b&&b.hit){_.save();const U=this.getAbsoluteTransform(d).getMatrix();_.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(_),_.restore()}else this._drawChildren("drawHit",v,d);return this}_drawChildren(c,d,m,v){var _;const b=d&&d.getContext(),O=this.clipWidth(),U=this.clipHeight(),C=this.clipFunc(),R=typeof O=="number"&&typeof U=="number"||C,I=m===this;if(R){b.save();const F=this.getAbsoluteTransform(m);let D=F.getMatrix();b.transform(D[0],D[1],D[2],D[3],D[4],D[5]),b.beginPath();let x;if(C)x=C.call(this,b,this);else{const z=this.clipX(),H=this.clipY();b.rect(z||0,H||0,O,U)}b.clip.apply(b,x),D=F.copy().invert().getMatrix(),b.transform(D[0],D[1],D[2],D[3],D[4],D[5])}const L=!I&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";L&&(b.save(),b._applyGlobalCompositeOperation(this)),(_=this.children)===null||_===void 0||_.forEach(function(F){F[c](d,m,v)}),L&&b.restore(),R&&b.restore()}getClientRect(c={}){var d;const m=c.skipTransform,v=c.relativeTo;let _,b,O,U,C={x:1/0,y:1/0,width:0,height:0};const R=this;(d=this.children)===null||d===void 0||d.forEach(function(F){if(!F.visible())return;const D=F.getClientRect({relativeTo:R,skipShadow:c.skipShadow,skipStroke:c.skipStroke});D.width===0&&D.height===0||(_===void 0?(_=D.x,b=D.y,O=D.x+D.width,U=D.y+D.height):(_=Math.min(_,D.x),b=Math.min(b,D.y),O=Math.max(O,D.x+D.width),U=Math.max(U,D.y+D.height)))});const I=this.find("Shape");let L=!1;for(let F=0;F<I.length;F++)if(I[F]._isVisible(this)){L=!0;break}return L&&_!==void 0?C={x:_,y:b,width:O-_,height:U-b}:C={x:0,y:0,width:0,height:0},m?C:this._transformedRect(C,v)}};return dd.Container=r,a.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipFunc"),dd}var Fp={},Pu={},P2;function d4(){if(P2)return Pu;P2=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.getCapturedShape=r,Pu.createEvent=u,Pu.hasPointerCapture=c,Pu.setPointerCapture=d,Pu.releaseCapture=m;const a=Pe(),t=new Map,n=a.Konva._global.PointerEvent!==void 0;function r(v){return t.get(v)}function u(v){return{evt:v,pointerId:v.pointerId}}function c(v,_){return t.get(v)===_}function d(v,_){m(v),_.getStage()&&(t.set(v,_),n&&_._fire("gotpointercapture",u(new PointerEvent("gotpointercapture"))))}function m(v,_){const b=t.get(v);if(!b)return;const O=b.getStage();O&&O.content,t.delete(v),n&&b._fire("lostpointercapture",u(new PointerEvent("lostpointercapture")))}return Pu}var z2;function GS(){return z2||(z2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const t=yi(),n=je(),r=Om(),u=Pe(),c=xm(),d=G1(),m=Pe(),v=d4(),_="Stage",b="string",O="px",U="mouseout",C="mouseleave",R="mouseover",I="mouseenter",L="mousemove",F="mousedown",D="mouseup",x="pointermove",z="pointerdown",H="pointerup",Y="pointercancel",j="lostpointercapture",V="pointerout",w="pointerleave",M="pointerover",k="pointerenter",K="contextmenu",T="touchstart",q="touchend",G="touchmove",Q="touchcancel",et="wheel",rt=5,pt=[[I,"_pointerenter"],[F,"_pointerdown"],[L,"_pointermove"],[D,"_pointerup"],[C,"_pointerleave"],[T,"_pointerdown"],[G,"_pointermove"],[q,"_pointerup"],[Q,"_pointercancel"],[R,"_pointerover"],[et,"_wheel"],[K,"_contextmenu"],[z,"_pointerdown"],[x,"_pointermove"],[H,"_pointerup"],[Y,"_pointercancel"],[j,"_lostpointercapture"]],X={mouse:{[V]:U,[w]:C,[M]:R,[k]:I,[x]:L,[z]:F,[H]:D,[Y]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[V]:"touchout",[w]:"touchleave",[M]:"touchover",[k]:"touchenter",[x]:G,[z]:T,[H]:q,[Y]:Q,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[V]:V,[w]:w,[M]:M,[k]:k,[x]:x,[z]:z,[H]:H,[Y]:Y,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},st=Vt=>Vt.indexOf("pointer")>=0?"pointer":Vt.indexOf("touch")>=0?"touch":"mouse",Tt=Vt=>{const nt=st(Vt);if(nt==="pointer")return u.Konva.pointerEventsEnabled&&X.pointer;if(nt==="touch")return X.touch;if(nt==="mouse")return X.mouse};function lt(Vt={}){return(Vt.clipFunc||Vt.clipWidth||Vt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Vt}const dt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Nt extends r.Container{constructor(nt){super(lt(nt)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{lt(this.attrs)}),this._checkVisibility()}_validateAdd(nt){const ht=nt.getType()==="Layer",Dt=nt.getType()==="FastLayer";ht||Dt||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const nt=this.visible()?"":"none";this.content.style.display=nt}setContainer(nt){if(typeof nt===b){if(nt.charAt(0)==="."){const Dt=nt.slice(1);nt=document.getElementsByClassName(Dt)[0]}else{var ht;nt.charAt(0)!=="#"?ht=nt:ht=nt.slice(1),nt=document.getElementById(ht)}if(!nt)throw"Can not find container in document with id "+ht}return this._setAttr("container",nt),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),nt.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const nt=this.children,ht=nt.length;for(let Dt=0;Dt<ht;Dt++)nt[Dt].clear();return this}clone(nt){return nt||(nt={}),nt.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,nt)}destroy(){super.destroy();const nt=this.content;nt&&t.Util._isInDocument(nt)&&this.container().removeChild(nt);const ht=a.stages.indexOf(this);return ht>-1&&a.stages.splice(ht,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const nt=this._pointerPositions[0]||this._changedPointerPositions[0];return nt?{x:nt.x,y:nt.y}:(t.Util.warn(dt),null)}_getPointerById(nt){return this._pointerPositions.find(ht=>ht.id===nt)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(nt){nt=nt||{},nt.x=nt.x||0,nt.y=nt.y||0,nt.width=nt.width||this.width(),nt.height=nt.height||this.height();const ht=new c.SceneCanvas({width:nt.width,height:nt.height,pixelRatio:nt.pixelRatio||1}),Dt=ht.getContext()._context,xt=this.children;return(nt.x||nt.y)&&Dt.translate(-1*nt.x,-1*nt.y),xt.forEach(function(jt){if(!jt.isVisible())return;const Kt=jt._toKonvaCanvas(nt);Dt.drawImage(Kt._canvas,nt.x,nt.y,Kt.getWidth()/Kt.getPixelRatio(),Kt.getHeight()/Kt.getPixelRatio())}),ht}getIntersection(nt){if(!nt)return null;const ht=this.children,Dt=ht.length,xt=Dt-1;for(let jt=xt;jt>=0;jt--){const Kt=ht[jt].getIntersection(nt);if(Kt)return Kt}return null}_resizeDOM(){const nt=this.width(),ht=this.height();this.content&&(this.content.style.width=nt+O,this.content.style.height=ht+O),this.bufferCanvas.setSize(nt,ht),this.bufferHitCanvas.setSize(nt,ht),this.children.forEach(Dt=>{Dt.setSize({width:nt,height:ht}),Dt.draw()})}add(nt,...ht){if(arguments.length>1){for(let xt=0;xt<arguments.length;xt++)this.add(arguments[xt]);return this}super.add(nt);const Dt=this.children.length;return Dt>rt&&t.Util.warn("The stage has "+Dt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),nt.setSize({width:this.width(),height:this.height()}),nt.draw(),u.Konva.isBrowser&&this.content.appendChild(nt.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(nt){return v.hasPointerCapture(nt,this)}setPointerCapture(nt){v.setPointerCapture(nt,this)}releaseCapture(nt){v.releaseCapture(nt,this)}getLayers(){return this.children}_bindContentEvents(){u.Konva.isBrowser&&pt.forEach(([nt,ht])=>{this.content.addEventListener(nt,Dt=>{this[ht](Dt)},{passive:!1})})}_pointerenter(nt){this.setPointersPositions(nt);const ht=Tt(nt.type);ht&&this._fire(ht.pointerenter,{evt:nt,target:this,currentTarget:this})}_pointerover(nt){this.setPointersPositions(nt);const ht=Tt(nt.type);ht&&this._fire(ht.pointerover,{evt:nt,target:this,currentTarget:this})}_getTargetShape(nt){let ht=this[nt+"targetShape"];return ht&&!ht.getStage()&&(ht=null),ht}_pointerleave(nt){const ht=Tt(nt.type),Dt=st(nt.type);if(!ht)return;this.setPointersPositions(nt);const xt=this._getTargetShape(Dt),jt=!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled;xt&&jt?(xt._fireAndBubble(ht.pointerout,{evt:nt}),xt._fireAndBubble(ht.pointerleave,{evt:nt}),this._fire(ht.pointerleave,{evt:nt,target:this,currentTarget:this}),this[Dt+"targetShape"]=null):jt&&(this._fire(ht.pointerleave,{evt:nt,target:this,currentTarget:this}),this._fire(ht.pointerout,{evt:nt,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(nt){const ht=Tt(nt.type),Dt=st(nt.type);if(!ht)return;this.setPointersPositions(nt);let xt=!1;this._changedPointerPositions.forEach(jt=>{const Kt=this.getIntersection(jt);if(d.DD.justDragged=!1,u.Konva["_"+Dt+"ListenClick"]=!0,!Kt||!Kt.isListening()){this[Dt+"ClickStartShape"]=void 0;return}u.Konva.capturePointerEventsEnabled&&Kt.setPointerCapture(jt.id),this[Dt+"ClickStartShape"]=Kt,Kt._fireAndBubble(ht.pointerdown,{evt:nt,pointerId:jt.id}),xt=!0;const le=nt.type.indexOf("touch")>=0;Kt.preventDefault()&&nt.cancelable&&le&&nt.preventDefault()}),xt||this._fire(ht.pointerdown,{evt:nt,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(nt){const ht=Tt(nt.type),Dt=st(nt.type);if(!ht||(u.Konva.isDragging()&&d.DD.node.preventDefault()&&nt.cancelable&&nt.preventDefault(),this.setPointersPositions(nt),!(!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled)))return;const jt={};let Kt=!1;const le=this._getTargetShape(Dt);this._changedPointerPositions.forEach(de=>{const ne=v.getCapturedShape(de.id)||this.getIntersection(de),Fe=de.id,me={evt:nt,pointerId:Fe},Ze=le!==ne;if(Ze&&le&&(le._fireAndBubble(ht.pointerout,{...me},ne),le._fireAndBubble(ht.pointerleave,{...me},ne)),ne){if(jt[ne._id])return;jt[ne._id]=!0}ne&&ne.isListening()?(Kt=!0,Ze&&(ne._fireAndBubble(ht.pointerover,{...me},le),ne._fireAndBubble(ht.pointerenter,{...me},le),this[Dt+"targetShape"]=ne),ne._fireAndBubble(ht.pointermove,{...me})):le&&(this._fire(ht.pointerover,{evt:nt,target:this,currentTarget:this,pointerId:Fe}),this[Dt+"targetShape"]=null)}),Kt||this._fire(ht.pointermove,{evt:nt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(nt){const ht=Tt(nt.type),Dt=st(nt.type);if(!ht)return;this.setPointersPositions(nt);const xt=this[Dt+"ClickStartShape"],jt=this[Dt+"ClickEndShape"],Kt={};let le=!1;this._changedPointerPositions.forEach(de=>{const ne=v.getCapturedShape(de.id)||this.getIntersection(de);if(ne){if(ne.releaseCapture(de.id),Kt[ne._id])return;Kt[ne._id]=!0}const Fe=de.id,me={evt:nt,pointerId:Fe};let Ze=!1;u.Konva["_"+Dt+"InDblClickWindow"]?(Ze=!0,clearTimeout(this[Dt+"DblTimeout"])):d.DD.justDragged||(u.Konva["_"+Dt+"InDblClickWindow"]=!0,clearTimeout(this[Dt+"DblTimeout"])),this[Dt+"DblTimeout"]=setTimeout(function(){u.Konva["_"+Dt+"InDblClickWindow"]=!1},u.Konva.dblClickWindow),ne&&ne.isListening()?(le=!0,this[Dt+"ClickEndShape"]=ne,ne._fireAndBubble(ht.pointerup,{...me}),u.Konva["_"+Dt+"ListenClick"]&&xt&&xt===ne&&(ne._fireAndBubble(ht.pointerclick,{...me}),Ze&&jt&&jt===ne&&ne._fireAndBubble(ht.pointerdblclick,{...me}))):(this[Dt+"ClickEndShape"]=null,u.Konva["_"+Dt+"ListenClick"]&&this._fire(ht.pointerclick,{evt:nt,target:this,currentTarget:this,pointerId:Fe}),Ze&&this._fire(ht.pointerdblclick,{evt:nt,target:this,currentTarget:this,pointerId:Fe}))}),le||this._fire(ht.pointerup,{evt:nt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva["_"+Dt+"ListenClick"]=!1,nt.cancelable&&Dt!=="touch"&&Dt!=="pointer"&&nt.preventDefault()}_contextmenu(nt){this.setPointersPositions(nt);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble(K,{evt:nt}):this._fire(K,{evt:nt,target:this,currentTarget:this})}_wheel(nt){this.setPointersPositions(nt);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble(et,{evt:nt}):this._fire(et,{evt:nt,target:this,currentTarget:this})}_pointercancel(nt){this.setPointersPositions(nt);const ht=v.getCapturedShape(nt.pointerId)||this.getIntersection(this.getPointerPosition());ht&&ht._fireAndBubble(H,v.createEvent(nt)),v.releaseCapture(nt.pointerId)}_lostpointercapture(nt){v.releaseCapture(nt.pointerId)}setPointersPositions(nt){const ht=this._getContentPosition();let Dt=null,xt=null;nt=nt||window.event,nt.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(nt.touches,jt=>{this._pointerPositions.push({id:jt.identifier,x:(jt.clientX-ht.left)/ht.scaleX,y:(jt.clientY-ht.top)/ht.scaleY})}),Array.prototype.forEach.call(nt.changedTouches||nt.touches,jt=>{this._changedPointerPositions.push({id:jt.identifier,x:(jt.clientX-ht.left)/ht.scaleX,y:(jt.clientY-ht.top)/ht.scaleY})})):(Dt=(nt.clientX-ht.left)/ht.scaleX,xt=(nt.clientY-ht.top)/ht.scaleY,this.pointerPos={x:Dt,y:xt},this._pointerPositions=[{x:Dt,y:xt,id:t.Util._getFirstPointerId(nt)}],this._changedPointerPositions=[{x:Dt,y:xt,id:t.Util._getFirstPointerId(nt)}])}_setPointerPosition(nt){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(nt)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const nt=this.content.getBoundingClientRect();return{top:nt.top,left:nt.left,scaleX:nt.width/this.content.clientWidth||1,scaleY:nt.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!u.Konva.isBrowser)return;const nt=this.container();if(!nt)throw"Stage has no container. A container is required.";nt.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),nt.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(nt){nt.batchDraw()}),this}}a.Stage=Nt,Nt.prototype.nodeType=_,(0,m._registerNode)(Nt),n.Factory.addGetterSetter(Nt,"container"),u.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{a.stages.forEach(Vt=>{Vt.batchDraw()})})}(Fp)),Fp}var gd={},qp={},B2;function ha(){return B2||(B2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const t=Pe(),n=yi(),r=je(),u=Ti(),c=Qe(),d=Pe(),m=d4(),v="hasShadow",_="shadowRGBA",b="patternImage",O="linearGradient",U="radialGradient";let C;function R(){return C||(C=n.Util.createCanvasElement().getContext("2d"),C)}a.shapes={};function I(w){const M=this.attrs.fillRule;M?w.fill(M):w.fill()}function L(w){w.stroke()}function F(w){const M=this.attrs.fillRule;M?w.fill(M):w.fill()}function D(w){w.stroke()}function x(){this._clearCache(v)}function z(){this._clearCache(_)}function H(){this._clearCache(b)}function Y(){this._clearCache(O)}function j(){this._clearCache(U)}class V extends u.Node{constructor(M){super(M);let k;for(;k=n.Util.getRandomColor(),!(k&&!(k in a.shapes)););this.colorKey=k,a.shapes[k]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(v,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=R().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const K=new n.Transform;K.translate(this.fillPatternX(),this.fillPatternY()),K.rotate(t.Konva.getAngle(this.fillPatternRotation())),K.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),K.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const T=K.getMatrix(),q=typeof DOMMatrix>"u"?{a:T[0],b:T[1],c:T[2],d:T[3],e:T[4],f:T[5]}:new DOMMatrix(T);k.setTransform(q)}return k}}_getLinearGradient(){return this._getCache(O,this.__getLinearGradient)}__getLinearGradient(){const M=this.fillLinearGradientColorStops();if(M){const k=R(),K=this.fillLinearGradientStartPoint(),T=this.fillLinearGradientEndPoint(),q=k.createLinearGradient(K.x,K.y,T.x,T.y);for(let G=0;G<M.length;G+=2)q.addColorStop(M[G],M[G+1]);return q}}_getRadialGradient(){return this._getCache(U,this.__getRadialGradient)}__getRadialGradient(){const M=this.fillRadialGradientColorStops();if(M){const k=R(),K=this.fillRadialGradientStartPoint(),T=this.fillRadialGradientEndPoint(),q=k.createRadialGradient(K.x,K.y,this.fillRadialGradientStartRadius(),T.x,T.y,this.fillRadialGradientEndRadius());for(let G=0;G<M.length;G+=2)q.addColorStop(M[G],M[G+1]);return q}}getShadowRGBA(){return this._getCache(_,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){const k=this.getStage();if(!k)return!1;const K=k.bufferHitCanvas;return K.getContext().clear(),this.drawHit(K,void 0,!0),K.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return u.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const T=M||this.hasFill(),q=this.hasStroke(),G=this.getAbsoluteOpacity()!==1;if(T&&q&&G)return!0;const Q=this.hasShadow(),et=this.shadowForStrokeEnabled();return!!(T&&q&&Q&&et)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let k=!1,K=this.getParent();for(;K;){if(K.isCached()){k=!0;break}K=K.getParent()}const T=M.skipTransform,q=M.relativeTo||k&&this.getStage()||void 0,G=this.getSelfRect(),et=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,rt=G.width+et,pt=G.height+et,X=!M.skipShadow&&this.hasShadow(),st=X?this.shadowOffsetX():0,Tt=X?this.shadowOffsetY():0,lt=rt+Math.abs(st),dt=pt+Math.abs(Tt),Nt=X&&this.shadowBlur()||0,Vt=lt+Nt*2,nt=dt+Nt*2,ht={width:Vt,height:nt,x:-(et/2+Nt)+Math.min(st,0)+G.x,y:-(et/2+Nt)+Math.min(Tt,0)+G.y};return T?ht:this._transformedRect(ht,q)}drawScene(M,k,K){const T=this.getLayer();let q=M||T.getCanvas(),G=q.getContext(),Q=this._getCanvasCache(),et=this.getSceneFunc(),rt=this.hasShadow(),pt,X;const st=q.isCache,Tt=k===this;if(!this.isVisible()&&!Tt)return this;if(Q){G.save();const dt=this.getAbsoluteTransform(k).getMatrix();return G.transform(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!et)return this;if(G.save(),this._useBufferCanvas()&&!st){pt=this.getStage();const dt=K||pt.bufferCanvas;X=dt.getContext(),X.clear(),X.save(),X._applyLineJoin(this);var lt=this.getAbsoluteTransform(k).getMatrix();X.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),et.call(this,X,this),X.restore();const Nt=dt.pixelRatio;rt&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(dt._canvas,0,0,dt.width/Nt,dt.height/Nt)}else{if(G._applyLineJoin(this),!Tt){var lt=this.getAbsoluteTransform(k).getMatrix();G.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}rt&&G._applyShadow(this),et.call(this,G,this)}return G.restore(),this}drawHit(M,k,K=!1){if(!this.shouldDrawHit(k,K))return this;const T=this.getLayer(),q=M||T.hitCanvas,G=q&&q.getContext(),Q=this.hitFunc()||this.sceneFunc(),et=this._getCanvasCache(),rt=et&&et.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),rt){G.save();const X=this.getAbsoluteTransform(k).getMatrix();return G.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!Q)return this;if(G.save(),G._applyLineJoin(this),!(this===k)){const X=this.getAbsoluteTransform(k).getMatrix();G.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return Q.call(this,G,this),G.restore(),this}drawHitFromCache(M=0){const k=this._getCanvasCache(),K=this._getCachedSceneCanvas(),T=k.hit,q=T.getContext(),G=T.getWidth(),Q=T.getHeight();q.clear(),q.drawImage(K._canvas,0,0,G,Q);try{const et=q.getImageData(0,0,G,Q),rt=et.data,pt=rt.length,X=n.Util._hexToRgb(this.colorKey);for(let st=0;st<pt;st+=4)rt[st+3]>M?(rt[st]=X.r,rt[st+1]=X.g,rt[st+2]=X.b,rt[st+3]=255):rt[st+3]=0;q.putImageData(et,0,0)}catch(et){n.Util.error("Unable to draw hit graph from cached scene canvas. "+et.message)}return this}hasPointerCapture(M){return m.hasPointerCapture(M,this)}setPointerCapture(M){m.setPointerCapture(M,this)}releaseCapture(M){m.releaseCapture(M,this)}}a.Shape=V,V.prototype._fillFunc=I,V.prototype._strokeFunc=L,V.prototype._fillFuncHit=F,V.prototype._strokeFuncHit=D,V.prototype._centroid=!1,V.prototype.nodeType="Shape",(0,d._registerNode)(V),V.prototype.eventListeners={},V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",z),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",H),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Y),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",j),r.Factory.addGetterSetter(V,"stroke",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"strokeWidth",2,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(V,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(V,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"lineJoin"),r.Factory.addGetterSetter(V,"lineCap"),r.Factory.addGetterSetter(V,"sceneFunc"),r.Factory.addGetterSetter(V,"hitFunc"),r.Factory.addGetterSetter(V,"dash"),r.Factory.addGetterSetter(V,"dashOffset",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowColor",void 0,(0,c.getStringValidator)()),r.Factory.addGetterSetter(V,"shadowBlur",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOpacity",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(V,"shadowOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternImage"),r.Factory.addGetterSetter(V,"fill",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"fillPatternX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(V,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(V,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(V,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(V,"fillEnabled",!0),r.Factory.addGetterSetter(V,"strokeEnabled",!0),r.Factory.addGetterSetter(V,"shadowEnabled",!0),r.Factory.addGetterSetter(V,"dashEnabled",!0),r.Factory.addGetterSetter(V,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(V,"fillPriority","color"),r.Factory.addComponentsGetterSetter(V,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternScaleX",1,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternScaleY",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(V,"fillPatternRotation",0),r.Factory.addGetterSetter(V,"fillRule",void 0,(0,c.getStringValidator)()),r.Factory.backCompat(V,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(qp)),qp}var k2;function g4(){if(k2)return gd;k2=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.Layer=void 0;const a=yi(),t=Om(),n=Ti(),r=je(),u=xm(),c=Qe(),d=ha(),m=Pe(),v="#",_="beforeDraw",b="draw",O=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],U=O.length;class C extends t.Container{constructor(I){super(I),this.canvas=new u.SceneCanvas,this.hitCanvas=new u.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(I){return this.getContext().clear(I),this.getHitCanvas().getContext().clear(I),this}setZIndex(I){super.setZIndex(I);const L=this.getStage();return L&&L.content&&(L.content.removeChild(this.getNativeCanvasElement()),I<L.children.length-1?L.content.insertBefore(this.getNativeCanvasElement(),L.children[I+1].getCanvas()._canvas):L.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const I=this.getStage();return I&&I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const L=this.getStage();return!L||!L.content?!1:(L.content.removeChild(this.getNativeCanvasElement()),this.index<L.children.length-1?L.content.insertBefore(this.getNativeCanvasElement(),L.children[this.index+1].getCanvas()._canvas):L.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const I=this.getStage();if(I){const L=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),L[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const I=this.getStage();if(I){const L=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),L[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const I=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),I&&I.parentNode&&a.Util._isInDocument(I)&&I.parentNode.removeChild(I),this}getStage(){return this.parent}setSize({width:I,height:L}){return this.canvas.setSize(I,L),this.hitCanvas.setSize(I,L),this._setSmoothEnabled(),this}_validateAdd(I){const L=I.getType();L!=="Group"&&L!=="Shape"&&a.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(I){return I=I||{},I.width=I.width||this.getWidth(),I.height=I.height||this.getHeight(),I.x=I.x!==void 0?I.x:this.x(),I.y=I.y!==void 0?I.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,I)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(I){if(!this.isListening()||!this.isVisible())return null;let L=1,F=!1;for(;;){for(let D=0;D<U;D++){const x=O[D],z=this._getIntersection({x:I.x+x.x*L,y:I.y+x.y*L}),H=z.shape;if(H)return H;if(F=!!z.antialiased,!z.antialiased)break}if(F)L+=1;else return null}}_getIntersection(I){const L=this.hitCanvas.pixelRatio,F=this.hitCanvas.context.getImageData(Math.round(I.x*L),Math.round(I.y*L),1,1).data,D=F[3];if(D===255){const x=a.Util._rgbToHex(F[0],F[1],F[2]),z=d.shapes[v+x];return z?{shape:z}:{antialiased:!0}}else if(D>0)return{antialiased:!0};return{}}drawScene(I,L){const F=this.getLayer(),D=I||F&&F.getCanvas();return this._fire(_,{node:this}),this.clearBeforeDraw()&&D.getContext().clear(),t.Container.prototype.drawScene.call(this,D,L),this._fire(b,{node:this}),this}drawHit(I,L){const F=this.getLayer(),D=I||F&&F.hitCanvas;return F&&F.clearBeforeDraw()&&F.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,D,L),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(I){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(I)}getHitGraphEnabled(I){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const I=this.parent;!!this.hitCanvas._canvas.parentNode?I.content.removeChild(this.hitCanvas._canvas):I.content.appendChild(this.hitCanvas._canvas)}destroy(){return a.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return gd.Layer=C,C.prototype.nodeType="Layer",(0,m._registerNode)(C),r.Factory.addGetterSetter(C,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(C,"clearBeforeDraw",!0),r.Factory.addGetterSetter(C,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),gd}var md={},G2;function HS(){if(G2)return md;G2=1,Object.defineProperty(md,"__esModule",{value:!0}),md.FastLayer=void 0;const a=yi(),t=g4(),n=Pe();let r=class extends t.Layer{constructor(c){super(c),this.listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return md.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),md}var pd={},H2;function H1(){if(H2)return pd;H2=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.Group=void 0;const a=yi(),t=Om(),n=Pe();class r extends t.Container{_validateAdd(c){const d=c.getType();d!=="Group"&&d!=="Shape"&&a.Util.throw("You may only add groups and shapes to groups.")}}return pd.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),pd}var yd={},j2;function j1(){if(j2)return yd;j2=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Animation=void 0;const a=Pe(),t=yi(),n=function(){return a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class kh{constructor(c,d){this.id=kh.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=c,this.setLayers(d)}setLayers(c){let d=[];return c&&(d=Array.isArray(c)?c:[c]),this.layers=d,this}getLayers(){return this.layers}addLayer(c){const d=this.layers,m=d.length;for(let v=0;v<m;v++)if(d[v]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const d=kh.animations,m=d.length;for(let v=0;v<m;v++)if(d[v].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),kh._addAnimation(this),this}stop(){return kh._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const d=c.id,m=this.animations,v=m.length;for(let _=0;_<v;_++)if(m[_].id===d){this.animations.splice(_,1);break}}static _runFrames(){const c={},d=this.animations;for(let m=0;m<d.length;m++){const v=d[m],_=v.layers,b=v.func;v._updateFrameObject(n());const O=_.length;let U;if(b?U=b.call(v,v.frame)!==!1:U=!0,!!U)for(let C=0;C<O;C++){const R=_[C];R._id!==void 0&&(c[R._id]=R)}}for(const m in c)c.hasOwnProperty(m)&&c[m].batchDraw()}static _animationLoop(){const c=kh;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return yd.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,yd}var Kp={},F2;function jS(){return F2||(F2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const t=yi(),n=j1(),r=Ti(),u=Pe(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,m=2,v=3,_=["fill","stroke","shadowColor"];let b=0;class O{constructor(R,I,L,F,D,x,z){this.prop=R,this.propFunc=I,this.begin=F,this._pos=F,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=z,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=L,this._change=D-this.begin,this.pause()}fire(R){const I=this[R];I&&I()}setTime(R){R>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():R<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=R,this.update())}getTime(){return this._time}setPosition(R){this.prevPos=this._pos,this.propFunc(R),this._pos=R}getPosition(R){return R===void 0&&(R=this._time),this.func(R,this.begin,this._change,this.duration)}play(){this.state=m,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=v,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(R){this.pause(),this._time=R,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const R=this.getTimer()-this._startTime;this.state===m?this.setTime(R):this.state===v&&this.setTime(this.duration-R)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class U{constructor(R){const I=this,L=R.node,F=L._id,D=R.easing||a.Easings.Linear,x=!!R.yoyo;let z,H;typeof R.duration>"u"?z=.3:R.duration===0?z=.001:z=R.duration,this.node=L,this._id=b++;const Y=L.getLayer()||(L instanceof u.Konva.Stage?L.getLayers():null);Y||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){I.tween.onEnterFrame()},Y),this.tween=new O(H,function(j){I._tweenFunc(j)},D,0,1,z*1e3,x),this._addListeners(),U.attrs[F]||(U.attrs[F]={}),U.attrs[F][this._id]||(U.attrs[F][this._id]={}),U.tweens[F]||(U.tweens[F]={});for(H in R)c[H]===void 0&&this._addAttr(H,R[H]);this.reset(),this.onFinish=R.onFinish,this.onReset=R.onReset,this.onUpdate=R.onUpdate}_addAttr(R,I){const L=this.node,F=L._id;let D,x,z,H,Y;const j=U.tweens[F][R];j&&delete U.attrs[F][j][R];let V=L.getAttr(R);if(t.Util._isArray(I))if(D=[],x=Math.max(I.length,V.length),R==="points"&&I.length!==V.length&&(I.length>V.length?(H=V,V=t.Util._prepareArrayForTween(V,I,L.closed())):(z=I,I=t.Util._prepareArrayForTween(I,V,L.closed()))),R.indexOf("fill")===0)for(let w=0;w<x;w++)if(w%2===0)D.push(I[w]-V[w]);else{const M=t.Util.colorToRGBA(V[w]);Y=t.Util.colorToRGBA(I[w]),V[w]=M,D.push({r:Y.r-M.r,g:Y.g-M.g,b:Y.b-M.b,a:Y.a-M.a})}else for(let w=0;w<x;w++)D.push(I[w]-V[w]);else _.indexOf(R)!==-1?(V=t.Util.colorToRGBA(V),Y=t.Util.colorToRGBA(I),D={r:Y.r-V.r,g:Y.g-V.g,b:Y.b-V.b,a:Y.a-V.a}):D=I-V;U.attrs[F][this._id][R]={start:V,diff:D,end:I,trueEnd:z,trueStart:H},U.tweens[F][R]=this._id}_tweenFunc(R){const I=this.node,L=U.attrs[I._id][this._id];let F,D,x,z,H,Y,j,V;for(F in L){if(D=L[F],x=D.start,z=D.diff,V=D.end,t.Util._isArray(x))if(H=[],j=Math.max(x.length,V.length),F.indexOf("fill")===0)for(Y=0;Y<j;Y++)Y%2===0?H.push((x[Y]||0)+z[Y]*R):H.push("rgba("+Math.round(x[Y].r+z[Y].r*R)+","+Math.round(x[Y].g+z[Y].g*R)+","+Math.round(x[Y].b+z[Y].b*R)+","+(x[Y].a+z[Y].a*R)+")");else for(Y=0;Y<j;Y++)H.push((x[Y]||0)+z[Y]*R);else _.indexOf(F)!==-1?H="rgba("+Math.round(x.r+z.r*R)+","+Math.round(x.g+z.g*R)+","+Math.round(x.b+z.b*R)+","+(x.a+z.a*R)+")":H=x+z*R;I.setAttr(F,H)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const R=this.node,I=U.attrs[R._id][this._id];I.points&&I.points.trueEnd&&R.setAttr("points",I.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const R=this.node,I=U.attrs[R._id][this._id];I.points&&I.points.trueStart&&R.points(I.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(R){return this.tween.seek(R*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const R=this.node._id,I=this._id,L=U.tweens[R];this.pause();for(const F in L)delete U.tweens[R][F];delete U.attrs[R][I]}}a.Tween=U,U.attrs={},U.tweens={},r.Node.prototype.to=function(C){const R=C.onFinish;C.node=this,C.onFinish=function(){this.destroy(),R&&R()},new U(C).play()},a.Easings={BackEaseIn(C,R,I,L){return I*(C/=L)*C*((1.70158+1)*C-1.70158)+R},BackEaseOut(C,R,I,L){return I*((C=C/L-1)*C*((1.70158+1)*C+1.70158)+1)+R},BackEaseInOut(C,R,I,L){let F=1.70158;return(C/=L/2)<1?I/2*(C*C*(((F*=1.525)+1)*C-F))+R:I/2*((C-=2)*C*(((F*=1.525)+1)*C+F)+2)+R},ElasticEaseIn(C,R,I,L,F,D){let x=0;return C===0?R:(C/=L)===1?R+I:(D||(D=L*.3),!F||F<Math.abs(I)?(F=I,x=D/4):x=D/(2*Math.PI)*Math.asin(I/F),-(F*Math.pow(2,10*(C-=1))*Math.sin((C*L-x)*(2*Math.PI)/D))+R)},ElasticEaseOut(C,R,I,L,F,D){let x=0;return C===0?R:(C/=L)===1?R+I:(D||(D=L*.3),!F||F<Math.abs(I)?(F=I,x=D/4):x=D/(2*Math.PI)*Math.asin(I/F),F*Math.pow(2,-10*C)*Math.sin((C*L-x)*(2*Math.PI)/D)+I+R)},ElasticEaseInOut(C,R,I,L,F,D){let x=0;return C===0?R:(C/=L/2)===2?R+I:(D||(D=L*(.3*1.5)),!F||F<Math.abs(I)?(F=I,x=D/4):x=D/(2*Math.PI)*Math.asin(I/F),C<1?-.5*(F*Math.pow(2,10*(C-=1))*Math.sin((C*L-x)*(2*Math.PI)/D))+R:F*Math.pow(2,-10*(C-=1))*Math.sin((C*L-x)*(2*Math.PI)/D)*.5+I+R)},BounceEaseOut(C,R,I,L){return(C/=L)<1/2.75?I*(7.5625*C*C)+R:C<2/2.75?I*(7.5625*(C-=1.5/2.75)*C+.75)+R:C<2.5/2.75?I*(7.5625*(C-=2.25/2.75)*C+.9375)+R:I*(7.5625*(C-=2.625/2.75)*C+.984375)+R},BounceEaseIn(C,R,I,L){return I-a.Easings.BounceEaseOut(L-C,0,I,L)+R},BounceEaseInOut(C,R,I,L){return C<L/2?a.Easings.BounceEaseIn(C*2,0,I,L)*.5+R:a.Easings.BounceEaseOut(C*2-L,0,I,L)*.5+I*.5+R},EaseIn(C,R,I,L){return I*(C/=L)*C+R},EaseOut(C,R,I,L){return-I*(C/=L)*(C-2)+R},EaseInOut(C,R,I,L){return(C/=L/2)<1?I/2*C*C+R:-I/2*(--C*(C-2)-1)+R},StrongEaseIn(C,R,I,L){return I*(C/=L)*C*C*C*C+R},StrongEaseOut(C,R,I,L){return I*((C=C/L-1)*C*C*C*C+1)+R},StrongEaseInOut(C,R,I,L){return(C/=L/2)<1?I/2*C*C*C*C*C+R:I/2*((C-=2)*C*C*C*C+2)+R},Linear(C,R,I,L){return I*C/L+R}}}(Kp)),Kp}var q2;function d1(){return q2||(q2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const t=Pe(),n=yi(),r=Ti(),u=Om(),c=GS(),d=g4(),m=HS(),v=H1(),_=G1(),b=ha(),O=j1(),U=jS(),C=f4(),R=xm();a.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:u.Container,Stage:c.Stage,stages:c.stages,Layer:d.Layer,FastLayer:m.FastLayer,Group:v.Group,DD:_.DD,Shape:b.Shape,shapes:b.shapes,Animation:O.Animation,Tween:U.Tween,Easings:U.Easings,Context:C.Context,Canvas:R.Canvas}),a.default=a.Konva}(Bp)),Bp}var vd={},K2;function FS(){if(K2)return vd;K2=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.Arc=void 0;const a=je(),t=ha(),n=Pe(),r=Qe(),u=Pe();class c extends t.Shape{_sceneFunc(m){const v=n.Konva.getAngle(this.angle()),_=this.clockwise();m.beginPath(),m.arc(0,0,this.outerRadius(),0,v,_),m.arc(0,0,this.innerRadius(),v,0,!_),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}getSelfRect(){const m=this.innerRadius(),v=this.outerRadius(),_=this.clockwise(),b=n.Konva.getAngle(_?360-this.angle():this.angle()),O=Math.cos(Math.min(b,Math.PI)),U=1,C=Math.sin(Math.min(Math.max(Math.PI,b),3*Math.PI/2)),R=Math.sin(Math.min(b,Math.PI/2)),I=O*(O>0?m:v),L=U*v,F=C*(C>0?m:v),D=R*(R>0?v:m);return{x:I,y:_?-1*D:F,width:L-I,height:D-F}}}return vd.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1,(0,r.getBooleanValidator)()),vd}var _d={},Sd={},Y2;function m4(){if(Y2)return Sd;Y2=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.Line=void 0;const a=je(),t=Pe(),n=ha(),r=Qe();function u(m,v,_,b,O,U,C){const R=Math.sqrt(Math.pow(_-m,2)+Math.pow(b-v,2)),I=Math.sqrt(Math.pow(O-_,2)+Math.pow(U-b,2)),L=C*R/(R+I),F=C*I/(R+I),D=_-L*(O-m),x=b-L*(U-v),z=_+F*(O-m),H=b+F*(U-v);return[D,x,z,H]}function c(m,v){const _=m.length,b=[];for(let O=2;O<_-2;O+=2){const U=u(m[O-2],m[O-1],m[O],m[O+1],m[O+2],m[O+3],v);isNaN(U[0])||(b.push(U[0]),b.push(U[1]),b.push(m[O]),b.push(m[O+1]),b.push(U[2]),b.push(U[3]))}return b}class d extends n.Shape{constructor(v){super(v),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(v){let _=this.points(),b=_.length,O=this.tension(),U=this.closed(),C=this.bezier(),R,I,L;if(b){if(v.beginPath(),v.moveTo(_[0],_[1]),O!==0&&b>4){for(R=this.getTensionPoints(),I=R.length,L=U?0:4,U||v.quadraticCurveTo(R[0],R[1],R[2],R[3]);L<I-2;)v.bezierCurveTo(R[L++],R[L++],R[L++],R[L++],R[L++],R[L++]);U||v.quadraticCurveTo(R[I-2],R[I-1],_[b-2],_[b-1])}else if(C)for(L=2;L<b;)v.bezierCurveTo(_[L++],_[L++],_[L++],_[L++],_[L++],_[L++]);else for(L=2;L<b;L+=2)v.lineTo(_[L],_[L+1]);U?(v.closePath(),v.fillStrokeShape(this)):v.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const v=this.points(),_=v.length,b=this.tension(),O=u(v[_-2],v[_-1],v[0],v[1],v[2],v[3],b),U=u(v[_-4],v[_-3],v[_-2],v[_-1],v[0],v[1],b),C=c(v,b);return[O[2],O[3]].concat(C).concat([U[0],U[1],v[_-2],v[_-1],U[2],U[3],O[0],O[1],v[0],v[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let v=this.points();if(v.length<4)return{x:v[0]||0,y:v[1]||0,width:0,height:0};this.tension()!==0?v=[v[0],v[1],...this._getTensionPoints(),v[v.length-2],v[v.length-1]]:v=this.points();let _=v[0],b=v[0],O=v[1],U=v[1],C,R;for(let I=0;I<v.length/2;I++)C=v[I*2],R=v[I*2+1],_=Math.min(_,C),b=Math.max(b,C),O=Math.min(O,R),U=Math.max(U,R);return{x:_,y:O,width:b-_,height:U-O}}}return Sd.Line=d,d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(d),a.Factory.addGetterSetter(d,"closed",!1),a.Factory.addGetterSetter(d,"bezier",!1),a.Factory.addGetterSetter(d,"tension",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(d,"points",[],(0,r.getNumberArrayValidator)()),Sd}var Ed={},Yp={},X2;function qS(){return X2||(X2=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(d,m,v)=>{let _,b;const U=v/2;_=0;for(let C=0;C<20;C++)b=U*a.tValues[20][C]+U,_+=a.cValues[20][C]*r(d,m,b);return U*_};a.getCubicArcLength=t;const n=(d,m,v)=>{v===void 0&&(v=1);const _=d[0]-2*d[1]+d[2],b=m[0]-2*m[1]+m[2],O=2*d[1]-2*d[0],U=2*m[1]-2*m[0],C=4*(_*_+b*b),R=4*(_*O+b*U),I=O*O+U*U;if(C===0)return v*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(m[2]-m[0],2));const L=R/(2*C),F=I/C,D=v+L,x=F-L*L,z=D*D+x>0?Math.sqrt(D*D+x):0,H=L*L+x>0?Math.sqrt(L*L+x):0,Y=L+Math.sqrt(L*L+x)!==0?x*Math.log(Math.abs((D+z)/(L+H))):0;return Math.sqrt(C)/2*(D*z-L*H+Y)};a.getQuadraticArcLength=n;function r(d,m,v){const _=u(1,v,d),b=u(1,v,m),O=_*_+b*b;return Math.sqrt(O)}const u=(d,m,v)=>{const _=v.length-1;let b,O;if(_===0)return 0;if(d===0){O=0;for(let U=0;U<=_;U++)O+=a.binomialCoefficients[_][U]*Math.pow(1-m,_-U)*Math.pow(m,U)*v[U];return O}else{b=new Array(_);for(let U=0;U<_;U++)b[U]=_*(v[U+1]-v[U]);return u(d-1,m,b)}},c=(d,m,v)=>{let _=1,b=d/m,O=(d-v(b))/m,U=0;for(;_>.001;){const C=v(b+O),R=Math.abs(d-C)/m;if(R<_)_=R,b+=O;else{const I=v(b-O),L=Math.abs(d-I)/m;L<_?(_=L,b-=O):O/=2}if(U++,U>500)break}return b};a.t2length=c}(Yp)),Yp}var Q2;function F1(){if(Q2)return Ed;Q2=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Path=void 0;const a=je(),t=ha(),n=Pe(),r=qS();let u=class Us extends t.Shape{constructor(d){super(d),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Us.parsePathData(this.data()),this.pathLength=Us.getPathLength(this.dataArray)}_sceneFunc(d){const m=this.dataArray;d.beginPath();let v=!1;for(let z=0;z<m.length;z++){const H=m[z].command,Y=m[z].points;switch(H){case"L":d.lineTo(Y[0],Y[1]);break;case"M":d.moveTo(Y[0],Y[1]);break;case"C":d.bezierCurveTo(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case"Q":d.quadraticCurveTo(Y[0],Y[1],Y[2],Y[3]);break;case"A":var _=Y[0],b=Y[1],O=Y[2],U=Y[3],C=Y[4],R=Y[5],I=Y[6],L=Y[7],F=O>U?O:U,D=O>U?1:O/U,x=O>U?U/O:1;d.translate(_,b),d.rotate(I),d.scale(D,x),d.arc(0,0,F,C,C+R,1-L),d.scale(1/D,1/x),d.rotate(-I),d.translate(-_,-b);break;case"z":v=!0,d.closePath();break}}!v&&!this.hasFill()?d.strokeShape(this):d.fillStrokeShape(this)}getSelfRect(){let d=[];this.dataArray.forEach(function(C){if(C.command==="A"){const R=C.points[4],I=C.points[5],L=C.points[4]+I;let F=Math.PI/180;if(Math.abs(R-L)<F&&(F=Math.abs(R-L)),I<0)for(let D=R-F;D>L;D-=F){const x=Us.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],D,0);d.push(x.x,x.y)}else for(let D=R+F;D<L;D+=F){const x=Us.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],D,0);d.push(x.x,x.y)}}else if(C.command==="C")for(let R=0;R<=1;R+=.01){const I=Us.getPointOnCubicBezier(R,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);d.push(I.x,I.y)}else d=d.concat(C.points)});let m=d[0],v=d[0],_=d[1],b=d[1],O,U;for(let C=0;C<d.length/2;C++)O=d[C*2],U=d[C*2+1],isNaN(O)||(m=Math.min(m,O),v=Math.max(v,O)),isNaN(U)||(_=Math.min(_,U),b=Math.max(b,U));return{x:m,y:_,width:v-m,height:b-_}}getLength(){return this.pathLength}getPointAtLength(d){return Us.getPointAtLengthOfDataArray(d,this.dataArray)}static getLineLength(d,m,v,_){return Math.sqrt((v-d)*(v-d)+(_-m)*(_-m))}static getPathLength(d){let m=0;for(let v=0;v<d.length;++v)m+=d[v].pathLength;return m}static getPointAtLengthOfDataArray(d,m){let v,_=0,b=m.length;if(!b)return null;for(;_<b&&d>m[_].pathLength;)d-=m[_].pathLength,++_;if(_===b)return v=m[_-1].points.slice(-2),{x:v[0],y:v[1]};if(d<.01)return v=m[_].points.slice(0,2),{x:v[0],y:v[1]};const O=m[_],U=O.points;switch(O.command){case"L":return Us.getPointOnLine(d,O.start.x,O.start.y,U[0],U[1]);case"C":return Us.getPointOnCubicBezier((0,r.t2length)(d,Us.getPathLength(m),z=>(0,r.getCubicArcLength)([O.start.x,U[0],U[2],U[4]],[O.start.y,U[1],U[3],U[5]],z)),O.start.x,O.start.y,U[0],U[1],U[2],U[3],U[4],U[5]);case"Q":return Us.getPointOnQuadraticBezier((0,r.t2length)(d,Us.getPathLength(m),z=>(0,r.getQuadraticArcLength)([O.start.x,U[0],U[2]],[O.start.y,U[1],U[3]],z)),O.start.x,O.start.y,U[0],U[1],U[2],U[3]);case"A":var C=U[0],R=U[1],I=U[2],L=U[3],F=U[4],D=U[5],x=U[6];return F+=D*d/O.pathLength,Us.getPointOnEllipticalArc(C,R,I,L,F,x)}return null}static getPointOnLine(d,m,v,_,b,O,U){O=O??m,U=U??v;const C=this.getLineLength(m,v,_,b);if(C<1e-10)return{x:m,y:v};if(_===m)return{x:O,y:U+(b>v?d:-d)};const R=(b-v)/(_-m),I=Math.sqrt(d*d/(1+R*R))*(_<m?-1:1),L=R*I;if(Math.abs(U-v-R*(O-m))<1e-10)return{x:O+I,y:U+L};const F=((O-m)*(_-m)+(U-v)*(b-v))/(C*C),D=m+F*(_-m),x=v+F*(b-v),z=this.getLineLength(O,U,D,x),H=Math.sqrt(d*d-z*z),Y=Math.sqrt(H*H/(1+R*R))*(_<m?-1:1),j=R*Y;return{x:D+Y,y:x+j}}static getPointOnCubicBezier(d,m,v,_,b,O,U,C,R){function I(H){return H*H*H}function L(H){return 3*H*H*(1-H)}function F(H){return 3*H*(1-H)*(1-H)}function D(H){return(1-H)*(1-H)*(1-H)}const x=C*I(d)+O*L(d)+_*F(d)+m*D(d),z=R*I(d)+U*L(d)+b*F(d)+v*D(d);return{x,y:z}}static getPointOnQuadraticBezier(d,m,v,_,b,O,U){function C(D){return D*D}function R(D){return 2*D*(1-D)}function I(D){return(1-D)*(1-D)}const L=O*C(d)+_*R(d)+m*I(d),F=U*C(d)+b*R(d)+v*I(d);return{x:L,y:F}}static getPointOnEllipticalArc(d,m,v,_,b,O){const U=Math.cos(O),C=Math.sin(O),R={x:v*Math.cos(b),y:_*Math.sin(b)};return{x:d+(R.x*U-R.y*C),y:m+(R.x*C+R.y*U)}}static parsePathData(d){if(!d)return[];let m=d;const v=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];m=m.replace(new RegExp(" ","g"),",");for(var _=0;_<v.length;_++)m=m.replace(new RegExp(v[_],"g"),"|"+v[_]);const b=m.split("|"),O=[],U=[];let C=0,R=0;const I=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let L;for(_=1;_<b.length;_++){let T=b[_],q=T.charAt(0);for(T=T.slice(1),U.length=0;L=I.exec(T);)U.push(L[0]);const G=[];for(let Q=0,et=U.length;Q<et;Q++){if(U[Q]==="00"){G.push(0,0);continue}const rt=parseFloat(U[Q]);isNaN(rt)?G.push(0):G.push(rt)}for(;G.length>0&&!isNaN(G[0]);){let Q="",et=[];const rt=C,pt=R;var F,D,x,z,H,Y,j,V,w,M;switch(q){case"l":C+=G.shift(),R+=G.shift(),Q="L",et.push(C,R);break;case"L":C=G.shift(),R=G.shift(),et.push(C,R);break;case"m":var k=G.shift(),K=G.shift();if(C+=k,R+=K,Q="M",O.length>2&&O[O.length-1].command==="z"){for(let X=O.length-2;X>=0;X--)if(O[X].command==="M"){C=O[X].points[0]+k,R=O[X].points[1]+K;break}}et.push(C,R),q="l";break;case"M":C=G.shift(),R=G.shift(),Q="M",et.push(C,R),q="L";break;case"h":C+=G.shift(),Q="L",et.push(C,R);break;case"H":C=G.shift(),Q="L",et.push(C,R);break;case"v":R+=G.shift(),Q="L",et.push(C,R);break;case"V":R=G.shift(),Q="L",et.push(C,R);break;case"C":et.push(G.shift(),G.shift(),G.shift(),G.shift()),C=G.shift(),R=G.shift(),et.push(C,R);break;case"c":et.push(C+G.shift(),R+G.shift(),C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),Q="C",et.push(C,R);break;case"S":D=C,x=R,F=O[O.length-1],F.command==="C"&&(D=C+(C-F.points[2]),x=R+(R-F.points[3])),et.push(D,x,G.shift(),G.shift()),C=G.shift(),R=G.shift(),Q="C",et.push(C,R);break;case"s":D=C,x=R,F=O[O.length-1],F.command==="C"&&(D=C+(C-F.points[2]),x=R+(R-F.points[3])),et.push(D,x,C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),Q="C",et.push(C,R);break;case"Q":et.push(G.shift(),G.shift()),C=G.shift(),R=G.shift(),et.push(C,R);break;case"q":et.push(C+G.shift(),R+G.shift()),C+=G.shift(),R+=G.shift(),Q="Q",et.push(C,R);break;case"T":D=C,x=R,F=O[O.length-1],F.command==="Q"&&(D=C+(C-F.points[0]),x=R+(R-F.points[1])),C=G.shift(),R=G.shift(),Q="Q",et.push(D,x,C,R);break;case"t":D=C,x=R,F=O[O.length-1],F.command==="Q"&&(D=C+(C-F.points[0]),x=R+(R-F.points[1])),C+=G.shift(),R+=G.shift(),Q="Q",et.push(D,x,C,R);break;case"A":z=G.shift(),H=G.shift(),Y=G.shift(),j=G.shift(),V=G.shift(),w=C,M=R,C=G.shift(),R=G.shift(),Q="A",et=this.convertEndpointToCenterParameterization(w,M,C,R,j,V,z,H,Y);break;case"a":z=G.shift(),H=G.shift(),Y=G.shift(),j=G.shift(),V=G.shift(),w=C,M=R,C+=G.shift(),R+=G.shift(),Q="A",et=this.convertEndpointToCenterParameterization(w,M,C,R,j,V,z,H,Y);break}O.push({command:Q||q,points:et,start:{x:rt,y:pt},pathLength:this.calcLength(rt,pt,Q||q,et)})}(q==="z"||q==="Z")&&O.push({command:"z",points:[],start:void 0,pathLength:0})}return O}static calcLength(d,m,v,_){let b,O,U,C;const R=Us;switch(v){case"L":return R.getLineLength(d,m,_[0],_[1]);case"C":return(0,r.getCubicArcLength)([d,_[0],_[2],_[4]],[m,_[1],_[3],_[5]],1);case"Q":return(0,r.getQuadraticArcLength)([d,_[0],_[2]],[m,_[1],_[3]],1);case"A":b=0;var I=_[4],L=_[5],F=_[4]+L,D=Math.PI/180;if(Math.abs(I-F)<D&&(D=Math.abs(I-F)),O=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],I,0),L<0)for(C=I-D;C>F;C-=D)U=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],C,0),b+=R.getLineLength(O.x,O.y,U.x,U.y),O=U;else for(C=I+D;C<F;C+=D)U=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],C,0),b+=R.getLineLength(O.x,O.y,U.x,U.y),O=U;return U=R.getPointOnEllipticalArc(_[0],_[1],_[2],_[3],F,0),b+=R.getLineLength(O.x,O.y,U.x,U.y),b}return 0}static convertEndpointToCenterParameterization(d,m,v,_,b,O,U,C,R){const I=R*(Math.PI/180),L=Math.cos(I)*(d-v)/2+Math.sin(I)*(m-_)/2,F=-1*Math.sin(I)*(d-v)/2+Math.cos(I)*(m-_)/2,D=L*L/(U*U)+F*F/(C*C);D>1&&(U*=Math.sqrt(D),C*=Math.sqrt(D));let x=Math.sqrt((U*U*(C*C)-U*U*(F*F)-C*C*(L*L))/(U*U*(F*F)+C*C*(L*L)));b===O&&(x*=-1),isNaN(x)&&(x=0);const z=x*U*F/C,H=x*-C*L/U,Y=(d+v)/2+Math.cos(I)*z-Math.sin(I)*H,j=(m+_)/2+Math.sin(I)*z+Math.cos(I)*H,V=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},w=function(G,Q){return(G[0]*Q[0]+G[1]*Q[1])/(V(G)*V(Q))},M=function(G,Q){return(G[0]*Q[1]<G[1]*Q[0]?-1:1)*Math.acos(w(G,Q))},k=M([1,0],[(L-z)/U,(F-H)/C]),K=[(L-z)/U,(F-H)/C],T=[(-1*L-z)/U,(-1*F-H)/C];let q=M(K,T);return w(K,T)<=-1&&(q=Math.PI),w(K,T)>=1&&(q=0),O===0&&q>0&&(q=q-2*Math.PI),O===1&&q<0&&(q=q+2*Math.PI),[Y,j,U,C,k,q,I,O]}};return Ed.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(u),a.Factory.addGetterSetter(u,"data"),Ed}var Z2;function KS(){if(Z2)return _d;Z2=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.Arrow=void 0;const a=je(),t=m4(),n=Qe(),r=Pe(),u=F1();class c extends t.Line{_sceneFunc(m){super._sceneFunc(m);const v=Math.PI*2,_=this.points();let b=_;const O=this.tension()!==0&&_.length>4;O&&(b=this.getTensionPoints());const U=this.pointerLength(),C=_.length;let R,I;if(O){const D=[b[b.length-4],b[b.length-3],b[b.length-2],b[b.length-1],_[C-2],_[C-1]],x=u.Path.calcLength(b[b.length-4],b[b.length-3],"C",D),z=u.Path.getPointOnQuadraticBezier(Math.min(1,1-U/x),D[0],D[1],D[2],D[3],D[4],D[5]);R=_[C-2]-z.x,I=_[C-1]-z.y}else R=_[C-2]-_[C-4],I=_[C-1]-_[C-3];const L=(Math.atan2(I,R)+v)%v,F=this.pointerWidth();this.pointerAtEnding()&&(m.save(),m.beginPath(),m.translate(_[C-2],_[C-1]),m.rotate(L),m.moveTo(0,0),m.lineTo(-U,F/2),m.lineTo(-U,-F/2),m.closePath(),m.restore(),this.__fillStroke(m)),this.pointerAtBeginning()&&(m.save(),m.beginPath(),m.translate(_[0],_[1]),O?(R=(b[0]+b[2])/2-_[0],I=(b[1]+b[3])/2-_[1]):(R=_[2]-_[0],I=_[3]-_[1]),m.rotate((Math.atan2(-I,-R)+v)%v),m.moveTo(0,0),m.lineTo(-U,F/2),m.lineTo(-U,-F/2),m.closePath(),m.restore(),this.__fillStroke(m))}__fillStroke(m){const v=this.dashEnabled();v&&(this.attrs.dashEnabled=!1,m.setLineDash([])),m.fillStrokeShape(this),v&&(this.attrs.dashEnabled=!0)}getSelfRect(){const m=super.getSelfRect(),v=this.pointerWidth()/2;return{x:m.x,y:m.y-v,width:m.width,height:m.height+v*2}}}return _d.Arrow=c,c.prototype.className="Arrow",(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"pointerLength",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerWidth",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerAtBeginning",!1),a.Factory.addGetterSetter(c,"pointerAtEnding",!0),_d}var Td={},W2;function YS(){if(W2)return Td;W2=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.Circle=void 0;const a=je(),t=ha(),n=Qe(),r=Pe();class u extends t.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius()!==d/2&&this.radius(d/2)}setHeight(d){this.radius()!==d/2&&this.radius(d/2)}}return Td.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),Td}var bd={},J2;function XS(){if(J2)return bd;J2=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.Ellipse=void 0;const a=je(),t=ha(),n=Qe(),r=Pe();class u extends t.Shape{_sceneFunc(d){const m=this.radiusX(),v=this.radiusY();d.beginPath(),d.save(),m!==v&&d.scale(1,v/m),d.arc(0,0,m,0,Math.PI*2,!1),d.restore(),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(d){this.radiusX(d/2)}setHeight(d){this.radiusY(d/2)}}return bd.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"radiusY",0,(0,n.getNumberValidator)()),bd}var Ad={},$2;function QS(){if($2)return Ad;$2=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.Image=void 0;const a=yi(),t=je(),n=ha(),r=Pe(),u=Qe();class c extends n.Shape{constructor(m){super(m),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",v=>{this._removeImageLoad(v.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const m=this.image();m&&m.complete||m&&m.readyState===4||m&&m.addEventListener&&m.addEventListener("load",this._loadListener)}_removeImageLoad(m){m&&m.removeEventListener&&m.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const m=!!this.cornerRadius(),v=this.hasShadow();return m&&v?!0:super._useBufferCanvas(!0)}_sceneFunc(m){const v=this.getWidth(),_=this.getHeight(),b=this.cornerRadius(),O=this.attrs.image;let U;if(O){const C=this.attrs.cropWidth,R=this.attrs.cropHeight;C&&R?U=[O,this.cropX(),this.cropY(),C,R,0,0,v,_]:U=[O,0,0,v,_]}(this.hasFill()||this.hasStroke()||b)&&(m.beginPath(),b?a.Util.drawRoundedRectPath(m,v,_,b):m.rect(0,0,v,_),m.closePath(),m.fillStrokeShape(this)),O&&(b&&m.clip(),m.drawImage.apply(m,U))}_hitFunc(m){const v=this.width(),_=this.height(),b=this.cornerRadius();m.beginPath(),b?a.Util.drawRoundedRectPath(m,v,_,b):m.rect(0,0,v,_),m.closePath(),m.fillStrokeShape(this)}getWidth(){var m,v;return(m=this.attrs.width)!==null&&m!==void 0?m:(v=this.image())===null||v===void 0?void 0:v.width}getHeight(){var m,v;return(m=this.attrs.height)!==null&&m!==void 0?m:(v=this.image())===null||v===void 0?void 0:v.height}static fromURL(m,v,_=null){const b=a.Util.createImageElement();b.onload=function(){const O=new c({image:b});v(O)},b.onerror=_,b.crossOrigin="Anonymous",b.src=m}}return Ad.Image=c,c.prototype.className="Image",(0,r._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,u.getNumberValidator)()),Ad}var kc={},tv;function ZS(){if(tv)return kc;tv=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.Tag=kc.Label=void 0;const a=je(),t=ha(),n=H1(),r=Qe(),u=Pe(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d="Change.konva",m="none",v="up",_="right",b="down",O="left",U=c.length;let C=class extends n.Group{constructor(L){super(L),this.on("add.konva",function(F){this._addListeners(F.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(L){let F=this,D;const x=function(){F._sync()};for(D=0;D<U;D++)L.on(c[D]+d,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let L=this.getText(),F=this.getTag(),D,x,z,H,Y,j,V;if(L&&F){switch(D=L.width(),x=L.height(),z=F.pointerDirection(),H=F.pointerWidth(),V=F.pointerHeight(),Y=0,j=0,z){case v:Y=D/2,j=-1*V;break;case _:Y=D+H,j=x/2;break;case b:Y=D/2,j=x+V;break;case O:Y=-1*H,j=x/2;break}F.setAttrs({x:-1*Y,y:-1*j,width:D,height:x}),L.setAttrs({x:-1*Y,y:-1*j})}}};kc.Label=C,C.prototype.className="Label",(0,u._registerNode)(C);class R extends t.Shape{_sceneFunc(L){const F=this.width(),D=this.height(),x=this.pointerDirection(),z=this.pointerWidth(),H=this.pointerHeight(),Y=this.cornerRadius();let j=0,V=0,w=0,M=0;typeof Y=="number"?j=V=w=M=Math.min(Y,F/2,D/2):(j=Math.min(Y[0]||0,F/2,D/2),V=Math.min(Y[1]||0,F/2,D/2),M=Math.min(Y[2]||0,F/2,D/2),w=Math.min(Y[3]||0,F/2,D/2)),L.beginPath(),L.moveTo(j,0),x===v&&(L.lineTo((F-z)/2,0),L.lineTo(F/2,-1*H),L.lineTo((F+z)/2,0)),L.lineTo(F-V,0),L.arc(F-V,V,V,Math.PI*3/2,0,!1),x===_&&(L.lineTo(F,(D-H)/2),L.lineTo(F+z,D/2),L.lineTo(F,(D+H)/2)),L.lineTo(F,D-M),L.arc(F-M,D-M,M,0,Math.PI/2,!1),x===b&&(L.lineTo((F+z)/2,D),L.lineTo(F/2,D+H),L.lineTo((F-z)/2,D)),L.lineTo(w,D),L.arc(w,D-w,w,Math.PI/2,Math.PI,!1),x===O&&(L.lineTo(0,(D+H)/2),L.lineTo(-1*z,D/2),L.lineTo(0,(D-H)/2)),L.lineTo(0,j),L.arc(j,j,j,Math.PI,Math.PI*3/2,!1),L.closePath(),L.fillStrokeShape(this)}getSelfRect(){let L=0,F=0,D=this.pointerWidth(),x=this.pointerHeight(),z=this.pointerDirection(),H=this.width(),Y=this.height();return z===v?(F-=x,Y+=x):z===b?Y+=x:z===O?(L-=D*1.5,H+=D):z===_&&(H+=D*1.5),{x:L,y:F,width:H,height:Y}}}return kc.Tag=R,R.prototype.className="Tag",(0,u._registerNode)(R),a.Factory.addGetterSetter(R,"pointerDirection",m),a.Factory.addGetterSetter(R,"pointerWidth",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(R,"pointerHeight",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(R,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),kc}var Cd={},ev;function p4(){if(ev)return Cd;ev=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.Rect=void 0;const a=je(),t=ha(),n=Pe(),r=yi(),u=Qe();class c extends t.Shape{_sceneFunc(m){const v=this.cornerRadius(),_=this.width(),b=this.height();m.beginPath(),v?r.Util.drawRoundedRectPath(m,_,b,v):m.rect(0,0,_,b),m.closePath(),m.fillStrokeShape(this)}}return Cd.Rect=c,c.prototype.className="Rect",(0,n._registerNode)(c),a.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),Cd}var Rd={},nv;function WS(){if(nv)return Rd;nv=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.RegularPolygon=void 0;const a=je(),t=ha(),n=Qe(),r=Pe();let u=class extends t.Shape{_sceneFunc(d){const m=this._getPoints();d.beginPath(),d.moveTo(m[0].x,m[0].y);for(let v=1;v<m.length;v++)d.lineTo(m[v].x,m[v].y);d.closePath(),d.fillStrokeShape(this)}_getPoints(){const d=this.attrs.sides,m=this.attrs.radius||0,v=[];for(let _=0;_<d;_++)v.push({x:m*Math.sin(_*2*Math.PI/d),y:-1*m*Math.cos(_*2*Math.PI/d)});return v}getSelfRect(){const d=this._getPoints();let m=d[0].x,v=d[0].y,_=d[0].x,b=d[0].y;return d.forEach(O=>{m=Math.min(m,O.x),v=Math.max(v,O.x),_=Math.min(_,O.y),b=Math.max(b,O.y)}),{x:m,y:_,width:v-m,height:b-_}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return Rd.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"sides",0,(0,n.getNumberValidator)()),Rd}var wd={},iv;function JS(){if(iv)return wd;iv=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Ring=void 0;const a=je(),t=ha(),n=Qe(),r=Pe(),u=Math.PI*2;let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.innerRadius(),0,u,!1),m.moveTo(this.outerRadius(),0),m.arc(0,0,this.outerRadius(),u,0,!0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}};return wd.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,n.getNumberValidator)()),wd}var Nd={},av;function $S(){if(av)return Nd;av=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Sprite=void 0;const a=je(),t=ha(),n=j1(),r=Qe(),u=Pe();let c=class extends t.Shape{constructor(m){super(m),this._updated=!0,this.anim=new n.Animation(()=>{const v=this._updated;return this._updated=!1,v}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(m){const v=this.animation(),_=this.frameIndex(),b=_*4,O=this.animations()[v],U=this.frameOffsets(),C=O[b+0],R=O[b+1],I=O[b+2],L=O[b+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(m.beginPath(),m.rect(0,0,I,L),m.closePath(),m.fillStrokeShape(this)),F)if(U){const D=U[v],x=_*2;m.drawImage(F,C,R,I,L,D[x+0],D[x+1],I,L)}else m.drawImage(F,C,R,I,L,0,0,I,L)}_hitFunc(m){const v=this.animation(),_=this.frameIndex(),b=_*4,O=this.animations()[v],U=this.frameOffsets(),C=O[b+2],R=O[b+3];if(m.beginPath(),U){const I=U[v],L=_*2;m.rect(I[L+0],I[L+1],C,R)}else m.rect(0,0,C,R);m.closePath(),m.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const m=this;this.interval=setInterval(function(){m._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const m=this.getLayer();this.anim.setLayers(m),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const m=this.frameIndex(),v=this.animation(),_=this.animations(),b=_[v],O=b.length/4;m<O-1?this.frameIndex(m+1):this.frameIndex(0)}};return Nd.Sprite=c,c.prototype.className="Sprite",(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"animation"),a.Factory.addGetterSetter(c,"animations"),a.Factory.addGetterSetter(c,"frameOffsets"),a.Factory.addGetterSetter(c,"image"),a.Factory.addGetterSetter(c,"frameIndex",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"frameRate",17,(0,r.getNumberValidator)()),a.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Nd}var Dd={},sv;function tE(){if(sv)return Dd;sv=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.Star=void 0;const a=je(),t=ha(),n=Qe(),r=Pe();let u=class extends t.Shape{_sceneFunc(d){const m=this.innerRadius(),v=this.outerRadius(),_=this.numPoints();d.beginPath(),d.moveTo(0,0-v);for(let b=1;b<_*2;b++){const O=b%2===0?v:m,U=O*Math.sin(b*Math.PI/_),C=-1*O*Math.cos(b*Math.PI/_);d.lineTo(U,C)}d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Dd.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"numPoints",5,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"outerRadius",0,(0,n.getNumberValidator)()),Dd}var Bh={},rv;function y4(){if(rv)return Bh;rv=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.Text=void 0,Bh.stringToArray=d;const a=yi(),t=je(),n=ha(),r=Pe(),u=Qe(),c=Pe();function d(Tt){return[...Tt].reduce((lt,dt,Nt,Vt)=>{if(new RegExp("\\p{Emoji}","u").test(dt)){const nt=Vt[Nt+1];nt&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(nt)?(lt.push(dt+nt),Vt[Nt+1]=""):lt.push(dt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(dt+(Vt[Nt+1]||""))?lt.push(dt+Vt[Nt+1]):Nt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(dt)?lt[lt.length-1]+=dt:dt&&lt.push(dt);return lt},[])}const m="auto",v="center",_="inherit",b="justify",O="Change.konva",U="2d",C="-",R="left",I="text",L="Text",F="top",D="bottom",x="middle",z="normal",H="px ",Y=" ",j="right",V="rtl",w="word",M="char",k="none",K="…",T=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],q=T.length;function G(Tt){return Tt.split(",").map(lt=>{lt=lt.trim();const dt=lt.indexOf(" ")>=0,Nt=lt.indexOf('"')>=0||lt.indexOf("'")>=0;return dt&&!Nt&&(lt=`"${lt}"`),lt}).join(", ")}let Q;function et(){return Q||(Q=a.Util.createCanvasElement().getContext(U),Q)}function rt(Tt){Tt.fillText(this._partialText,this._partialTextX,this._partialTextY)}function pt(Tt){Tt.setAttr("miterLimit",2),Tt.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X(Tt){return Tt=Tt||{},!Tt.fillLinearGradientColorStops&&!Tt.fillRadialGradientColorStops&&!Tt.fillPatternImage&&(Tt.fill=Tt.fill||"black"),Tt}class st extends n.Shape{constructor(lt){super(X(lt)),this._partialTextX=0,this._partialTextY=0;for(let dt=0;dt<q;dt++)this.on(T[dt]+O,this._setTextData);this._setTextData()}_sceneFunc(lt){const dt=this.textArr,Nt=dt.length;if(!this.text())return;let Vt=this.padding(),nt=this.fontSize(),ht=this.lineHeight()*nt,Dt=this.verticalAlign(),xt=this.direction(),jt=0,Kt=this.align(),le=this.getWidth(),de=this.letterSpacing(),ne=this.fill(),Fe=this.textDecoration(),me=Fe.indexOf("underline")!==-1,Ze=Fe.indexOf("line-through")!==-1,Oi;xt=xt===_?lt.direction:xt;let rn=ht/2,bi=x;if(r.Konva._fixTextRendering){const Ce=this.measureSize("M");bi="alphabetic",rn=(Ce.fontBoundingBoxAscent-Ce.fontBoundingBoxDescent)/2+ht/2}var He=0,Ln=0;for(xt===V&&lt.setAttr("direction",xt),lt.setAttr("font",this._getContextFont()),lt.setAttr("textBaseline",bi),lt.setAttr("textAlign",R),Dt===x?jt=(this.getHeight()-Nt*ht-Vt*2)/2:Dt===D&&(jt=this.getHeight()-Nt*ht-Vt*2),lt.translate(Vt,jt+Vt),Oi=0;Oi<Nt;Oi++){var He=0,Ln=0,De=dt[Oi],Mi=De.text,Ae=De.width,qe=De.lastInParagraph,Fn,Vi;if(lt.save(),Kt===j?He+=le-Ae-Vt*2:Kt===v&&(He+=(le-Ae-Vt*2)/2),me){lt.save(),lt.beginPath();const vn=r.Konva._fixTextRendering?Math.round(nt/4):Math.round(nt/2),We=He,Me=rn+Ln+vn;lt.moveTo(We,Me),Fn=Mi.split(" ").length-1,Vi=Kt===b&&!qe?le-Vt*2:Ae,lt.lineTo(We+Math.round(Vi),Me),lt.lineWidth=nt/15;const ji=this._getLinearGradient();lt.strokeStyle=ji||ne,lt.stroke(),lt.restore()}if(Ze){lt.save(),lt.beginPath();const vn=r.Konva._fixTextRendering?-Math.round(nt/4):0;lt.moveTo(He,rn+Ln+vn),Fn=Mi.split(" ").length-1,Vi=Kt===b&&!qe?le-Vt*2:Ae,lt.lineTo(He+Math.round(Vi),rn+Ln+vn),lt.lineWidth=nt/15;const We=this._getLinearGradient();lt.strokeStyle=We||ne,lt.stroke(),lt.restore()}if(xt!==V&&(de!==0||Kt===b)){Fn=Mi.split(" ").length-1;const vn=d(Mi);for(let We=0;We<vn.length;We++){const Me=vn[We];Me===" "&&!qe&&Kt===b&&(He+=(le-Vt*2-Ae)/Fn),this._partialTextX=He,this._partialTextY=rn+Ln,this._partialText=Me,lt.fillStrokeShape(this),He+=this.measureSize(Me).width+de}}else de!==0&&lt.setAttr("letterSpacing",`${de}px`),this._partialTextX=He,this._partialTextY=rn+Ln,this._partialText=Mi,lt.fillStrokeShape(this);lt.restore(),Nt>1&&(rn+=ht)}}_hitFunc(lt){const dt=this.getWidth(),Nt=this.getHeight();lt.beginPath(),lt.rect(0,0,dt,Nt),lt.closePath(),lt.fillStrokeShape(this)}setText(lt){const dt=a.Util._isString(lt)?lt:lt==null?"":lt+"";return this._setAttr(I,dt),this}getWidth(){return this.attrs.width===m||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===m||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(lt){var dt,Nt,Vt,nt,ht,Dt,xt,jt,Kt,le,de;let ne=et(),Fe=this.fontSize(),me;ne.save(),ne.font=this._getContextFont(),me=ne.measureText(lt),ne.restore();const Ze=Fe/100;return{actualBoundingBoxAscent:(dt=me.actualBoundingBoxAscent)!==null&&dt!==void 0?dt:71.58203125*Ze,actualBoundingBoxDescent:(Nt=me.actualBoundingBoxDescent)!==null&&Nt!==void 0?Nt:0,actualBoundingBoxLeft:(Vt=me.actualBoundingBoxLeft)!==null&&Vt!==void 0?Vt:-7.421875*Ze,actualBoundingBoxRight:(nt=me.actualBoundingBoxRight)!==null&&nt!==void 0?nt:75.732421875*Ze,alphabeticBaseline:(ht=me.alphabeticBaseline)!==null&&ht!==void 0?ht:0,emHeightAscent:(Dt=me.emHeightAscent)!==null&&Dt!==void 0?Dt:100*Ze,emHeightDescent:(xt=me.emHeightDescent)!==null&&xt!==void 0?xt:-20*Ze,fontBoundingBoxAscent:(jt=me.fontBoundingBoxAscent)!==null&&jt!==void 0?jt:91*Ze,fontBoundingBoxDescent:(Kt=me.fontBoundingBoxDescent)!==null&&Kt!==void 0?Kt:21*Ze,hangingBaseline:(le=me.hangingBaseline)!==null&&le!==void 0?le:72.80000305175781*Ze,ideographicBaseline:(de=me.ideographicBaseline)!==null&&de!==void 0?de:-21*Ze,width:me.width,height:Fe}}_getContextFont(){return this.fontStyle()+Y+this.fontVariant()+Y+(this.fontSize()+H)+G(this.fontFamily())}_addTextLine(lt){this.align()===b&&(lt=lt.trim());const Nt=this._getTextWidth(lt);return this.textArr.push({text:lt,width:Nt,lastInParagraph:!1})}_getTextWidth(lt){const dt=this.letterSpacing(),Nt=lt.length;return et().measureText(lt).width+dt*Nt}_setTextData(){let lt=this.text().split(`
`),dt=+this.fontSize(),Nt=0,Vt=this.lineHeight()*dt,nt=this.attrs.width,ht=this.attrs.height,Dt=nt!==m&&nt!==void 0,xt=ht!==m&&ht!==void 0,jt=this.padding(),Kt=nt-jt*2,le=ht-jt*2,de=0,ne=this.wrap(),Fe=ne!==k,me=ne!==M&&Fe,Ze=this.ellipsis();this.textArr=[],et().font=this._getContextFont();const Oi=Ze?this._getTextWidth(K):0;for(let rn=0,bi=lt.length;rn<bi;++rn){let He=lt[rn],Ln=this._getTextWidth(He);if(Dt&&Ln>Kt)for(;He.length>0;){let De=0,Mi=d(He).length,Ae="",qe=0;for(;De<Mi;){const Fn=De+Mi>>>1,Vi=d(He),Ce=Vi.slice(0,Fn+1).join(""),qn=this._getTextWidth(Ce);(Ze&&xt&&de+Vt>le?qn+Oi:qn)<=Kt?(De=Fn+1,Ae=Ce,qe=qn):Mi=Fn}if(Ae){if(me){const Ce=d(He),qn=d(Ae),vn=Ce[qn.length],We=vn===Y||vn===C;let Me;if(We&&qe<=Kt)Me=qn.length;else{const ji=qn.lastIndexOf(Y),vi=qn.lastIndexOf(C);Me=Math.max(ji,vi)+1}Me>0&&(De=Me,Ae=Ce.slice(0,De).join(""),qe=this._getTextWidth(Ae))}if(Ae=Ae.trimRight(),this._addTextLine(Ae),Nt=Math.max(Nt,qe),de+=Vt,this._shouldHandleEllipsis(de)){this._tryToAddEllipsisToLastLine();break}if(He=d(He).slice(De).join("").trimLeft(),He.length>0&&(Ln=this._getTextWidth(He),Ln<=Kt)){this._addTextLine(He),de+=Vt,Nt=Math.max(Nt,Ln);break}}else break}else this._addTextLine(He),de+=Vt,Nt=Math.max(Nt,Ln),this._shouldHandleEllipsis(de)&&rn<bi-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),xt&&de+Vt>le)break}this.textHeight=dt,this.textWidth=Nt}_shouldHandleEllipsis(lt){const dt=+this.fontSize(),Nt=this.lineHeight()*dt,Vt=this.attrs.height,nt=Vt!==m&&Vt!==void 0,ht=this.padding(),Dt=Vt-ht*2;return!(this.wrap()!==k)||nt&&lt+Nt>Dt}_tryToAddEllipsisToLastLine(){const lt=this.attrs.width,dt=lt!==m&&lt!==void 0,Nt=this.padding(),Vt=lt-Nt*2,nt=this.ellipsis(),ht=this.textArr[this.textArr.length-1];!ht||!nt||(dt&&(this._getTextWidth(ht.text+K)<Vt||(ht.text=ht.text.slice(0,ht.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ht.text+K))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const lt=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,dt=this.hasShadow();return lt&&dt?!0:super._useBufferCanvas()}}return Bh.Text=st,st.prototype._fillFunc=rt,st.prototype._strokeFunc=pt,st.prototype.className=L,st.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(st),t.Factory.overWriteSetter(st,"width",(0,u.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(st,"height",(0,u.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(st,"direction",_),t.Factory.addGetterSetter(st,"fontFamily","Arial"),t.Factory.addGetterSetter(st,"fontSize",12,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(st,"fontStyle",z),t.Factory.addGetterSetter(st,"fontVariant",z),t.Factory.addGetterSetter(st,"padding",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(st,"align",R),t.Factory.addGetterSetter(st,"verticalAlign",F),t.Factory.addGetterSetter(st,"lineHeight",1,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(st,"wrap",w),t.Factory.addGetterSetter(st,"ellipsis",!1,(0,u.getBooleanValidator)()),t.Factory.addGetterSetter(st,"letterSpacing",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(st,"text","",(0,u.getStringValidator)()),t.Factory.addGetterSetter(st,"textDecoration",""),Bh}var xd={},lv;function eE(){if(lv)return xd;lv=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.TextPath=void 0;const a=yi(),t=je(),n=ha(),r=F1(),u=y4(),c=Qe(),d=Pe(),m="",v="normal";function _(U){U.fillText(this.partialText,0,0)}function b(U){U.strokeText(this.partialText,0,0)}let O=class extends n.Shape{constructor(C){super(C),this.dummyCanvas=a.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(C){if(!this.attrs.data)return null;const R=this.pathLength;return C-1>R?null:r.Path.getPointAtLengthOfDataArray(C,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(C){C.setAttr("font",this._getContextFont()),C.setAttr("textBaseline",this.textBaseline()),C.setAttr("textAlign","left"),C.save();const R=this.textDecoration(),I=this.fill(),L=this.fontSize(),F=this.glyphInfo;R==="underline"&&C.beginPath();for(let D=0;D<F.length;D++){C.save();const x=F[D].p0;C.translate(x.x,x.y),C.rotate(F[D].rotation),this.partialText=F[D].text,C.fillStrokeShape(this),R==="underline"&&(D===0&&C.moveTo(0,L/2+1),C.lineTo(L,L/2+1)),C.restore()}R==="underline"&&(C.strokeStyle=I,C.lineWidth=L/20,C.stroke()),C.restore()}_hitFunc(C){C.beginPath();const R=this.glyphInfo;if(R.length>=1){const I=R[0].p0;C.moveTo(I.x,I.y)}for(let I=0;I<R.length;I++){const L=R[I].p1;C.lineTo(L.x,L.y)}C.setAttr("lineWidth",this.fontSize()),C.setAttr("strokeStyle",this.colorKey),C.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(C){return u.Text.prototype.setText.call(this,C)}_getContextFont(){return u.Text.prototype._getContextFont.call(this)}_getTextSize(C){const I=this.dummyCanvas.getContext("2d");I.save(),I.font=this._getContextFont();const L=I.measureText(C);return I.restore(),{width:L.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:C,height:R}=this._getTextSize(this.attrs.text);if(this.textWidth=C,this.textHeight=R,this.glyphInfo=[],!this.attrs.data)return null;const I=this.letterSpacing(),L=this.align(),F=this.kerningFunc(),D=Math.max(this.textWidth+((this.attrs.text||"").length-1)*I,0);let x=0;L==="center"&&(x=Math.max(0,this.pathLength/2-D/2)),L==="right"&&(x=Math.max(0,this.pathLength-D));const z=(0,u.stringToArray)(this.text());let H=x;for(let Y=0;Y<z.length;Y++){const j=this._getPointAtLength(H);if(!j)return;let V=this._getTextSize(z[Y]).width+I;if(z[Y]===" "&&L==="justify"){const q=this.text().split(" ").length-1;V+=(this.pathLength-D)/q}const w=this._getPointAtLength(H+V);if(!w)return;const M=r.Path.getLineLength(j.x,j.y,w.x,w.y);let k=0;if(F)try{k=F(z[Y-1],z[Y])*this.fontSize()}catch{k=0}j.x+=k,w.x+=k,this.textWidth+=k;const K=r.Path.getPointOnLine(k+M/2,j.x,j.y,w.x,w.y),T=Math.atan2(w.y-j.y,w.x-j.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:z[Y],rotation:T,p0:j,p1:w}),H+=V}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const C=[];this.glyphInfo.forEach(function(H){C.push(H.p0.x),C.push(H.p0.y),C.push(H.p1.x),C.push(H.p1.y)});let R=C[0]||0,I=C[0]||0,L=C[1]||0,F=C[1]||0,D,x;for(let H=0;H<C.length/2;H++)D=C[H*2],x=C[H*2+1],R=Math.min(R,D),I=Math.max(I,D),L=Math.min(L,x),F=Math.max(F,x);const z=this.fontSize();return{x:R-z/2,y:L-z/2,width:I-R+z,height:F-L+z}}destroy(){return a.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return xd.TextPath=O,O.prototype._fillFunc=_,O.prototype._strokeFunc=b,O.prototype._fillFuncHit=_,O.prototype._strokeFuncHit=b,O.prototype.className="TextPath",O.prototype._attrsAffectingSize=["text","fontSize","data"],(0,d._registerNode)(O),t.Factory.addGetterSetter(O,"data"),t.Factory.addGetterSetter(O,"fontFamily","Arial"),t.Factory.addGetterSetter(O,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(O,"fontStyle",v),t.Factory.addGetterSetter(O,"align","left"),t.Factory.addGetterSetter(O,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(O,"textBaseline","middle"),t.Factory.addGetterSetter(O,"fontVariant",v),t.Factory.addGetterSetter(O,"text",m),t.Factory.addGetterSetter(O,"textDecoration",""),t.Factory.addGetterSetter(O,"kerningFunc",void 0),xd}var Od={},ov;function nE(){if(ov)return Od;ov=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.Transformer=void 0;const a=yi(),t=je(),n=Ti(),r=ha(),u=p4(),c=H1(),d=Pe(),m=Qe(),v=Pe(),_="tr-konva",b=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(V=>V+`.${_}`).join(" "),O="nodesRect",U=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],C={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},R="ontouchstart"in d.Konva._global;function I(V,w,M){if(V==="rotater")return M;w+=a.Util.degToRad(C[V]||0);const k=(a.Util.radToDeg(w)%360+360)%360;return a.Util._inRange(k,315+22.5,360)||a.Util._inRange(k,0,22.5)?"ns-resize":a.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":a.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":a.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":a.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":a.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":a.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":a.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const L=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function F(V){return{x:V.x+V.width/2*Math.cos(V.rotation)+V.height/2*Math.sin(-V.rotation),y:V.y+V.height/2*Math.cos(V.rotation)+V.width/2*Math.sin(V.rotation)}}function D(V,w,M){const k=M.x+(V.x-M.x)*Math.cos(w)-(V.y-M.y)*Math.sin(w),K=M.y+(V.x-M.x)*Math.sin(w)+(V.y-M.y)*Math.cos(w);return{...V,rotation:V.rotation+w,x:k,y:K}}function x(V,w){const M=F(V);return D(V,w,M)}function z(V,w,M){let k=w;for(let K=0;K<V.length;K++){const T=d.Konva.getAngle(V[K]),q=Math.abs(T-w)%(Math.PI*2);Math.min(q,Math.PI*2-q)<M&&(k=T)}return k}let H=0,Y=class extends c.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(b,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return _+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const M=w.filter(K=>K.isAncestorOf(this)?(a.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=M,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(K=>{const T=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(K._attrsAffectingSize.length){const q=K._attrsAffectingSize.map(G=>G+"Change."+this._getEventNamespace()).join(" ");K.on(q,T)}K.on(U.map(q=>q+`.${this._getEventNamespace()}`).join(" "),T),K.on(`absoluteTransformChange.${this._getEventNamespace()}`,T),this._proxyDrag(K)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let M;w.on(`dragstart.${this._getEventNamespace()}`,k=>{M=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(k,!1)}),w.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!M)return;const K=w.getAbsolutePosition(),T=K.x-M.x,q=K.y-M.y;this.nodes().forEach(G=>{if(G===w||G.isDragging())return;const Q=G.getAbsolutePosition();G.setAbsolutePosition({x:Q.x+T,y:Q.y+q}),G.startDrag(k)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(O),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(O,this.__getNodeRect)}__getNodeShape(w,M=this.rotation(),k){const K=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),T=w.getAbsoluteScale(k),q=w.getAbsolutePosition(k),G=K.x*T.x-w.offsetX()*T.x,Q=K.y*T.y-w.offsetY()*T.y,et=(d.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),rt={x:q.x+G*Math.cos(et)+Q*Math.sin(-et),y:q.y+Q*Math.cos(et)+G*Math.sin(et),width:K.width*T.x,height:K.height*T.y,rotation:et};return D(rt,-d.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const M=[];this.nodes().map(et=>{const rt=et.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),pt=[{x:rt.x,y:rt.y},{x:rt.x+rt.width,y:rt.y},{x:rt.x+rt.width,y:rt.y+rt.height},{x:rt.x,y:rt.y+rt.height}],X=et.getAbsoluteTransform();pt.forEach(function(st){const Tt=X.point(st);M.push(Tt)})});const k=new a.Transform;k.rotate(-d.Konva.getAngle(this.rotation()));let K=1/0,T=1/0,q=-1/0,G=-1/0;M.forEach(function(et){const rt=k.point(et);K===void 0&&(K=q=rt.x,T=G=rt.y),K=Math.min(K,rt.x),T=Math.min(T,rt.y),q=Math.max(q,rt.x),G=Math.max(G,rt.y)}),k.invert();const Q=k.point({x:K,y:T});return{x:Q.x,y:Q.y,width:q-K,height:G-T,rotation:d.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),L.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const M=new u.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:R?10:"auto"}),k=this;M.on("mousedown touchstart",function(K){k._handleMouseDown(K)}),M.on("dragstart",K=>{M.stopDrag(),K.cancelBubble=!0}),M.on("dragend",K=>{K.cancelBubble=!0}),M.on("mouseenter",()=>{const K=d.Konva.getAngle(this.rotation()),T=this.rotateAnchorCursor(),q=I(w,K,T);M.getStage().content&&(M.getStage().content.style.cursor=q),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const w=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,k){const K=k.getParent(),T=K.padding();M.beginPath(),M.rect(-T,-T,k.width()+T*2,k.height()+T*2),M.moveTo(k.width()/2,-T),K.rotateEnabled()&&K.rotateLineVisible()&&M.lineTo(k.width()/2,-K.rotateAnchorOffset()*a.Util._sign(k.height())-T),M.fillStrokeShape(k)},hitFunc:(M,k)=>{if(!this.shouldOverdrawWholeArea())return;const K=this.padding();M.beginPath(),M.rect(-K,-K,k.width()+K*2,k.height()+K*2),M.fillStrokeShape(k)}});this.add(w),this._proxyDrag(w),w.on("dragstart",M=>{M.cancelBubble=!0}),w.on("dragmove",M=>{M.cancelBubble=!0}),w.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const M=this._getNodeRect(),k=M.width,K=M.height,T=Math.sqrt(Math.pow(k,2)+Math.pow(K,2));this.sin=Math.abs(K/T),this.cos=Math.abs(k/T),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const q=w.target.getAbsolutePosition(),G=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:G.x-q.x,y:G.y-q.y},H++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(Q=>{Q._fire("transformstart",{evt:w.evt,target:Q})})}_handleMouseMove(w){let M,k,K;const T=this.findOne("."+this._movingAnchorName),q=T.getStage();q.setPointersPositions(w);const G=q.getPointerPosition();let Q={x:G.x-this._anchorDragOffset.x,y:G.y-this._anchorDragOffset.y};const et=T.getAbsolutePosition();this.anchorDragBoundFunc()&&(Q=this.anchorDragBoundFunc()(et,Q,w)),T.setAbsolutePosition(Q);const rt=T.getAbsolutePosition();if(et.x===rt.x&&et.y===rt.y)return;if(this._movingAnchorName==="rotater"){const Dt=this._getNodeRect();M=T.x()-Dt.width/2,k=-T.y()+Dt.height/2;let xt=Math.atan2(-k,M)+Math.PI/2;Dt.height<0&&(xt-=Math.PI);const Kt=d.Konva.getAngle(this.rotation())+xt,le=d.Konva.getAngle(this.rotationSnapTolerance()),ne=z(this.rotationSnaps(),Kt,le)-Dt.rotation,Fe=x(Dt,ne);this._fitNodesInto(Fe,w);return}const pt=this.shiftBehavior();let X;pt==="inverted"?X=this.keepRatio()&&!w.shiftKey:pt==="none"?X=this.keepRatio():X=this.keepRatio()||w.shiftKey;var Nt=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(X){var st=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};K=Math.sqrt(Math.pow(st.x-T.x(),2)+Math.pow(st.y-T.y(),2));var Tt=this.findOne(".top-left").x()>st.x?-1:1,lt=this.findOne(".top-left").y()>st.y?-1:1;M=K*this.cos*Tt,k=K*this.sin*lt,this.findOne(".top-left").x(st.x-M),this.findOne(".top-left").y(st.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(T.y());else if(this._movingAnchorName==="top-right"){if(X){var st=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};K=Math.sqrt(Math.pow(T.x()-st.x,2)+Math.pow(st.y-T.y(),2));var Tt=this.findOne(".top-right").x()<st.x?-1:1,lt=this.findOne(".top-right").y()>st.y?-1:1;M=K*this.cos*Tt,k=K*this.sin*lt,this.findOne(".top-right").x(st.x+M),this.findOne(".top-right").y(st.y-k)}var dt=T.position();this.findOne(".top-left").y(dt.y),this.findOne(".bottom-right").x(dt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(T.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(T.x());else if(this._movingAnchorName==="bottom-left"){if(X){var st=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};K=Math.sqrt(Math.pow(st.x-T.x(),2)+Math.pow(T.y()-st.y,2));var Tt=st.x<T.x()?-1:1,lt=T.y()<st.y?-1:1;M=K*this.cos*Tt,k=K*this.sin*lt,T.x(st.x-M),T.y(st.y+k)}dt=T.position(),this.findOne(".top-left").x(dt.x),this.findOne(".bottom-right").y(dt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(T.y());else if(this._movingAnchorName==="bottom-right"){if(X){var st=Nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};K=Math.sqrt(Math.pow(T.x()-st.x,2)+Math.pow(T.y()-st.y,2));var Tt=this.findOne(".bottom-right").x()<st.x?-1:1,lt=this.findOne(".bottom-right").y()<st.y?-1:1;M=K*this.cos*Tt,k=K*this.sin*lt,this.findOne(".bottom-right").x(st.x+M),this.findOne(".bottom-right").y(st.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Nt=this.centeredScaling()||w.altKey;if(Nt){const Dt=this.findOne(".top-left"),xt=this.findOne(".bottom-right"),jt=Dt.x(),Kt=Dt.y(),le=this.getWidth()-xt.x(),de=this.getHeight()-xt.y();xt.move({x:-jt,y:-Kt}),Dt.move({x:le,y:de})}const Vt=this.findOne(".top-left").getAbsolutePosition();M=Vt.x,k=Vt.y;const nt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ht=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:k,width:nt,height:ht,rotation:d.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();H--,this._fire("transformend",{evt:w,target:k}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),k&&this._nodes.forEach(K=>{var T;K._fire("transformend",{evt:w,target:K}),(T=K.getLayer())===null||T===void 0||T.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,M){const k=this._getNodeRect(),K=1;if(a.Util._inRange(w.width,-this.padding()*2-K,K)){this.update();return}if(a.Util._inRange(w.height,-this.padding()*2-K,K)){this.update();return}const T=new a.Transform;if(T.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const X=T.point({x:-this.padding()*2,y:0});w.x+=X.x,w.y+=X.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const X=T.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const X=T.point({x:0,y:-this.padding()*2});w.x+=X.x,w.y+=X.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const X=T.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const X=this.boundBoxFunc()(k,w);X?w=X:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const q=1e7,G=new a.Transform;G.translate(k.x,k.y),G.rotate(k.rotation),G.scale(k.width/q,k.height/q);const Q=new a.Transform,et=w.width/q,rt=w.height/q;this.flipEnabled()===!1?(Q.translate(w.x,w.y),Q.rotate(w.rotation),Q.translate(w.width<0?w.width:0,w.height<0?w.height:0),Q.scale(Math.abs(et),Math.abs(rt))):(Q.translate(w.x,w.y),Q.rotate(w.rotation),Q.scale(et,rt));const pt=Q.multiply(G.invert());this._nodes.forEach(X=>{var st;const Tt=X.getParent().getAbsoluteTransform(),lt=X.getTransform().copy();lt.translate(X.offsetX(),X.offsetY());const dt=new a.Transform;dt.multiply(Tt.copy().invert()).multiply(pt).multiply(Tt).multiply(lt);const Nt=dt.decompose();X.setAttrs(Nt),(st=X.getLayer())===null||st===void 0||st.batchDraw()}),this.rotation(a.Util._getRotation(w.rotation)),this._nodes.forEach(X=>{this._fire("transform",{evt:M,target:X}),X._fire("transform",{evt:M,target:X})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,M){this.findOne(w).setAttrs(M)}update(){var w;const M=this._getNodeRect();this.rotation(a.Util._getRotation(M.rotation));const k=M.width,K=M.height,T=this.enabledAnchors(),q=this.resizeEnabled(),G=this.padding(),Q=this.anchorSize(),et=this.find("._anchor");et.forEach(pt=>{pt.setAttrs({width:Q,height:Q,offsetX:Q/2,offsetY:Q/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Q/2+G,offsetY:Q/2+G,visible:q&&T.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:Q/2+G,visible:q&&T.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:Q/2-G,offsetY:Q/2+G,visible:q&&T.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:K/2,offsetX:Q/2+G,visible:q&&T.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:K/2,offsetX:Q/2-G,visible:q&&T.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:K,offsetX:Q/2+G,offsetY:Q/2-G,visible:q&&T.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:K,offsetY:Q/2-G,visible:q&&T.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:K,offsetX:Q/2-G,offsetY:Q/2-G,visible:q&&T.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*a.Util._sign(K)-G,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:K,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const rt=this.anchorStyleFunc();rt&&et.forEach(pt=>{rt(pt)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(w){return n.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Od.Transformer=Y,Y.isTransforming=()=>H>0;function j(V){return V instanceof Array||a.Util.warn("enabledAnchors value should be an array"),V instanceof Array&&V.forEach(function(w){L.indexOf(w)===-1&&a.Util.warn("Unknown anchor name: "+w+". Available names are: "+L.join(", "))}),V||[]}return Y.prototype.className="Transformer",(0,v._registerNode)(Y),t.Factory.addGetterSetter(Y,"enabledAnchors",L,j),t.Factory.addGetterSetter(Y,"flipEnabled",!0,(0,m.getBooleanValidator)()),t.Factory.addGetterSetter(Y,"resizeEnabled",!0),t.Factory.addGetterSetter(Y,"anchorSize",10,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"rotateEnabled",!0),t.Factory.addGetterSetter(Y,"rotateLineVisible",!0),t.Factory.addGetterSetter(Y,"rotationSnaps",[]),t.Factory.addGetterSetter(Y,"rotateAnchorOffset",50,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(Y,"rotationSnapTolerance",5,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderEnabled",!0),t.Factory.addGetterSetter(Y,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(Y,"anchorStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"anchorFill","white"),t.Factory.addGetterSetter(Y,"anchorCornerRadius",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(Y,"borderStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderDash"),t.Factory.addGetterSetter(Y,"keepRatio",!0),t.Factory.addGetterSetter(Y,"shiftBehavior","default"),t.Factory.addGetterSetter(Y,"centeredScaling",!1),t.Factory.addGetterSetter(Y,"ignoreStroke",!1),t.Factory.addGetterSetter(Y,"padding",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"nodes"),t.Factory.addGetterSetter(Y,"node"),t.Factory.addGetterSetter(Y,"boundBoxFunc"),t.Factory.addGetterSetter(Y,"anchorDragBoundFunc"),t.Factory.addGetterSetter(Y,"anchorStyleFunc"),t.Factory.addGetterSetter(Y,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(Y,"useSingleNodeRotation",!0),t.Factory.backCompat(Y,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Od}var Md={},uv;function iE(){if(uv)return Md;uv=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.Wedge=void 0;const a=je(),t=ha(),n=Pe(),r=Qe(),u=Pe();let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),m.lineTo(0,0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius(m/2)}setHeight(m){this.radius(m/2)}};return Md.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"radius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1),a.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Md}var Vd={},cv;function aE(){if(cv)return Vd;cv=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Blur=void 0;const a=je(),t=Ti(),n=Qe();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const u=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(v,_){const b=v.data,O=v.width,U=v.height;let C,R,I,L,F,D,x,z,H,Y,j,V,w,M,k,K,T,q,G,Q,et,rt,pt,X;const st=_+_+1,Tt=O-1,lt=U-1,dt=_+1,Nt=dt*(dt+1)/2,Vt=new r,nt=u[_],ht=c[_];let Dt=null,xt=Vt,jt=null,Kt=null;for(I=1;I<st;I++)xt=xt.next=new r,I===dt&&(Dt=xt);for(xt.next=Vt,x=D=0,R=0;R<U;R++){for(K=T=q=G=z=H=Y=j=0,V=dt*(Q=b[D]),w=dt*(et=b[D+1]),M=dt*(rt=b[D+2]),k=dt*(pt=b[D+3]),z+=Nt*Q,H+=Nt*et,Y+=Nt*rt,j+=Nt*pt,xt=Vt,I=0;I<dt;I++)xt.r=Q,xt.g=et,xt.b=rt,xt.a=pt,xt=xt.next;for(I=1;I<dt;I++)L=D+((Tt<I?Tt:I)<<2),z+=(xt.r=Q=b[L])*(X=dt-I),H+=(xt.g=et=b[L+1])*X,Y+=(xt.b=rt=b[L+2])*X,j+=(xt.a=pt=b[L+3])*X,K+=Q,T+=et,q+=rt,G+=pt,xt=xt.next;for(jt=Vt,Kt=Dt,C=0;C<O;C++)b[D+3]=pt=j*nt>>ht,pt!==0?(pt=255/pt,b[D]=(z*nt>>ht)*pt,b[D+1]=(H*nt>>ht)*pt,b[D+2]=(Y*nt>>ht)*pt):b[D]=b[D+1]=b[D+2]=0,z-=V,H-=w,Y-=M,j-=k,V-=jt.r,w-=jt.g,M-=jt.b,k-=jt.a,L=x+((L=C+_+1)<Tt?L:Tt)<<2,K+=jt.r=b[L],T+=jt.g=b[L+1],q+=jt.b=b[L+2],G+=jt.a=b[L+3],z+=K,H+=T,Y+=q,j+=G,jt=jt.next,V+=Q=Kt.r,w+=et=Kt.g,M+=rt=Kt.b,k+=pt=Kt.a,K-=Q,T-=et,q-=rt,G-=pt,Kt=Kt.next,D+=4;x+=O}for(C=0;C<O;C++){for(T=q=G=K=H=Y=j=z=0,D=C<<2,V=dt*(Q=b[D]),w=dt*(et=b[D+1]),M=dt*(rt=b[D+2]),k=dt*(pt=b[D+3]),z+=Nt*Q,H+=Nt*et,Y+=Nt*rt,j+=Nt*pt,xt=Vt,I=0;I<dt;I++)xt.r=Q,xt.g=et,xt.b=rt,xt.a=pt,xt=xt.next;for(F=O,I=1;I<=_;I++)D=F+C<<2,z+=(xt.r=Q=b[D])*(X=dt-I),H+=(xt.g=et=b[D+1])*X,Y+=(xt.b=rt=b[D+2])*X,j+=(xt.a=pt=b[D+3])*X,K+=Q,T+=et,q+=rt,G+=pt,xt=xt.next,I<lt&&(F+=O);for(D=C,jt=Vt,Kt=Dt,R=0;R<U;R++)L=D<<2,b[L+3]=pt=j*nt>>ht,pt>0?(pt=255/pt,b[L]=(z*nt>>ht)*pt,b[L+1]=(H*nt>>ht)*pt,b[L+2]=(Y*nt>>ht)*pt):b[L]=b[L+1]=b[L+2]=0,z-=V,H-=w,Y-=M,j-=k,V-=jt.r,w-=jt.g,M-=jt.b,k-=jt.a,L=C+((L=R+dt)<lt?L:lt)*O<<2,z+=K+=jt.r=b[L],H+=T+=jt.g=b[L+1],Y+=q+=jt.b=b[L+2],j+=G+=jt.a=b[L+3],jt=jt.next,V+=Q=Kt.r,w+=et=Kt.g,M+=rt=Kt.b,k+=pt=Kt.a,K-=Q,T-=et,q-=rt,G-=pt,Kt=Kt.next,D+=O}}const m=function(_){const b=Math.round(this.blurRadius());b>0&&d(_,b)};return Vd.Blur=m,a.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Vd}var Ud={},hv;function sE(){if(hv)return Ud;hv=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Brighten=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=this.brightness()*255,d=u.data,m=d.length;for(let v=0;v<m;v+=4)d[v]+=c,d[v+1]+=c,d[v+2]+=c};return Ud.Brighten=r,a.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Ud}var Id={},fv;function rE(){if(fv)return Id;fv=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Contrast=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=Math.pow((this.contrast()+100)/100,2),d=u.data,m=d.length;let v=150,_=150,b=150;for(let O=0;O<m;O+=4)v=d[O],_=d[O+1],b=d[O+2],v/=255,v-=.5,v*=c,v+=.5,v*=255,_/=255,_-=.5,_*=c,_+=.5,_*=255,b/=255,b-=.5,b*=c,b+=.5,b*=255,v=v<0?0:v>255?255:v,_=_<0?0:_>255?255:_,b=b<0?0:b>255?255:b,d[O]=v,d[O+1]=_,d[O+2]=b};return Id.Contrast=r,a.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Id}var Ld={},dv;function lE(){if(dv)return Ld;dv=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Emboss=void 0;const a=je(),t=Ti(),n=yi(),r=Qe(),u=function(c){const d=this.embossStrength()*10,m=this.embossWhiteLevel()*255,v=this.embossDirection(),_=this.embossBlend(),b=c.data,O=c.width,U=c.height,C=O*4;let R=0,I=0,L=U;switch(v){case"top-left":R=-1,I=-1;break;case"top":R=-1,I=0;break;case"top-right":R=-1,I=1;break;case"right":R=0,I=1;break;case"bottom-right":R=1,I=1;break;case"bottom":R=1,I=0;break;case"bottom-left":R=1,I=-1;break;case"left":R=0,I=-1;break;default:n.Util.error("Unknown emboss direction: "+v)}do{const F=(L-1)*C;let D=R;L+D<1&&(D=0),L+D>U&&(D=0);const x=(L-1+D)*O*4;let z=O;do{const H=F+(z-1)*4;let Y=I;z+Y<1&&(Y=0),z+Y>O&&(Y=0);const j=x+(z-1+Y)*4,V=b[H]-b[j],w=b[H+1]-b[j+1],M=b[H+2]-b[j+2];let k=V;const K=k>0?k:-k,T=w>0?w:-w,q=M>0?M:-M;if(T>K&&(k=w),q>K&&(k=M),k*=d,_){const G=b[H]+k,Q=b[H+1]+k,et=b[H+2]+k;b[H]=G>255?255:G<0?0:G,b[H+1]=Q>255?255:Q<0?0:Q,b[H+2]=et>255?255:et<0?0:et}else{let G=m-k;G<0?G=0:G>255&&(G=255),b[H]=b[H+1]=b[H+2]=G}}while(--z)}while(--L)};return Ld.Emboss=u,a.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,a.Factory.afterSetFilter),Ld}var Pd={},gv;function oE(){if(gv)return Pd;gv=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Enhance=void 0;const a=je(),t=Ti(),n=Qe();function r(c,d,m,v,_){const b=m-d,O=_-v;if(b===0)return v+O/2;if(O===0)return v;let U=(c-d)/b;return U=O*U+v,U}const u=function(c){const d=c.data,m=d.length;let v=d[0],_=v,b,O=d[1],U=O,C,R=d[2],I=R,L;const F=this.enhance();if(F===0)return;for(let k=0;k<m;k+=4)b=d[k+0],b<v?v=b:b>_&&(_=b),C=d[k+1],C<O?O=C:C>U&&(U=C),L=d[k+2],L<R?R=L:L>I&&(I=L);_===v&&(_=255,v=0),U===O&&(U=255,O=0),I===R&&(I=255,R=0);let D,x,z,H,Y,j,V,w,M;F>0?(x=_+F*(255-_),z=v-F*(v-0),Y=U+F*(255-U),j=O-F*(O-0),w=I+F*(255-I),M=R-F*(R-0)):(D=(_+v)*.5,x=_+F*(_-D),z=v+F*(v-D),H=(U+O)*.5,Y=U+F*(U-H),j=O+F*(O-H),V=(I+R)*.5,w=I+F*(I-V),M=R+F*(R-V));for(let k=0;k<m;k+=4)d[k+0]=r(d[k+0],v,_,z,x),d[k+1]=r(d[k+1],O,U,j,Y),d[k+2]=r(d[k+2],R,I,M,w)};return Pd.Enhance=u,a.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Pd}var zd={},mv;function uE(){if(mv)return zd;mv=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.Grayscale=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=.34*n[u]+.5*n[u+1]+.16*n[u+2];n[u]=c,n[u+1]=c,n[u+2]=c}};return zd.Grayscale=a,zd}var Bd={},pv;function cE(){if(pv)return Bd;pv=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.HSL=void 0;const a=je(),t=Ti(),n=Qe();a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter);const r=function(u){const c=u.data,d=c.length,m=1,v=Math.pow(2,this.saturation()),_=Math.abs(this.hue()+360)%360,b=this.luminance()*127,O=m*v*Math.cos(_*Math.PI/180),U=m*v*Math.sin(_*Math.PI/180),C=.299*m+.701*O+.167*U,R=.587*m-.587*O+.33*U,I=.114*m-.114*O-.497*U,L=.299*m-.299*O-.328*U,F=.587*m+.413*O+.035*U,D=.114*m-.114*O+.293*U,x=.299*m-.3*O+1.25*U,z=.587*m-.586*O-1.05*U,H=.114*m+.886*O-.2*U;let Y,j,V,w;for(let M=0;M<d;M+=4)Y=c[M+0],j=c[M+1],V=c[M+2],w=c[M+3],c[M+0]=C*Y+R*j+I*V+b,c[M+1]=L*Y+F*j+D*V+b,c[M+2]=x*Y+z*j+H*V+b,c[M+3]=w};return Bd.HSL=r,Bd}var kd={},yv;function hE(){if(yv)return kd;yv=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.HSV=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=u.data,d=c.length,m=Math.pow(2,this.value()),v=Math.pow(2,this.saturation()),_=Math.abs(this.hue()+360)%360,b=m*v*Math.cos(_*Math.PI/180),O=m*v*Math.sin(_*Math.PI/180),U=.299*m+.701*b+.167*O,C=.587*m-.587*b+.33*O,R=.114*m-.114*b-.497*O,I=.299*m-.299*b-.328*O,L=.587*m+.413*b+.035*O,F=.114*m-.114*b+.293*O,D=.299*m-.3*b+1.25*O,x=.587*m-.586*b-1.05*O,z=.114*m+.886*b-.2*O;let H,Y,j,V;for(let w=0;w<d;w+=4)H=c[w+0],Y=c[w+1],j=c[w+2],V=c[w+3],c[w+0]=U*H+C*Y+R*j,c[w+1]=I*H+L*Y+F*j,c[w+2]=D*H+x*Y+z*j,c[w+3]=V};return kd.HSV=r,a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),kd}var Gd={},vv;function fE(){if(vv)return Gd;vv=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.Invert=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4)n[u]=255-n[u],n[u+1]=255-n[u+1],n[u+2]=255-n[u+2]};return Gd.Invert=a,Gd}var Hd={},_v;function dE(){if(_v)return Hd;_v=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Kaleidoscope=void 0;const a=je(),t=Ti(),n=yi(),r=Qe(),u=function(m,v,_){const b=m.data,O=v.data,U=m.width,C=m.height,R=_.polarCenterX||U/2,I=_.polarCenterY||C/2;let L=Math.sqrt(R*R+I*I),F=U-R,D=C-I;const x=Math.sqrt(F*F+D*D);L=x>L?x:L;const z=C,H=U,Y=360/H*Math.PI/180;for(let j=0;j<H;j+=1){const V=Math.sin(j*Y),w=Math.cos(j*Y);for(let M=0;M<z;M+=1){F=Math.floor(R+L*M/z*w),D=Math.floor(I+L*M/z*V);let k=(D*U+F)*4;const K=b[k+0],T=b[k+1],q=b[k+2],G=b[k+3];k=(j+M*U)*4,O[k+0]=K,O[k+1]=T,O[k+2]=q,O[k+3]=G}}},c=function(m,v,_){const b=m.data,O=v.data,U=m.width,C=m.height,R=_.polarCenterX||U/2,I=_.polarCenterY||C/2;let L=Math.sqrt(R*R+I*I),F=U-R,D=C-I;const x=Math.sqrt(F*F+D*D);L=x>L?x:L;const z=C,H=U,Y=0;let j,V;for(F=0;F<U;F+=1)for(D=0;D<C;D+=1){const w=F-R,M=D-I,k=Math.sqrt(w*w+M*M)*z/L;let K=(Math.atan2(M,w)*180/Math.PI+360+Y)%360;K=K*H/360,j=Math.floor(K),V=Math.floor(k);let T=(V*U+j)*4;const q=b[T+0],G=b[T+1],Q=b[T+2],et=b[T+3];T=(D*U+F)*4,O[T+0]=q,O[T+1]=G,O[T+2]=Q,O[T+3]=et}},d=function(m){const v=m.width,_=m.height;let b,O,U,C,R,I,L,F,D,x,z=Math.round(this.kaleidoscopePower());const H=Math.round(this.kaleidoscopeAngle()),Y=Math.floor(v*(H%360)/360);if(z<1)return;const j=n.Util.createCanvasElement();j.width=v,j.height=_;const V=j.getContext("2d").getImageData(0,0,v,_);n.Util.releaseCanvas(j),u(m,V,{polarCenterX:v/2,polarCenterY:_/2});let w=v/Math.pow(2,z);for(;w<=8;)w=w*2,z-=1;w=Math.ceil(w);let M=w,k=0,K=M,T=1;for(Y+w>v&&(k=M,K=0,T=-1),O=0;O<_;O+=1)for(b=k;b!==K;b+=T)U=Math.round(b+Y)%v,D=(v*O+U)*4,R=V.data[D+0],I=V.data[D+1],L=V.data[D+2],F=V.data[D+3],x=(v*O+b)*4,V.data[x+0]=R,V.data[x+1]=I,V.data[x+2]=L,V.data[x+3]=F;for(O=0;O<_;O+=1)for(M=Math.floor(w),C=0;C<z;C+=1){for(b=0;b<M+1;b+=1)D=(v*O+b)*4,R=V.data[D+0],I=V.data[D+1],L=V.data[D+2],F=V.data[D+3],x=(v*O+M*2-b-1)*4,V.data[x+0]=R,V.data[x+1]=I,V.data[x+2]=L,V.data[x+3]=F;M*=2}c(V,m,{})};return Hd.Kaleidoscope=d,a.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),Hd}var jd={},Sv;function gE(){if(Sv)return jd;Sv=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.Mask=void 0;const a=je(),t=Ti(),n=Qe();function r(U,C,R){let I=(R*U.width+C)*4;const L=[];return L.push(U.data[I++],U.data[I++],U.data[I++],U.data[I++]),L}function u(U,C){return Math.sqrt(Math.pow(U[0]-C[0],2)+Math.pow(U[1]-C[1],2)+Math.pow(U[2]-C[2],2))}function c(U){const C=[0,0,0];for(let R=0;R<U.length;R++)C[0]+=U[R][0],C[1]+=U[R][1],C[2]+=U[R][2];return C[0]/=U.length,C[1]/=U.length,C[2]/=U.length,C}function d(U,C){const R=r(U,0,0),I=r(U,U.width-1,0),L=r(U,0,U.height-1),F=r(U,U.width-1,U.height-1),D=C||10;if(u(R,I)<D&&u(I,F)<D&&u(F,L)<D&&u(L,R)<D){const x=c([I,R,F,L]),z=[];for(let H=0;H<U.width*U.height;H++){const Y=u(x,[U.data[H*4],U.data[H*4+1],U.data[H*4+2]]);z[H]=Y<D?0:255}return z}}function m(U,C){for(let R=0;R<U.width*U.height;R++)U.data[4*R+3]=C[R]}function v(U,C,R){const I=[1,1,1,1,0,1,1,1,1],L=Math.round(Math.sqrt(I.length)),F=Math.floor(L/2),D=[];for(let x=0;x<R;x++)for(let z=0;z<C;z++){const H=x*C+z;let Y=0;for(let j=0;j<L;j++)for(let V=0;V<L;V++){const w=x+j-F,M=z+V-F;if(w>=0&&w<R&&M>=0&&M<C){const k=w*C+M,K=I[j*L+V];Y+=U[k]*K}}D[H]=Y===255*8?255:0}return D}function _(U,C,R){const I=[1,1,1,1,1,1,1,1,1],L=Math.round(Math.sqrt(I.length)),F=Math.floor(L/2),D=[];for(let x=0;x<R;x++)for(let z=0;z<C;z++){const H=x*C+z;let Y=0;for(let j=0;j<L;j++)for(let V=0;V<L;V++){const w=x+j-F,M=z+V-F;if(w>=0&&w<R&&M>=0&&M<C){const k=w*C+M,K=I[j*L+V];Y+=U[k]*K}}D[H]=Y>=255*4?255:0}return D}function b(U,C,R){const I=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],L=Math.round(Math.sqrt(I.length)),F=Math.floor(L/2),D=[];for(let x=0;x<R;x++)for(let z=0;z<C;z++){const H=x*C+z;let Y=0;for(let j=0;j<L;j++)for(let V=0;V<L;V++){const w=x+j-F,M=z+V-F;if(w>=0&&w<R&&M>=0&&M<C){const k=w*C+M,K=I[j*L+V];Y+=U[k]*K}}D[H]=Y}return D}const O=function(U){const C=this.threshold();let R=d(U,C);return R&&(R=v(R,U.width,U.height),R=_(R,U.width,U.height),R=b(R,U.width,U.height),m(U,R)),U};return jd.Mask=O,a.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),jd}var Fd={},Ev;function mE(){if(Ev)return Fd;Ev=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Noise=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=this.noise()*255,d=u.data,m=d.length,v=c/2;for(let _=0;_<m;_+=4)d[_+0]+=v-2*v*Math.random(),d[_+1]+=v-2*v*Math.random(),d[_+2]+=v-2*v*Math.random()};return Fd.Noise=r,a.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Fd}var qd={},Tv;function pE(){if(Tv)return qd;Tv=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Pixelate=void 0;const a=je(),t=yi(),n=Ti(),r=Qe(),u=function(c){let d=Math.ceil(this.pixelSize()),m=c.width,v=c.height,_,b,O,U,C,R,I,L=Math.ceil(m/d),F=Math.ceil(v/d),D,x,z,H,Y,j,V,w=c.data;if(d<=0){t.Util.error("pixelSize value can not be <= 0");return}for(Y=0;Y<L;Y+=1)for(j=0;j<F;j+=1){for(U=0,C=0,R=0,I=0,D=Y*d,x=D+d,z=j*d,H=z+d,V=0,_=D;_<x;_+=1)if(!(_>=m))for(b=z;b<H;b+=1)b>=v||(O=(m*b+_)*4,U+=w[O+0],C+=w[O+1],R+=w[O+2],I+=w[O+3],V+=1);for(U=U/V,C=C/V,R=R/V,I=I/V,_=D;_<x;_+=1)if(!(_>=m))for(b=z;b<H;b+=1)b>=v||(O=(m*b+_)*4,w[O+0]=U,w[O+1]=C,w[O+2]=R,w[O+3]=I)}};return qd.Pixelate=u,a.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),qd}var Kd={},bv;function yE(){if(bv)return Kd;bv=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Posterize=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=Math.round(this.levels()*254)+1,d=u.data,m=d.length,v=255/c;for(let _=0;_<m;_+=1)d[_]=Math.floor(d[_]/v)*v};return Kd.Posterize=r,a.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Kd}var Yd={},Av;function vE(){if(Av)return Yd;Av=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.RGB=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=u.data,d=c.length,m=this.red(),v=this.green(),_=this.blue();for(let b=0;b<d;b+=4){const O=(.34*c[b]+.5*c[b+1]+.16*c[b+2])/255;c[b]=O*m,c[b+1]=O*v,c[b+2]=O*_,c[b+3]=c[b+3]}};return Yd.RGB=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),Yd}var Xd={},Cv;function _E(){if(Cv)return Xd;Cv=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.RGBA=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=u.data,d=c.length,m=this.red(),v=this.green(),_=this.blue(),b=this.alpha();for(let O=0;O<d;O+=4){const U=1-b;c[O]=m*b+c[O]*U,c[O+1]=v*b+c[O+1]*U,c[O+2]=_*b+c[O+2]*U}};return Xd.RGBA=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u}),Xd}var Qd={},Rv;function SE(){if(Rv)return Qd;Rv=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.Sepia=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=n[u+0],d=n[u+1],m=n[u+2];n[u+0]=Math.min(255,c*.393+d*.769+m*.189),n[u+1]=Math.min(255,c*.349+d*.686+m*.168),n[u+2]=Math.min(255,c*.272+d*.534+m*.131)}};return Qd.Sepia=a,Qd}var Zd={},wv;function EE(){if(wv)return Zd;wv=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.Solarize=void 0;const a=function(t){const n=t.data,r=t.width,u=t.height,c=r*4;let d=u;do{const m=(d-1)*c;let v=r;do{const _=m+(v-1)*4;let b=n[_],O=n[_+1],U=n[_+2];b>127&&(b=255-b),O>127&&(O=255-O),U>127&&(U=255-U),n[_]=b,n[_+1]=O,n[_+2]=U}while(--v)}while(--d)};return Zd.Solarize=a,Zd}var Wd={},Nv;function TE(){if(Nv)return Wd;Nv=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.Threshold=void 0;const a=je(),t=Ti(),n=Qe(),r=function(u){const c=this.threshold()*255,d=u.data,m=d.length;for(let v=0;v<m;v+=1)d[v]=d[v]<c?0:255};return Wd.Threshold=r,a.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Wd}var Dv;function bE(){if(Dv)return hd;Dv=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.Konva=void 0;const a=d1(),t=FS(),n=KS(),r=YS(),u=XS(),c=QS(),d=ZS(),m=m4(),v=F1(),_=p4(),b=WS(),O=JS(),U=$S(),C=tE(),R=y4(),I=eE(),L=nE(),F=iE(),D=aE(),x=sE(),z=rE(),H=lE(),Y=oE(),j=uE(),V=cE(),w=hE(),M=fE(),k=dE(),K=gE(),T=mE(),q=pE(),G=yE(),Q=vE(),et=_E(),rt=SE(),pt=EE(),X=TE();return hd.Konva=a.Konva.Util._assign(a.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:u.Ellipse,Image:c.Image,Label:d.Label,Tag:d.Tag,Line:m.Line,Path:v.Path,Rect:_.Rect,RegularPolygon:b.RegularPolygon,Ring:O.Ring,Sprite:U.Sprite,Star:C.Star,Text:R.Text,TextPath:I.TextPath,Transformer:L.Transformer,Wedge:F.Wedge,Filters:{Blur:D.Blur,Brighten:x.Brighten,Contrast:z.Contrast,Emboss:H.Emboss,Enhance:Y.Enhance,Grayscale:j.Grayscale,HSL:V.HSL,HSV:w.HSV,Invert:M.Invert,Kaleidoscope:k.Kaleidoscope,Mask:K.Mask,Noise:T.Noise,Pixelate:q.Pixelate,Posterize:G.Posterize,RGB:Q.RGB,RGBA:et.RGBA,Sepia:rt.Sepia,Solarize:pt.Solarize,Threshold:X.Threshold}}),hd}var AE=Jg.exports,xv;function CE(){if(xv)return Jg.exports;xv=1,Object.defineProperty(AE,"__esModule",{value:!0});const a=bE();return Jg.exports=a.Konva,Jg.exports}CE();var jg={exports:{}},Ov;function RE(){return Ov||(Ov=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=d1();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=d1();a.exports=r.Konva}(jg,jg.exports)),jg.exports}var wE=RE();const um=B1(wE);var Xp={exports:{}},Qp={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function NE(){return Mv||(Mv=1,function(a){a.exports=function(t){function n(s,l,f,y){return new P0(s,l,f,y)}function r(){}function u(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return s===null||typeof s!="object"?null:(s=hn&&s[hn]||s["@@iterator"],typeof s=="function"?s:null)}function d(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===hi?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Pl:return"Fragment";case Tr:return"Portal";case zl:return"Profiler";case Ro:return"StrictMode";case el:return"Suspense";case Rc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Bl:return(s.displayName||"Context")+".Provider";case bf:return(s._context.displayName||"Context")+".Consumer";case fh:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case gu:return l=s.displayName||null,l!==null?l:d(s.type)||"Memo";case nl:l=s._payload,s=s._init;try{return d(s(l))}catch{}}return null}function m(s){if(kl===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);kl=l&&l[1]||"",Gl=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kl+s+Gl}function v(s,l){if(!s||mu)return"";mu=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(ve){var zt=ve}Reflect.construct(s,[],Yt)}else{try{Yt.call()}catch(ve){zt=ve}s.call(Yt.prototype)}}else{try{throw Error()}catch(ve){zt=ve}(Yt=s())&&typeof Yt.catch=="function"&&Yt.catch(function(){})}}catch(ve){if(ve&&zt&&typeof ve.stack=="string")return[ve.stack,zt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=y.DetermineComponentFrameRoot(),W=N[0],at=N[1];if(W&&at){var mt=W.split(`
`),Rt=at.split(`
`);for(E=y=0;y<mt.length&&!mt[y].includes("DetermineComponentFrameRoot");)y++;for(;E<Rt.length&&!Rt[E].includes("DetermineComponentFrameRoot");)E++;if(y===mt.length||E===Rt.length)for(y=mt.length-1,E=Rt.length-1;1<=y&&0<=E&&mt[y]!==Rt[E];)E--;for(;1<=y&&0<=E;y--,E--)if(mt[y]!==Rt[E]){if(y!==1||E!==1)do if(y--,E--,0>E||mt[y]!==Rt[E]){var kt=`
`+mt[y].replace(" at new "," at ");return s.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",s.displayName)),kt}while(1<=y&&0<=E);break}}}finally{mu=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?m(f):""}function _(s){switch(s.tag){case 26:case 27:case 5:return m(s.type);case 16:return m("Lazy");case 13:return m("Suspense");case 19:return m("SuspenseList");case 0:case 15:return s=v(s.type,!1),s;case 11:return s=v(s.type.render,!1),s;case 1:return s=v(s.type,!0),s;default:return""}}function b(s){try{var l="";do l+=_(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function O(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function U(s){if(O(s)!==s)throw Error(u(188))}function C(s){var l=s.alternate;if(!l){if(l=O(s),l===null)throw Error(u(188));return l!==s?null:s}for(var f=s,y=l;;){var E=f.return;if(E===null)break;var N=E.alternate;if(N===null){if(y=E.return,y!==null){f=y;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===f)return U(E),s;if(N===y)return U(E),l;N=N.sibling}throw Error(u(188))}if(f.return!==y.return)f=E,y=N;else{for(var W=!1,at=E.child;at;){if(at===f){W=!0,f=E,y=N;break}if(at===y){W=!0,y=E,f=N;break}at=at.sibling}if(!W){for(at=N.child;at;){if(at===f){W=!0,f=N,y=E;break}if(at===y){W=!0,y=N,f=E;break}at=at.sibling}if(!W)throw Error(u(189))}}if(f.alternate!==y)throw Error(u(190))}if(f.tag!==3)throw Error(u(188));return f.stateNode.current===f?s:l}function R(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=R(s),l!==null)return l;s=s.sibling}return null}function I(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(s.tag!==4&&(l=I(s),l!==null))return l;s=s.sibling}return null}function L(s){return{current:s}}function F(s){0>ql||(s.current=Ch[ql],Ch[ql]=null,ql--)}function D(s,l){ql++,Ch[ql]=s.current,s.current=l}function x(s){return s>>>=0,s===0?32:31-(Yf(s)/up|0)|0}function z(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function H(s,l){var f=s.pendingLanes;if(f===0)return 0;var y=0,E=s.suspendedLanes,N=s.pingedLanes,W=s.warmLanes;s=s.finishedLanes!==0;var at=f&134217727;return at!==0?(f=at&~E,f!==0?y=z(f):(N&=at,N!==0?y=z(N):s||(W=at&~W,W!==0&&(y=z(W))))):(at=f&~E,at!==0?y=z(at):N!==0?y=z(N):s||(W=f&~W,W!==0&&(y=z(W)))),y===0?0:l!==0&&l!==y&&(l&E)===0&&(E=y&-y,W=l&-l,E>=W||E===32&&(W&4194176)!==0)?l:y}function Y(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function j(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var s=xc;return xc<<=1,(xc&4194176)===0&&(xc=128),s}function w(){var s=Su;return Su<<=1,(Su&62914560)===0&&(Su=4194304),s}function M(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function k(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function K(s,l,f,y,E,N){var W=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var at=s.entanglements,mt=s.expirationTimes,Rt=s.hiddenUpdates;for(f=W&~f;0<f;){var kt=31-Jn(f),Yt=1<<kt;at[kt]=0,mt[kt]=-1;var zt=Rt[kt];if(zt!==null)for(Rt[kt]=null,kt=0;kt<zt.length;kt++){var ve=zt[kt];ve!==null&&(ve.lane&=-536870913)}f&=~Yt}y!==0&&T(s,y,0),N!==0&&E===0&&s.tag!==0&&(s.suspendedLanes|=N&~(W&~l))}function T(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var y=31-Jn(l);s.entangledLanes|=l,s.entanglements[y]=s.entanglements[y]|1073741824|f&4194218}function q(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var y=31-Jn(f),E=1<<y;E&l|s[y]&l&&(s[y]|=l),f&=~E}}function G(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Q(s){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(Tu,s,void 0,(s.current.flags&128)===128)}catch{}}function et(s){if(typeof ia=="function"&&wh(s),fi&&typeof fi.setStrictMode=="function")try{fi.setStrictMode(Tu,s)}catch{}}function rt(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}function pt(s,l){if(typeof s=="object"&&s!==null){var f=Nh.get(s);return f!==void 0?f:(l={value:s,source:l,stack:b(l)},Nh.set(s,l),l)}return{value:s,source:l,stack:b(l)}}function X(s,l){is[as++]=bu,is[as++]=Yl,Yl=s,bu=l}function st(s,l,f){ka[aa++]=Rr,ka[aa++]=wr,ka[aa++]=Zs,Zs=s;var y=Rr;s=wr;var E=32-Jn(y)-1;y&=~(1<<E),f+=1;var N=32-Jn(l)+E;if(30<N){var W=E-E%5;N=(y&(1<<W)-1).toString(32),y>>=W,E-=W,Rr=1<<32-Jn(l)+E|f<<E|y,wr=N+s}else Rr=1<<N|f<<E|y,wr=s}function Tt(s){s.return!==null&&(X(s,1),st(s,1,0))}function lt(s){for(;s===Yl;)Yl=is[--as],is[as]=null,bu=is[--as],is[as]=null;for(;s===Zs;)Zs=ka[--aa],ka[aa]=null,wr=ka[--aa],ka[aa]=null,Rr=ka[--aa],ka[aa]=null}function dt(s,l){D(ll,l),D(bs,s),D($n,null),s=Af(l),F($n),D($n,s)}function Nt(){F($n),F(bs),F(ll)}function Vt(s){s.memoizedState!==null&&D(Mc,s);var l=$n.current,f=z0(l,s.type);l!==f&&(D(bs,s),D($n,f))}function nt(s){bs.current===s&&(F($n),F(bs)),Mc.current===s&&(F(Mc),Ys?al._currentValue=No:al._currentValue2=No)}function ht(s){var l=Error(u(418,""));throw le(pt(l,s)),Vc}function Dt(s,l){if(!Ba)throw Error(u(175));Oo(s.stateNode,s.type,s.memoizedProps,l,s)||ht(s)}function xt(s){for(ti=s.return;ti;)switch(ti.tag){case 3:case 27:Ws=!0;return;case 5:case 13:Ws=!1;return;default:ti=ti.return}}function jt(s){if(!Ba||s!==ti)return!1;if(!tn)return xt(s),tn=!0,!1;var l=!1;if(Ni?s.tag!==3&&s.tag!==27&&(s.tag!==5||Pf(s.type)&&!Bi(s.type,s.memoizedProps))&&(l=!0):s.tag!==3&&(s.tag!==5||Pf(s.type)&&!Bi(s.type,s.memoizedProps))&&(l=!0),l&&dn&&ht(s),xt(s),s.tag===13){if(!Ba)throw Error(u(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));dn=pg(s)}else dn=ti?Fl(s.stateNode):null;return!0}function Kt(){Ba&&(dn=ti=null,tn=!1)}function le(s){As===null?As=[s]:As.push(s)}function de(){for(var s=ol,l=Js=ol=0;l<s;){var f=Ga[l];Ga[l++]=null;var y=Ga[l];Ga[l++]=null;var E=Ga[l];Ga[l++]=null;var N=Ga[l];if(Ga[l++]=null,y!==null&&E!==null){var W=y.pending;W===null?E.next=E:(E.next=W.next,W.next=E),y.pending=E}N!==0&&Ze(f,E,N)}}function ne(s,l,f,y){Ga[ol++]=s,Ga[ol++]=l,Ga[ol++]=f,Ga[ol++]=y,Js|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Fe(s,l,f,y){return ne(s,l,f,y),Oi(s)}function me(s,l){return ne(s,null,null,l),Oi(s)}function Ze(s,l,f){s.lanes|=f;var y=s.alternate;y!==null&&(y.lanes|=f);for(var E=!1,N=s.return;N!==null;)N.childLanes|=f,y=N.alternate,y!==null&&(y.childLanes|=f),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(E=!0)),s=N,N=N.return;E&&l!==null&&s.tag===3&&(N=s.stateNode,E=31-Jn(f),N=N.hiddenUpdates,s=N[E],s===null?N[E]=[l]:s.push(l),l.lane=f|536870912)}function Oi(s){if(50<Bo)throw Bo=0,Jf=null,Error(u(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}function rn(s){s!==Xl&&s.next===null&&(Xl===null?Cn=Xl=s:Xl=Xl.next=s),ei=!0,Dh||(Dh=!0,Ae(He))}function bi(s,l){if(!xh&&ei){xh=!0;do for(var f=!1,y=Cn;y!==null;){if(s!==0){var E=y.pendingLanes;if(E===0)var N=0;else{var W=y.suspendedLanes,at=y.pingedLanes;N=(1<<31-Jn(42|s)+1)-1,N&=E&~(W&~at),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(f=!0,Mi(y,N))}else N=Ie,N=H(y,y===mn?N:0),(N&3)===0||Y(y,N)||(f=!0,Mi(y,N));y=y.next}while(f);xh=!1}}function He(){ei=Dh=!1;var s=0;Au!==0&&(H0()&&(s=Au),Au=0);for(var l=ns(),f=null,y=Cn;y!==null;){var E=y.next,N=Ln(y,l);N===0?(y.next=null,f===null?Cn=E:f.next=E,E===null&&(Xl=f)):(f=y,(s!==0||(N&3)!==0)&&(ei=!0)),y=E}bi(s)}function Ln(s,l){for(var f=s.suspendedLanes,y=s.pingedLanes,E=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var W=31-Jn(N),at=1<<W,mt=E[W];mt===-1?((at&f)===0||(at&y)!==0)&&(E[W]=j(at,l)):mt<=l&&(s.expiredLanes|=at),N&=~at}if(l=mn,f=Ie,f=H(s,s===l?f:0),y=s.callbackNode,f===0||s===l&&fn===2||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Qs(y),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Y(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(y!==null&&Qs(y),G(f)){case 2:case 8:f=Oc;break;case 32:f=Eu;break;case 268435456:f=Vo;break;default:f=Eu}return y=De.bind(null,s),f=Cr(f,y),s.callbackPriority=l,s.callbackNode=f,l}return y!==null&&y!==null&&Qs(y),s.callbackPriority=2,s.callbackNode=null,2}function De(s,l){var f=s.callbackNode;if(Vl()&&s.callbackNode!==f)return null;var y=Ie;return y=H(s,s===mn?y:0),y===0?null:($a(s,y,l),Ln(s,ns()),s.callbackNode!=null&&s.callbackNode===f?De.bind(null,s):null)}function Mi(s,l){if(Vl())return null;$a(s,l,!0)}function Ae(s){K0?Y0(function(){(Ue&6)!==0?Cr(Rh,s):s()}):Cr(Rh,s)}function qe(){return Au===0&&(Au=V()),Au}function Fn(s,l){if(Cu===null){var f=Cu=[];Oh=0,Rn=qe(),Di={status:"pending",value:void 0,then:function(y){f.push(y)}}}return Oh++,l.then(Vi,Vi),l}function Vi(){if(--Oh===0&&Cu!==null){Di!==null&&(Di.status="fulfilled");var s=Cu;Cu=null,Rn=0,Di=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Ce(s,l){var f=[],y={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return s.then(function(){y.status="fulfilled",y.value=l;for(var E=0;E<f.length;E++)(0,f[E])(l)},function(E){for(y.status="rejected",y.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),y}function qn(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vn(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function We(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Me(s,l,f){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Ue&2)!==0){var E=y.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),y.pending=l,l=Oi(s),Ze(s,null,f),l}return ne(s,y,l,f),Oi(s)}function ji(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194176)!==0)){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,q(s,f)}}function vi(s,l){var f=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var E=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var W={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};N===null?E=N=W:N=N.next=W,f=f.next}while(f!==null);N===null?E=N=l:N=N.next=l}else E=N=l;f={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:y.shared,callbacks:y.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}function Pn(){if(Mh){var s=Di;if(s!==null)throw s}}function Ps(s,l,f,y){Mh=!1;var E=s.updateQueue;sa=!1;var N=E.firstBaseUpdate,W=E.lastBaseUpdate,at=E.shared.pending;if(at!==null){E.shared.pending=null;var mt=at,Rt=mt.next;mt.next=null,W===null?N=Rt:W.next=Rt,W=mt;var kt=s.alternate;kt!==null&&(kt=kt.updateQueue,at=kt.lastBaseUpdate,at!==W&&(at===null?kt.firstBaseUpdate=Rt:at.next=Rt,kt.lastBaseUpdate=mt))}if(N!==null){var Yt=E.baseState;W=0,kt=Rt=mt=null,at=N;do{var zt=at.lane&-536870913,ve=zt!==at.lane;if(ve?(Ie&zt)===zt:(y&zt)===zt){zt!==0&&zt===Rn&&(Mh=!0),kt!==null&&(kt=kt.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});t:{var Ms=s,Ou=at;zt=l;var ko=f;switch(Ou.tag){case 1:if(Ms=Ou.payload,typeof Ms=="function"){Yt=Ms.call(ko,Yt,zt);break t}Yt=Ms;break t;case 3:Ms.flags=Ms.flags&-65537|128;case 0:if(Ms=Ou.payload,zt=typeof Ms=="function"?Ms.call(ko,Yt,zt):Ms,zt==null)break t;Yt=Zn({},Yt,zt);break t;case 2:sa=!0}}zt=at.callback,zt!==null&&(s.flags|=64,ve&&(s.flags|=8192),ve=E.callbacks,ve===null?E.callbacks=[zt]:ve.push(zt))}else ve={lane:zt,tag:at.tag,payload:at.payload,callback:at.callback,next:null},kt===null?(Rt=kt=ve,mt=Yt):kt=kt.next=ve,W|=zt;if(at=at.next,at===null){if(at=E.shared.pending,at===null)break;ve=at,at=ve.next,ve.next=null,E.lastBaseUpdate=ve,E.shared.pending=null}}while(!0);kt===null&&(mt=Yt),E.baseState=mt,E.firstBaseUpdate=Rt,E.lastBaseUpdate=kt,N===null&&(E.shared.lanes=0),xs|=W,s.lanes=W,s.memoizedState=Yt}}function Pr(s,l){if(typeof s!="function")throw Error(u(191,s));s.call(l)}function zr(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)Pr(f[s],l)}function Fi(s,l){if(va(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var E=f[y];if(!Ag.call(l,E)||!va(s[E],l[E]))return!1}return!0}function ls(s){return s=s.status,s==="fulfilled"||s==="rejected"}function qi(){}function Kn(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(qi,qi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Uc?Error(u(483)):s;default:if(typeof l.status=="string")l.then(qi,qi);else{if(s=mn,s!==null&&100<s.shellSuspendCounter)throw Error(u(482));s=l,s.status="pending",s.then(function(y){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=y}},function(y){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Uc?Error(u(483)):s}throw ra=l,Uc}}function Ui(){if(ra===null)throw Error(u(459));var s=ra;return ra=null,s}function zn(s){var l=la;return la+=1,Uo===null&&(Uo=[]),Kn(Uo,s,l)}function Ki(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Ai(s,l){throw l.$$typeof===Tf?Error(u(525)):(s=Object.prototype.toString.call(l),Error(u(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function wa(s){var l=s._init;return l(s._payload)}function be(s){function l(_t,ft){if(s){var Et=_t.deletions;Et===null?(_t.deletions=[ft],_t.flags|=16):Et.push(ft)}}function f(_t,ft){if(!s)return null;for(;ft!==null;)l(_t,ft),ft=ft.sibling;return null}function y(_t){for(var ft=new Map;_t!==null;)_t.key!==null?ft.set(_t.key,_t):ft.set(_t.index,_t),_t=_t.sibling;return ft}function E(_t,ft){return _t=Jr(_t,ft),_t.index=0,_t.sibling=null,_t}function N(_t,ft,Et){return _t.index=Et,s?(Et=_t.alternate,Et!==null?(Et=Et.index,Et<ft?(_t.flags|=33554434,ft):Et):(_t.flags|=33554434,ft)):(_t.flags|=1048576,ft)}function W(_t){return s&&_t.alternate===null&&(_t.flags|=33554434),_t}function at(_t,ft,Et,Pt){return ft===null||ft.tag!==6?(ft=Cc(Et,_t.mode,Pt),ft.return=_t,ft):(ft=E(ft,Et),ft.return=_t,ft)}function mt(_t,ft,Et,Pt){var $t=Et.type;return $t===Pl?kt(_t,ft,Et.props.children,Pt,Et.key):ft!==null&&(ft.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===nl&&wa($t)===ft.type)?(ft=E(ft,Et.props),Ki(ft,Et),ft.return=_t,ft):(ft=Co(Et.type,Et.key,Et.props,null,_t.mode,Pt),Ki(ft,Et),ft.return=_t,ft)}function Rt(_t,ft,Et,Pt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==Et.containerInfo||ft.stateNode.implementation!==Et.implementation?(ft=za(Et,_t.mode,Pt),ft.return=_t,ft):(ft=E(ft,Et.children||[]),ft.return=_t,ft)}function kt(_t,ft,Et,Pt,$t){return ft===null||ft.tag!==7?(ft=Il(Et,_t.mode,Pt,$t),ft.return=_t,ft):(ft=E(ft,Et),ft.return=_t,ft)}function Yt(_t,ft,Et){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Cc(""+ft,_t.mode,Et),ft.return=_t,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case Ll:return Et=Co(ft.type,ft.key,ft.props,null,_t.mode,Et),Ki(Et,ft),Et.return=_t,Et;case Tr:return ft=za(ft,_t.mode,Et),ft.return=_t,ft;case nl:var Pt=ft._init;return ft=Pt(ft._payload),Yt(_t,ft,Et)}if(Hl(ft)||c(ft))return ft=Il(ft,_t.mode,Et,null),ft.return=_t,ft;if(typeof ft.then=="function")return Yt(_t,zn(ft),Et);if(ft.$$typeof===Bl)return Yt(_t,bt(_t,ft),Et);Ai(_t,ft)}return null}function zt(_t,ft,Et,Pt){var $t=ft!==null?ft.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return $t!==null?null:at(_t,ft,""+Et,Pt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case Ll:return Et.key===$t?mt(_t,ft,Et,Pt):null;case Tr:return Et.key===$t?Rt(_t,ft,Et,Pt):null;case nl:return $t=Et._init,Et=$t(Et._payload),zt(_t,ft,Et,Pt)}if(Hl(Et)||c(Et))return $t!==null?null:kt(_t,ft,Et,Pt,null);if(typeof Et.then=="function")return zt(_t,ft,zn(Et),Pt);if(Et.$$typeof===Bl)return zt(_t,ft,bt(_t,Et),Pt);Ai(_t,Et)}return null}function ve(_t,ft,Et,Pt,$t){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return _t=_t.get(Et)||null,at(ft,_t,""+Pt,$t);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case Ll:return _t=_t.get(Pt.key===null?Et:Pt.key)||null,mt(ft,_t,Pt,$t);case Tr:return _t=_t.get(Pt.key===null?Et:Pt.key)||null,Rt(ft,_t,Pt,$t);case nl:var pn=Pt._init;return Pt=pn(Pt._payload),ve(_t,ft,Et,Pt,$t)}if(Hl(Pt)||c(Pt))return _t=_t.get(Et)||null,kt(ft,_t,Pt,$t,null);if(typeof Pt.then=="function")return ve(_t,ft,Et,zn(Pt),$t);if(Pt.$$typeof===Bl)return ve(_t,ft,Et,bt(ft,Pt),$t);Ai(ft,Pt)}return null}function Ms(_t,ft,Et,Pt){for(var $t=null,pn=null,oe=ft,Oe=ft=0,Sn=null;oe!==null&&Oe<Et.length;Oe++){oe.index>Oe?(Sn=oe,oe=null):Sn=oe.sibling;var ke=zt(_t,oe,Et[Oe],Pt);if(ke===null){oe===null&&(oe=Sn);break}s&&oe&&ke.alternate===null&&l(_t,oe),ft=N(ke,ft,Oe),pn===null?$t=ke:pn.sibling=ke,pn=ke,oe=Sn}if(Oe===Et.length)return f(_t,oe),tn&&X(_t,Oe),$t;if(oe===null){for(;Oe<Et.length;Oe++)oe=Yt(_t,Et[Oe],Pt),oe!==null&&(ft=N(oe,ft,Oe),pn===null?$t=oe:pn.sibling=oe,pn=oe);return tn&&X(_t,Oe),$t}for(oe=y(oe);Oe<Et.length;Oe++)Sn=ve(oe,_t,Oe,Et[Oe],Pt),Sn!==null&&(s&&Sn.alternate!==null&&oe.delete(Sn.key===null?Oe:Sn.key),ft=N(Sn,ft,Oe),pn===null?$t=Sn:pn.sibling=Sn,pn=Sn);return s&&oe.forEach(function(io){return l(_t,io)}),tn&&X(_t,Oe),$t}function Ou(_t,ft,Et,Pt){if(Et==null)throw Error(u(151));for(var $t=null,pn=null,oe=ft,Oe=ft=0,Sn=null,ke=Et.next();oe!==null&&!ke.done;Oe++,ke=Et.next()){oe.index>Oe?(Sn=oe,oe=null):Sn=oe.sibling;var io=zt(_t,oe,ke.value,Pt);if(io===null){oe===null&&(oe=Sn);break}s&&oe&&io.alternate===null&&l(_t,oe),ft=N(io,ft,Oe),pn===null?$t=io:pn.sibling=io,pn=io,oe=Sn}if(ke.done)return f(_t,oe),tn&&X(_t,Oe),$t;if(oe===null){for(;!ke.done;Oe++,ke=Et.next())ke=Yt(_t,ke.value,Pt),ke!==null&&(ft=N(ke,ft,Oe),pn===null?$t=ke:pn.sibling=ke,pn=ke);return tn&&X(_t,Oe),$t}for(oe=y(oe);!ke.done;Oe++,ke=Et.next())ke=ve(oe,_t,Oe,ke.value,Pt),ke!==null&&(s&&ke.alternate!==null&&oe.delete(ke.key===null?Oe:ke.key),ft=N(ke,ft,Oe),pn===null?$t=ke:pn.sibling=ke,pn=ke);return s&&oe.forEach(function(Rg){return l(_t,Rg)}),tn&&X(_t,Oe),$t}function ko(_t,ft,Et,Pt){if(typeof Et=="object"&&Et!==null&&Et.type===Pl&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case Ll:t:{for(var $t=Et.key;ft!==null;){if(ft.key===$t){if($t=Et.type,$t===Pl){if(ft.tag===7){f(_t,ft.sibling),Pt=E(ft,Et.props.children),Pt.return=_t,_t=Pt;break t}}else if(ft.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===nl&&wa($t)===ft.type){f(_t,ft.sibling),Pt=E(ft,Et.props),Ki(Pt,Et),Pt.return=_t,_t=Pt;break t}f(_t,ft);break}else l(_t,ft);ft=ft.sibling}Et.type===Pl?(Pt=Il(Et.props.children,_t.mode,Pt,Et.key),Pt.return=_t,_t=Pt):(Pt=Co(Et.type,Et.key,Et.props,null,_t.mode,Pt),Ki(Pt,Et),Pt.return=_t,_t=Pt)}return W(_t);case Tr:t:{for($t=Et.key;ft!==null;){if(ft.key===$t)if(ft.tag===4&&ft.stateNode.containerInfo===Et.containerInfo&&ft.stateNode.implementation===Et.implementation){f(_t,ft.sibling),Pt=E(ft,Et.children||[]),Pt.return=_t,_t=Pt;break t}else{f(_t,ft);break}else l(_t,ft);ft=ft.sibling}Pt=za(Et,_t.mode,Pt),Pt.return=_t,_t=Pt}return W(_t);case nl:return $t=Et._init,Et=$t(Et._payload),ko(_t,ft,Et,Pt)}if(Hl(Et))return Ms(_t,ft,Et,Pt);if(c(Et)){if($t=c(Et),typeof $t!="function")throw Error(u(150));return Et=$t.call(Et),Ou(_t,ft,Et,Pt)}if(typeof Et.then=="function")return ko(_t,ft,zn(Et),Pt);if(Et.$$typeof===Bl)return ko(_t,ft,bt(_t,Et),Pt);Ai(_t,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,ft!==null&&ft.tag===6?(f(_t,ft.sibling),Pt=E(ft,Et),Pt.return=_t,_t=Pt):(f(_t,ft),Pt=Cc(Et,_t.mode,Pt),Pt.return=_t,_t=Pt),W(_t)):f(_t,ft)}return function(_t,ft,Et,Pt){try{la=0;var $t=ko(_t,ft,Et,Pt);return Uo=null,$t}catch(oe){if(oe===Uc)throw oe;var pn=n(29,oe,null,_t.mode);return pn.lanes=Pt,pn.return=_t,pn}finally{}}}function zs(s,l){s=nr,D(tr,s),D($s,l),nr=s|l.baseLanes}function Qa(){D(tr,nr),D($s,$s.current)}function Ii(){nr=tr.current,F($s),F(tr)}function Na(s){var l=s.alternate;D(Tn,Tn.current&1),D(Ha,s),Cs===null&&(l===null||$s.current!==null||l.memoizedState!==null)&&(Cs=s)}function ar(s){if(s.tag===22){if(D(Tn,Tn.current),D(Ha,s),Cs===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Cs=s)}}else Li()}function Li(){D(Tn,Tn.current),D(Ha,Ha.current)}function Mn(s){F(Ha),Cs===s&&(Cs=null),F(Tn)}function Vn(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Do(f)||Dc(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Se(){throw Error(u(321))}function Yi(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!va(s[f],l[f]))return!1;return!0}function Da(s,l,f,y,E,N){return ul=N,pe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ue.H=s===null||s.memoizedState===null?fl:Sa,Zl=!1,N=f(y,E),Zl=!1,Io&&(N=xa(l,f,y,E)),Bn(s),N}function Bn(s){ue.H=ni;var l=nn!==null&&nn.next!==null;if(ul=0,xn=nn=pe=null,cl=!1,Ru=0,hl=null,l)throw Error(u(300));s===null||di||(s=s.dependencies,s!==null&&P(s)&&(di=!0))}function xa(s,l,f,y){pe=s;var E=0;do{if(Io&&(hl=null),Ru=0,Io=!1,25<=E)throw Error(u(301));if(E+=1,xn=nn=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}ue.H=Jl,N=l(f,y)}while(Io);return N}function sr(){var s=ue.H,l=s.useState()[0];return l=typeof l.then=="function"?Jt(l):l,s=s.useState()[0],(nn!==null?nn.memoizedState:null)!==s&&(pe.flags|=1024),l}function os(){var s=Wl!==0;return Wl=0,s}function Bs(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Ci(s){if(cl){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}cl=!1}ul=0,xn=nn=pe=null,Io=!1,Ru=Wl=0,hl=null}function ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?pe.memoizedState=xn=s:xn=xn.next=s,xn}function cn(){if(nn===null){var s=pe.alternate;s=s!==null?s.memoizedState:null}else s=nn.next;var l=xn===null?pe.memoizedState:xn.next;if(l!==null)xn=l,nn=s;else{if(s===null)throw pe.alternate===null?Error(u(467)):Error(u(310));nn=s,s={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},xn===null?pe.memoizedState=xn=s:xn=xn.next=s}return xn}function Jt(s){var l=Ru;return Ru+=1,hl===null&&(hl=[]),s=Kn(hl,s,l),l=pe,(xn===null?l.memoizedState:xn.next)===null&&(l=l.alternate,ue.H=l===null||l.memoizedState===null?fl:Sa),s}function Xt(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Jt(s);if(s.$$typeof===Bl)return ct(s)}throw Error(u(438,String(s)))}function Za(s){var l=null,f=pe.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var y=pe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Xf(),pe.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),y=0;y<s;y++)f[y]=Re;return l.index++,f}function Xi(s,l){return typeof l=="function"?l(s):l}function si(s){var l=cn();return kn(l,nn,s)}function kn(s,l,f){var y=s.queue;if(y===null)throw Error(u(311));y.lastRenderedReducer=f;var E=s.baseQueue,N=y.pending;if(N!==null){if(E!==null){var W=E.next;E.next=N.next,N.next=W}l.baseQueue=E=N,y.pending=null}if(N=s.baseState,E===null)s.memoizedState=N;else{l=E.next;var at=W=null,mt=null,Rt=l,kt=!1;do{var Yt=Rt.lane&-536870913;if(Yt!==Rt.lane?(Ie&Yt)===Yt:(ul&Yt)===Yt){var zt=Rt.revertLane;if(zt===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),Yt===Rn&&(kt=!0);else if((ul&zt)===zt){Rt=Rt.next,zt===Rn&&(kt=!0);continue}else Yt={lane:0,revertLane:Rt.revertLane,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},mt===null?(at=mt=Yt,W=N):mt=mt.next=Yt,pe.lanes|=zt,xs|=zt;Yt=Rt.action,Zl&&f(N,Yt),N=Rt.hasEagerState?Rt.eagerState:f(N,Yt)}else zt={lane:Yt,revertLane:Rt.revertLane,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},mt===null?(at=mt=zt,W=N):mt=mt.next=zt,pe.lanes|=Yt,xs|=Yt;Rt=Rt.next}while(Rt!==null&&Rt!==l);if(mt===null?W=N:mt.next=at,!va(N,s.memoizedState)&&(di=!0,kt&&(f=Di,f!==null)))throw f;s.memoizedState=N,s.baseState=W,s.baseQueue=mt,y.lastRenderedState=N}return E===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function Pi(s){var l=cn(),f=l.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=s;var y=f.dispatch,E=f.pending,N=l.memoizedState;if(E!==null){f.pending=null;var W=E=E.next;do N=s(N,W.action),W=W.next;while(W!==E);va(N,l.memoizedState)||(di=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),f.lastRenderedState=N}return[N,y]}function fa(s,l,f){var y=pe,E=cn(),N=tn;if(N){if(f===void 0)throw Error(u(407));f=f()}else f=l();var W=!va((nn||E).memoizedState,f);if(W&&(E.memoizedState=f,di=!0),E=E.queue,Gr(Sl.bind(null,y,E,s),[s]),E.getSnapshot!==l||W||xn!==null&&xn.memoizedState.tag&1){if(y.flags|=2048,da(9,Qi.bind(null,y,E,f,l),{destroy:void 0},null),mn===null)throw Error(u(349));N||(ul&60)!==0||Br(y,l,f)}return f}function Br(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=pe.updateQueue,l===null?(l=Xf(),pe.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Qi(s,l,f,y){l.value=f,l.getSnapshot=y,us(l)&&cs(s)}function Sl(s,l,f){return f(function(){us(l)&&cs(s)})}function us(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!va(s,f)}catch{return!0}}function cs(s){var l=me(s,2);l!==null&&En(l,s,2)}function Zi(s){var l=ln();if(typeof s=="function"){var f=s;if(s=f(),Zl){et(!0);try{f()}finally{et(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:s},l}function ri(s,l,f,y){return s.baseState=f,kn(s,nn,typeof y=="function"?y:Xi)}function Wa(s,l,f,y,E){if(dr(s))throw Error(u(485));if(s=l.action,s!==null){var N={payload:E,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){N.listeners.push(W)}};ue.T!==null?f(!0):N.isTransition=!1,y(N),f=l.pending,f===null?(N.next=l.pending=N,hs(l,N)):(N.next=f.next,l.pending=f.next=N)}}function hs(s,l){var f=l.action,y=l.payload,E=s.state;if(l.isTransition){var N=ue.T,W={};ue.T=W;try{var at=f(E,y),mt=ue.S;mt!==null&&mt(W,at),ks(s,l,at)}catch(Rt){rr(s,l,Rt)}finally{ue.T=N}}else try{N=f(E,y),ks(s,l,N)}catch(Rt){rr(s,l,Rt)}}function ks(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){El(s,l,y)},function(y){return rr(s,l,y)}):El(s,l,f)}function El(s,l,f){l.status="fulfilled",l.value=f,fs(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,hs(s,f)))}function rr(s,l,f){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=f,fs(l),l=l.next;while(l!==y)}s.action=null}function fs(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function An(s,l){return l}function Gs(s,l){if(tn){var f=mn.formState;if(f!==null){t:{var y=pe;if(tn){if(dn){var E=fg(dn,Ws);if(E){dn=Fl(E),y=Ar(E);break t}}ht(y)}y=!1}y&&(l=f[0])}}f=ln(),f.memoizedState=f.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:l},f.queue=y,f=Hr.bind(null,pe,y),y.dispatch=f,y=Zi(!1);var N=$i.bind(null,pe,!1,y.queue);return y=ln(),E={state:l,dispatch:null,action:s,pending:null},y.queue=E,f=Wa.bind(null,pe,E,N,f),E.dispatch=f,y.memoizedState=s,[l,f,!1]}function lr(s){var l=cn();return kr(l,nn,s)}function kr(s,l,f){l=kn(s,l,An)[0],s=si(Xi)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Jt(l):l;var y=cn(),E=y.queue,N=E.dispatch;return f!==y.memoizedState&&(pe.flags|=2048,da(9,Ke.bind(null,E,f),{destroy:void 0},null)),[l,N,s]}function Ke(s,l){s.action=l}function or(s){var l=cn(),f=nn;if(f!==null)return kr(l,f,s);cn(),l=l.memoizedState,f=cn();var y=f.queue.dispatch;return f.memoizedState=s,[l,y,!1]}function da(s,l,f,y){return s={tag:s,create:l,inst:f,deps:y,next:null},l=pe.updateQueue,l===null&&(l=Xf(),pe.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(y=f.next,f.next=s,s.next=y,l.lastEffect=s),s}function ga(){return cn().memoizedState}function Tl(s,l,f,y){var E=ln();pe.flags|=s,E.memoizedState=da(1|l,f,{destroy:void 0},y===void 0?null:y)}function ur(s,l,f,y){var E=cn();y=y===void 0?null:y;var N=E.memoizedState.inst;nn!==null&&y!==null&&Yi(y,nn.memoizedState.deps)?E.memoizedState=da(l,f,N,y):(pe.flags|=s,E.memoizedState=da(1|l,f,N,y))}function bl(s,l){Tl(8390656,8,s,l)}function Gr(s,l){ur(2048,8,s,l)}function ho(s,l){return ur(4,2,s,l)}function fo(s,l){return ur(4,4,s,l)}function Oa(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function ma(s,l,f){f=f!=null?f.concat([s]):null,ur(4,4,Oa.bind(null,l,s),f)}function cr(){}function ds(s,l){var f=cn();l=l===void 0?null:l;var y=f.memoizedState;return l!==null&&Yi(l,y[1])?y[0]:(f.memoizedState=[s,l],s)}function Ma(s,l){var f=cn();l=l===void 0?null:l;var y=f.memoizedState;if(l!==null&&Yi(l,y[1]))return y[0];if(y=s(),Zl){et(!0);try{s()}finally{et(!1)}}return f.memoizedState=[y,l],y}function Va(s,l,f){return f===void 0||(ul&1073741824)!==0?s.memoizedState=l:(s.memoizedState=f,s=vc(),pe.lanes|=s,xs|=s,f)}function Hs(s,l,f,y){return va(f,l)?f:$s.current!==null?(s=Va(s,f,y),va(s,l)||(di=!0),s):(ul&42)===0?(di=!0,s.memoizedState=f):(s=vc(),pe.lanes|=s,xs|=s,l)}function Al(s,l,f,y,E){var N=jl();ya(N!==0&&8>N?N:8);var W=ue.T,at={};ue.T=at,$i(s,!1,l,f);try{var mt=E(),Rt=ue.S;if(Rt!==null&&Rt(at,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var kt=Ce(mt,y);Ji(s,l,kt,ea(s))}else Ji(s,l,y,ea(s))}catch(Yt){Ji(s,l,{then:function(){},status:"rejected",reason:Yt},ea())}finally{ya(N),ue.T=W}}function hr(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:No,baseState:No,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:No},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Wi(){return ct(al)}function fr(){return cn().memoizedState}function Ja(){return cn().memoizedState}function gs(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ea();s=We(f);var y=Me(l,s,f);y!==null&&(En(y,l,f),ji(y,l,f)),l={cache:ze()},s.payload=l;return}l=l.return}}function js(s,l,f){var y=ea();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},dr(s)?Yn(l,f):(f=Fe(s,l,f,y),f!==null&&(En(f,s,y),Je(f,l,y)))}function Hr(s,l,f){var y=ea();Ji(s,l,f,y)}function Ji(s,l,f,y){var E={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(dr(s))Yn(l,E);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var W=l.lastRenderedState,at=N(W,f);if(E.hasEagerState=!0,E.eagerState=at,va(at,W))return ne(s,l,E,0),mn===null&&de(),!1}catch{}finally{}if(f=Fe(s,l,E,y),f!==null)return En(f,s,y),Je(f,l,y),!0}return!1}function $i(s,l,f,y){if(y={lane:2,revertLane:qe(),action:y,hasEagerState:!1,eagerState:null,next:null},dr(s)){if(l)throw Error(u(479))}else l=Fe(s,f,y,2),l!==null&&En(l,s,2)}function dr(s){var l=s.alternate;return s===pe||l!==null&&l===pe}function Yn(s,l){Io=cl=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function Je(s,l,f){if((f&4194176)!==0){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,q(s,f)}}function gr(s,l,f,y){l=s.memoizedState,f=f(y,l),f=f==null?l:Zn({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}function mr(s,l,f,y,E,N,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,N,W):l.prototype&&l.prototype.isPureReactComponent?!Fi(f,y)||!Fi(E,N):!0}function tt(s,l,f,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==s&&wu.enqueueReplaceState(l,l.state,null)}function yt(s,l){var f=l;if("ref"in l){f={};for(var y in l)y!=="ref"&&(f[y]=l[y])}if(s=s.defaultProps){f===l&&(f=Zn({},f));for(var E in s)f[E]===void 0&&(f[E]=s[E])}return f}function Ut(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function Ct(s,l,f){try{var y=s.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Ht(s,l,f){return f=We(f),f.tag=3,f.payload={element:null},f.callback=function(){Ut(s,l)},f}function ee(s){return s=We(s),s.tag=3,s}function Lt(s,l,f,y){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var N=y.value;s.payload=function(){return E(N)},s.callback=function(){Ct(l,f,y)}}var W=f.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){Ct(l,f,y),typeof E!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var at=y.stack;this.componentDidCatch(y.value,{componentStack:at!==null?at:""})})}function Ft(s,l,f,y,E){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=f.alternate,l!==null&&A(l,f,E,!0),f=Ha.current,f!==null){switch(f.tag){case 13:return Cs===null?Ts():f.alternate===null&&On===0&&(On=3),f.flags&=-257,f.flags|=65536,f.lanes=E,y===_a?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([y]):l.add(y),Ul(s,y,E)),!1;case 22:return f.flags|=65536,y===_a?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([y]):f.add(y)),Ul(s,y,E)),!1}throw Error(u(435,f.tag))}return Ul(s,y,E),Ts(),!1}if(tn)return l=Ha.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=E,y!==Vc&&(s=Error(u(422),{cause:y}),le(pt(s,f)))):(y!==Vc&&(l=Error(u(423),{cause:y}),le(pt(l,f))),s=s.current.alternate,s.flags|=65536,E&=-E,s.lanes|=E,y=pt(y,f),E=Ht(s.stateNode,y,E),vi(s,E),On!==4&&(On=2)),!1;var N=Error(u(520),{cause:y});if(N=pt(N,f),Du===null?Du=[N]:Du.push(N),On!==4&&(On=2),l===null)return!0;y=pt(y,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=E&-E,f.lanes|=s,s=Ht(f.stateNode,y,s),vi(f,s),!1;case 1:if(l=f.type,N=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Or===null||!Or.has(N))))return f.flags|=65536,E&=-E,f.lanes|=E,E=ee(E),Lt(E,s,f,y),vi(f,E),!1}f=f.return}while(f!==null);return!1}function Qt(s,l,f,y){l.child=s===null?Nr(l,null,f,y):Ql(l,s.child,f,y)}function he(s,l,f,y,E){f=f.render;var N=l.ref;if("ref"in y){var W={};for(var at in y)at!=="ref"&&(W[at]=y[at])}else W=y;return J(l),y=Da(s,l,f,W,N,E),at=os(),s!==null&&!di?(Bs(s,l,E),ms(s,l,E)):(tn&&at&&Tt(l),l.flags|=1,Qt(s,l,y,E),l.child)}function li(s,l,f,y,E){if(s===null){var N=f.type;return typeof N=="function"&&!Wr(N)&&N.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=N,Fs(s,l,N,y,E)):(s=Co(f.type,null,y,l,l.mode,E),s.ref=l.ref,s.return=l,l.child=s)}if(N=s.child,!iu(s,E)){var W=N.memoizedProps;if(f=f.compare,f=f!==null?f:Fi,f(W,y)&&s.ref===l.ref)return ms(s,l,E)}return l.flags|=1,s=Jr(N,y),s.ref=l.ref,s.return=l,l.child=s}function Fs(s,l,f,y,E){if(s!==null){var N=s.memoizedProps;if(Fi(N,y)&&s.ref===l.ref)if(di=!1,l.pendingProps=y=N,iu(s,E))(s.flags&131072)!==0&&(di=!0);else return l.lanes=s.lanes,ms(s,l,E)}return po(s,l,f,y,E)}function rc(s,l,f){var y=l.pendingProps,E=y.children,N=(l.stateNode._pendingVisibility&2)!==0,W=s!==null?s.memoizedState:null;if(mo(s,l),y.mode==="hidden"||N){if((l.flags&128)!==0){if(y=W!==null?W.baseLanes|f:f,s!==null){for(E=l.child=s.child,N=0;E!==null;)N=N|E.lanes|E.childLanes,E=E.sibling;l.childLanes=N&~y}else l.childLanes=0,l.child=null;return go(s,l,y,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xn(l,W!==null?W.cachePool:null),W!==null?zs(l,W):Qa(),ar(l);else return l.lanes=l.childLanes=536870912,go(s,l,W!==null?W.baseLanes|f:f,f)}else W!==null?(Xn(l,W.cachePool),zs(l,W),Li(),l.memoizedState=null):(s!==null&&Xn(l,null),Qa(),Li());return Qt(s,l,E,f),l.child}function go(s,l,f,y){var E=Be();return E=E===null?null:{parent:Ys?Hn._currentValue:Hn._currentValue2,pool:E},l.memoizedState={baseLanes:f,cachePool:E},s!==null&&Xn(l,null),Qa(),ar(l),s!==null&&A(s,l,y,!0),null}function mo(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(u(284));(s===null||s.ref!==f)&&(l.flags|=2097664)}}function po(s,l,f,y,E){return J(l),f=Da(s,l,f,y,void 0,E),y=os(),s!==null&&!di?(Bs(s,l,E),ms(s,l,E)):(tn&&y&&Tt(l),l.flags|=1,Qt(s,l,f,E),l.child)}function Cl(s,l,f,y,E,N){return J(l),l.updateQueue=null,f=xa(l,y,f,E),Bn(s),y=os(),s!==null&&!di?(Bs(s,l,N),ms(s,l,N)):(tn&&y&&Tt(l),l.flags|=1,Qt(s,l,f,N),l.child)}function lc(s,l,f,y,E){if(J(l),l.stateNode===null){var N=Mo,W=f.contextType;typeof W=="object"&&W!==null&&(N=ct(W)),N=new f(y,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=wu,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=y,N.state=l.memoizedState,N.refs={},qn(l),W=f.contextType,N.context=typeof W=="object"&&W!==null?ct(W):Mo,N.state=l.memoizedState,W=f.getDerivedStateFromProps,typeof W=="function"&&(gr(l,f,W,y),N.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(W=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),W!==N.state&&wu.enqueueReplaceState(N,N.state,null),Ps(l,y,N,E),Pn(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(s===null){N=l.stateNode;var at=l.memoizedProps,mt=yt(f,at);N.props=mt;var Rt=N.context,kt=f.contextType;W=Mo,typeof kt=="object"&&kt!==null&&(W=ct(kt));var Yt=f.getDerivedStateFromProps;kt=typeof Yt=="function"||typeof N.getSnapshotBeforeUpdate=="function",at=l.pendingProps!==at,kt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(at||Rt!==W)&&tt(l,N,y,W),sa=!1;var zt=l.memoizedState;N.state=zt,Ps(l,y,N,E),Pn(),Rt=l.memoizedState,at||zt!==Rt||sa?(typeof Yt=="function"&&(gr(l,f,Yt,y),Rt=l.memoizedState),(mt=sa||mr(l,f,mt,y,zt,Rt,W))?(kt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Rt),N.props=y,N.state=Rt,N.context=W,y=mt):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{N=l.stateNode,vn(s,l),W=l.memoizedProps,kt=yt(f,W),N.props=kt,Yt=l.pendingProps,zt=N.context,Rt=f.contextType,mt=Mo,typeof Rt=="object"&&Rt!==null&&(mt=ct(Rt)),at=f.getDerivedStateFromProps,(Rt=typeof at=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==Yt||zt!==mt)&&tt(l,N,y,mt),sa=!1,zt=l.memoizedState,N.state=zt,Ps(l,y,N,E),Pn();var ve=l.memoizedState;W!==Yt||zt!==ve||sa||s!==null&&s.dependencies!==null&&P(s.dependencies)?(typeof at=="function"&&(gr(l,f,at,y),ve=l.memoizedState),(kt=sa||mr(l,f,kt,y,zt,ve,mt)||s!==null&&s.dependencies!==null&&P(s.dependencies))?(Rt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,ve,mt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,ve,mt)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===s.memoizedProps&&zt===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&zt===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ve),N.props=y,N.state=ve,N.context=mt,y=kt):(typeof N.componentDidUpdate!="function"||W===s.memoizedProps&&zt===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&zt===s.memoizedState||(l.flags|=1024),y=!1)}return N=y,mo(s,l),y=(l.flags&128)!==0,N||y?(N=l.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,s!==null&&y?(l.child=Ql(l,s.child,null,E),l.child=Ql(l,null,f,E)):Qt(s,l,f,E),l.memoizedState=N.state,s=l.child):s=ms(s,l,E),s}function oc(s,l,f,y){return Kt(),l.flags|=256,Qt(s,l,f,y),l.child}function yo(s){return{baseLanes:s,cachePool:oi()}}function jr(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ss),s}function uc(s,l,f){var y=l.pendingProps,E=!1,N=(l.flags&128)!==0,W;if((W=N)||(W=s!==null&&s.memoizedState===null?!1:(Tn.current&2)!==0),W&&(E=!0,l.flags&=-129),W=(l.flags&32)!==0,l.flags&=-33,s===null){if(tn){if(E?Na(l):Li(),tn){var at=dn,mt;(mt=at)&&(at=gg(at,Ws),at!==null?(l.memoizedState={dehydrated:at,treeContext:Zs!==null?{id:Rr,overflow:wr}:null,retryLane:536870912},mt=n(18,null,null,0),mt.stateNode=at,mt.return=l,l.child=mt,ti=l,dn=null,mt=!0):mt=!1),mt||ht(l)}if(at=l.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return Dc(at)?l.lanes=16:l.lanes=536870912,null;Mn(l)}return at=y.children,y=y.fallback,E?(Li(),E=l.mode,at=eu({mode:"hidden",children:at},E),y=Il(y,E,f,null),at.return=l,y.return=l,at.sibling=y,l.child=at,E=l.child,E.memoizedState=yo(f),E.childLanes=jr(s,W,f),l.memoizedState=Lc,y):(Na(l),Rl(l,at))}if(mt=s.memoizedState,mt!==null&&(at=mt.dehydrated,at!==null)){if(N)l.flags&256?(Na(l),l.flags&=-257,l=vo(s,l,f)):l.memoizedState!==null?(Li(),l.child=s.child,l.flags|=128,l=null):(Li(),E=y.fallback,at=l.mode,y=eu({mode:"visible",children:y.children},at),E=Il(E,at,f,null),E.flags|=2,y.return=l,E.return=l,y.sibling=E,l.child=y,Ql(l,s.child,null,f),y=l.child,y.memoizedState=yo(f),y.childLanes=jr(s,W,f),l.memoizedState=Lc,l=E);else if(Na(l),Dc(at))W=Sh(at).digest,y=Error(u(419)),y.stack="",y.digest=W,le({value:y,source:null,stack:null}),l=vo(s,l,f);else if(di||A(s,l,f,!1),W=(f&s.childLanes)!==0,di||W){if(W=mn,W!==null){if(y=f&-f,(y&42)!==0)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=(y&(W.suspendedLanes|f))!==0?0:y,y!==0&&y!==mt.retryLane)throw mt.retryLane=y,me(s,y),En(W,s,y),Qf}Do(at)||Ts(),l=vo(s,l,f)}else Do(at)?(l.flags|=128,l.child=s.child,l=Ac.bind(null,s),hg(at,l),l=null):(s=mt.treeContext,Ba&&(dn=Uf(at),ti=l,tn=!0,As=null,Ws=!1,s!==null&&(ka[aa++]=Rr,ka[aa++]=wr,ka[aa++]=Zs,Rr=s.id,wr=s.overflow,Zs=l)),l=Rl(l,y.children),l.flags|=4096);return l}return E?(Li(),E=y.fallback,at=l.mode,mt=s.child,N=mt.sibling,y=Jr(mt,{mode:"hidden",children:y.children}),y.subtreeFlags=mt.subtreeFlags&31457280,N!==null?E=Jr(N,E):(E=Il(E,at,f,null),E.flags|=2),E.return=l,y.return=l,y.sibling=E,l.child=y,y=E,E=l.child,at=s.child.memoizedState,at===null?at=yo(f):(mt=at.cachePool,mt!==null?(N=Ys?Hn._currentValue:Hn._currentValue2,mt=mt.parent!==N?{parent:N,pool:N}:mt):mt=oi(),at={baseLanes:at.baseLanes|f,cachePool:mt}),E.memoizedState=at,E.childLanes=jr(s,W,f),l.memoizedState=Lc,y):(Na(l),f=s.child,s=f.sibling,f=Jr(f,{mode:"visible",children:y.children}),f.return=l,f.sibling=null,s!==null&&(W=l.deletions,W===null?(l.deletions=[s],l.flags|=16):W.push(s)),l.child=f,l.memoizedState=null,f)}function Rl(s,l){return l=eu({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function eu(s,l){return hh(s,l,0,null)}function vo(s,l,f){return Ql(l,s.child,null,f),s=Rl(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function pr(s,l,f){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),ys(s.return,l,f)}function nu(s,l,f,y,E){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:E}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=f,N.tailMode=E)}function cc(s,l,f){var y=l.pendingProps,E=y.revealOrder,N=y.tail;if(Qt(s,l,y.children,f),y=Tn.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pr(s,f,l);else if(s.tag===19)pr(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(D(Tn,y),E){case"forwards":for(f=l.child,E=null;f!==null;)s=f.alternate,s!==null&&Vn(s)===null&&(E=f),f=f.sibling;f=E,f===null?(E=l.child,l.child=null):(E=f.sibling,f.sibling=null),nu(l,!1,E,f,N);break;case"backwards":for(f=null,E=l.child,l.child=null;E!==null;){if(s=E.alternate,s!==null&&Vn(s)===null){l.child=E;break}s=E.sibling,E.sibling=f,f=E,E=s}nu(l,!0,f,null,N);break;case"together":nu(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ms(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),xs|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(A(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(u(153));if(l.child!==null){for(s=l.child,f=Jr(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Jr(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function iu(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&P(s)))}function au(s,l,f){switch(l.tag){case 3:dt(l,l.stateNode.containerInfo),qs(l,Hn,s.memoizedState.cache),Kt();break;case 27:case 5:Vt(l);break;case 4:dt(l,l.stateNode.containerInfo);break;case 10:qs(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(Na(l),l.flags|=128,null):(f&l.child.childLanes)!==0?uc(s,l,f):(Na(l),s=ms(s,l,f),s!==null?s.sibling:null);Na(l);break;case 19:var E=(s.flags&128)!==0;if(y=(f&l.childLanes)!==0,y||(A(s,l,f,!1),y=(f&l.childLanes)!==0),E){if(y)return cc(s,l,f);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),D(Tn,Tn.current),y)break;return null;case 22:case 23:return l.lanes=0,rc(s,l,f);case 24:qs(l,Hn,s.memoizedState.cache)}return ms(s,l,f)}function ta(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)di=!0;else{if(!iu(s,f)&&(l.flags&128)===0)return di=!1,au(s,l,f);di=(s.flags&131072)!==0}else di=!1,tn&&(l.flags&1048576)!==0&&st(l,bu,l.index);switch(l.lanes=0,l.tag){case 16:t:{s=l.pendingProps;var y=l.elementType,E=y._init;if(y=E(y._payload),l.type=y,typeof y=="function")Wr(y)?(s=yt(y,s),l.tag=1,l=lc(null,l,y,s,f)):(l.tag=0,l=po(null,l,y,s,f));else{if(y!=null){if(E=y.$$typeof,E===fh){l.tag=11,l=he(null,l,y,s,f);break t}else if(E===gu){l.tag=14,l=li(null,l,y,s,f);break t}}throw l=d(y)||y,Error(u(306,l,""))}}return l;case 0:return po(s,l,l.type,l.pendingProps,f);case 1:return y=l.type,E=yt(y,l.pendingProps),lc(s,l,y,E,f);case 3:t:{if(dt(l,l.stateNode.containerInfo),s===null)throw Error(u(387));var N=l.pendingProps;E=l.memoizedState,y=E.element,vn(s,l),Ps(l,N,null,f);var W=l.memoizedState;if(N=W.cache,qs(l,Hn,N),N!==E.cache&&g(l,[Hn],f,!0),Pn(),N=W.element,Ba&&E.isDehydrated)if(E={element:N,isDehydrated:!1,cache:W.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=oc(s,l,N,f);break t}else if(N!==y){y=pt(Error(u(424)),l),le(y),l=oc(s,l,N,f);break t}else for(Ba&&(dn=xo(l.stateNode.containerInfo),ti=l,tn=!0,As=null,Ws=!0),f=Nr(l,null,N,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Kt(),N===y){l=ms(s,l,f);break t}Qt(s,l,N,f)}l=l.child}return l;case 26:if(es)return mo(s,l),s===null?(f=zf(l.type,null,l.pendingProps,null))?l.memoizedState=f:tn||(l.stateNode=Hf(l.type,l.pendingProps,ll.current,l)):l.memoizedState=zf(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:if(Ni)return Vt(l),s===null&&Ni&&tn&&(y=l.stateNode=bh(l.type,l.pendingProps,ll.current,$n.current,!1),ti=l,Ws=!0,dn=sl(y)),y=l.pendingProps.children,s!==null||tn?Qt(s,l,y,f):l.child=Ql(l,null,y,f),mo(s,l),l.child;case 5:return s===null&&tn&&(_g(l.type,l.pendingProps,$n.current),(E=y=dn)&&(y=If(y,l.type,l.pendingProps,Ws),y!==null?(l.stateNode=y,ti=l,dn=sl(y),Ws=!1,E=!0):E=!1),E||ht(l)),Vt(l),E=l.type,N=l.pendingProps,W=s!==null?s.memoizedProps:null,y=N.children,Bi(E,N)?y=null:W!==null&&Bi(E,W)&&(l.flags|=32),l.memoizedState!==null&&(E=Da(s,l,sr,null,null,f),Ys?al._currentValue=E:al._currentValue2=E),mo(s,l),Qt(s,l,y,f),l.child;case 6:return s===null&&tn&&(op(l.pendingProps,$n.current),(s=f=dn)&&(f=dg(f,l.pendingProps,Ws),f!==null?(l.stateNode=f,ti=l,dn=null,s=!0):s=!1),s||ht(l)),null;case 13:return uc(s,l,f);case 4:return dt(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=Ql(l,null,y,f):Qt(s,l,y,f),l.child;case 11:return he(s,l,l.type,l.pendingProps,f);case 7:return Qt(s,l,l.pendingProps,f),l.child;case 8:return Qt(s,l,l.pendingProps.children,f),l.child;case 12:return Qt(s,l,l.pendingProps.children,f),l.child;case 10:return y=l.pendingProps,qs(l,l.type,y.value),Qt(s,l,y.children,f),l.child;case 9:return E=l.type._context,y=l.pendingProps.children,J(l),E=ct(E),y=y(E),l.flags|=1,Qt(s,l,y,f),l.child;case 14:return li(s,l,l.type,l.pendingProps,f);case 15:return Fs(s,l,l.type,l.pendingProps,f);case 19:return cc(s,l,f);case 22:return rc(s,l,f);case 24:return J(l),y=ct(Hn),s===null?(E=Be(),E===null&&(E=mn,N=ze(),E.pooledCache=N,N.refCount++,N!==null&&(E.pooledCacheLanes|=f),E=N),l.memoizedState={parent:y,cache:E},qn(l),qs(l,Hn,E)):((s.lanes&f)!==0&&(vn(s,l),Ps(l,null,null,f),Pn()),E=s.memoizedState,N=l.memoizedState,E.parent!==y?(E={parent:y,cache:y},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),qs(l,Hn,y)):(y=N.cache,qs(l,Hn,y),y!==E.cache&&g(l,[Hn],f,!0))),Qt(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(u(156,l.tag))}function qs(s,l,f){Ys?(D(Rs,l._currentValue),l._currentValue=f):(D(Rs,l._currentValue2),l._currentValue2=f)}function ps(s){var l=Rs.current;Ys?s._currentValue=l:s._currentValue2=l,F(Rs)}function ys(s,l,f){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===f)break;s=s.return}}function g(s,l,f,y){var E=s.child;for(E!==null&&(E.return=s);E!==null;){var N=E.dependencies;if(N!==null){var W=E.child;N=N.firstContext;t:for(;N!==null;){var at=N;N=E;for(var mt=0;mt<l.length;mt++)if(at.context===l[mt]){N.lanes|=f,at=N.alternate,at!==null&&(at.lanes|=f),ys(N.return,f,s),y||(W=null);break t}N=at.next}}else if(E.tag===18){if(W=E.return,W===null)throw Error(u(341));W.lanes|=f,N=W.alternate,N!==null&&(N.lanes|=f),ys(W,f,s),W=null}else W=E.child;if(W!==null)W.return=E;else for(W=E;W!==null;){if(W===s){W=null;break}if(E=W.sibling,E!==null){E.return=W.return,W=E;break}W=W.return}E=W}}function A(s,l,f,y){s=null;for(var E=l,N=!1;E!==null;){if(!N){if((E.flags&524288)!==0)N=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var W=E.alternate;if(W===null)throw Error(u(387));if(W=W.memoizedProps,W!==null){var at=E.type;va(E.pendingProps.value,W.value)||(s!==null?s.push(at):s=[at])}}else if(E===Mc.current){if(W=E.alternate,W===null)throw Error(u(387));W.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(s!==null?s.push(al):s=[al])}E=E.return}s!==null&&g(l,s,f,y),l.flags|=262144}function P(s){for(s=s.firstContext;s!==null;){var l=s.context;if(!va(Ys?l._currentValue:l._currentValue2,s.memoizedValue))return!0;s=s.next}return!1}function J(s){to=s,ws=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ct(s){return qt(to,s)}function bt(s,l){return to===null&&J(s),qt(s,l)}function qt(s,l){var f=Ys?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},ws===null){if(s===null)throw Error(u(308));ws=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ws=ws.next=l;return f}function ze(){return{controller:new Pc,data:new Map,refCount:0}}function Un(s){s.refCount--,s.refCount===0&&In(cp,function(){s.controller.abort()})}function Be(){var s=Lo.current;return s!==null?s:mn.pooledCache}function Xn(s,l){l===null?D(Lo,Lo.current):D(Lo,l.pool)}function oi(){var s=Be();return s===null?null:{parent:Ys?Hn._currentValue:Hn._currentValue2,pool:s}}function Qn(s){s.flags|=4}function Ri(s,l){if(s!==null&&s.child===l.child)return!1;if((l.flags&16)!==0)return!0;for(s=l.child;s!==null;){if((s.flags&13878)!==0||(s.subtreeFlags&13878)!==0)return!0;s=s.sibling}return!1}function vs(s,l,f,y){if(Dn)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)wc(s,f.stateNode);else if(!(f.tag===4||Ni&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(Xs)for(var E=l.child;E!==null;){if(E.tag===5){var N=E.stateNode;f&&y&&(N=cg(N,E.type,E.memoizedProps)),wc(s,N)}else if(E.tag===6)N=E.stateNode,f&&y&&(N=Vf(N,E.memoizedProps)),wc(s,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),vs(s,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===l)break;for(;E.sibling===null;){if(E.return===null||E.return===l)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function su(s,l,f,y){if(Xs)for(var E=l.child;E!==null;){if(E.tag===5){var N=E.stateNode;f&&y&&(N=cg(N,E.type,E.memoizedProps)),Mf(s,N)}else if(E.tag===6)N=E.stateNode,f&&y&&(N=Vf(N,E.memoizedProps)),Mf(s,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),su(s,E,!(E.memoizedProps!==null&&E.memoizedProps.mode==="manual"),!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===l)break;for(;E.sibling===null;){if(E.return===null||E.return===l)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function hc(s,l){if(Xs&&Ri(s,l)){s=l.stateNode;var f=s.containerInfo,y=_h();su(y,l,!1,!1),s.pendingChildren=y,Qn(l),og(f,y)}}function th(s,l,f,y){if(Dn)s.memoizedProps!==y&&Qn(l);else if(Xs){var E=s.stateNode,N=s.memoizedProps;if((s=Ri(s,l))||N!==y){var W=$n.current;N=lg(E,f,N,y,!s,null),N===E?l.stateNode=E:(dh(N,f,y,W)&&Qn(l),l.stateNode=N,s?vs(N,l,!1,!1):Qn(l))}else l.stateNode=E}}function eh(s,l,f){if(Rf(l,f)){if(s.flags|=16777216,!wf(l,f))if(wi())s.flags|=8192;else throw ra=_a,Ic}else s.flags&=-16777217}function nh(s,l){if(Tg(l)){if(s.flags|=16777216,!jf(l))if(wi())s.flags|=8192;else throw ra=_a,Ic}else s.flags&=-16777217}function ru(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?w():536870912,s.lanes|=l,mi|=l)}function lu(s,l){if(!tn)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Nn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,y=0;if(l)for(var E=s.child;E!==null;)f|=E.lanes|E.childLanes,y|=E.subtreeFlags&31457280,y|=E.flags&31457280,E.return=s,E=E.sibling;else for(E=s.child;E!==null;)f|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=s,E=E.sibling;return s.subtreeFlags|=y,s.childLanes=f,l}function x0(s,l,f){var y=l.pendingProps;switch(lt(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(l),null;case 1:return Nn(l),null;case 3:return f=l.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),ps(Hn),Nt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(jt(l)?Qn(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,As!==null&&(Qr(As),As=null))),hc(s,l),Nn(l),null;case 26:if(es){f=l.type;var E=l.memoizedState;return s===null?(Qn(l),E!==null?(Nn(l),nh(l,E)):(Nn(l),eh(l,f,y))):E?E!==s.memoizedState?(Qn(l),Nn(l),nh(l,E)):(Nn(l),l.flags&=-16777217):(Dn?s.memoizedProps!==y&&Qn(l):th(s,l,f,y),Nn(l),eh(l,f,y)),null}case 27:if(Ni){if(nt(l),f=ll.current,E=l.type,s!==null&&l.stateNode!=null)Dn?s.memoizedProps!==y&&Qn(l):th(s,l,E,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return Nn(l),null}s=$n.current,jt(l)?Dt(l,s):(s=bh(E,y,f,s,!0),l.stateNode=s,Qn(l))}return Nn(l),null}case 5:if(nt(l),f=l.type,s!==null&&l.stateNode!=null)th(s,l,f,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return Nn(l),null}s=$n.current,jt(l)?Dt(l,s):(E=Cf(f,y,ll.current,s,l),vs(E,l,!1,!1),l.stateNode=E,dh(E,f,y,s)&&Qn(l))}return Nn(l),eh(l,l.type,l.pendingProps),null;case 6:if(s&&l.stateNode!=null)f=s.memoizedProps,Dn?f!==y&&Qn(l):Xs&&(f!==y?(l.stateNode=Wn(y,ll.current,$n.current,l),Qn(l)):l.stateNode=s.stateNode);else{if(typeof y!="string"&&l.stateNode===null)throw Error(u(166));if(s=ll.current,f=$n.current,jt(l)){if(!Ba)throw Error(u(176));if(s=l.stateNode,f=l.memoizedProps,y=null,E=ti,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}Eh(s,f,l,y)||ht(l)}else l.stateNode=Wn(y,s,f,l)}return Nn(l),null;case 13:if(y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(E=jt(l),y!==null&&y.dehydrated!==null){if(s===null){if(!E)throw Error(u(318));if(!Ba)throw Error(u(344));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(u(317));mg(E,l)}else Kt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Nn(l),E=!1}else As!==null&&(Qr(As),As=null),E=!0;if(!E)return l.flags&256?(Mn(l),l):(Mn(l),null)}if(Mn(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=y!==null,s=s!==null&&s.memoizedState!==null,f){y=l.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var N=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),N!==E&&(y.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),ru(l,l.updateQueue),Nn(l),null;case 4:return Nt(),hc(s,l),s===null&&k0(l.stateNode.containerInfo),Nn(l),null;case 10:return ps(l.type),Nn(l),null;case 19:if(F(Tn),E=l.memoizedState,E===null)return Nn(l),null;if(y=(l.flags&128)!==0,N=E.rendering,N===null)if(y)lu(E,!1);else{if(On!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(N=Vn(s),N!==null){for(l.flags|=128,lu(E,!1),s=N.updateQueue,l.updateQueue=s,ru(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)Ao(f,s),f=f.sibling;return D(Tn,Tn.current&1|2),l.child}s=s.sibling}E.tail!==null&&ns()>rs&&(l.flags|=128,y=!0,lu(E,!1),l.lanes=4194304)}else{if(!y)if(s=Vn(N),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,ru(l,s),lu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!tn)return Nn(l),null}else 2*ns()-E.renderingStartTime>rs&&f!==536870912&&(l.flags|=128,y=!0,lu(E,!1),l.lanes=4194304);E.isBackwards?(N.sibling=l.child,l.child=N):(s=E.last,s!==null?s.sibling=N:l.child=N,E.last=N)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=ns(),l.sibling=null,s=Tn.current,D(Tn,y?s&1|2:s&1),l):(Nn(l),null);case 22:case 23:return Mn(l),Ii(),y=l.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(f&536870912)!==0&&(l.flags&128)===0&&(Nn(l),l.subtreeFlags&6&&(l.flags|=8192)):Nn(l),f=l.updateQueue,f!==null&&ru(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048),s!==null&&F(Lo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ps(Hn),Nn(l),null;case 25:return null}throw Error(u(156,l.tag))}function tp(s,l){switch(lt(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ps(Hn),Nt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return nt(l),null;case 13:if(Mn(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(u(340));Kt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return F(Tn),null;case 4:return Nt(),null;case 10:return ps(l.type),null;case 22:case 23:return Mn(l),Ii(),s!==null&&F(Lo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ps(Hn),null;case 25:return null;default:return null}}function O0(s,l){switch(lt(l),l.tag){case 3:ps(Hn),Nt();break;case 26:case 27:case 5:nt(l);break;case 4:Nt();break;case 13:Mn(l);break;case 19:F(Tn);break;case 10:ps(l.type);break;case 22:case 23:Mn(l),Ii(),s!==null&&F(Lo);break;case 24:ps(Hn)}}function fc(s,l){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var E=y.next;f=E;do{if((f.tag&s)===s){y=void 0;var N=f.create,W=f.inst;y=N(),W.destroy=y}f=f.next}while(f!==E)}}catch(at){on(l,l.return,at)}}function wl(s,l,f){try{var y=l.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var N=E.next;y=N;do{if((y.tag&s)===s){var W=y.inst,at=W.destroy;if(at!==void 0){W.destroy=void 0,E=l;var mt=f;try{at()}catch(Rt){on(E,mt,Rt)}}}y=y.next}while(y!==N)}}catch(Rt){on(l,l.return,Rt)}}function M0(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{zr(l,f)}catch(y){on(s,s.return,y)}}}function Ua(s,l,f){f.props=yt(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(y){on(s,l,y)}}function Ks(s,l){try{var f=s.ref;if(f!==null){var y=s.stateNode;switch(s.tag){case 26:case 27:case 5:var E=wo(y);break;default:E=y}typeof f=="function"?s.refCleanup=f(E):f.current=E}}catch(N){on(s,l,N)}}function Ia(s,l){var f=s.ref,y=s.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(E){on(s,l,E)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){on(s,l,E)}else f.current=null}function hf(s){var l=s.type,f=s.memoizedProps,y=s.stateNode;try{$0(y,l,f,s)}catch(E){on(s,s.return,E)}}function ff(s,l,f){try{tg(s.stateNode,s.type,f,l,s)}catch(y){on(s,s.return,y)}}function df(s){return s.tag===5||s.tag===3||(es?s.tag===26:!1)||(Ni?s.tag===27:!1)||s.tag===4}function dc(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||df(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&(!Ni||s.tag!==27)&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gf(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?xf(f,s,l):Df(f,s);else if(!(y===4||Ni&&y===27)&&(s=s.child,s!==null))for(gf(s,l,f),s=s.sibling;s!==null;)gf(s,l,f),s=s.sibling}function ih(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?eg(f,s,l):W0(f,s);else if(!(y===4||Ni&&y===27)&&(s=s.child,s!==null))for(ih(s,l,f),s=s.sibling;s!==null;)ih(s,l,f),s=s.sibling}function _o(s,l,f){s=s.containerInfo;try{ug(s,f)}catch(y){on(l,l.return,y)}}function mf(s,l){for(B0(s.containerInfo),se=l;se!==null;)if(s=se,l=s.child,(s.subtreeFlags&1028)!==0&&l!==null)l.return=s,se=l;else for(;se!==null;){s=se;var f=s.alternate;switch(l=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&f!==null){l=void 0;var y=s,E=f.memoizedProps;f=f.memoizedState;var N=y.stateNode;try{var W=yt(y.type,E,y.elementType===y.type);l=N.getSnapshotBeforeUpdate(W,f),N.__reactInternalSnapshotBeforeUpdate=l}catch(at){on(y,y.return,at)}}break;case 3:(l&1024)!==0&&Dn&&rg(s.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(u(163))}if(l=s.sibling,l!==null){l.return=s.return,se=l;break}se=s.return}return W=_n,_n=!1,W}function ou(s,l,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:qr(s,f),y&4&&fc(5,f);break;case 1:if(qr(s,f),y&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(at){on(f,f.return,at)}else{var E=yt(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(E,l,s.__reactInternalSnapshotBeforeUpdate)}catch(at){on(f,f.return,at)}}y&64&&M0(f),y&512&&Ks(f,f.return);break;case 3:if(qr(s,f),y&64&&(y=f.updateQueue,y!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=wo(f.child.stateNode);break;case 1:s=f.child.stateNode}try{zr(y,s)}catch(at){on(f,f.return,at)}}break;case 26:if(es){qr(s,f),y&512&&Ks(f,f.return);break}case 27:case 5:qr(s,f),l===null&&y&4&&hf(f),y&512&&Ks(f,f.return);break;case 12:qr(s,f);break;case 13:qr(s,f),y&4&&So(s,f);break;case 22:if(E=f.memoizedState!==null||dl,!E){l=l!==null&&l.memoizedState!==null||ye;var N=dl,W=ye;dl=E,(ye=l)&&!W?Nl(s,f,(f.subtreeFlags&8772)!==0):qr(s,f),dl=N,ye=W}y&512&&(f.memoizedProps.mode==="manual"?Ks(f,f.return):Ia(f,f.return));break;default:qr(s,f)}}function ah(s){var l=s.alternate;l!==null&&(s.alternate=null,ah(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&j0(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function _s(s,l,f){for(f=f.child;f!==null;)Fr(s,l,f),f=f.sibling}function Fr(s,l,f){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(Tu,f)}catch{}switch(f.tag){case 26:if(es){ye||Ia(f,l),_s(s,l,f),f.memoizedState?kf(f.memoizedState):f.stateNode&&_u(f.stateNode);break}case 27:if(Ni){ye||Ia(f,l);var y=an,E=ii;an=f.stateNode,_s(s,l,f),Kf(f.stateNode),an=y,ii=E;break}case 5:ye||Ia(f,l);case 6:if(Dn){if(y=an,E=ii,an=null,_s(s,l,f),an=y,ii=E,an!==null)if(ii)try{ig(an,f.stateNode)}catch(N){on(f,l,N)}else try{ng(an,f.stateNode)}catch(N){on(f,l,N)}}else _s(s,l,f);break;case 18:Dn&&an!==null&&(ii?Lf(an,f.stateNode):vg(an,f.stateNode));break;case 4:Dn?(y=an,E=ii,an=f.stateNode.containerInfo,ii=!0,_s(s,l,f),an=y,ii=E):(Xs&&_o(f.stateNode,f,_h()),_s(s,l,f));break;case 0:case 11:case 14:case 15:ye||wl(2,f,l),ye||wl(4,f,l),_s(s,l,f);break;case 1:ye||(Ia(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"&&Ua(f,l,y)),_s(s,l,f);break;case 21:_s(s,l,f);break;case 22:ye||Ia(f,l),ye=(y=ye)||f.memoizedState!==null,_s(s,l,f),ye=y;break;default:_s(s,l,f)}}function So(s,l){if(Ba&&l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Th(s)}catch(f){on(l,l.return,f)}}function pf(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new xe),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new xe),l;default:throw Error(u(435,s.tag))}}function sh(s,l){var f=pf(s);l.forEach(function(y){var E=ch.bind(null,s,y);f.has(y)||(f.add(y),y.then(E,E))})}function ui(s,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var E=f[y],N=s,W=l;if(Dn){var at=W;t:for(;at!==null;){switch(at.tag){case 27:case 5:an=at.stateNode,ii=!1;break t;case 3:an=at.stateNode.containerInfo,ii=!0;break t;case 4:an=at.stateNode.containerInfo,ii=!0;break t}at=at.return}if(an===null)throw Error(u(160));Fr(N,W,E),an=null,ii=!1}else Fr(N,W,E);N=E.alternate,N!==null&&(N.return=null),E.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)yf(l,s),l=l.sibling}function yf(s,l){var f=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ui(l,s),La(s),y&4&&(wl(3,s,s.return),fc(3,s),wl(5,s,s.return));break;case 1:ui(l,s),La(s),y&512&&(ye||f===null||Ia(f,f.return)),y&64&&dl&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:if(es){var E=oa;ui(l,s),La(s),y&512&&(ye||f===null||Ia(f,f.return)),y&4&&(y=f!==null?f.memoizedState:null,l=s.memoizedState,f===null?l===null?s.stateNode===null?s.stateNode=Sg(E,s.type,s.memoizedProps,s):Gf(E,s.type,s.stateNode):s.stateNode=Bf(E,l,s.memoizedProps):y!==l?(y===null?f.stateNode!==null&&_u(f.stateNode):kf(y),l===null?Gf(E,s.type,s.stateNode):Bf(E,l,s.memoizedProps)):l===null&&s.stateNode!==null&&ff(s,s.memoizedProps,f.memoizedProps));break}case 27:if(Ni&&y&4&&s.alternate===null){E=s.stateNode;var N=s.memoizedProps;try{bg(E),qf(s.type,N,E,s)}catch(kt){on(s,s.return,kt)}}case 5:if(ui(l,s),La(s),y&512&&(ye||f===null||Ia(f,f.return)),Dn){if(s.flags&32){l=s.stateNode;try{vh(l)}catch(kt){on(s,s.return,kt)}}y&4&&s.stateNode!=null&&(l=s.memoizedProps,ff(s,l,f!==null?f.memoizedProps:l)),y&1024&&(gn=!0)}break;case 6:if(ui(l,s),La(s),y&4&&Dn){if(s.stateNode===null)throw Error(u(162));y=s.memoizedProps,f=f!==null?f.memoizedProps:y,l=s.stateNode;try{J0(l,f,y)}catch(kt){on(s,s.return,kt)}}break;case 3:if(es?(Eg(),E=oa,oa=Si(l.containerInfo),ui(l,s),oa=E):ui(l,s),La(s),y&4){if(Dn&&Ba&&f!==null&&f.memoizedState.isDehydrated)try{yg(l.containerInfo)}catch(kt){on(s,s.return,kt)}if(Xs){y=l.containerInfo,f=l.pendingChildren;try{ug(y,f)}catch(kt){on(s,s.return,kt)}}}gn&&(gn=!1,vf(s));break;case 4:es?(f=oa,oa=Si(s.stateNode.containerInfo),ui(l,s),La(s),oa=f):(ui(l,s),La(s)),y&4&&Xs&&_o(s.stateNode,s,s.stateNode.pendingChildren);break;case 12:ui(l,s),La(s);break;case 13:ui(l,s),La(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wf=ns()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,sh(s,y)));break;case 22:y&512&&(ye||f===null||Ia(f,f.return)),E=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,at=dl,mt=ye;if(dl=at||E,ye=mt||W,ui(l,s),ye=mt,dl=at,La(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,y&8192&&(l._visibility=E?l._visibility&-2:l._visibility|1,E&&(l=dl||ye,f===null||W||l||uu(s)),Dn&&(s.memoizedProps===null||s.memoizedProps.mode!=="manual"))){t:if(f=null,Dn)for(l=s;;){if(l.tag===5||es&&l.tag===26||Ni&&l.tag===27){if(f===null){W=f=l;try{N=W.stateNode,E?ag(N):lp(W.stateNode,W.memoizedProps)}catch(kt){on(W,W.return,kt)}}}else if(l.tag===6){if(f===null){W=l;try{var Rt=W.stateNode;E?sg(Rt):Of(Rt,W.memoizedProps)}catch(kt){on(W,W.return,kt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}y&4&&(y=s.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,sh(s,f))));break;case 19:ui(l,s),La(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,sh(s,y)));break;case 21:break;default:ui(l,s),La(s)}}function La(s){var l=s.flags;if(l&2){try{if(Dn&&(!Ni||s.tag!==27)){t:{for(var f=s.return;f!==null;){if(df(f)){var y=f;break t}f=f.return}throw Error(u(160))}switch(y.tag){case 27:if(Ni){var E=y.stateNode,N=dc(s);ih(s,N,E);break}case 5:var W=y.stateNode;y.flags&32&&(vh(W),y.flags&=-33);var at=dc(s);ih(s,at,W);break;case 3:case 4:var mt=y.stateNode.containerInfo,Rt=dc(s);gf(s,Rt,mt);break;default:throw Error(u(161))}}}catch(kt){on(s,s.return,kt)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function vf(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;vf(l),l.tag===5&&l.flags&1024&&q0(l.stateNode),s=s.sibling}}function qr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ou(s,l.alternate,l),l=l.sibling}function uu(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:wl(4,l,l.return),uu(l);break;case 1:Ia(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Ua(l,l.return,f),uu(l);break;case 26:case 27:case 5:Ia(l,l.return),uu(l);break;case 22:Ia(l,l.return),l.memoizedState===null&&uu(l);break;default:uu(l)}s=s.sibling}}function Nl(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,E=s,N=l,W=N.flags;switch(N.tag){case 0:case 11:case 15:Nl(E,N,f),fc(4,N);break;case 1:if(Nl(E,N,f),y=N,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Rt){on(y,y.return,Rt)}if(y=N,E=y.updateQueue,E!==null){var at=y.stateNode;try{var mt=E.shared.hiddenCallbacks;if(mt!==null)for(E.shared.hiddenCallbacks=null,E=0;E<mt.length;E++)Pr(mt[E],at)}catch(Rt){on(y,y.return,Rt)}}f&&W&64&&M0(N),Ks(N,N.return);break;case 26:case 27:case 5:Nl(E,N,f),f&&y===null&&W&4&&hf(N),Ks(N,N.return);break;case 12:Nl(E,N,f);break;case 13:Nl(E,N,f),f&&W&4&&So(E,N);break;case 22:N.memoizedState===null&&Nl(E,N,f),Ks(N,N.return);break;default:Nl(E,N,f)}l=l.sibling}}function rh(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Un(f))}function lh(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Un(s))}function Kr(s,l,f,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ss(s,l,f,y),l=l.sibling}function Ss(s,l,f,y){var E=l.flags;switch(l.tag){case 0:case 11:case 15:Kr(s,l,f,y),E&2048&&fc(9,l);break;case 3:Kr(s,l,f,y),E&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Un(s)));break;case 12:if(E&2048){Kr(s,l,f,y),s=l.stateNode;try{var N=l.memoizedProps,W=N.id,at=N.onPostCommit;typeof at=="function"&&at(W,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(mt){on(l,l.return,mt)}}else Kr(s,l,f,y);break;case 23:break;case 22:N=l.stateNode,l.memoizedState!==null?N._visibility&4?Kr(s,l,f,y):yr(s,l):N._visibility&4?Kr(s,l,f,y):(N._visibility|=4,zi(s,l,f,y,(l.subtreeFlags&10256)!==0)),E&2048&&rh(l.alternate,l);break;case 24:Kr(s,l,f,y),E&2048&&lh(l.alternate,l);break;default:Kr(s,l,f,y)}}function zi(s,l,f,y,E){for(E=E&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=s,W=l,at=f,mt=y,Rt=W.flags;switch(W.tag){case 0:case 11:case 15:zi(N,W,at,mt,E),fc(8,W);break;case 23:break;case 22:var kt=W.stateNode;W.memoizedState!==null?kt._visibility&4?zi(N,W,at,mt,E):yr(N,W):(kt._visibility|=4,zi(N,W,at,mt,E)),E&&Rt&2048&&rh(W.alternate,W);break;case 24:zi(N,W,at,mt,E),E&&Rt&2048&&lh(W.alternate,W);break;default:zi(N,W,at,mt,E)}l=l.sibling}}function yr(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,y=l,E=y.flags;switch(y.tag){case 22:yr(f,y),E&2048&&rh(y.alternate,y);break;case 24:yr(f,y),E&2048&&lh(y.alternate,y);break;default:yr(f,y)}l=l.sibling}}function Yr(s){if(s.subtreeFlags&eo)for(s=s.child;s!==null;)gc(s),s=s.sibling}function gc(s){switch(s.tag){case 26:Yr(s),s.flags&eo&&(s.memoizedState!==null?Ff(oa,s.memoizedState,s.memoizedProps):Nf(s.type,s.memoizedProps));break;case 5:Yr(s),s.flags&eo&&Nf(s.type,s.memoizedProps);break;case 3:case 4:if(es){var l=oa;oa=Si(s.stateNode.containerInfo),Yr(s),oa=l}else Yr(s);break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=eo,eo=16777216,Yr(s),eo=l):Yr(s));break;default:Yr(s)}}function mc(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Eo(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];se=y,yc(y,s)}mc(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xr(s),s=s.sibling}function Xr(s){switch(s.tag){case 0:case 11:case 15:Eo(s),s.flags&2048&&wl(9,s,s.return);break;case 3:Eo(s);break;case 12:Eo(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,pc(s)):Eo(s);break;default:Eo(s)}}function pc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];se=y,yc(y,s)}mc(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:wl(8,l,l.return),pc(l);break;case 22:f=l.stateNode,f._visibility&4&&(f._visibility&=-5,pc(l));break;default:pc(l)}s=s.sibling}}function yc(s,l){for(;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:wl(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Un(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,se=y;else t:for(f=s;se!==null;){y=se;var E=y.sibling,N=y.return;if(ah(y),y===f){se=null;break t}if(E!==null){E.return=N,se=E;break t}se=N}}}function Dl(s){var l=mh(s);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(u(364));return l}if(s=X0(s),s===null)throw Error(u(362));return s.stateNode.current}function oh(s,l){var f=s.tag;switch(l.$$typeof){case wn:if(s.type===l.value)return!0;break;case er:t:{for(l=l.value,s=[s,0],f=0;f<s.length;){var y=s[f++],E=y.tag,N=s[f++],W=l[N];if(E!==5&&E!==26&&E!==27||!br(y)){for(;W!=null&&oh(y,W);)N++,W=l[N];if(N===l.length){l=!0;break t}else for(y=y.child;y!==null;)s.push(y,N),y=y.sibling}}l=!1}return l;case Dr:if((f===5||f===26||f===27)&&Z0(s.stateNode,l.value))return!0;break;case Ea:if((f===5||f===6||f===26||f===27)&&(s=Q0(s),s!==null&&0<=s.indexOf(l.value)))return!0;break;case Nu:if((f===5||f===26||f===27)&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Pa(s){switch(s.$$typeof){case wn:return"<"+(d(s.value)||"Unknown")+">";case er:return":has("+(Pa(s)||"")+")";case Dr:return'[role="'+s.value+'"]';case Ea:return'"'+s.value+'"';case Nu:return'[data-testname="'+s.value+'"]';default:throw Error(u(365))}}function To(s,l){var f=[];s=[s,0];for(var y=0;y<s.length;){var E=s[y++],N=E.tag,W=s[y++],at=l[W];if(N!==5&&N!==26&&N!==27||!br(E)){for(;at!=null&&oh(E,at);)W++,at=l[W];if(W===l.length)f.push(E);else for(E=E.child;E!==null;)s.push(E,W),E=E.sibling}}return f}function xl(s,l){if(!vu)throw Error(u(363));s=Dl(s),s=To(s,l),l=[],s=Array.from(s);for(var f=0;f<s.length;){var y=s[f++],E=y.tag;if(E===5||E===26||E===27)br(y)||l.push(y.stateNode);else for(y=y.child;y!==null;)s.push(y),y=y.sibling}return l}function ea(){if((Ue&2)!==0&&Ie!==0)return Ie&-Ie;if(ue.T!==null){var s=Rn;return s!==0?s:qe()}return G0()}function vc(){ss===0&&(ss=(Ie&536870912)===0||tn?V():536870912);var s=Ha.current;return s!==null&&(s.flags|=32),ss}function En(s,l,f){(s===mn&&fn===2||s.cancelPendingCommit!==null)&&(Ol(s,0),pa(s,Ie,ss,!1)),k(s,f),((Ue&2)===0||s!==mn)&&(s===mn&&((Ue&2)===0&&(ml|=f),On===4&&pa(s,Ie,ss,!1)),rn(s))}function $a(s,l,f){if((Ue&6)!==0)throw Error(u(327));var y=!f&&(l&60)===0&&(l&s.expiredLanes)===0||Y(s,l),E=y?V0(s,l):Sc(s,l,!0),N=y;do{if(E===0){Ds&&!y&&pa(s,l,0,!1);break}else if(E===6)pa(s,l,0,!Ns);else{if(f=s.current.alternate,N&&!Zr(f)){E=Sc(s,l,!1),N=!1;continue}if(E===2){if(N=l,s.errorRecoveryDisabledLanes&N)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){l=W;t:{var at=s;E=Du;var mt=Ba&&at.current.memoizedState.isDehydrated;if(mt&&(Ol(at,W).flags|=256),W=Sc(at,W,!1),W!==2){if(Po&&!mt){at.errorRecoveryDisabledLanes|=N,ml|=N,E=4;break t}N=Os,Os=E,N!==null&&Qr(N)}E=W}if(N=!1,E!==2)continue}}if(E===1){Ol(s,0),pa(s,l,0,!0);break}t:{switch(y=s,E){case 0:case 1:throw Error(u(345));case 4:if((l&4194176)===l){pa(y,l,ss,!Ns);break t}break;case 2:Os=null;break;case 3:case 5:break;default:throw Error(u(329))}if(y.finishedWork=f,y.finishedLanes=l,(l&62914560)===l&&(N=Wf+300-ns(),10<N)){if(pa(y,l,ss,!Ns),H(y,0)!==0)break t;y.timeoutHandle=gh(vr.bind(null,y,f,Os,zo,Vh,l,ss,ml,mi,Ns,2,-0,0),N);break t}vr(y,f,Os,zo,Vh,l,ss,ml,mi,Ns,0,-0,0)}}break}while(!0);rn(s)}function Qr(s){Os===null?Os=s:Os.push.apply(Os,s)}function vr(s,l,f,y,E,N,W,at,mt,Rt,kt,Yt,zt){var ve=l.subtreeFlags;if((ve&8192||(ve&16785408)===16785408)&&(sp(),gc(l),l=F0(),l!==null)){s.cancelPendingCommit=l(uh.bind(null,s,f,y,E,W,at,mt,1,Yt,zt)),pa(s,N,W,!Rt);return}uh(s,f,y,E,W,at,mt,kt,Yt,zt)}function Zr(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var E=f[y],N=E.getSnapshot;E=E.value;try{if(!va(N(),E))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function pa(s,l,f,y){l&=~Ta,l&=~ml,s.suspendedLanes|=l,s.pingedLanes&=~l,y&&(s.warmLanes|=l),y=s.expirationTimes;for(var E=l;0<E;){var N=31-Jn(E),W=1<<N;y[N]=-1,E&=~W}f!==0&&T(s,f,l)}function _f(){return(Ue&6)===0?(bi(0),!1):!0}function _c(){if(we!==null){if(fn===0)var s=we.return;else s=we,ws=to=null,Ci(s),Uo=null,la=0,s=we;for(;s!==null;)O0(s.alternate,s),s=s.return;we=null}}function Ol(s,l){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;f!==yu&&(s.timeoutHandle=yu,Nc(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),_c(),mn=s,we=f=Jr(s.current,null),Ie=l,fn=0,gi=null,Ns=!1,Ds=Y(s,l),Po=!1,mi=ss=Ta=ml=xs=On=0,Os=Du=null,Vh=!1,(l&8)!==0&&(l|=l&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=l;0<y;){var E=31-Jn(y),N=1<<E;l|=s[E],y&=~N}return nr=l,de(),f}function na(s,l){pe=null,ue.H=ni,l===Uc?(l=Ui(),fn=3):l===Ic?(l=Ui(),fn=4):fn=l===Qf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,gi=l,we===null&&(On=1,Ut(s,pt(l,s.current)))}function wi(){var s=Ha.current;return s===null?!0:(Ie&4194176)===Ie?Cs===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?s===Cs:!1}function $e(){var s=ue.H;return ue.H=ni,s===null?ni:s}function Es(){var s=ue.A;return ue.A=gl,s}function Ts(){On=4,Ns||(Ie&4194176)!==Ie&&Ha.current!==null||(Ds=!0),(xs&134217727)===0&&(ml&134217727)===0||mn===null||pa(mn,Ie,ss,!1)}function Sc(s,l,f){var y=Ue;Ue|=2;var E=$e(),N=Es();(mn!==s||Ie!==l)&&(zo=null,Ol(s,l)),l=!1;var W=On;t:do try{if(fn!==0&&we!==null){var at=we,mt=gi;switch(fn){case 8:_c(),W=6;break t;case 3:case 2:case 6:Ha.current===null&&(l=!0);var Rt=fn;if(fn=0,gi=null,_r(s,at,mt,Rt),f&&Ds){W=0;break t}break;default:Rt=fn,fn=0,gi=null,_r(s,at,mt,Rt)}}bo(),W=On;break}catch(kt){na(s,kt)}while(!0);return l&&s.shellSuspendCounter++,ws=to=null,Ue=y,ue.H=E,ue.A=N,we===null&&(mn=null,Ie=0,de()),W}function bo(){for(;we!==null;)cu(we)}function V0(s,l){var f=Ue;Ue|=2;var y=$e(),E=Es();mn!==s||Ie!==l?(zo=null,rs=ns()+500,Ol(s,l)):Ds=Y(s,l);t:do try{if(fn!==0&&we!==null){l=we;var N=gi;e:switch(fn){case 1:fn=0,gi=null,_r(s,l,N,1);break;case 2:if(ls(N)){fn=0,gi=null,hu(l);break}l=function(){fn===2&&mn===s&&(fn=7),rn(s)},N.then(l,l);break t;case 3:fn=7;break t;case 4:fn=5;break t;case 7:ls(N)?(fn=0,gi=null,hu(l)):(fn=0,gi=null,_r(s,l,N,7));break;case 5:var W=null;switch(we.tag){case 26:W=we.memoizedState;case 5:case 27:var at=we,mt=at.type,Rt=at.pendingProps;if(W?jf(W):wf(mt,Rt)){fn=0,gi=null;var kt=at.sibling;if(kt!==null)we=kt;else{var Yt=at.return;Yt!==null?(we=Yt,Ml(Yt)):we=null}break e}}fn=0,gi=null,_r(s,l,N,5);break;case 6:fn=0,gi=null,_r(s,l,N,6);break;case 8:_c(),On=6;break t;default:throw Error(u(462))}}U0();break}catch(zt){na(s,zt)}while(!0);return ws=to=null,ue.H=y,ue.A=E,Ue=f,we!==null?0:(mn=null,Ie=0,de(),On)}function U0(){for(;we!==null&&!Kl();)cu(we)}function cu(s){var l=ta(s.alternate,s,nr);s.memoizedProps=s.pendingProps,l===null?Ml(s):we=l}function hu(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=Cl(f,l,l.pendingProps,l.type,void 0,Ie);break;case 11:l=Cl(f,l,l.pendingProps,l.type.render,l.ref,Ie);break;case 5:Ci(l);default:O0(f,l),l=we=Ao(l,nr),l=ta(f,l,nr)}s.memoizedProps=s.pendingProps,l===null?Ml(s):we=l}function _r(s,l,f,y){ws=to=null,Ci(l),Uo=null,la=0;var E=l.return;try{if(Ft(s,E,l,f,Ie)){On=1,Ut(s,pt(f,s.current)),we=null;return}}catch(N){if(E!==null)throw we=E,N;On=1,Ut(s,pt(f,s.current)),we=null;return}l.flags&32768?(tn||y===1?s=!0:Ds||(Ie&536870912)!==0?s=!1:(Ns=s=!0,(y===2||y===3||y===6)&&(y=Ha.current,y!==null&&y.tag===13&&(y.flags|=16384))),Sf(l,s)):Ml(l)}function Ml(s){var l=s;do{if((l.flags&32768)!==0){Sf(l,Ns);return}s=l.return;var f=x0(l.alternate,l,nr);if(f!==null){we=f;return}if(l=l.sibling,l!==null){we=l;return}we=l=s}while(l!==null);On===0&&(On=5)}function Sf(s,l){do{var f=tp(s.alternate,s);if(f!==null){f.flags&=32767,we=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){we=s;return}we=s=f}while(s!==null);On=6,we=null}function uh(s,l,f,y,E,N,W,at,mt,Rt){var kt=ue.T,Yt=jl();try{ya(2),ue.T=null,I0(s,l,f,y,Yt,E,N,W,at,mt,Rt)}finally{ue.T=kt,ya(Yt)}}function I0(s,l,f,y,E,N,W,at){do Vl();while(no!==null);if((Ue&6)!==0)throw Error(u(327));var mt=s.finishedWork;if(y=s.finishedLanes,mt===null)return null;if(s.finishedWork=null,s.finishedLanes=0,mt===s.current)throw Error(u(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Rt=mt.lanes|mt.childLanes;if(Rt|=Js,K(s,y,Rt,N,W,at),s===mn&&(we=mn=null,Ie=0),(mt.subtreeFlags&10256)===0&&(mt.flags&10256)===0||pl||(pl=!0,Uh=Rt,Bc=f,L0(Eu,function(){return Vl(),null})),f=(mt.flags&15990)!==0,(mt.subtreeFlags&15990)!==0||f?(f=ue.T,ue.T=null,N=jl(),ya(2),W=Ue,Ue|=4,mf(s,mt),yf(mt,s),ap(s.containerInfo),s.current=mt,ou(s,mt.alternate,mt),rl(),Ue=W,ya(N),ue.T=f):s.current=mt,pl?(pl=!1,no=s,xu=y):Ec(s,Rt),Rt=s.pendingLanes,Rt===0&&(Or=null),Q(mt.stateNode),rn(s),l!==null)for(E=s.onRecoverableError,mt=0;mt<l.length;mt++)Rt=l[mt],E(Rt.value,{componentStack:Rt.stack});return(xu&3)!==0&&Vl(),Rt=s.pendingLanes,(y&4194218)!==0&&(Rt&42)!==0?s===Jf?Bo++:(Bo=0,Jf=s):Bo=0,bi(0),null}function Ec(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Un(l)))}function Vl(){if(no!==null){var s=no,l=Uh;Uh=0;var f=G(xu),y=32>f?32:f;f=ue.T;var E=jl();try{if(ya(y),ue.T=null,no===null)var N=!1;else{y=Bc,Bc=null;var W=no,at=xu;if(no=null,xu=0,(Ue&6)!==0)throw Error(u(331));var mt=Ue;if(Ue|=4,Xr(W.current),Ss(W,W.current,at,y),Ue=mt,bi(0,!1),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(Tu,W)}catch{}N=!0}return N}finally{ya(E),ue.T=f,Ec(s,l)}}return!1}function fu(s,l,f){l=pt(f,l),l=Ht(s.stateNode,l,2),s=Me(s,l,2),s!==null&&(k(s,2),rn(s))}function on(s,l,f){if(s.tag===3)fu(s,s,f);else for(;l!==null;){if(l.tag===3){fu(l,s,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y))){s=pt(f,s),f=ee(2),y=Me(l,f,2),y!==null&&(Lt(f,y,l,s),k(y,2),rn(y));break}}l=l.return}}function Ul(s,l,f){var y=s.pingCache;if(y===null){y=s.pingCache=new zc;var E=new Set;y.set(l,E)}else E=y.get(l),E===void 0&&(E=new Set,y.set(l,E));E.has(f)||(Po=!0,E.add(f),s=Tc.bind(null,s,l,f),l.then(s,s))}function Tc(s,l,f){var y=s.pingCache;y!==null&&y.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,mn===s&&(Ie&f)===f&&(On===4||On===3&&(Ie&62914560)===Ie&&300>ns()-Wf?(Ue&2)===0&&Ol(s,0):Ta|=f,mi===Ie&&(mi=0)),rn(s)}function bc(s,l){l===0&&(l=w()),s=me(s,l),s!==null&&(k(s,l),rn(s))}function Ac(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),bc(s,f)}function ch(s,l){var f=0;switch(s.tag){case 13:var y=s.stateNode,E=s.memoizedState;E!==null&&(f=E.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(u(314))}y!==null&&y.delete(l),bc(s,f)}function L0(s,l){return Cr(s,l)}function P0(s,l,f,y){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Jr(s,l){var f=s.alternate;return f===null?(f=n(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&31457280,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Ao(s,l){s.flags&=31457282;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Co(s,l,f,y,E,N){var W=0;if(y=s,typeof s=="function")Wr(s)&&(W=1);else if(typeof s=="string")W=es&&Ni?_i(s,f,$n.current)?26:Ah(s)?27:5:es?_i(s,f,$n.current)?26:5:Ni&&Ah(s)?27:5;else t:switch(s){case Pl:return Il(f.children,E,N,l);case Ro:W=8,E|=24;break;case zl:return s=n(12,f,l,E|2),s.elementType=zl,s.lanes=N,s;case el:return s=n(13,f,l,E),s.elementType=el,s.lanes=N,s;case Rc:return s=n(19,f,l,E),s.elementType=Rc,s.lanes=N,s;case il:return hh(f,E,N,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case np:case Bl:W=10;break t;case bf:W=9;break t;case fh:W=11;break t;case gu:W=14;break t;case nl:W=16,y=null;break t}W=29,f=Error(u(130,s===null?"null":typeof s,"")),y=null}return l=n(W,f,l,E),l.elementType=s,l.type=y,l.lanes=N,l}function Il(s,l,f,y){return s=n(7,s,y,l),s.lanes=f,s}function hh(s,l,f,y){s=n(22,s,y,l),s.elementType=il,s.lanes=f;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=E._current;if(N===null)throw Error(u(456));if((E._pendingVisibility&2)===0){var W=me(N,2);W!==null&&(E._pendingVisibility|=2,En(W,N,2))}},attach:function(){var N=E._current;if(N===null)throw Error(u(456));if((E._pendingVisibility&2)!==0){var W=me(N,2);W!==null&&(E._pendingVisibility&=-3,En(W,N,2))}}};return s.stateNode=E,s}function Cc(s,l,f){return s=n(6,s,null,l),s.lanes=f,s}function za(s,l,f){return l=n(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Sr(s,l,f,y,E,N,W,at){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=M(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M(0),this.hiddenUpdates=M(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=N,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function $r(s,l,f,y,E,N,W,at,mt,Rt,kt,Yt){return s=new Sr(s,l,f,W,at,mt,Rt,Yt),l=1,N===!0&&(l|=24),N=n(3,null,null,l),s.current=N,N.stateNode=s,l=ze(),l.refCount++,s.pooledCache=l,l.refCount++,N.memoizedState={element:y,isDehydrated:f,cache:l},qn(N),s}function Ef(s){return s?(s=Mo,s):Mo}function tl(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(u(188)):(s=Object.keys(s).join(","),Error(u(268,s)));return s=C(l),s=s!==null?R(s):null,s===null?null:wo(s.stateNode)}function Er(s,l,f,y,E,N){E=Ef(E),y.context===null?y.context=E:y.pendingContext=E,y=We(l),y.payload={element:f},N=N===void 0?null:N,N!==null&&(y.callback=N),f=Me(s,y,l),f!==null&&(En(f,s,l),ji(f,s,l))}function ci(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function du(s,l){ci(s,l),(s=s.alternate)&&ci(s,l)}var Ve={},ep=Dm(),ts=k1(),Zn=Object.assign,Tf=Symbol.for("react.element"),Ll=Symbol.for("react.transitional.element"),Tr=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),Ro=Symbol.for("react.strict_mode"),zl=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),bf=Symbol.for("react.consumer"),Bl=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),el=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),il=Symbol.for("react.offscreen"),Re=Symbol.for("react.memo_cache_sentinel"),hn=Symbol.iterator,hi=Symbol.for("react.client.reference"),ue=ep.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kl,Gl,mu=!1,Hl=Array.isArray,pu=t.rendererVersion,ip=t.rendererPackageName,Gn=t.extraDevToolsConfig,wo=t.getPublicInstance,Af=t.getRootHostContext,z0=t.getChildHostContext,B0=t.prepareForCommit,ap=t.resetAfterCommit,Cf=t.createInstance,wc=t.appendInitialChild,dh=t.finalizeInitialChildren,Bi=t.shouldSetTextContent,Wn=t.createTextInstance,gh=t.scheduleTimeout,Nc=t.cancelTimeout,yu=t.noTimeout,Ys=t.isPrimaryRenderer;t.warnsIfNotActing;var Dn=t.supportsMutation,Xs=t.supportsPersistence,Ba=t.supportsHydration,mh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var k0=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ya=t.setCurrentUpdatePriority,jl=t.getCurrentUpdatePriority,G0=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var H0=t.shouldAttemptEagerTransition,j0=t.detachDeletedInstance;t.requestPostPaintCallback;var Rf=t.maySuspendCommit,wf=t.preloadInstance,sp=t.startSuspendingCommit,Nf=t.suspendInstance,F0=t.waitForCommitToBeReady,No=t.NotPendingTransition,al=t.HostTransitionContext,q0=t.resetFormInstance;t.bindToConsole;var K0=t.supportsMicrotasks,Y0=t.scheduleMicrotask,vu=t.supportsTestSelectors,X0=t.findFiberRoot,rp=t.getBoundingRect,Q0=t.getTextContent,br=t.isHiddenSubtree,Z0=t.matchAccessibilityRole,ph=t.setFocusIfFocusable,yh=t.setupIntersectionObserver,W0=t.appendChild,Df=t.appendChildToContainer,J0=t.commitTextUpdate,$0=t.commitMount,tg=t.commitUpdate,eg=t.insertBefore,xf=t.insertInContainerBefore,ng=t.removeChild,ig=t.removeChildFromContainer,vh=t.resetTextContent,ag=t.hideInstance,sg=t.hideTextInstance,lp=t.unhideInstance,Of=t.unhideTextInstance,rg=t.clearContainer,lg=t.cloneInstance,_h=t.createContainerChildSet,Mf=t.appendChildToContainerChildSet,og=t.finalizeContainerChildren,ug=t.replaceContainerChildren,cg=t.cloneHiddenInstance,Vf=t.cloneHiddenTextInstance,Do=t.isSuspenseInstancePending,Dc=t.isSuspenseInstanceFallback,Sh=t.getSuspenseInstanceFallbackErrorDetails,hg=t.registerSuspenseInstanceRetry,fg=t.canHydrateFormStateMarker,Ar=t.isFormStateMarkerMatching,Fl=t.getNextHydratableSibling,sl=t.getFirstHydratableChild,xo=t.getFirstHydratableChildWithinContainer,Uf=t.getFirstHydratableChildWithinSuspenseInstance,If=t.canHydrateInstance,dg=t.canHydrateTextInstance,gg=t.canHydrateSuspenseInstance,Oo=t.hydrateInstance,Eh=t.hydrateTextInstance,mg=t.hydrateSuspenseInstance,pg=t.getNextHydratableInstanceAfterSuspenseInstance,yg=t.commitHydratedContainer,Th=t.commitHydratedSuspenseInstance,vg=t.clearSuspenseBoundary,Lf=t.clearSuspenseBoundaryFromContainer,Pf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var _g=t.validateHydratableInstance,op=t.validateHydratableTextInstance,es=t.supportsResources,_i=t.isHostHoistableType,Si=t.getHoistableRoot,zf=t.getResource,Bf=t.acquireResource,kf=t.releaseResource,Sg=t.hydrateHoistable,Gf=t.mountHoistable,_u=t.unmountHoistable,Hf=t.createHoistableInstance,Eg=t.prepareToCommitHoistables,Tg=t.mayResourceSuspendCommit,jf=t.preloadResource,Ff=t.suspendResource,Ni=t.supportsSingletons,bh=t.resolveSingletonInstance,bg=t.clearSingleton,qf=t.acquireSingletonInstance,Kf=t.releaseSingletonInstance,Ah=t.isHostSingletonType,Ch=[],ql=-1,Mo={},Jn=Math.clz32?Math.clz32:x,Yf=Math.log,up=Math.LN2,xc=128,Su=4194304,Cr=ts.unstable_scheduleCallback,Qs=ts.unstable_cancelCallback,Kl=ts.unstable_shouldYield,rl=ts.unstable_requestPaint,ns=ts.unstable_now,Rh=ts.unstable_ImmediatePriority,Oc=ts.unstable_UserBlockingPriority,Eu=ts.unstable_NormalPriority,Vo=ts.unstable_IdlePriority,ia=ts.log,wh=ts.unstable_setDisableYieldValue,Tu=null,fi=null,va=typeof Object.is=="function"?Object.is:rt,Nh=new WeakMap,is=[],as=0,Yl=null,bu=0,ka=[],aa=0,Zs=null,Rr=1,wr="",$n=L(null),bs=L(null),ll=L(null),Mc=L(null),ti=null,dn=null,tn=!1,As=null,Ws=!1,Vc=Error(u(519)),Ga=[],ol=0,Js=0,Cn=null,Xl=null,Dh=!1,ei=!1,xh=!1,Au=0,Cu=null,Oh=0,Rn=0,Di=null,sa=!1,Mh=!1,Ag=Object.prototype.hasOwnProperty,Uc=Error(u(460)),Ic=Error(u(474)),_a={then:function(){}},ra=null,Uo=null,la=0,Ql=be(!0),Nr=be(!1),$s=L(null),tr=L(0),Ha=L(null),Cs=null,Tn=L(0),ul=0,pe=null,nn=null,xn=null,cl=!1,Io=!1,Zl=!1,Wl=0,Ru=0,hl=null,Cg=0,Xf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ni={readContext:ct,use:Xt,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se};ni.useCacheRefresh=Se,ni.useMemoCache=Se,ni.useHostTransitionStatus=Se,ni.useFormState=Se,ni.useActionState=Se,ni.useOptimistic=Se;var fl={readContext:ct,use:Xt,useCallback:function(s,l){return ln().memoizedState=[s,l===void 0?null:l],s},useContext:ct,useEffect:bl,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Tl(4194308,4,Oa.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Tl(4194308,4,s,l)},useInsertionEffect:function(s,l){Tl(4,2,s,l)},useMemo:function(s,l){var f=ln();l=l===void 0?null:l;var y=s();if(Zl){et(!0);try{s()}finally{et(!1)}}return f.memoizedState=[y,l],y},useReducer:function(s,l,f){var y=ln();if(f!==void 0){var E=f(l);if(Zl){et(!0);try{f(l)}finally{et(!1)}}}else E=l;return y.memoizedState=y.baseState=E,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:E},y.queue=s,s=s.dispatch=js.bind(null,pe,s),[y.memoizedState,s]},useRef:function(s){var l=ln();return s={current:s},l.memoizedState=s},useState:function(s){s=Zi(s);var l=s.queue,f=Hr.bind(null,pe,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:cr,useDeferredValue:function(s,l){var f=ln();return Va(f,s,l)},useTransition:function(){var s=Zi(!1);return s=Al.bind(null,pe,s.queue,!0,!1),ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var y=pe,E=ln();if(tn){if(f===void 0)throw Error(u(407));f=f()}else{if(f=l(),mn===null)throw Error(u(349));(Ie&60)!==0||Br(y,l,f)}E.memoizedState=f;var N={value:f,getSnapshot:l};return E.queue=N,bl(Sl.bind(null,y,N,s),[s]),y.flags|=2048,da(9,Qi.bind(null,y,N,f,l),{destroy:void 0},null),f},useId:function(){var s=ln(),l=mn.identifierPrefix;if(tn){var f=wr,y=Rr;f=(y&~(1<<32-Jn(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=Wl++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=Cg++,l=":"+l+"r"+f.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return ln().memoizedState=gs.bind(null,pe)}};fl.useMemoCache=Za,fl.useHostTransitionStatus=Wi,fl.useFormState=Gs,fl.useActionState=Gs,fl.useOptimistic=function(s){var l=ln();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=$i.bind(null,pe,!0,f),f.dispatch=l,[s,l]};var Sa={readContext:ct,use:Xt,useCallback:ds,useContext:ct,useEffect:Gr,useImperativeHandle:ma,useInsertionEffect:ho,useLayoutEffect:fo,useMemo:Ma,useReducer:si,useRef:ga,useState:function(){return si(Xi)},useDebugValue:cr,useDeferredValue:function(s,l){var f=cn();return Hs(f,nn.memoizedState,s,l)},useTransition:function(){var s=si(Xi)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:Jt(s),l]},useSyncExternalStore:fa,useId:fr};Sa.useCacheRefresh=Ja,Sa.useMemoCache=Za,Sa.useHostTransitionStatus=Wi,Sa.useFormState=lr,Sa.useActionState=lr,Sa.useOptimistic=function(s,l){var f=cn();return ri(f,nn,s,l)};var Jl={readContext:ct,use:Xt,useCallback:ds,useContext:ct,useEffect:Gr,useImperativeHandle:ma,useInsertionEffect:ho,useLayoutEffect:fo,useMemo:Ma,useReducer:Pi,useRef:ga,useState:function(){return Pi(Xi)},useDebugValue:cr,useDeferredValue:function(s,l){var f=cn();return nn===null?Va(f,s,l):Hs(f,nn.memoizedState,s,l)},useTransition:function(){var s=Pi(Xi)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:Jt(s),l]},useSyncExternalStore:fa,useId:fr};Jl.useCacheRefresh=Ja,Jl.useMemoCache=Za,Jl.useHostTransitionStatus=Wi,Jl.useFormState=or,Jl.useActionState=or,Jl.useOptimistic=function(s,l){var f=cn();return nn!==null?ri(f,nn,s,l):(f.baseState=s,[s,f.queue.dispatch])};var wu={isMounted:function(s){return(s=s._reactInternals)?O(s)===s:!1},enqueueSetState:function(s,l,f){s=s._reactInternals;var y=ea(),E=We(y);E.payload=l,f!=null&&(E.callback=f),l=Me(s,E,y),l!==null&&(En(l,s,y),ji(l,s,y))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var y=ea(),E=We(y);E.tag=1,E.payload=l,f!=null&&(E.callback=f),l=Me(s,E,y),l!==null&&(En(l,s,y),ji(l,s,y))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ea(),y=We(f);y.tag=2,l!=null&&(y.callback=l),l=Me(s,y,f),l!==null&&(En(l,s,f),ji(l,s,f))}},$l=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qf=Error(u(461)),di=!1,Lc={dehydrated:null,treeContext:null,retryLane:0},Rs=L(null),to=null,ws=null,Pc=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,y){s.push(y)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},In=ts.unstable_scheduleCallback,cp=ts.unstable_NormalPriority,Hn={$$typeof:Bl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zf=ue.S;ue.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Fn(s,l),Zf!==null&&Zf(s,l)};var Lo=L(null),dl=!1,ye=!1,gn=!1,xe=typeof WeakSet=="function"?WeakSet:Set,se=null,_n=!1,an=null,ii=!1,oa=null,eo=8192,gl={getCacheForType:function(s){var l=ct(Hn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},wn=0,er=1,Dr=2,Nu=3,Ea=4;if(typeof Symbol=="function"&&Symbol.for){var xr=Symbol.for;wn=xr("selector.component"),er=xr("selector.has_pseudo_class"),Dr=xr("selector.role"),Nu=xr("selector.test_id"),Ea=xr("selector.text")}var zc=typeof WeakMap=="function"?WeakMap:Map,Ue=0,mn=null,we=null,Ie=0,fn=0,gi=null,Ns=!1,Ds=!1,Po=!1,nr=0,On=0,xs=0,ml=0,Ta=0,ss=0,mi=0,Du=null,Os=null,Vh=!1,Wf=0,rs=1/0,zo=null,Or=null,pl=!1,no=null,xu=0,Uh=0,Bc=null,Bo=0,Jf=null;return Ve.attemptContinuousHydration=function(s){if(s.tag===13){var l=me(s,67108864);l!==null&&En(l,s,67108864),du(s,67108864)}},Ve.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var l=ea(),f=me(s,l);f!==null&&En(f,s,l),du(s,l)}},Ve.attemptSynchronousHydration=function(s){switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var l=z(s.pendingLanes);if(l!==0){for(s.pendingLanes|=2,s.entangledLanes|=2;l;){var f=1<<31-Jn(l);s.entanglements[1]|=f,l&=~f}rn(s),(Ue&6)===0&&(rs=ns()+500,bi(0))}}break;case 13:l=me(s,2),l!==null&&En(l,s,2),_f(),du(s,2)}},Ve.batchedUpdates=function(s,l){return s(l)},Ve.createComponentSelector=function(s){return{$$typeof:wn,value:s}},Ve.createContainer=function(s,l,f,y,E,N,W,at,mt,Rt){return $r(s,l,!1,null,f,y,N,W,at,mt,Rt,null)},Ve.createHasPseudoClassSelector=function(s){return{$$typeof:er,value:s}},Ve.createHydrationContainer=function(s,l,f,y,E,N,W,at,mt,Rt,kt,Yt,zt){return s=$r(f,y,!0,s,E,N,at,mt,Rt,kt,Yt,zt),s.context=Ef(null),f=s.current,y=ea(),E=We(y),E.callback=l??null,Me(f,E,y),s.current.lanes=y,k(s,y),rn(s),s},Ve.createPortal=function(s,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:y==null?null:""+y,children:s,containerInfo:l,implementation:f}},Ve.createRoleSelector=function(s){return{$$typeof:Dr,value:s}},Ve.createTestNameSelector=function(s){return{$$typeof:Nu,value:s}},Ve.createTextSelector=function(s){return{$$typeof:Ea,value:s}},Ve.defaultOnCaughtError=function(s){console.error(s)},Ve.defaultOnRecoverableError=function(s){$l(s)},Ve.defaultOnUncaughtError=function(s){$l(s)},Ve.deferredUpdates=function(s){var l=ue.T,f=jl();try{return ya(32),ue.T=null,s()}finally{ya(f),ue.T=l}},Ve.discreteUpdates=function(s,l,f,y,E){var N=ue.T,W=jl();try{return ya(2),ue.T=null,s(l,f,y,E)}finally{ya(W),ue.T=N,Ue===0&&(rs=ns()+500)}},Ve.findAllNodes=xl,Ve.findBoundingRects=function(s,l){if(!vu)throw Error(u(363));l=xl(s,l),s=[];for(var f=0;f<l.length;f++)s.push(rp(l[f]));for(l=s.length-1;0<l;l--){f=s[l];for(var y=f.x,E=y+f.width,N=f.y,W=N+f.height,at=l-1;0<=at;at--)if(l!==at){var mt=s[at],Rt=mt.x,kt=Rt+mt.width,Yt=mt.y,zt=Yt+mt.height;if(y>=Rt&&N>=Yt&&E<=kt&&W<=zt){s.splice(l,1);break}else if(y!==Rt||f.width!==mt.width||zt<N||Yt>W){if(!(N!==Yt||f.height!==mt.height||kt<y||Rt>E)){Rt>y&&(mt.width+=Rt-y,mt.x=y),kt<E&&(mt.width=E-Rt),s.splice(l,1);break}}else{Yt>N&&(mt.height+=Yt-N,mt.y=N),zt<W&&(mt.height=W-Yt),s.splice(l,1);break}}}return s},Ve.findHostInstance=tl,Ve.findHostInstanceWithNoPortals=function(s){return s=C(s),s=s!==null?I(s):null,s===null?null:wo(s.stateNode)},Ve.findHostInstanceWithWarning=function(s){return tl(s)},Ve.flushPassiveEffects=Vl,Ve.flushSyncFromReconciler=function(s){var l=Ue;Ue|=1;var f=ue.T,y=jl();try{if(ya(2),ue.T=null,s)return s()}finally{ya(y),ue.T=f,Ue=l,(Ue&6)===0&&bi(0)}},Ve.flushSyncWork=_f,Ve.focusWithin=function(s,l){if(!vu)throw Error(u(363));for(s=Dl(s),l=To(s,l),l=Array.from(l),s=0;s<l.length;){var f=l[s++],y=f.tag;if(!br(f)){if((y===5||y===26||y===27)&&ph(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},Ve.getFindAllNodesFailureDescription=function(s,l){if(!vu)throw Error(u(363));var f=0,y=[];s=[Dl(s),0];for(var E=0;E<s.length;){var N=s[E++],W=N.tag,at=s[E++],mt=l[at];if((W!==5&&W!==26&&W!==27||!br(N))&&(oh(N,mt)&&(y.push(Pa(mt)),at++,at>f&&(f=at)),at<l.length))for(N=N.child;N!==null;)s.push(N,at),N=N.sibling}if(f<l.length){for(s=[];f<l.length;f++)s.push(Pa(l[f]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},Ve.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 27:case 5:return wo(s.child.stateNode);default:return s.child.stateNode}},Ve.injectIntoDevTools=function(){var s={bundleType:0,version:pu,rendererPackageName:ip,currentDispatcherRef:ue,findFiberByHostInstance:mh,reconcilerVersion:"19.0.0"};if(Gn!==null&&(s.rendererConfig=Gn),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)s=!0;else{try{Tu=l.inject(s),fi=l}catch{}s=!!l.checkDCE}}return s},Ve.isAlreadyRendering=function(){return!1},Ve.observeVisibleRects=function(s,l,f,y){if(!vu)throw Error(u(363));s=xl(s,l);var E=yh(s,f,y).disconnect;return{disconnect:function(){E()}}},Ve.shouldError=function(){return null},Ve.shouldSuspend=function(){return!1},Ve.startHostTransition=function(s,l,f,y){if(s.tag!==5)throw Error(u(476));var E=hr(s).queue;Al(s,E,l,No,f===null?r:function(){var N=hr(s).next.queue;return Ji(s,N,{},ea()),f(y)})},Ve.updateContainer=function(s,l,f,y){var E=l.current,N=ea();return Er(E,N,s,l,f,y),N},Ve.updateContainerSync=function(s,l,f,y){return l.tag===0&&Vl(),Er(l.current,2,s,l,f,y),2},Ve},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(Qp)),Qp.exports}var Vv;function DE(){return Vv||(Vv=1,Xp.exports=NE()),Xp.exports}var xE=DE();const OE=B1(xE);var Zp={exports:{}},Fo={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function ME(){return Uv||(Uv=1,Fo.ConcurrentRoot=1,Fo.ContinuousEventPriority=8,Fo.DefaultEventPriority=32,Fo.DiscreteEventPriority=2,Fo.IdleEventPriority=268435456,Fo.LegacyRoot=0,Fo.NoEventPriority=0),Fo}var Iv;function VE(){return Iv||(Iv=1,Zp.exports=ME()),Zp.exports}var Mm=VE(),UE=Pe();const Lv={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Pv=!1,zv=!1;const q1=".react-konva-event",IE=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,LE=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,PE={};function Vm(a,t,n=PE){if(!Pv&&"zIndex"in t&&(console.warn(LE),Pv=!0),!zv&&t.draggable){var r=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;r&&!u&&(console.warn(IE),zv=!0)}for(var c in n)if(!Lv[c]){var d=c.slice(0,2)==="on",m=n[c]!==t[c];if(d&&m){var v=c.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),a.off(v,n[c])}var _=!t.hasOwnProperty(c);_&&a.setAttr(c,void 0)}var b=t._useStrictMode,O={},U=!1;const C={};for(var c in t)if(!Lv[c]){var d=c.slice(0,2)==="on",R=n[c]!==t[c];if(d&&R){var v=c.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),t[c]&&(C[v]=t[c])}!d&&(t[c]!==n[c]||b&&t[c]!==a.getAttr(c))&&(U=!0,O[c]=t[c])}U&&(a.setAttrs(O),nc(a));for(var v in C)a.on(v+q1,C[v])}function nc(a){if(!UE.Konva.autoDrawEnabled){var t=a.getLayer()||a.getStage();t&&t.batchDraw()}}var Wp=k1();const v4={},zE={};um.Node.prototype._applyProps=Vm;let _4=Mm.DefaultEventPriority;function BE(a,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}a.add(t),nc(a)}function kE(a,t,n){let r=um[a];r||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=um.Group);const u={},c={};for(var d in t){var m=d.slice(0,2)==="on";m?c[d]=t[d]:u[d]=t[d]}const v=new r(u);return Vm(v,c),v}function GE(a,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function HE(a,t,n){return!1}function jE(a){return a}function FE(){return null}function qE(){return null}function KE(a,t,n,r){return zE}function YE(){}function XE(a){}function QE(a,t){return!1}function ZE(){return v4}function WE(){return v4}const JE=setTimeout,$E=clearTimeout,t6=!0,e6=a=>{a()},n6=-1;function i6(a,t){return!1}const a6=!1,s6=!1,r6=!0,l6=!1,o6=!1;function u6(a,t){t.parent===a?t.moveToTop():a.add(t),nc(a)}function c6(a,t){t.parent===a?t.moveToTop():a.add(t),nc(a)}function S4(a,t,n){t._remove(),a.add(t),t.setZIndex(n.getZIndex()),nc(a)}function h6(a,t,n){S4(a,t,n)}function f6(a,t){t.destroy(),t.off(q1),nc(a)}function d6(a,t){t.destroy(),t.off(q1),nc(a)}function g6(a,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function m6(a,t,n){}function p6(a,t,n,r){Vm(a,r,n)}function y6(a){a.hide(),nc(a)}function v6(a){}function _6(a,t){(t.visible==null||t.visible)&&a.show()}function S6(a,t){}function E6(a){}function T6(){}function b6(){return Mm.DefaultEventPriority}function A6(){}function C6(){return null}function R6(a){_4=a}function w6(){return _4}function N6(){return Mm.DiscreteEventPriority}function D6(){return!1}function x6(){}function O6(){return!1}function M6(){return!0}function V6(){}function U6(){}function I6(){return null}const L6=null;function P6(){}const z6=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:L6,appendChild:u6,appendChildToContainer:c6,appendInitialChild:BE,cancelTimeout:$E,clearContainer:E6,commitMount:m6,commitTextUpdate:g6,commitUpdate:p6,createInstance:kE,createTextInstance:GE,detachDeletedInstance:T6,finalizeInitialChildren:HE,getChildHostContext:WE,getCurrentEventPriority:b6,getCurrentUpdatePriority:w6,getInstanceFromScope:C6,getPublicInstance:jE,getRootHostContext:ZE,hideInstance:y6,hideTextInstance:v6,idlePriority:Wp.unstable_IdlePriority,insertBefore:S4,insertInContainerBefore:h6,isPrimaryRenderer:a6,maySuspendCommit:O6,noTimeout:n6,now:Wp.unstable_now,preloadInstance:M6,prepareForCommit:FE,preparePortalMount:qE,prepareScopeUpdate:A6,prepareUpdate:KE,removeChild:f6,removeChildFromContainer:d6,requestPostPaintCallback:x6,resetAfterCommit:YE,resetFormInstance:P6,resetTextContent:XE,resolveUpdatePriority:N6,run:Wp.unstable_runWithPriority,scheduleMicrotask:e6,scheduleTimeout:JE,setCurrentUpdatePriority:R6,shouldAttemptEagerTransition:D6,shouldDeprioritizeSubtree:QE,shouldSetTextContent:i6,startSuspendingCommit:V6,supportsHydration:o6,supportsMicrotasks:t6,supportsMutation:r6,supportsPersistence:l6,suspendInstance:U6,unhideInstance:_6,unhideTextInstance:S6,waitForCommitToBeReady:I6,warnsIfNotActing:s6},Symbol.toStringTag,{value:"Module"}));function E4(a,t,n){if(!a)return;if(n(a)===!0)return a;let r=a.child;for(;r;){const u=E4(r,t,n);if(u)return u;r=r.sibling}}function T4(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const K1=T4(Gt.createContext(null));class b4 extends Gt.Component{render(){return Gt.createElement(K1.Provider,{value:this._reactInternals},this.props.children)}}function B6(){const a=Gt.useContext(K1);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Gt.useId();return Gt.useMemo(()=>{for(const n of[a,a==null?void 0:a.alternate]){if(!n)continue;const r=E4(n,!1,u=>{let c=u.memoizedState;for(;c;){if(c.memoizedState===t)return!0;c=c.next}});if(r)return r}},[a,t])}const k6=Symbol.for("react.context"),G6=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===k6;function H6(){const a=B6(),[t]=Gt.useState(()=>new Map);t.clear();let n=a;for(;n;){const r=n.type;G6(r)&&r!==K1&&!t.has(r)&&t.set(r,Gt.use(T4(r))),n=n.return}return t}function j6(){const a=H6();return Gt.useMemo(()=>Array.from(a.keys()).reduce((t,n)=>r=>Gt.createElement(t,null,Gt.createElement(n.Provider,{...r,value:a.get(n)})),t=>Gt.createElement(b4,{...t})),[a])}if(qa.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function F6(a){const t=qa.useRef({});return qa.useLayoutEffect(()=>{t.current=a}),qa.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const q6=a=>{const t=qa.useRef(null),n=qa.useRef(null),r=qa.useRef(null),u=F6(a),c=j6(),d=m=>{const{forwardedRef:v}=a;v&&(typeof v=="function"?v(m):v.current=m)};return qa.useLayoutEffect(()=>(n.current=new um.Stage({width:a.width,height:a.height,container:t.current}),d(n.current),r.current=$d.createContainer(n.current,Mm.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),$d.updateContainer(qa.createElement(c,{},a.children),r.current,null,()=>{}),()=>{d(null),$d.updateContainer(null,r.current,null),n.current.destroy()}),[]),qa.useLayoutEffect(()=>{d(n.current),Vm(n.current,a,u),$d.updateContainer(qa.createElement(c,{},a.children),r.current,null)}),qa.createElement("div",{ref:t,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},K6="Layer",Jp="Group",Vr="Rect",zu="Circle",Bv="Ellipse",Jd="Line",$p="Text",Fg="Arc",kv="Arrow",$d=OE(z6);$d.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:qa.version,rendererPackageName:"react-konva"});const Y6=qa.forwardRef((a,t)=>qa.createElement(b4,{},qa.createElement(q6,{...a,forwardedRef:t}))),X6=()=>{};var Gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=function(a){const t=[];let n=0;for(let r=0;r<a.length;r++){let u=a.charCodeAt(r);u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(u=65536+((u&1023)<<10)+(a.charCodeAt(++r)&1023),t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128)}return t},Q6=function(a){const t=[];let n=0,r=0;for(;n<a.length;){const u=a[n++];if(u<128)t[r++]=String.fromCharCode(u);else if(u>191&&u<224){const c=a[n++];t[r++]=String.fromCharCode((u&31)<<6|c&63)}else if(u>239&&u<365){const c=a[n++],d=a[n++],m=a[n++],v=((u&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(v>>10)),t[r++]=String.fromCharCode(56320+(v&1023))}else{const c=a[n++],d=a[n++];t[r++]=String.fromCharCode((u&15)<<12|(c&63)<<6|d&63)}}return t.join("")},C4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let u=0;u<a.length;u+=3){const c=a[u],d=u+1<a.length,m=d?a[u+1]:0,v=u+2<a.length,_=v?a[u+2]:0,b=c>>2,O=(c&3)<<4|m>>4;let U=(m&15)<<2|_>>6,C=_&63;v||(C=64,d||(U=64)),r.push(n[b],n[O],n[U],n[C])}return r.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(A4(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):Q6(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let u=0;u<a.length;){const c=n[a.charAt(u++)],m=u<a.length?n[a.charAt(u)]:0;++u;const _=u<a.length?n[a.charAt(u)]:64;++u;const O=u<a.length?n[a.charAt(u)]:64;if(++u,c==null||m==null||_==null||O==null)throw new Z6;const U=c<<2|m>>4;if(r.push(U),_!==64){const C=m<<4&240|_>>2;if(r.push(C),O!==64){const R=_<<6&192|O;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class Z6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W6=function(a){const t=A4(a);return C4.encodeByteArray(t,!0)},cm=function(a){return W6(a).replace(/\./g,"")},R4=function(a){try{return C4.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=()=>J6().__FIREBASE_DEFAULTS__,tT=()=>{if(typeof process>"u"||typeof Gv>"u")return;const a=Gv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},eT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&R4(a[1]);return t&&JSON.parse(t)},Um=()=>{try{return X6()||$6()||tT()||eT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},w4=a=>{var t,n;return(n=(t=Um())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[a]},nT=a=>{const t=w4(a);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},N4=()=>{var a;return(a=Um())===null||a===void 0?void 0:a.config},D4=a=>{var t;return(t=Um())===null||t===void 0?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",u=a.iat||0,c=a.sub||a.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:u,exp:u+3600,auth_time:u,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},a);return[cm(JSON.stringify(n)),cm(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xa())}function rT(){var a;const t=(a=Um())===null||a===void 0?void 0:a.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function uT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cT(){const a=Xa();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function hT(){return!rT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function dT(){return new Promise((a,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(r);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var c;t(((c=u.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="FirebaseError";class tu extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=gT,Object.setPrototypeOf(this,tu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_0.prototype.create)}}class _0{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},u=`${this.service}/${t}`,c=this.errors[t],d=c?mT(c,r):"Error",m=`${this.serviceName}: ${d} (${u}).`;return new tu(u,m,r)}}function mT(a,t){return a.replace(pT,(n,r)=>{const u=t[r];return u!=null?String(u):`<${r}?>`})}const pT=/\{\$([^}]+)}/g;function yT(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function Fc(a,t){if(a===t)return!0;const n=Object.keys(a),r=Object.keys(t);for(const u of n){if(!r.includes(u))return!1;const c=a[u],d=t[u];if(Hv(c)&&Hv(d)){if(!Fc(c,d))return!1}else if(c!==d)return!1}for(const u of r)if(!n.includes(u))return!1;return!0}function Hv(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(a){const t=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(u=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(u))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function t0(a){const t={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[u,c]=r.split("=");t[decodeURIComponent(u)]=decodeURIComponent(c)}}),t}function e0(a){const t=a.indexOf("?");if(!t)return"";const n=a.indexOf("#",t);return a.substring(t,n>0?n:void 0)}function vT(a,t){const n=new _T(a,t);return n.subscribe.bind(n)}class _T{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let u;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ST(t,["next","error","complete"])?u=t:u={next:t,error:n,complete:r},u.next===void 0&&(u.next=t1),u.error===void 0&&(u.error=t1),u.complete===void 0&&(u.complete=t1);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ST(a,t){if(typeof a!="object"||a===null)return!1;for(const n of t)if(n in a&&typeof a[n]=="function")return!0;return!1}function t1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(a){return a&&a._delegate?a._delegate:a}class qc{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new iT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&r.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(u)return null;throw c}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bT(t))try{this.getOrInitializeService({instanceIdentifier:Gc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:u});r.resolve(c)}catch{}}}}clearInstance(t=Gc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gc){return this.instances.has(t)}getOptions(t=Gc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(u)}return u}onInit(t,n){var r;const u=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(u))!==null&&r!==void 0?r:new Set;c.add(t),this.onInitCallbacks.set(u,c);const d=this.instances.get(u);return d&&t(d,u),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const u of r)try{u(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TT(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gc){return this.component?this.component.multipleInstances?t:Gc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(a){return a===Gc?void 0:a}function bT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ET(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ye||(Ye={}));const CT={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},RT=Ye.INFO,wT={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},NT=(a,t,...n)=>{if(t<a.logLevel)return;const r=new Date().toISOString(),u=wT[t];if(u)console[u](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Y1{constructor(t){this.name=t,this._logLevel=RT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ye))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?CT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...t),this._logHandler(this,Ye.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...t),this._logHandler(this,Ye.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...t),this._logHandler(this,Ye.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...t),this._logHandler(this,Ye.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...t),this._logHandler(this,Ye.ERROR,...t)}}const DT=(a,t)=>t.some(n=>a instanceof n);let jv,Fv;function xT(){return jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x4=new WeakMap,g1=new WeakMap,O4=new WeakMap,e1=new WeakMap,X1=new WeakMap;function MT(a){const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("success",c),a.removeEventListener("error",d)},c=()=>{n(Fu(a.result)),u()},d=()=>{r(a.error),u()};a.addEventListener("success",c),a.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&x4.set(n,a)}).catch(()=>{}),X1.set(t,a),t}function VT(a){if(g1.has(a))return;const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",d),a.removeEventListener("abort",d)},c=()=>{n(),u()},d=()=>{r(a.error||new DOMException("AbortError","AbortError")),u()};a.addEventListener("complete",c),a.addEventListener("error",d),a.addEventListener("abort",d)});g1.set(a,t)}let m1={get(a,t,n){if(a instanceof IDBTransaction){if(t==="done")return g1.get(a);if(t==="objectStoreNames")return a.objectStoreNames||O4.get(a);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fu(a[t])},set(a,t,n){return a[t]=n,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function UT(a){m1=a(m1)}function IT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=a.call(n1(this),t,...n);return O4.set(r,t.sort?t.sort():[t]),Fu(r)}:OT().includes(a)?function(...t){return a.apply(n1(this),t),Fu(x4.get(this))}:function(...t){return Fu(a.apply(n1(this),t))}}function LT(a){return typeof a=="function"?IT(a):(a instanceof IDBTransaction&&VT(a),DT(a,xT())?new Proxy(a,m1):a)}function Fu(a){if(a instanceof IDBRequest)return MT(a);if(e1.has(a))return e1.get(a);const t=LT(a);return t!==a&&(e1.set(a,t),X1.set(t,a)),t}const n1=a=>X1.get(a);function PT(a,t,{blocked:n,upgrade:r,blocking:u,terminated:c}={}){const d=indexedDB.open(a,t),m=Fu(d);return r&&d.addEventListener("upgradeneeded",v=>{r(Fu(d.result),v.oldVersion,v.newVersion,Fu(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),m.then(v=>{c&&v.addEventListener("close",()=>c()),u&&v.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const zT=["get","getKey","getAll","getAllKeys","count"],BT=["put","add","delete","clear"],i1=new Map;function qv(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(i1.get(t))return i1.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,u=BT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(u||zT.includes(n)))return;const c=async function(d,...m){const v=this.transaction(d,u?"readwrite":"readonly");let _=v.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),u&&v.done]))[0]};return i1.set(t,c),c}UT(a=>({...a,get:(t,n,r)=>qv(t,n)||a.get(t,n,r),has:(t,n)=>!!qv(t,n)||a.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(a){const t=a.getComponent();return(t==null?void 0:t.type)==="VERSION"}const p1="@firebase/app",Kv="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Y1("@firebase/app"),HT="@firebase/app-compat",jT="@firebase/analytics-compat",FT="@firebase/analytics",qT="@firebase/app-check-compat",KT="@firebase/app-check",YT="@firebase/auth",XT="@firebase/auth-compat",QT="@firebase/database",ZT="@firebase/data-connect",WT="@firebase/database-compat",JT="@firebase/functions",$T="@firebase/functions-compat",tb="@firebase/installations",eb="@firebase/installations-compat",nb="@firebase/messaging",ib="@firebase/messaging-compat",ab="@firebase/performance",sb="@firebase/performance-compat",rb="@firebase/remote-config",lb="@firebase/remote-config-compat",ob="@firebase/storage",ub="@firebase/storage-compat",cb="@firebase/firestore",hb="@firebase/vertexai",fb="@firebase/firestore-compat",db="firebase",gb="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="[DEFAULT]",mb={[p1]:"fire-core",[HT]:"fire-core-compat",[FT]:"fire-analytics",[jT]:"fire-analytics-compat",[KT]:"fire-app-check",[qT]:"fire-app-check-compat",[YT]:"fire-auth",[XT]:"fire-auth-compat",[QT]:"fire-rtdb",[ZT]:"fire-data-connect",[WT]:"fire-rtdb-compat",[JT]:"fire-fn",[$T]:"fire-fn-compat",[tb]:"fire-iid",[eb]:"fire-iid-compat",[nb]:"fire-fcm",[ib]:"fire-fcm-compat",[ab]:"fire-perf",[sb]:"fire-perf-compat",[rb]:"fire-rc",[lb]:"fire-rc-compat",[ob]:"fire-gcs",[ub]:"fire-gcs-compat",[cb]:"fire-fst",[fb]:"fire-fst-compat",[hb]:"fire-vertex","fire-js":"fire-js",[db]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Map,pb=new Map,v1=new Map;function Yv(a,t){try{a.container.addComponent(t)}catch(n){Zo.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,n)}}function Qh(a){const t=a.name;if(v1.has(t))return Zo.debug(`There were multiple attempts to register component ${t}.`),!1;v1.set(t,a);for(const n of hm.values())Yv(n,a);for(const n of pb.values())Yv(n,a);return!0}function Q1(a,t){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(t)}function ir(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qu=new _0("app","Firebase",yb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=gb;function M4(a,t={}){let n=a;typeof t!="object"&&(t={name:t});const r=Object.assign({name:y1,automaticDataCollectionEnabled:!1},t),u=r.name;if(typeof u!="string"||!u)throw qu.create("bad-app-name",{appName:String(u)});if(n||(n=N4()),!n)throw qu.create("no-options");const c=hm.get(u);if(c){if(Fc(n,c.options)&&Fc(r,c.config))return c;throw qu.create("duplicate-app",{appName:u})}const d=new AT(u);for(const v of v1.values())d.addComponent(v);const m=new vb(n,r,d);return hm.set(u,m),m}function V4(a=y1){const t=hm.get(a);if(!t&&a===y1&&N4())return M4();if(!t)throw qu.create("no-app",{appName:a});return t}function Ku(a,t,n){var r;let u=(r=mb[a])!==null&&r!==void 0?r:a;n&&(u+=`-${n}`);const c=u.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const m=[`Unable to register library "${u}" with version "${t}":`];c&&m.push(`library name "${u}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zo.warn(m.join(" "));return}Qh(new qc(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="firebase-heartbeat-database",Sb=1,c0="firebase-heartbeat-store";let a1=null;function U4(){return a1||(a1=PT(_b,Sb,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(c0)}catch(n){console.warn(n)}}}}).catch(a=>{throw qu.create("idb-open",{originalErrorMessage:a.message})})),a1}async function Eb(a){try{const n=(await U4()).transaction(c0),r=await n.objectStore(c0).get(I4(a));return await n.done,r}catch(t){if(t instanceof tu)Zo.warn(t.message);else{const n=qu.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Zo.warn(n.message)}}}async function Xv(a,t){try{const r=(await U4()).transaction(c0,"readwrite");await r.objectStore(c0).put(t,I4(a)),await r.done}catch(n){if(n instanceof tu)Zo.warn(n.message);else{const r=qu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zo.warn(r.message)}}}function I4(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=1024,bb=30;class Ab{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Qv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:u}),this._heartbeatsCache.heartbeats.length>bb){const d=wb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zo.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qv(),{heartbeatsToSend:r,unsentEntries:u}=Cb(this._heartbeatsCache.heartbeats),c=cm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Zo.warn(n),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function Cb(a,t=Tb){const n=[];let r=a.slice();for(const u of a){const c=n.find(d=>d.agent===u.agent);if(c){if(c.dates.push(u.date),Zv(n)>t){c.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),Zv(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Rb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?dT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Eb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function Zv(a){return cm(JSON.stringify({version:2,heartbeats:a})).length}function wb(a){if(a.length===0)return-1;let t=0,n=a[0].date;for(let r=1;r<a.length;r++)a[r].date<n&&(n=a[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(a){Qh(new qc("platform-logger",t=>new kT(t),"PRIVATE")),Qh(new qc("heartbeat",t=>new Ab(t),"PRIVATE")),Ku(p1,Kv,a),Ku(p1,Kv,"esm2017"),Ku("fire-js","")}Nb("");var Db="firebase",xb="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ku(Db,xb,"app");function Z1(a,t){var n={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(a);u<r.length;u++)t.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(a,r[u])&&(n[r[u]]=a[r[u]]);return n}function L4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ob=L4,P4=new _0("auth","Firebase",L4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Y1("@firebase/auth");function Mb(a,...t){fm.logLevel<=Ye.WARN&&fm.warn(`Auth (${sf}): ${a}`,...t)}function $g(a,...t){fm.logLevel<=Ye.ERROR&&fm.error(`Auth (${sf}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(a,...t){throw J1(a,...t)}function _l(a,...t){return J1(a,...t)}function W1(a,t,n){const r=Object.assign(Object.assign({},Ob()),{[t]:n});return new _0("auth","Firebase",r).create(t,{appName:a.name})}function Qo(a){return W1(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vb(a,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Lr(a,"argument-error"),W1(a,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J1(a,...t){if(typeof a!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return P4.create(a,...t)}function fe(a,t,...n){if(!a)throw J1(t,...n)}function Ko(a){const t="INTERNAL ASSERTION FAILED: "+a;throw $g(t),new Error(t)}function Wo(a,t){a||Ko(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function Ub(){return Wv()==="http:"||Wv()==="https:"}function Wv(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ub()||oT()||"connection"in navigator)?navigator.onLine:!0}function Lb(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t,n){this.shortDelay=t,this.longDelay=n,Wo(n>t,"Short delay should be less than long delay!"),this.isMobile=sT()||uT()}get(){return Ib()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(a,t){Wo(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new E0(3e4,6e4);function ic(a,t){return a.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:a.tenantId}):t}async function ac(a,t,n,r,u={}){return B4(a,u,async()=>{let c={},d={};r&&(t==="GET"?d=r:c={body:JSON.stringify(r)});const m=S0(Object.assign({key:a.config.apiKey},d)).slice(1),v=await a._getAdditionalHeaders();v["Content-Type"]="application/json",a.languageCode&&(v["X-Firebase-Locale"]=a.languageCode);const _=Object.assign({method:t,headers:v},c);return lT()||(_.referrerPolicy="no-referrer"),z4.fetch()(k4(a,a.config.apiHost,n,m),_)})}async function B4(a,t,n){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pb),t);try{const u=new kb(a),c=await Promise.race([n(),u.promise]);u.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw qg(a,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[v,_]=m.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw qg(a,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw qg(a,"email-already-in-use",d);if(v==="USER_DISABLED")throw qg(a,"user-disabled",d);const b=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw W1(a,b,_);Lr(a,b)}}catch(u){if(u instanceof tu)throw u;Lr(a,"network-request-failed",{message:String(u)})}}async function T0(a,t,n,r,u={}){const c=await ac(a,t,n,r,u);return"mfaPendingCredential"in c&&Lr(a,"multi-factor-auth-required",{_serverResponse:c}),c}function k4(a,t,n,r){const u=`${t}${n}?${r}`;return a.config.emulator?$1(a.config,u):`${a.config.apiScheme}://${u}`}function Bb(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_l(this.auth,"network-request-failed")),zb.get())})}}function qg(a,t,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const u=_l(a,t,r);return u.customData._tokenResponse=n,u}function Jv(a){return a!==void 0&&a.enterprise!==void 0}class Gb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Bb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hb(a,t){return ac(a,"GET","/v2/recaptchaConfig",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(a,t){return ac(a,"POST","/v1/accounts:delete",t)}async function G4(a,t){return ac(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Fb(a,t=!1){const n=Ls(a),r=await n.getIdToken(t),u=ty(r);fe(u&&u.exp&&u.auth_time&&u.iat,n.auth,"internal-error");const c=typeof u.firebase=="object"?u.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:u,token:r,authTime:s0(s1(u.auth_time)),issuedAtTime:s0(s1(u.iat)),expirationTime:s0(s1(u.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function s1(a){return Number(a)*1e3}function ty(a){const[t,n,r]=a.split(".");if(t===void 0||n===void 0||r===void 0)return $g("JWT malformed, contained fewer than 3 sections"),null;try{const u=R4(n);return u?JSON.parse(u):($g("Failed to decode base64 JWT payload"),null)}catch(u){return $g("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function $v(a){const t=ty(a);return fe(t,"internal-error"),fe(typeof t.exp<"u","internal-error"),fe(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(a,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof tu&&qb(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function qb({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const u=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=s0(this.lastLoginAt),this.creationTime=s0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dm(a){var t;const n=a.auth,r=await a.getIdToken(),u=await h0(a,G4(n,{idToken:r}));fe(u==null?void 0:u.users.length,n,"internal-error");const c=u.users[0];a._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?H4(c.providerUserInfo):[],m=Xb(a.providerData,d),v=a.isAnonymous,_=!(a.email&&c.passwordHash)&&!(m!=null&&m.length),b=v?_:!1,O={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new S1(c.createdAt,c.lastLoginAt),isAnonymous:b};Object.assign(a,O)}async function Yb(a){const t=Ls(a);await dm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Xb(a,t){return[...a.filter(r=>!t.some(u=>u.providerId===r.providerId)),...t]}function H4(a){return a.map(t=>{var{providerId:n}=t,r=Z1(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(a,t){const n=await B4(a,{},async()=>{const r=S0({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:u,apiKey:c}=a.config,d=k4(a,u,"/v1/token",`key=${c}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",z4.fetch()(d,{method:"POST",headers:m,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Zb(a,t){return ac(a,"POST","/v2/accounts:revokeToken",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){fe(t.idToken,"internal-error"),fe(typeof t.idToken<"u","internal-error"),fe(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$v(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){fe(t.length!==0,"internal-error");const n=$v(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:u,expiresIn:c}=await Qb(t,n);this.updateTokensAndExpiration(r,u,Number(c))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:u,expirationTime:c}=n,d=new qh;return r&&(fe(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),u&&(fe(typeof u=="string","internal-error",{appName:t}),d.accessToken=u),c&&(fe(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qh,this.toJSON())}_performRefresh(){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(a,t){fe(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class Yo{constructor(t){var{uid:n,auth:r,stsTokenManager:u}=t,c=Z1(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new S1(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await h0(this,this.stsTokenManager.getToken(this.auth,t));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Fb(this,t)}reload(){return Yb(this)}_assign(t){this!==t&&(fe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Yo(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await dm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Qo(this.auth));const t=await this.getIdToken();return await h0(this,jb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,u,c,d,m,v,_,b;const O=(r=n.displayName)!==null&&r!==void 0?r:void 0,U=(u=n.email)!==null&&u!==void 0?u:void 0,C=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,R=(d=n.photoURL)!==null&&d!==void 0?d:void 0,I=(m=n.tenantId)!==null&&m!==void 0?m:void 0,L=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,F=(_=n.createdAt)!==null&&_!==void 0?_:void 0,D=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:x,emailVerified:z,isAnonymous:H,providerData:Y,stsTokenManager:j}=n;fe(x&&j,t,"internal-error");const V=qh.fromJSON(this.name,j);fe(typeof x=="string",t,"internal-error"),Bu(O,t.name),Bu(U,t.name),fe(typeof z=="boolean",t,"internal-error"),fe(typeof H=="boolean",t,"internal-error"),Bu(C,t.name),Bu(R,t.name),Bu(I,t.name),Bu(L,t.name),Bu(F,t.name),Bu(D,t.name);const w=new Yo({uid:x,auth:t,email:U,emailVerified:z,displayName:O,isAnonymous:H,photoURL:R,phoneNumber:C,tenantId:I,stsTokenManager:V,createdAt:F,lastLoginAt:D});return Y&&Array.isArray(Y)&&(w.providerData=Y.map(M=>Object.assign({},M))),L&&(w._redirectEventId=L),w}static async _fromIdTokenResponse(t,n,r=!1){const u=new qh;u.updateFromServerResponse(n);const c=new Yo({uid:n.localId,auth:t,stsTokenManager:u,isAnonymous:r});return await dm(c),c}static async _fromGetAccountInfoResponse(t,n,r){const u=n.users[0];fe(u.localId!==void 0,"internal-error");const c=u.providerUserInfo!==void 0?H4(u.providerUserInfo):[],d=!(u.email&&u.passwordHash)&&!(c!=null&&c.length),m=new qh;m.updateFromIdToken(r);const v=new Yo({uid:u.localId,auth:t,stsTokenManager:m,isAnonymous:d}),_={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new S1(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(c!=null&&c.length)};return Object.assign(v,_),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function Xo(a){Wo(a instanceof Function,"Expected a class definition");let t=t_.get(a);return t?(Wo(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,t_.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}j4.type="NONE";const e_=j4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(a,t,n){return`firebase:${a}:${t}:${n}`}class Kh{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:u,name:c}=this.auth;this.fullUserKey=tm(this.userKey,u.apiKey,c),this.fullPersistenceKey=tm("persistence",u.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Yo._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Kh(Xo(e_),t,r);const u=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=u[0]||Xo(e_);const d=tm(r,t.config.apiKey,t.name);let m=null;for(const _ of n)try{const b=await _._get(d);if(b){const O=Yo._fromJSON(t,b);_!==c&&(m=O),c=_;break}}catch{}const v=u.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new Kh(c,t,r):(c=v[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Kh(c,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Y4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(F4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Q4(t))return"Blackberry";if(Z4(t))return"Webos";if(q4(t))return"Safari";if((t.includes("chrome/")||K4(t))&&!t.includes("edge/"))return"Chrome";if(X4(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function F4(a=Xa()){return/firefox\//i.test(a)}function q4(a=Xa()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function K4(a=Xa()){return/crios\//i.test(a)}function Y4(a=Xa()){return/iemobile/i.test(a)}function X4(a=Xa()){return/android/i.test(a)}function Q4(a=Xa()){return/blackberry/i.test(a)}function Z4(a=Xa()){return/webos/i.test(a)}function ey(a=Xa()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function Wb(a=Xa()){var t;return ey(a)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Jb(){return cT()&&document.documentMode===10}function W4(a=Xa()){return ey(a)||X4(a)||Z4(a)||Q4(a)||/windows phone/i.test(a)||Y4(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(a,t=[]){let n;switch(a){case"Browser":n=n_(Xa());break;case"Worker":n=`${n_(Xa())}-${a}`;break;default:n=a}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${sf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=c=>new Promise((d,m)=>{try{const v=t(c);d(v)}catch(v){m(v)}});r.onAbort=n,this.queue.push(r);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const u of n)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(a,t={}){return ac(a,"GET","/v2/passwordPolicy",ic(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=6;class n9{constructor(t){var n,r,u,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:e9,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,u,c,d,m;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,v),this.validatePasswordCharacterOptions(t,v),v.isValid&&(v.isValid=(n=v.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),v.isValid&&(v.isValid=(r=v.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),v.isValid&&(v.isValid=(u=v.containsLowercaseLetter)!==null&&u!==void 0?u:!0),v.isValid&&(v.isValid=(c=v.containsUppercaseLetter)!==null&&c!==void 0?c:!0),v.isValid&&(v.isValid=(d=v.containsNumericCharacter)!==null&&d!==void 0?d:!0),v.isValid&&(v.isValid=(m=v.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),v}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),u&&(n.meetsMaxPasswordLength=t.length<=u)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let u=0;u<t.length;u++)r=t.charAt(u),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,u,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t,n,r,u){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new $b(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=u.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Xo(n)),this._initializationPromise=this.queue(async()=>{var r,u;if(!this._deleted&&(this.persistenceManager=await Kh.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await G4(this,{idToken:t}),r=await Yo._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ir(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let u=r,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=u==null?void 0:u._redirectEventId,v=await this.tryRedirectSignIn(t);(!d||d===m)&&(v!=null&&v.user)&&(u=v.user,c=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(u)}catch(d){u=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await dm(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Lb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ir(this.app))return Promise.reject(Qo(this));const n=t?Ls(t):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&fe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ir(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await t9(this),n=new n9(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new _0("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zb(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Xo(t)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Kh.create(this,[Xo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,u){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const v=t.addObserver(n,r,u);return()=>{d=!0,v()}}else{const v=t.addObserver(n);return()=>{d=!0,v()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=J4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const u=await this._getAppCheckToken();return u&&(n["X-Firebase-AppCheck"]=u),n}async _getAppCheckToken(){var t;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Mb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sc(a){return Ls(a)}class i_{constructor(t){this.auth=t,this.observer=null,this.addObserver=vT(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a9(a){Im=a}function $4(a){return Im.loadJS(a)}function s9(){return Im.recaptchaEnterpriseScript}function r9(){return Im.gapiScript}function l9(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class o9{constructor(){this.enterprise=new u9}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class u9{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const c9="recaptcha-enterprise",t5="NO_RECAPTCHA";class h9{constructor(t){this.type=c9,this.auth=sc(t)}async verify(t="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{Hb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new Gb(v);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(v=>{m(v)})})}function u(c,d,m){const v=window.grecaptcha;Jv(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:t}).then(_=>{d(_)}).catch(()=>{d(t5)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o9().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(m=>{if(!n&&Jv(window.grecaptcha))u(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let v=s9();v.length!==0&&(v+=m),$4(v).then(()=>{u(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function a_(a,t,n,r=!1,u=!1){const c=new h9(a);let d;if(u)d=t5;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const v=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const v=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function E1(a,t,n,r,u){var c;if(!((c=a._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await a_(a,t,n,n==="getOobCode");return r(a,d)}else return r(a,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await a_(a,t,n,n==="getOobCode");return r(a,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(a,t){const n=Q1(a,"auth");if(n.isInitialized()){const u=n.getImmediate(),c=n.getOptions();if(Fc(c,t??{}))return u;Lr(u,"already-initialized")}return n.initialize({options:t})}function d9(a,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xo);t!=null&&t.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function g9(a,t,n){const r=sc(a);fe(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const u=!1,c=e5(t),{host:d,port:m}=m9(t),v=m===null?"":`:${m}`,_={url:`${c}//${d}${v}/`},b=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Fc(_,r.config.emulator)&&Fc(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,p9()}function e5(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function m9(a){const t=e5(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(r);if(u){const c=u[1];return{host:c,port:s_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:s_(d)}}}function s_(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function p9(){function a(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ko("not implemented")}_getIdTokenResponse(t){return Ko("not implemented")}_linkToIdToken(t,n){return Ko("not implemented")}_getReauthenticationResolver(t){return Ko("not implemented")}}async function y9(a,t){return ac(a,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v9(a,t){return T0(a,"POST","/v1/accounts:signInWithPassword",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(a,t){return T0(a,"POST","/v1/accounts:signInWithEmailLink",ic(a,t))}async function S9(a,t){return T0(a,"POST","/v1/accounts:signInWithEmailLink",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends ny{constructor(t,n,r,u=null){super("password",r),this._email=t,this._password=n,this._tenantId=u}static _fromEmailAndPassword(t,n){return new f0(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new f0(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(t,n,"signInWithPassword",v9);case"emailLink":return _9(t,{email:this._email,oobCode:this._password});default:Lr(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(t,r,"signUpPassword",y9);case"emailLink":return S9(t,{idToken:n,email:this._email,oobCode:this._password});default:Lr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(a,t){return T0(a,"POST","/v1/accounts:signInWithIdp",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="http://localhost";class Kc extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Kc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:u}=n,c=Z1(n,["providerId","signInMethod"]);if(!r||!u)return null;const d=new Kc(r,u);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Yh(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Yh(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Yh(t,n)}buildRequest(){const t={requestUri:E9,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=S0(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b9(a){const t=t0(e0(a)).link,n=t?t0(e0(t)).deep_link_id:null,r=t0(e0(a)).deep_link_id;return(r?t0(e0(r)).link:null)||r||n||t||a}class iy{constructor(t){var n,r,u,c,d,m;const v=t0(e0(t)),_=(n=v.apiKey)!==null&&n!==void 0?n:null,b=(r=v.oobCode)!==null&&r!==void 0?r:null,O=T9((u=v.mode)!==null&&u!==void 0?u:null);fe(_&&b&&O,"argument-error"),this.apiKey=_,this.operation=O,this.code=b,this.continueUrl=(c=v.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=v.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=v.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=b9(t);try{return new iy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.providerId=rf.PROVIDER_ID}static credential(t,n){return f0._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=iy.parseLink(n);return fe(r,"argument-error"),f0._fromEmailAndCode(t,r.code,r.tenantId)}}rf.PROVIDER_ID="password";rf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends ay{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends b0{constructor(){super("facebook.com")}static credential(t){return Kc._fromParams({providerId:ku.PROVIDER_ID,signInMethod:ku.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ku.credentialFromTaggedObject(t)}static credentialFromError(t){return ku.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ku.credential(t.oauthAccessToken)}catch{return null}}}ku.FACEBOOK_SIGN_IN_METHOD="facebook.com";ku.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends b0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Kc._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return qo.credentialFromTaggedObject(t)}static credentialFromError(t){return qo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return qo.credential(n,r)}catch{return null}}}qo.GOOGLE_SIGN_IN_METHOD="google.com";qo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends b0{constructor(){super("github.com")}static credential(t){return Kc._fromParams({providerId:Gu.PROVIDER_ID,signInMethod:Gu.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gu.credentialFromTaggedObject(t)}static credentialFromError(t){return Gu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gu.credential(t.oauthAccessToken)}catch{return null}}}Gu.GITHUB_SIGN_IN_METHOD="github.com";Gu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends b0{constructor(){super("twitter.com")}static credential(t,n){return Kc._fromParams({providerId:Hu.PROVIDER_ID,signInMethod:Hu.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hu.credentialFromTaggedObject(t)}static credentialFromError(t){return Hu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hu.credential(n,r)}catch{return null}}}Hu.TWITTER_SIGN_IN_METHOD="twitter.com";Hu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A9(a,t){return T0(a,"POST","/v1/accounts:signUp",ic(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,u=!1){const c=await Yo._fromIdTokenResponse(t,r,u),d=r_(r);return new Yc({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const u=r_(r);return new Yc({user:t,providerId:u,_tokenResponse:r,operationType:n})}}function r_(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends tu{constructor(t,n,r,u){var c;super(n.code,n.message),this.operationType=r,this.user=u,Object.setPrototypeOf(this,gm.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,u){return new gm(t,n,r,u)}}function n5(a,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gm._fromErrorAndOperation(a,c,t,r):c})}async function C9(a,t,n=!1){const r=await h0(a,t._linkToIdToken(a.auth,await a.getIdToken()),n);return Yc._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R9(a,t,n=!1){const{auth:r}=a;if(ir(r.app))return Promise.reject(Qo(r));const u="reauthenticate";try{const c=await h0(a,n5(r,u,t,a),n);fe(c.idToken,r,"internal-error");const d=ty(c.idToken);fe(d,r,"internal-error");const{sub:m}=d;return fe(a.uid===m,r,"user-mismatch"),Yc._forOperation(a,u,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Lr(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(a,t,n=!1){if(ir(a.app))return Promise.reject(Qo(a));const r="signIn",u=await n5(a,r,t),c=await Yc._fromIdTokenResponse(a,r,u);return n||await a._updateCurrentUser(c.user),c}async function w9(a,t){return i5(sc(a),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(a){const t=sc(a);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function N9(a,t,n){if(ir(a.app))return Promise.reject(Qo(a));const r=sc(a),d=await E1(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",A9).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&a5(a),v}),m=await Yc._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function D9(a,t,n){return ir(a.app)?Promise.reject(Qo(a)):w9(Ls(a),rf.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&a5(a),r})}function x9(a,t,n,r){return Ls(a).onIdTokenChanged(t,n,r)}function O9(a,t,n){return Ls(a).beforeAuthStateChanged(t,n)}function M9(a,t,n,r){return Ls(a).onAuthStateChanged(t,n,r)}function V9(a){return Ls(a).signOut()}const mm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mm,"1"),this.storage.removeItem(mm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=1e3,I9=10;class r5 extends s5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),u=this.localCache[n];r!==u&&t(n,u,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,m,v)=>{this.notifyListeners(d,v)});return}const r=t.key;n?this.detachListener():this.stopPolling();const u=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);Jb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(u,I9):u()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},U9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}r5.type="LOCAL";const L9=r5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5 extends s5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}l5.type="SESSION";const o5=l5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(u=>u.isListeningto(t));if(n)return n;const r=new Lm(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:u,data:c}=n.data,d=this.handlersMap[u];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:u});const m=Array.from(d).map(async _=>_(n.origin,c)),v=await P9(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:u,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(a="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let c,d;return new Promise((m,v)=>{const _=sy("",20);u.port1.start();const b=setTimeout(()=>{v(new Error("unsupported_event"))},r);d={messageChannel:u,onMessage(O){const U=O;if(U.data.eventId===_)switch(U.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(U.data.response);break;default:clearTimeout(b),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(d),u.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[u.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return window}function B9(a){so().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(){return typeof so().WorkerGlobalScope<"u"&&typeof so().importScripts=="function"}async function k9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G9(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function H9(){return u5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firebaseLocalStorageDb",j9=1,pm="firebaseLocalStorage",h5="fbase_key";class A0{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(a,t){return a.transaction([pm],t?"readwrite":"readonly").objectStore(pm)}function F9(){const a=indexedDB.deleteDatabase(c5);return new A0(a).toPromise()}function T1(){const a=indexedDB.open(c5,j9);return new Promise((t,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(pm,{keyPath:h5})}catch(u){n(u)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(pm)?t(r):(r.close(),await F9(),t(await T1()))})})}async function l_(a,t,n){const r=Pm(a,!0).put({[h5]:t,value:n});return new A0(r).toPromise()}async function q9(a,t){const n=Pm(a,!1).get(t),r=await new A0(n).toPromise();return r===void 0?null:r.value}function o_(a,t){const n=Pm(a,!0).delete(t);return new A0(n).toPromise()}const K9=800,Y9=3;class f5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T1(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Y9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(H9()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await k9(),!this.activeServiceWorker)return;this.sender=new z9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||G9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await T1();return await l_(t,mm,"1"),await o_(t,mm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>l_(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>q9(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>o_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(u=>{const c=Pm(u,!1).getAll();return new A0(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:u,value:c}of t)r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(c)&&(this.notifyListeners(u,c),n.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!r.has(u)&&(this.notifyListeners(u,null),n.push(u));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f5.type="LOCAL";const X9=f5;new E0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(a,t){return t?Xo(t):(fe(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends ny{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Yh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Yh(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Q9(a){return i5(a.auth,new ry(a),a.bypassAuthState)}function Z9(a){const{auth:t,user:n}=a;return fe(n,t,"internal-error"),R9(n,new ry(a),a.bypassAuthState)}async function W9(a){const{auth:t,user:n}=a;return fe(n,t,"internal-error"),C9(n,new ry(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(t,n,r,u,c=!1){this.auth=t,this.resolver=r,this.user=u,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:u,tenantId:c,error:d,type:m}=t;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(v))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Q9;case"linkViaPopup":case"linkViaRedirect":return W9;case"reauthViaPopup":case"reauthViaRedirect":return Z9;default:Lr(this.auth,"internal-error")}}resolve(t){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=new E0(2e3,1e4);async function $9(a,t,n){if(ir(a.app))return Promise.reject(_l(a,"operation-not-supported-in-this-environment"));const r=sc(a);Vb(a,t,ay);const u=d5(r,n);return new Hc(r,"signInViaPopup",t,u).executeNotNull()}class Hc extends g5{constructor(t,n,r,u,c){super(t,n,u,c),this.provider=r,this.authWindow=null,this.pollId=null,Hc.currentPopupAction&&Hc.currentPopupAction.cancel(),Hc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return fe(t,this.auth,"internal-error"),t}async onExecution(){Wo(this.filter.length===1,"Popup operations only handle one event");const t=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_l(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_l(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_l(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,J9.get())};t()}}Hc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="pendingRedirect",em=new Map;class e8 extends g5{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=em.get(this.auth._key());if(!t){try{const r=await n8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}em.set(this.auth._key(),t)}return this.bypassAuthState||em.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n8(a,t){const n=s8(t),r=a8(a);if(!await r._isAvailable())return!1;const u=await r._get(n)==="true";return await r._remove(n),u}function i8(a,t){em.set(a._key(),t)}function a8(a){return Xo(a._redirectPersistence)}function s8(a){return tm(t8,a.config.apiKey,a.name)}async function r8(a,t,n=!1){if(ir(a.app))return Promise.reject(Qo(a));const r=sc(a),u=d5(r,t),d=await new e8(r,u,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=10*60*1e3;class o8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!u8(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!m5(t)){const u=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_l(this.auth,u))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=l8&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(t))}saveEventToCache(t){this.cachedEventUids.add(u_(t)),this.lastProcessedEventTime=Date.now()}}function u_(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function m5({type:a,error:t}){return a==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function u8(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m5(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(a,t={}){return ac(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f8=/^https?/;async function d8(a){if(a.config.emulator)return;const{authorizedDomains:t}=await c8(a);for(const n of t)try{if(g8(n))return}catch{}Lr(a,"unauthorized-domain")}function g8(a){const t=_1(),{protocol:n,hostname:r}=new URL(t);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!f8.test(n))return!1;if(h8.test(a))return r===a;const u=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=new E0(3e4,6e4);function c_(){const a=so().___jsl;if(a!=null&&a.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function p8(a){return new Promise((t,n)=>{var r,u,c;function d(){c_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{c_(),n(_l(a,"network-request-failed"))},timeout:m8.get()})}if(!((u=(r=so().gapi)===null||r===void 0?void 0:r.iframes)===null||u===void 0)&&u.Iframe)t(gapi.iframes.getContext());else if(!((c=so().gapi)===null||c===void 0)&&c.load)d();else{const m=l9("iframefcb");return so()[m]=()=>{gapi.load?d():n(_l(a,"network-request-failed"))},$4(`${r9()}?onload=${m}`).catch(v=>n(v))}}).catch(t=>{throw nm=null,t})}let nm=null;function y8(a){return nm=nm||p8(a),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=new E0(5e3,15e3),_8="__/auth/iframe",S8="emulator/auth/iframe",E8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b8(a){const t=a.config;fe(t.authDomain,a,"auth-domain-config-required");const n=t.emulator?$1(t,S8):`https://${a.config.authDomain}/${_8}`,r={apiKey:t.apiKey,appName:a.name,v:sf},u=T8.get(a.config.apiHost);u&&(r.eid=u);const c=a._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${S0(r).slice(1)}`}async function A8(a){const t=await y8(a),n=so().gapi;return fe(n,a,"internal-error"),t.open({where:document.body,url:b8(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E8,dontclear:!0},r=>new Promise(async(u,c)=>{await r.restyle({setHideOnLeave:!1});const d=_l(a,"network-request-failed"),m=so().setTimeout(()=>{c(d)},v8.get());function v(){so().clearTimeout(m),u(r)}r.ping(v).then(v,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R8=500,w8=600,N8="_blank",D8="http://localhost";class h_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x8(a,t,n,r=R8,u=w8){const c=Math.max((window.screen.availHeight-u)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const v=Object.assign(Object.assign({},C8),{width:r.toString(),height:u.toString(),top:c,left:d}),_=Xa().toLowerCase();n&&(m=K4(_)?N8:n),F4(_)&&(t=t||D8,v.scrollbars="yes");const b=Object.entries(v).reduce((U,[C,R])=>`${U}${C}=${R},`,"");if(Wb(_)&&m!=="_self")return O8(t||"",m),new h_(null);const O=window.open(t||"",m,b);fe(O,a,"popup-blocked");try{O.focus()}catch{}return new h_(O)}function O8(a,t){const n=document.createElement("a");n.href=a,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="__/auth/handler",V8="emulator/auth/handler",U8=encodeURIComponent("fac");async function f_(a,t,n,r,u,c){fe(a.config.authDomain,a,"auth-domain-config-required"),fe(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:sf,eventId:u};if(t instanceof ay){t.setDefaultLanguage(a.languageCode),d.providerId=t.providerId||"",yT(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,O]of Object.entries({}))d[b]=O}if(t instanceof b0){const b=t.getScopes().filter(O=>O!=="");b.length>0&&(d.scopes=b.join(","))}a.tenantId&&(d.tid=a.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const v=await a._getAppCheckToken(),_=v?`#${U8}=${encodeURIComponent(v)}`:"";return`${I8(a)}?${S0(m).slice(1)}${_}`}function I8({config:a}){return a.emulator?$1(a,V8):`https://${a.authDomain}/${M8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="webStorageSupport";class L8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o5,this._completeRedirectFn=r8,this._overrideRedirectResult=i8}async _openPopup(t,n,r,u){var c;Wo((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await f_(t,n,r,_1(),u);return x8(t,d,sy())}async _openRedirect(t,n,r,u){await this._originValidation(t);const c=await f_(t,n,r,_1(),u);return B9(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:u,promise:c}=this.eventManagers[n];return u?Promise.resolve(u):(Wo(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await A8(t),r=new o8(t);return n.register("authEvent",u=>(fe(u==null?void 0:u.authEvent,t,"invalid-auth-event"),{status:r.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(r1,{type:r1},u=>{var c;const d=(c=u==null?void 0:u[0])===null||c===void 0?void 0:c[r1];d!==void 0&&n(!!d),Lr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=d8(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return W4()||q4()||ey()}}const P8=L8;var d_="@firebase/auth",g_="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k8(a){Qh(new qc("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),u=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;fe(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:d,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J4(a)},_=new i9(r,u,c,v);return d9(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Qh(new qc("auth-internal",t=>{const n=sc(t.getProvider("auth").getImmediate());return(r=>new z8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ku(d_,g_,B8(a)),Ku(d_,g_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=5*60,H8=D4("authIdTokenMaxAge")||G8;let m_=null;const j8=a=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H8)return;const u=n==null?void 0:n.token;m_!==u&&(m_=u,await fetch(a,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function F8(a=V4()){const t=Q1(a,"auth");if(t.isInitialized())return t.getImmediate();const n=f9(a,{popupRedirectResolver:P8,persistence:[X9,L9,o5]}),r=D4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=j8(c.toString());O9(n,d,()=>d(n.currentUser)),x9(n,m=>d(m))}}const u=w4("auth");return u&&g9(n,`http://${u}`),n}function q8(){var a,t;return(t=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&t!==void 0?t:document}a9({loadJS(a){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=t,r.onerror=u=>{const c=_l("internal-error");c.customData=u,n(c)},r.type="text/javascript",r.charset="UTF-8",q8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k8("Browser");var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yu,p5;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,V){function w(){}w.prototype=V.prototype,j.D=V.prototype,j.prototype=new w,j.prototype.constructor=j,j.C=function(M,k,K){for(var T=Array(arguments.length-2),q=2;q<arguments.length;q++)T[q-2]=arguments[q];return V.prototype[k].apply(M,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(j,V,w){w||(w=0);var M=Array(16);if(typeof V=="string")for(var k=0;16>k;++k)M[k]=V.charCodeAt(w++)|V.charCodeAt(w++)<<8|V.charCodeAt(w++)<<16|V.charCodeAt(w++)<<24;else for(k=0;16>k;++k)M[k]=V[w++]|V[w++]<<8|V[w++]<<16|V[w++]<<24;V=j.g[0],w=j.g[1],k=j.g[2];var K=j.g[3],T=V+(K^w&(k^K))+M[0]+3614090360&4294967295;V=w+(T<<7&4294967295|T>>>25),T=K+(k^V&(w^k))+M[1]+3905402710&4294967295,K=V+(T<<12&4294967295|T>>>20),T=k+(w^K&(V^w))+M[2]+606105819&4294967295,k=K+(T<<17&4294967295|T>>>15),T=w+(V^k&(K^V))+M[3]+3250441966&4294967295,w=k+(T<<22&4294967295|T>>>10),T=V+(K^w&(k^K))+M[4]+4118548399&4294967295,V=w+(T<<7&4294967295|T>>>25),T=K+(k^V&(w^k))+M[5]+1200080426&4294967295,K=V+(T<<12&4294967295|T>>>20),T=k+(w^K&(V^w))+M[6]+2821735955&4294967295,k=K+(T<<17&4294967295|T>>>15),T=w+(V^k&(K^V))+M[7]+4249261313&4294967295,w=k+(T<<22&4294967295|T>>>10),T=V+(K^w&(k^K))+M[8]+1770035416&4294967295,V=w+(T<<7&4294967295|T>>>25),T=K+(k^V&(w^k))+M[9]+2336552879&4294967295,K=V+(T<<12&4294967295|T>>>20),T=k+(w^K&(V^w))+M[10]+4294925233&4294967295,k=K+(T<<17&4294967295|T>>>15),T=w+(V^k&(K^V))+M[11]+2304563134&4294967295,w=k+(T<<22&4294967295|T>>>10),T=V+(K^w&(k^K))+M[12]+1804603682&4294967295,V=w+(T<<7&4294967295|T>>>25),T=K+(k^V&(w^k))+M[13]+4254626195&4294967295,K=V+(T<<12&4294967295|T>>>20),T=k+(w^K&(V^w))+M[14]+2792965006&4294967295,k=K+(T<<17&4294967295|T>>>15),T=w+(V^k&(K^V))+M[15]+1236535329&4294967295,w=k+(T<<22&4294967295|T>>>10),T=V+(k^K&(w^k))+M[1]+4129170786&4294967295,V=w+(T<<5&4294967295|T>>>27),T=K+(w^k&(V^w))+M[6]+3225465664&4294967295,K=V+(T<<9&4294967295|T>>>23),T=k+(V^w&(K^V))+M[11]+643717713&4294967295,k=K+(T<<14&4294967295|T>>>18),T=w+(K^V&(k^K))+M[0]+3921069994&4294967295,w=k+(T<<20&4294967295|T>>>12),T=V+(k^K&(w^k))+M[5]+3593408605&4294967295,V=w+(T<<5&4294967295|T>>>27),T=K+(w^k&(V^w))+M[10]+38016083&4294967295,K=V+(T<<9&4294967295|T>>>23),T=k+(V^w&(K^V))+M[15]+3634488961&4294967295,k=K+(T<<14&4294967295|T>>>18),T=w+(K^V&(k^K))+M[4]+3889429448&4294967295,w=k+(T<<20&4294967295|T>>>12),T=V+(k^K&(w^k))+M[9]+568446438&4294967295,V=w+(T<<5&4294967295|T>>>27),T=K+(w^k&(V^w))+M[14]+3275163606&4294967295,K=V+(T<<9&4294967295|T>>>23),T=k+(V^w&(K^V))+M[3]+4107603335&4294967295,k=K+(T<<14&4294967295|T>>>18),T=w+(K^V&(k^K))+M[8]+1163531501&4294967295,w=k+(T<<20&4294967295|T>>>12),T=V+(k^K&(w^k))+M[13]+2850285829&4294967295,V=w+(T<<5&4294967295|T>>>27),T=K+(w^k&(V^w))+M[2]+4243563512&4294967295,K=V+(T<<9&4294967295|T>>>23),T=k+(V^w&(K^V))+M[7]+1735328473&4294967295,k=K+(T<<14&4294967295|T>>>18),T=w+(K^V&(k^K))+M[12]+2368359562&4294967295,w=k+(T<<20&4294967295|T>>>12),T=V+(w^k^K)+M[5]+4294588738&4294967295,V=w+(T<<4&4294967295|T>>>28),T=K+(V^w^k)+M[8]+2272392833&4294967295,K=V+(T<<11&4294967295|T>>>21),T=k+(K^V^w)+M[11]+1839030562&4294967295,k=K+(T<<16&4294967295|T>>>16),T=w+(k^K^V)+M[14]+4259657740&4294967295,w=k+(T<<23&4294967295|T>>>9),T=V+(w^k^K)+M[1]+2763975236&4294967295,V=w+(T<<4&4294967295|T>>>28),T=K+(V^w^k)+M[4]+1272893353&4294967295,K=V+(T<<11&4294967295|T>>>21),T=k+(K^V^w)+M[7]+4139469664&4294967295,k=K+(T<<16&4294967295|T>>>16),T=w+(k^K^V)+M[10]+3200236656&4294967295,w=k+(T<<23&4294967295|T>>>9),T=V+(w^k^K)+M[13]+681279174&4294967295,V=w+(T<<4&4294967295|T>>>28),T=K+(V^w^k)+M[0]+3936430074&4294967295,K=V+(T<<11&4294967295|T>>>21),T=k+(K^V^w)+M[3]+3572445317&4294967295,k=K+(T<<16&4294967295|T>>>16),T=w+(k^K^V)+M[6]+76029189&4294967295,w=k+(T<<23&4294967295|T>>>9),T=V+(w^k^K)+M[9]+3654602809&4294967295,V=w+(T<<4&4294967295|T>>>28),T=K+(V^w^k)+M[12]+3873151461&4294967295,K=V+(T<<11&4294967295|T>>>21),T=k+(K^V^w)+M[15]+530742520&4294967295,k=K+(T<<16&4294967295|T>>>16),T=w+(k^K^V)+M[2]+3299628645&4294967295,w=k+(T<<23&4294967295|T>>>9),T=V+(k^(w|~K))+M[0]+4096336452&4294967295,V=w+(T<<6&4294967295|T>>>26),T=K+(w^(V|~k))+M[7]+1126891415&4294967295,K=V+(T<<10&4294967295|T>>>22),T=k+(V^(K|~w))+M[14]+2878612391&4294967295,k=K+(T<<15&4294967295|T>>>17),T=w+(K^(k|~V))+M[5]+4237533241&4294967295,w=k+(T<<21&4294967295|T>>>11),T=V+(k^(w|~K))+M[12]+1700485571&4294967295,V=w+(T<<6&4294967295|T>>>26),T=K+(w^(V|~k))+M[3]+2399980690&4294967295,K=V+(T<<10&4294967295|T>>>22),T=k+(V^(K|~w))+M[10]+4293915773&4294967295,k=K+(T<<15&4294967295|T>>>17),T=w+(K^(k|~V))+M[1]+2240044497&4294967295,w=k+(T<<21&4294967295|T>>>11),T=V+(k^(w|~K))+M[8]+1873313359&4294967295,V=w+(T<<6&4294967295|T>>>26),T=K+(w^(V|~k))+M[15]+4264355552&4294967295,K=V+(T<<10&4294967295|T>>>22),T=k+(V^(K|~w))+M[6]+2734768916&4294967295,k=K+(T<<15&4294967295|T>>>17),T=w+(K^(k|~V))+M[13]+1309151649&4294967295,w=k+(T<<21&4294967295|T>>>11),T=V+(k^(w|~K))+M[4]+4149444226&4294967295,V=w+(T<<6&4294967295|T>>>26),T=K+(w^(V|~k))+M[11]+3174756917&4294967295,K=V+(T<<10&4294967295|T>>>22),T=k+(V^(K|~w))+M[2]+718787259&4294967295,k=K+(T<<15&4294967295|T>>>17),T=w+(K^(k|~V))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+V&4294967295,j.g[1]=j.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,j.g[2]=j.g[2]+k&4294967295,j.g[3]=j.g[3]+K&4294967295}r.prototype.u=function(j,V){V===void 0&&(V=j.length);for(var w=V-this.blockSize,M=this.B,k=this.h,K=0;K<V;){if(k==0)for(;K<=w;)u(this,j,K),K+=this.blockSize;if(typeof j=="string"){for(;K<V;)if(M[k++]=j.charCodeAt(K++),k==this.blockSize){u(this,M),k=0;break}}else for(;K<V;)if(M[k++]=j[K++],k==this.blockSize){u(this,M),k=0;break}}this.h=k,this.o+=V},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var V=1;V<j.length-8;++V)j[V]=0;var w=8*this.o;for(V=j.length-8;V<j.length;++V)j[V]=w&255,w/=256;for(this.u(j),j=Array(16),V=w=0;4>V;++V)for(var M=0;32>M;M+=8)j[w++]=this.g[V]>>>M&255;return j};function c(j,V){var w=m;return Object.prototype.hasOwnProperty.call(w,j)?w[j]:w[j]=V(j)}function d(j,V){this.h=V;for(var w=[],M=!0,k=j.length-1;0<=k;k--){var K=j[k]|0;M&&K==V||(w[k]=K,M=!1)}this.g=w}var m={};function v(j){return-128<=j&&128>j?c(j,function(V){return new d([V|0],0>V?-1:0)}):new d([j|0],0>j?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return O;if(0>j)return L(_(-j));for(var V=[],w=1,M=0;j>=w;M++)V[M]=j/w|0,w*=4294967296;return new d(V,0)}function b(j,V){if(j.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(j.charAt(0)=="-")return L(b(j.substring(1),V));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(V,8)),M=O,k=0;k<j.length;k+=8){var K=Math.min(8,j.length-k),T=parseInt(j.substring(k,k+K),V);8>K?(K=_(Math.pow(V,K)),M=M.j(K).add(_(T))):(M=M.j(w),M=M.add(_(T)))}return M}var O=v(0),U=v(1),C=v(16777216);a=d.prototype,a.m=function(){if(I(this))return-L(this).m();for(var j=0,V=1,w=0;w<this.g.length;w++){var M=this.i(w);j+=(0<=M?M:4294967296+M)*V,V*=4294967296}return j},a.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(R(this))return"0";if(I(this))return"-"+L(this).toString(j);for(var V=_(Math.pow(j,6)),w=this,M="";;){var k=z(w,V).g;w=F(w,k.j(V));var K=((0<w.g.length?w.g[0]:w.h)>>>0).toString(j);if(w=k,R(w))return K+M;for(;6>K.length;)K="0"+K;M=K+M}},a.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function R(j){if(j.h!=0)return!1;for(var V=0;V<j.g.length;V++)if(j.g[V]!=0)return!1;return!0}function I(j){return j.h==-1}a.l=function(j){return j=F(this,j),I(j)?-1:R(j)?0:1};function L(j){for(var V=j.g.length,w=[],M=0;M<V;M++)w[M]=~j.g[M];return new d(w,~j.h).add(U)}a.abs=function(){return I(this)?L(this):this},a.add=function(j){for(var V=Math.max(this.g.length,j.g.length),w=[],M=0,k=0;k<=V;k++){var K=M+(this.i(k)&65535)+(j.i(k)&65535),T=(K>>>16)+(this.i(k)>>>16)+(j.i(k)>>>16);M=T>>>16,K&=65535,T&=65535,w[k]=T<<16|K}return new d(w,w[w.length-1]&-2147483648?-1:0)};function F(j,V){return j.add(L(V))}a.j=function(j){if(R(this)||R(j))return O;if(I(this))return I(j)?L(this).j(L(j)):L(L(this).j(j));if(I(j))return L(this.j(L(j)));if(0>this.l(C)&&0>j.l(C))return _(this.m()*j.m());for(var V=this.g.length+j.g.length,w=[],M=0;M<2*V;M++)w[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<j.g.length;k++){var K=this.i(M)>>>16,T=this.i(M)&65535,q=j.i(k)>>>16,G=j.i(k)&65535;w[2*M+2*k]+=T*G,D(w,2*M+2*k),w[2*M+2*k+1]+=K*G,D(w,2*M+2*k+1),w[2*M+2*k+1]+=T*q,D(w,2*M+2*k+1),w[2*M+2*k+2]+=K*q,D(w,2*M+2*k+2)}for(M=0;M<V;M++)w[M]=w[2*M+1]<<16|w[2*M];for(M=V;M<2*V;M++)w[M]=0;return new d(w,0)};function D(j,V){for(;(j[V]&65535)!=j[V];)j[V+1]+=j[V]>>>16,j[V]&=65535,V++}function x(j,V){this.g=j,this.h=V}function z(j,V){if(R(V))throw Error("division by zero");if(R(j))return new x(O,O);if(I(j))return V=z(L(j),V),new x(L(V.g),L(V.h));if(I(V))return V=z(j,L(V)),new x(L(V.g),V.h);if(30<j.g.length){if(I(j)||I(V))throw Error("slowDivide_ only works with positive integers.");for(var w=U,M=V;0>=M.l(j);)w=H(w),M=H(M);var k=Y(w,1),K=Y(M,1);for(M=Y(M,2),w=Y(w,2);!R(M);){var T=K.add(M);0>=T.l(j)&&(k=k.add(w),K=T),M=Y(M,1),w=Y(w,1)}return V=F(j,k.j(V)),new x(k,V)}for(k=O;0<=j.l(V);){for(w=Math.max(1,Math.floor(j.m()/V.m())),M=Math.ceil(Math.log(w)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),K=_(w),T=K.j(V);I(T)||0<T.l(j);)w-=M,K=_(w),T=K.j(V);R(K)&&(K=U),k=k.add(K),j=F(j,T)}return new x(k,j)}a.A=function(j){return z(this,j).h},a.and=function(j){for(var V=Math.max(this.g.length,j.g.length),w=[],M=0;M<V;M++)w[M]=this.i(M)&j.i(M);return new d(w,this.h&j.h)},a.or=function(j){for(var V=Math.max(this.g.length,j.g.length),w=[],M=0;M<V;M++)w[M]=this.i(M)|j.i(M);return new d(w,this.h|j.h)},a.xor=function(j){for(var V=Math.max(this.g.length,j.g.length),w=[],M=0;M<V;M++)w[M]=this.i(M)^j.i(M);return new d(w,this.h^j.h)};function H(j){for(var V=j.g.length+1,w=[],M=0;M<V;M++)w[M]=j.i(M)<<1|j.i(M-1)>>>31;return new d(w,j.h)}function Y(j,V){var w=V>>5;V%=32;for(var M=j.g.length-w,k=[],K=0;K<M;K++)k[K]=0<V?j.i(K+w)>>>V|j.i(K+w+1)<<32-V:j.i(K+w);return new d(k,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p5=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=b,Yu=d}).apply(typeof p_<"u"?p_:typeof self<"u"?self:typeof window<"u"?window:{});var Kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y5,n0,v5,im,b1,_5,S5,E5;(function(){var a,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,P){return g==Array.prototype||g==Object.prototype||(g[A]=P.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kg=="object"&&Kg];for(var A=0;A<g.length;++A){var P=g[A];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function u(g,A){if(A)t:{var P=r;g=g.split(".");for(var J=0;J<g.length-1;J++){var ct=g[J];if(!(ct in P))break t;P=P[ct]}g=g[g.length-1],J=P[g],A=A(J),A!=J&&A!=null&&t(P,g,{configurable:!0,writable:!0,value:A})}}function c(g,A){g instanceof String&&(g+="");var P=0,J=!1,ct={next:function(){if(!J&&P<g.length){var bt=P++;return{value:A(bt,g[bt]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}u("Array.prototype.values",function(g){return g||function(){return c(this,function(A,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function v(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function _(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function b(g,A,P){return g.call.apply(g.bind,arguments)}function O(g,A,P){if(!g)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,J),g.apply(A,ct)}}return function(){return g.apply(A,arguments)}}function U(g,A,P){return U=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:O,U.apply(null,arguments)}function C(g,A){var P=Array.prototype.slice.call(arguments,1);return function(){var J=P.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function R(g,A){function P(){}P.prototype=A.prototype,g.aa=A.prototype,g.prototype=new P,g.prototype.constructor=g,g.Qb=function(J,ct,bt){for(var qt=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)qt[ze-2]=arguments[ze];return A.prototype[ct].apply(J,qt)}}function I(g){const A=g.length;if(0<A){const P=Array(A);for(let J=0;J<A;J++)P[J]=g[J];return P}return[]}function L(g,A){for(let P=1;P<arguments.length;P++){const J=arguments[P];if(v(J)){const ct=g.length||0,bt=J.length||0;g.length=ct+bt;for(let qt=0;qt<bt;qt++)g[ct+qt]=J[qt]}else g.push(J)}}class F{constructor(A,P){this.i=A,this.j=P,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function D(g){return/^[\s\xa0]*$/.test(g)}function x(){var g=m.navigator;return g&&(g=g.userAgent)?g:""}function z(g){return z[" "](g),g}z[" "]=function(){};var H=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function Y(g,A,P){for(const J in g)A.call(P,g[J],J,g)}function j(g,A){for(const P in g)A.call(void 0,g[P],P,g)}function V(g){const A={};for(const P in g)A[P]=g[P];return A}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(g,A){let P,J;for(let ct=1;ct<arguments.length;ct++){J=arguments[ct];for(P in J)g[P]=J[P];for(let bt=0;bt<w.length;bt++)P=w[bt],Object.prototype.hasOwnProperty.call(J,P)&&(g[P]=J[P])}}function k(g){var A=1;g=g.split(":");const P=[];for(;0<A&&g.length;)P.push(g.shift()),A--;return g.length&&P.push(g.join(":")),P}function K(g){m.setTimeout(()=>{throw g},0)}function T(){var g=pt;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class q{constructor(){this.h=this.g=null}add(A,P){const J=G.get();J.set(A,P),this.h?this.h.next=J:this.g=J,this.h=J}}var G=new F(()=>new Q,g=>g.reset());class Q{constructor(){this.next=this.g=this.h=null}set(A,P){this.h=A,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let et,rt=!1,pt=new q,X=()=>{const g=m.Promise.resolve(void 0);et=()=>{g.then(st)}};var st=()=>{for(var g;g=T();){try{g.h.call(g.g)}catch(P){K(P)}var A=G;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}rt=!1};function Tt(){this.s=this.s,this.C=this.C}Tt.prototype.s=!1,Tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const P=()=>{};m.addEventListener("test",P,A),m.removeEventListener("test",P,A)}catch{}return g}();function Nt(g,A){if(lt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var P=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(H){t:{try{z(A.nodeName);var ct=!0;break t}catch{}ct=!1}ct||(A=null)}}else P=="mouseover"?A=g.fromElement:P=="mouseout"&&(A=g.toElement);this.relatedTarget=A,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Vt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Nt.aa.h.call(this)}}R(Nt,lt);var Vt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function Dt(g,A,P,J,ct){this.listener=g,this.proxy=null,this.src=A,this.type=P,this.capture=!!J,this.ha=ct,this.key=++ht,this.da=this.fa=!1}function xt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function jt(g){this.src=g,this.g={},this.h=0}jt.prototype.add=function(g,A,P,J,ct){var bt=g.toString();g=this.g[bt],g||(g=this.g[bt]=[],this.h++);var qt=le(g,A,J,ct);return-1<qt?(A=g[qt],P||(A.fa=!1)):(A=new Dt(A,this.src,bt,!!J,ct),A.fa=P,g.push(A)),A};function Kt(g,A){var P=A.type;if(P in g.g){var J=g.g[P],ct=Array.prototype.indexOf.call(J,A,void 0),bt;(bt=0<=ct)&&Array.prototype.splice.call(J,ct,1),bt&&(xt(A),g.g[P].length==0&&(delete g.g[P],g.h--))}}function le(g,A,P,J){for(var ct=0;ct<g.length;++ct){var bt=g[ct];if(!bt.da&&bt.listener==A&&bt.capture==!!P&&bt.ha==J)return ct}return-1}var de="closure_lm_"+(1e6*Math.random()|0),ne={};function Fe(g,A,P,J,ct){if(Array.isArray(A)){for(var bt=0;bt<A.length;bt++)Fe(g,A[bt],P,J,ct);return null}return P=Mi(P),g&&g[nt]?g.K(A,P,_(J)?!!J.capture:!1,ct):me(g,A,P,!1,J,ct)}function me(g,A,P,J,ct,bt){if(!A)throw Error("Invalid event type");var qt=_(ct)?!!ct.capture:!!ct,ze=Ln(g);if(ze||(g[de]=ze=new jt(g)),P=ze.add(A,P,J,qt,bt),P.proxy)return P;if(J=Ze(),P.proxy=J,J.src=g,J.listener=P,g.addEventListener)dt||(ct=qt),ct===void 0&&(ct=!1),g.addEventListener(A.toString(),J,ct);else if(g.attachEvent)g.attachEvent(bi(A.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ze(){function g(P){return A.call(g.src,g.listener,P)}const A=He;return g}function Oi(g,A,P,J,ct){if(Array.isArray(A))for(var bt=0;bt<A.length;bt++)Oi(g,A[bt],P,J,ct);else J=_(J)?!!J.capture:!!J,P=Mi(P),g&&g[nt]?(g=g.i,A=String(A).toString(),A in g.g&&(bt=g.g[A],P=le(bt,P,J,ct),-1<P&&(xt(bt[P]),Array.prototype.splice.call(bt,P,1),bt.length==0&&(delete g.g[A],g.h--)))):g&&(g=Ln(g))&&(A=g.g[A.toString()],g=-1,A&&(g=le(A,P,J,ct)),(P=-1<g?A[g]:null)&&rn(P))}function rn(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[nt])Kt(A.i,g);else{var P=g.type,J=g.proxy;A.removeEventListener?A.removeEventListener(P,J,g.capture):A.detachEvent?A.detachEvent(bi(P),J):A.addListener&&A.removeListener&&A.removeListener(J),(P=Ln(A))?(Kt(P,g),P.h==0&&(P.src=null,A[de]=null)):xt(g)}}}function bi(g){return g in ne?ne[g]:ne[g]="on"+g}function He(g,A){if(g.da)g=!0;else{A=new Nt(A,this);var P=g.listener,J=g.ha||g.src;g.fa&&rn(g),g=P.call(J,A)}return g}function Ln(g){return g=g[de],g instanceof jt?g:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mi(g){return typeof g=="function"?g:(g[De]||(g[De]=function(A){return g.handleEvent(A)}),g[De])}function Ae(){Tt.call(this),this.i=new jt(this),this.M=this,this.F=null}R(Ae,Tt),Ae.prototype[nt]=!0,Ae.prototype.removeEventListener=function(g,A,P,J){Oi(this,g,A,P,J)};function qe(g,A){var P,J=g.F;if(J)for(P=[];J;J=J.F)P.push(J);if(g=g.M,J=A.type||A,typeof A=="string")A=new lt(A,g);else if(A instanceof lt)A.target=A.target||g;else{var ct=A;A=new lt(J,g),M(A,ct)}if(ct=!0,P)for(var bt=P.length-1;0<=bt;bt--){var qt=A.g=P[bt];ct=Fn(qt,J,!0,A)&&ct}if(qt=A.g=g,ct=Fn(qt,J,!0,A)&&ct,ct=Fn(qt,J,!1,A)&&ct,P)for(bt=0;bt<P.length;bt++)qt=A.g=P[bt],ct=Fn(qt,J,!1,A)&&ct}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var P=g.g[A],J=0;J<P.length;J++)xt(P[J]);delete g.g[A],g.h--}}this.F=null},Ae.prototype.K=function(g,A,P,J){return this.i.add(String(g),A,!1,P,J)},Ae.prototype.L=function(g,A,P,J){return this.i.add(String(g),A,!0,P,J)};function Fn(g,A,P,J){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var ct=!0,bt=0;bt<A.length;++bt){var qt=A[bt];if(qt&&!qt.da&&qt.capture==P){var ze=qt.listener,Un=qt.ha||qt.src;qt.fa&&Kt(g.i,qt),ct=ze.call(Un,J)!==!1&&ct}}return ct&&!J.defaultPrevented}function Vi(g,A,P){if(typeof g=="function")P&&(g=U(g,P));else if(g&&typeof g.handleEvent=="function")g=U(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:m.setTimeout(g,A||0)}function Ce(g){g.g=Vi(()=>{g.g=null,g.i&&(g.i=!1,Ce(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class qn extends Tt{constructor(A,P){super(),this.m=A,this.l=P,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(g){Tt.call(this),this.h=g,this.g={}}R(vn,Tt);var We=[];function Me(g){Y(g.g,function(A,P){this.g.hasOwnProperty(P)&&rn(A)},g),g.g={}}vn.prototype.N=function(){vn.aa.N.call(this),Me(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=m.JSON.stringify,vi=m.JSON.parse,Pn=class{stringify(g){return m.JSON.stringify(g,void 0)}parse(g){return m.JSON.parse(g,void 0)}};function Ps(){}Ps.prototype.h=null;function Pr(g){return g.h||(g.h=g.i())}function zr(){}var Fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){lt.call(this,"d")}R(ls,lt);function qi(){lt.call(this,"c")}R(qi,lt);var Kn={},Ui=null;function zn(){return Ui=Ui||new Ae}Kn.La="serverreachability";function Ki(g){lt.call(this,Kn.La,g)}R(Ki,lt);function Ai(g){const A=zn();qe(A,new Ki(A))}Kn.STAT_EVENT="statevent";function wa(g,A){lt.call(this,Kn.STAT_EVENT,g),this.stat=A}R(wa,lt);function be(g){const A=zn();qe(A,new wa(A,g))}Kn.Ma="timingevent";function zs(g,A){lt.call(this,Kn.Ma,g),this.size=A}R(zs,lt);function Qa(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){g()},A)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function Na(g,A,P,J,ct,bt){g.info(function(){if(g.g)if(bt)for(var qt="",ze=bt.split("&"),Un=0;Un<ze.length;Un++){var Be=ze[Un].split("=");if(1<Be.length){var Xn=Be[0];Be=Be[1];var oi=Xn.split("_");qt=2<=oi.length&&oi[1]=="type"?qt+(Xn+"="+Be+"&"):qt+(Xn+"=redacted&")}}else qt=null;else qt=bt;return"XMLHTTP REQ ("+J+") [attempt "+ct+"]: "+A+`
`+P+`
`+qt})}function ar(g,A,P,J,ct,bt,qt){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ct+"]: "+A+`
`+P+`
`+bt+" "+qt})}function Li(g,A,P,J){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Vn(g,P)+(J?" "+J:"")})}function Mn(g,A){g.info(function(){return"TIMEOUT: "+A})}Ii.prototype.info=function(){};function Vn(g,A){if(!g.g)return A;if(!A)return null;try{var P=JSON.parse(A);if(P){for(g=0;g<P.length;g++)if(Array.isArray(P[g])){var J=P[g];if(!(2>J.length)){var ct=J[1];if(Array.isArray(ct)&&!(1>ct.length)){var bt=ct[0];if(bt!="noop"&&bt!="stop"&&bt!="close")for(var qt=1;qt<ct.length;qt++)ct[qt]=""}}}}return ji(P)}catch{return A}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Da;function Bn(){}R(Bn,Ps),Bn.prototype.g=function(){return new XMLHttpRequest},Bn.prototype.i=function(){return{}},Da=new Bn;function xa(g,A,P,J){this.j=g,this.i=A,this.l=P,this.R=J||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sr}function sr(){this.i=null,this.g="",this.h=!1}var os={},Bs={};function Ci(g,A,P){g.L=1,g.v=or(An(A)),g.m=P,g.P=!0,ln(g,null)}function ln(g,A){g.F=Date.now(),Xt(g),g.A=An(g.v);var P=g.A,J=g.R;Array.isArray(J)||(J=[String(J)]),Ma(P.i,"t",J),g.C=0,P=g.j.J,g.h=new sr,g.g=ms(g.j,P?A:null,!g.m),0<g.O&&(g.M=new qn(U(g.Y,g,g.g),g.O)),A=g.U,P=g.g,J=g.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&(We[0]=ct.toString()),ct=We);for(var bt=0;bt<ct.length;bt++){var qt=Fe(P,ct[bt],J||A.handleEvent,!1,A.h||A);if(!qt)break;A.g[qt.key]=qt}A=g.H?V(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),Ai(),Na(g.i,g.u,g.A,g.l,g.R,g.m)}xa.prototype.ca=function(g){g=g.target;const A=this.M;A&&ee(g)==3?A.j():this.Y(g)},xa.prototype.Y=function(g){try{if(g==this.g)t:{const oi=ee(this.g);var A=this.g.Ba();const Qn=this.g.Z();if(!(3>oi)&&(oi!=3||this.g&&(this.h.h||this.g.oa()||Lt(this.g)))){this.J||oi!=4||A==7||(A==8||0>=Qn?Ai(3):Ai(2)),Xi(this);var P=this.g.Z();this.X=P;e:if(cn(this)){var J=Lt(this.g);g="";var ct=J.length,bt=ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),si(this);var qt="";break e}this.h.i=new m.TextDecoder}for(A=0;A<ct;A++)this.h.h=!0,g+=this.h.i.decode(J[A],{stream:!(bt&&A==ct-1)});J.length=0,this.h.g+=g,this.C=0,qt=this.h.g}else qt=this.g.oa();if(this.o=P==200,ar(this.i,this.u,this.A,this.l,this.R,oi,P),this.o){if(this.T&&!this.K){e:{if(this.g){var ze,Un=this.g;if((ze=Un.g?Un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ze)){var Be=ze;break e}}Be=null}if(P=Be)Li(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pi(this,P);else{this.o=!1,this.s=3,be(12),kn(this),si(this);break t}}if(this.P){P=!0;let Ri;for(;!this.J&&this.C<qt.length;)if(Ri=Jt(this,qt),Ri==Bs){oi==4&&(this.s=4,be(14),P=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Ri==os){this.s=4,be(15),Li(this.i,this.l,qt,"[Invalid Chunk]"),P=!1;break}else Li(this.i,this.l,Ri,null),Pi(this,Ri);if(cn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oi!=4||qt.length!=0||this.h.h||(this.s=1,be(16),P=!1),this.o=this.o&&P,!P)Li(this.i,this.l,qt,"[Invalid Chunked Response]"),kn(this),si(this);else if(0<qt.length&&!this.W){this.W=!0;var Xn=this.j;Xn.g==this&&Xn.ba&&!Xn.M&&(Xn.j.info("Great, no buffering proxy detected. Bytes received: "+qt.length),jr(Xn),Xn.M=!0,be(11))}}else Li(this.i,this.l,qt,null),Pi(this,qt);oi==4&&kn(this),this.o&&!this.J&&(oi==4?eu(this.j,this):(this.o=!1,Xt(this)))}else Ft(this.g),P==400&&0<qt.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),kn(this),si(this)}}}catch{}finally{}};function cn(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Jt(g,A){var P=g.C,J=A.indexOf(`
`,P);return J==-1?Bs:(P=Number(A.substring(P,J)),isNaN(P)?os:(J+=1,J+P>A.length?Bs:(A=A.slice(J,J+P),g.C=J+P,A)))}xa.prototype.cancel=function(){this.J=!0,kn(this)};function Xt(g){g.S=Date.now()+g.I,Za(g,g.I)}function Za(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Qa(U(g.ba,g),A)}function Xi(g){g.B&&(m.clearTimeout(g.B),g.B=null)}xa.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Mn(this.i,this.A),this.L!=2&&(Ai(),be(17)),kn(this),this.s=2,si(this)):Za(this,this.S-g)};function si(g){g.j.G==0||g.J||eu(g.j,g)}function kn(g){Xi(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Me(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function Pi(g,A){try{var P=g.j;if(P.G!=0&&(P.g==g||us(P.h,g))){if(!g.K&&us(P.h,g)&&P.G==3){try{var J=P.Da.g.parse(A)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ct=J;if(ct[0]==0){t:if(!P.u){if(P.g)if(P.g.F+3e3<g.F)Rl(P),Fs(P);else break t;yo(P),be(18)}}else P.za=ct[1],0<P.za-P.T&&37500>ct[2]&&P.F&&P.v==0&&!P.C&&(P.C=Qa(U(P.Za,P),6e3));if(1>=Sl(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else pr(P,11)}else if((g.K||P.g==g)&&Rl(P),!D(A))for(ct=P.Da.g.parse(A),A=0;A<ct.length;A++){let Be=ct[A];if(P.T=Be[0],Be=Be[1],P.G==2)if(Be[0]=="c"){P.K=Be[1],P.ia=Be[2];const Xn=Be[3];Xn!=null&&(P.la=Xn,P.j.info("VER="+P.la));const oi=Be[4];oi!=null&&(P.Aa=oi,P.j.info("SVER="+P.Aa));const Qn=Be[5];Qn!=null&&typeof Qn=="number"&&0<Qn&&(J=1.5*Qn,P.L=J,P.j.info("backChannelRequestTimeoutMs_="+J)),J=P;const Ri=g.g;if(Ri){const vs=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vs){var bt=J.h;bt.g||vs.indexOf("spdy")==-1&&vs.indexOf("quic")==-1&&vs.indexOf("h2")==-1||(bt.j=bt.l,bt.g=new Set,bt.h&&(cs(bt,bt.h),bt.h=null))}if(J.D){const su=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(J.ya=su,Ke(J.I,J.D,su))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-g.F,P.j.info("Handshake RTT: "+P.R+"ms")),J=P;var qt=g;if(J.qa=cc(J,J.J?J.ia:null,J.W),qt.K){Zi(J.h,qt);var ze=qt,Un=J.L;Un&&(ze.I=Un),ze.B&&(Xi(ze),Xt(ze)),J.g=qt}else oc(J);0<P.i.length&&go(P)}else Be[0]!="stop"&&Be[0]!="close"||pr(P,7);else P.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?pr(P,7):li(P):Be[0]!="noop"&&P.l&&P.l.ta(Be),P.v=0)}}Ai(4)}catch{}}var fa=class{constructor(g,A){this.g=g,this.map=A}};function Br(g){this.l=g||10,m.PerformanceNavigationTiming?(g=m.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qi(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Sl(g){return g.h?1:g.g?g.g.size:0}function us(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function cs(g,A){g.g?g.g.add(A):g.h=A}function Zi(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Br.prototype.cancel=function(){if(this.i=ri(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ri(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const P of g.g.values())A=A.concat(P.D);return A}return I(g.i)}function Wa(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(v(g)){for(var A=[],P=g.length,J=0;J<P;J++)A.push(g[J]);return A}A=[],P=0;for(J in g)A[P++]=g[J];return A}function hs(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(v(g)||typeof g=="string"){var A=[];g=g.length;for(var P=0;P<g;P++)A.push(P);return A}A=[],P=0;for(const J in g)A[P++]=J;return A}}}function ks(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(v(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var P=hs(g),J=Wa(g),ct=J.length,bt=0;bt<ct;bt++)A.call(void 0,J[bt],P&&P[bt],g)}var El=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rr(g,A){if(g){g=g.split("&");for(var P=0;P<g.length;P++){var J=g[P].indexOf("="),ct=null;if(0<=J){var bt=g[P].substring(0,J);ct=g[P].substring(J+1)}else bt=g[P];A(bt,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}function fs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof fs){this.h=g.h,Gs(this,g.j),this.o=g.o,this.g=g.g,lr(this,g.s),this.l=g.l;var A=g.i,P=new Oa;P.i=A.i,A.g&&(P.g=new Map(A.g),P.h=A.h),kr(this,P),this.m=g.m}else g&&(A=String(g).match(El))?(this.h=!1,Gs(this,A[1]||"",!0),this.o=da(A[2]||""),this.g=da(A[3]||"",!0),lr(this,A[4]),this.l=da(A[5]||"",!0),kr(this,A[6]||"",!0),this.m=da(A[7]||"")):(this.h=!1,this.i=new Oa(null,this.h))}fs.prototype.toString=function(){var g=[],A=this.j;A&&g.push(ga(A,ur,!0),":");var P=this.g;return(P||A=="file")&&(g.push("//"),(A=this.o)&&g.push(ga(A,ur,!0),"@"),g.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&g.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&g.push("/"),g.push(ga(P,P.charAt(0)=="/"?Gr:bl,!0))),(P=this.i.toString())&&g.push("?",P),(P=this.m)&&g.push("#",ga(P,fo)),g.join("")};function An(g){return new fs(g)}function Gs(g,A,P){g.j=P?da(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function lr(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function kr(g,A,P){A instanceof Oa?(g.i=A,Hs(g.i,g.h)):(P||(A=ga(A,ho)),g.i=new Oa(A,g.h))}function Ke(g,A,P){g.i.set(A,P)}function or(g){return Ke(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function da(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ga(g,A,P){return typeof g=="string"?(g=encodeURI(g).replace(A,Tl),P&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tl(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ur=/[#\/\?@]/g,bl=/[#\?:]/g,Gr=/[#\?]/g,ho=/[#\?@]/g,fo=/#/g;function Oa(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function ma(g){g.g||(g.g=new Map,g.h=0,g.i&&rr(g.i,function(A,P){g.add(decodeURIComponent(A.replace(/\+/g," ")),P)}))}a=Oa.prototype,a.add=function(g,A){ma(this),this.i=null,g=Va(this,g);var P=this.g.get(g);return P||this.g.set(g,P=[]),P.push(A),this.h+=1,this};function cr(g,A){ma(g),A=Va(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function ds(g,A){return ma(g),A=Va(g,A),g.g.has(A)}a.forEach=function(g,A){ma(this),this.g.forEach(function(P,J){P.forEach(function(ct){g.call(A,ct,J,this)},this)},this)},a.na=function(){ma(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),P=[];for(let J=0;J<A.length;J++){const ct=g[J];for(let bt=0;bt<ct.length;bt++)P.push(A[J])}return P},a.V=function(g){ma(this);let A=[];if(typeof g=="string")ds(this,g)&&(A=A.concat(this.g.get(Va(this,g))));else{g=Array.from(this.g.values());for(let P=0;P<g.length;P++)A=A.concat(g[P])}return A},a.set=function(g,A){return ma(this),this.i=null,g=Va(this,g),ds(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},a.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function Ma(g,A,P){cr(g,A),0<P.length&&(g.i=null,g.g.set(Va(g,A),I(P)),g.h+=P.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var P=0;P<A.length;P++){var J=A[P];const bt=encodeURIComponent(String(J)),qt=this.V(J);for(J=0;J<qt.length;J++){var ct=bt;qt[J]!==""&&(ct+="="+encodeURIComponent(String(qt[J]))),g.push(ct)}}return this.i=g.join("&")};function Va(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Hs(g,A){A&&!g.j&&(ma(g),g.i=null,g.g.forEach(function(P,J){var ct=J.toLowerCase();J!=ct&&(cr(this,J),Ma(this,ct,P))},g)),g.j=A}function Al(g,A){const P=new Ii;if(m.Image){const J=new Image;J.onload=C(Wi,P,"TestLoadImage: loaded",!0,A,J),J.onerror=C(Wi,P,"TestLoadImage: error",!1,A,J),J.onabort=C(Wi,P,"TestLoadImage: abort",!1,A,J),J.ontimeout=C(Wi,P,"TestLoadImage: timeout",!1,A,J),m.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else A(!1)}function hr(g,A){const P=new Ii,J=new AbortController,ct=setTimeout(()=>{J.abort(),Wi(P,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:J.signal}).then(bt=>{clearTimeout(ct),bt.ok?Wi(P,"TestPingServer: ok",!0,A):Wi(P,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ct),Wi(P,"TestPingServer: error",!1,A)})}function Wi(g,A,P,J,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),J(P)}catch{}}function fr(){this.g=new Pn}function Ja(g,A,P){const J=P||"";try{ks(g,function(ct,bt){let qt=ct;_(ct)&&(qt=ji(ct)),A.push(J+bt+"="+encodeURIComponent(qt))})}catch(ct){throw A.push(J+"type="+encodeURIComponent("_badmap")),ct}}function gs(g){this.l=g.Ub||null,this.j=g.eb||!1}R(gs,Ps),gs.prototype.g=function(){return new js(this.l,this.j)},gs.prototype.i=function(g){return function(){return g}}({});function js(g,A){Ae.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(js,Ae),a=js.prototype,a.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,$i(this)},a.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||m).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hr(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hr(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Ji(this):$i(this),this.readyState==3&&Hr(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,Ji(this))},a.Qa=function(g){this.g&&(this.response=g,Ji(this))},a.ga=function(){this.g&&Ji(this)};function Ji(g){g.readyState=4,g.l=null,g.j=null,g.v=null,$i(g)}a.setRequestHeader=function(g,A){this.u.append(g,A)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var P=A.next();!P.done;)P=P.value,g.push(P[0]+": "+P[1]),P=A.next();return g.join(`\r
`)};function $i(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function dr(g){let A="";return Y(g,function(P,J){A+=J,A+=":",A+=P,A+=`\r
`}),A}function Yn(g,A,P){t:{for(J in P){var J=!1;break t}J=!0}J||(P=dr(P),typeof g=="string"?P!=null&&encodeURIComponent(String(P)):Ke(g,A,P))}function Je(g){Ae.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Je,Ae);var gr=/^https?$/i,mr=["POST","PUT"];a=Je.prototype,a.Ha=function(g){this.J=g},a.ea=function(g,A,P,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Da.g(),this.v=this.o?Pr(this.o):Pr(Da),this.g.onreadystatechange=U(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(bt){tt(this,bt);return}if(g=P||"",P=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ct in J)P.set(ct,J[ct]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const bt of J.keys())P.set(bt,J.get(bt));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(P.keys()).find(bt=>bt.toLowerCase()=="content-type"),ct=m.FormData&&g instanceof m.FormData,!(0<=Array.prototype.indexOf.call(mr,A,void 0))||J||ct||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[bt,qt]of P)this.g.setRequestHeader(bt,qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(g),this.u=!1}catch(bt){tt(this,bt)}};function tt(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,yt(g),Ct(g)}function yt(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,qe(this,"complete"),qe(this,"abort"),Ct(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ct(this,!0)),Je.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},a.bb=function(){Ut(this)};function Ut(g){if(g.h&&typeof d<"u"&&(!g.v[1]||ee(g)!=4||g.Z()!=2)){if(g.u&&ee(g)==4)Vi(g.Ea,0,g);else if(qe(g,"readystatechange"),ee(g)==4){g.h=!1;try{const qt=g.Z();t:switch(qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var P;if(!(P=A)){var J;if(J=qt===0){var ct=String(g.D).match(El)[1]||null;!ct&&m.self&&m.self.location&&(ct=m.self.location.protocol.slice(0,-1)),J=!gr.test(ct?ct.toLowerCase():"")}P=J}if(P)qe(g,"complete"),qe(g,"success");else{g.m=6;try{var bt=2<ee(g)?g.g.statusText:""}catch{bt=""}g.l=bt+" ["+g.Z()+"]",yt(g)}}finally{Ct(g)}}}}function Ct(g,A){if(g.g){Ht(g);const P=g.g,J=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||qe(g,"ready");try{P.onreadystatechange=J}catch{}}}function Ht(g){g.I&&(m.clearTimeout(g.I),g.I=null)}a.isActive=function(){return!!this.g};function ee(g){return g.g?g.g.readyState:0}a.Z=function(){try{return 2<ee(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),vi(A)}};function Lt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ft(g){const A={};g=(g.g&&2<=ee(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(D(g[J]))continue;var P=k(g[J]);const ct=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const bt=A[ct]||[];A[ct]=bt,bt.push(P)}j(A,function(J){return J.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qt(g,A,P){return P&&P.internalChannelParams&&P.internalChannelParams[g]||A}function he(g){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qt("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qt("baseRetryDelayMs",5e3,g),this.cb=Qt("retryDelaySeedMs",1e4,g),this.Wa=Qt("forwardChannelMaxRetries",2,g),this.wa=Qt("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(g&&g.concurrentRequestLimit),this.Da=new fr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=he.prototype,a.la=8,a.G=1,a.connect=function(g,A,P,J){be(0),this.W=g,this.H=A||{},P&&J!==void 0&&(this.H.OSID=P,this.H.OAID=J),this.F=this.X,this.I=cc(this,null,this.W),go(this)};function li(g){if(rc(g),g.G==3){var A=g.U++,P=An(g.I);if(Ke(P,"SID",g.K),Ke(P,"RID",A),Ke(P,"TYPE","terminate"),Cl(g,P),A=new xa(g,g.j,A),A.L=2,A.v=or(An(P)),P=!1,m.navigator&&m.navigator.sendBeacon)try{P=m.navigator.sendBeacon(A.v.toString(),"")}catch{}!P&&m.Image&&(new Image().src=A.v,P=!0),P||(A.g=ms(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Xt(A)}nu(g)}function Fs(g){g.g&&(jr(g),g.g.cancel(),g.g=null)}function rc(g){Fs(g),g.u&&(m.clearTimeout(g.u),g.u=null),Rl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&m.clearTimeout(g.s),g.s=null)}function go(g){if(!Qi(g.h)&&!g.s){g.s=!0;var A=g.Ga;et||X(),rt||(et(),rt=!0),pt.add(A,g),g.B=0}}function mo(g,A){return Sl(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Qa(U(g.Ga,g,A),vo(g,g.B)),g.B++,!0)}a.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ct=new xa(this,this.j,g);let bt=this.o;if(this.S&&(bt?(bt=V(bt),M(bt,this.S)):bt=this.S),this.m!==null||this.O||(ct.H=bt,bt=null),this.P)t:{for(var A=0,P=0;P<this.i.length;P++){e:{var J=this.i[P];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break e}J=void 0}if(J===void 0)break;if(A+=J,4096<A){A=P;break t}if(A===4096||P===this.i.length-1){A=P+1;break t}}A=1e3}else A=1e3;A=lc(this,ct,A),P=An(this.I),Ke(P,"RID",g),Ke(P,"CVER",22),this.D&&Ke(P,"X-HTTP-Session-Id",this.D),Cl(this,P),bt&&(this.O?A="headers="+encodeURIComponent(String(dr(bt)))+"&"+A:this.m&&Yn(P,this.m,bt)),cs(this.h,ct),this.Ua&&Ke(P,"TYPE","init"),this.P?(Ke(P,"$req",A),Ke(P,"SID","null"),ct.T=!0,Ci(ct,P,null)):Ci(ct,P,A),this.G=2}}else this.G==3&&(g?po(this,g):this.i.length==0||Qi(this.h)||po(this))};function po(g,A){var P;A?P=A.l:P=g.U++;const J=An(g.I);Ke(J,"SID",g.K),Ke(J,"RID",P),Ke(J,"AID",g.T),Cl(g,J),g.m&&g.o&&Yn(J,g.m,g.o),P=new xa(g,g.j,P,g.B+1),g.m===null&&(P.H=g.o),A&&(g.i=A.D.concat(g.i)),A=lc(g,P,1e3),P.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),cs(g.h,P),Ci(P,J,A)}function Cl(g,A){g.H&&Y(g.H,function(P,J){Ke(A,J,P)}),g.l&&ks({},function(P,J){Ke(A,J,P)})}function lc(g,A,P){P=Math.min(g.i.length,P);var J=g.l?U(g.l.Na,g.l,g):null;t:{var ct=g.i;let bt=-1;for(;;){const qt=["count="+P];bt==-1?0<P?(bt=ct[0].g,qt.push("ofs="+bt)):bt=0:qt.push("ofs="+bt);let ze=!0;for(let Un=0;Un<P;Un++){let Be=ct[Un].g;const Xn=ct[Un].map;if(Be-=bt,0>Be)bt=Math.max(0,ct[Un].g-100),ze=!1;else try{Ja(Xn,qt,"req"+Be+"_")}catch{J&&J(Xn)}}if(ze){J=qt.join("&");break t}}}return g=g.i.splice(0,P),A.D=g,J}function oc(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;et||X(),rt||(et(),rt=!0),pt.add(A,g),g.v=0}}function yo(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Qa(U(g.Fa,g),vo(g,g.v)),g.v++,!0)}a.Fa=function(){if(this.u=null,uc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Qa(U(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),Fs(this),uc(this))};function jr(g){g.A!=null&&(m.clearTimeout(g.A),g.A=null)}function uc(g){g.g=new xa(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=An(g.qa);Ke(A,"RID","rpc"),Ke(A,"SID",g.K),Ke(A,"AID",g.T),Ke(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&Ke(A,"TO",g.ja),Ke(A,"TYPE","xmlhttp"),Cl(g,A),g.m&&g.o&&Yn(A,g.m,g.o),g.L&&(g.g.I=g.L);var P=g.g;g=g.ia,P.L=1,P.v=or(An(A)),P.m=null,P.P=!0,ln(P,g)}a.Za=function(){this.C!=null&&(this.C=null,Fs(this),yo(this),be(19))};function Rl(g){g.C!=null&&(m.clearTimeout(g.C),g.C=null)}function eu(g,A){var P=null;if(g.g==A){Rl(g),jr(g),g.g=null;var J=2}else if(us(g.h,A))P=A.D,Zi(g.h,A),J=1;else return;if(g.G!=0){if(A.o)if(J==1){P=A.m?A.m.length:0,A=Date.now()-A.F;var ct=g.B;J=zn(),qe(J,new zs(J,P)),go(g)}else oc(g);else if(ct=A.s,ct==3||ct==0&&0<A.X||!(J==1&&mo(g,A)||J==2&&yo(g)))switch(P&&0<P.length&&(A=g.h,A.i=A.i.concat(P)),ct){case 1:pr(g,5);break;case 4:pr(g,10);break;case 3:pr(g,6);break;default:pr(g,2)}}}function vo(g,A){let P=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(P*=2),P*A}function pr(g,A){if(g.j.info("Error code "+A),A==2){var P=U(g.fb,g),J=g.Xa;const ct=!J;J=new fs(J||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gs(J,"https"),or(J),ct?Al(J.toString(),P):hr(J.toString(),P)}else be(2);g.G=0,g.l&&g.l.sa(A),nu(g),rc(g)}a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function nu(g){if(g.G=0,g.ka=[],g.l){const A=ri(g.h);(A.length!=0||g.i.length!=0)&&(L(g.ka,A),L(g.ka,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.ra()}}function cc(g,A,P){var J=P instanceof fs?An(P):new fs(P);if(J.g!="")A&&(J.g=A+"."+J.g),lr(J,J.s);else{var ct=m.location;J=ct.protocol,A=A?A+"."+ct.hostname:ct.hostname,ct=+ct.port;var bt=new fs(null);J&&Gs(bt,J),A&&(bt.g=A),ct&&lr(bt,ct),P&&(bt.l=P),J=bt}return P=g.D,A=g.ya,P&&A&&Ke(J,P,A),Ke(J,"VER",g.la),Cl(g,J),J}function ms(g,A,P){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Je(new gs({eb:P})):new Je(g.pa),A.Ha(g.J),A}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}a=iu.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function au(){}au.prototype.g=function(g,A){return new ta(g,A)};function ta(g,A){Ae.call(this),this.g=new he(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!D(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!D(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new ys(this)}R(ta,Ae),ta.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ta.prototype.close=function(){li(this.g)},ta.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var P={};P.__data__=g,g=P}else this.u&&(P={},P.__data__=ji(g),g=P);A.i.push(new fa(A.Ya++,g)),A.G==3&&go(A)},ta.prototype.N=function(){this.g.l=null,delete this.j,li(this.g),delete this.g,ta.aa.N.call(this)};function qs(g){ls.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){t:{for(const P in A){g=P;break t}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}R(qs,ls);function ps(){qi.call(this),this.status=1}R(ps,qi);function ys(g){this.g=g}R(ys,iu),ys.prototype.ua=function(){qe(this.g,"a")},ys.prototype.ta=function(g){qe(this.g,new qs(g))},ys.prototype.sa=function(g){qe(this.g,new ps)},ys.prototype.ra=function(){qe(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,ta.prototype.send=ta.prototype.o,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,E5=function(){return new au},S5=function(){return zn()},_5=Kn,b1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,im=Se,Yi.COMPLETE="complete",v5=Yi,zr.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,n0=zr,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,y5=Je}).apply(typeof Kg<"u"?Kg:typeof self<"u"?self:typeof window<"u"?window:{});const y_="@firebase/firestore",v_="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ka.UNAUTHENTICATED=new Ka(null),Ka.GOOGLE_CREDENTIALS=new Ka("google-credentials-uid"),Ka.FIRST_PARTY=new Ka("first-party-uid"),Ka.MOCK_USER=new Ka("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Y1("@firebase/firestore");function Gh(){return Xc.logLevel}function Zt(a,...t){if(Xc.logLevel<=Ye.DEBUG){const n=t.map(ly);Xc.debug(`Firestore (${lf}): ${a}`,...n)}}function Jo(a,...t){if(Xc.logLevel<=Ye.ERROR){const n=t.map(ly);Xc.error(`Firestore (${lf}): ${a}`,...n)}}function Zh(a,...t){if(Xc.logLevel<=Ye.WARN){const n=t.map(ly);Xc.warn(`Firestore (${lf}): ${a}`,...n)}}function ly(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(a="Unexpected state"){const t=`FIRESTORE (${lf}) INTERNAL ASSERTION FAILED: `+a;throw Jo(t),new Error(t)}function yn(a,t){a||ge()}function Te(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends tu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class K8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ka.UNAUTHENTICATED))}shutdown(){}}class Y8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class X8{constructor(t){this.t=t,this.currentUser=Ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yn(this.o===void 0);let r=this.i;const u=v=>this.i!==r?(r=this.i,n(v)):Promise.resolve();let c=new Xu;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xu,t.enqueueRetryable(()=>u(this.currentUser))};const d=()=>{const v=c;t.enqueueRetryable(async()=>{await v.promise,await u(this.currentUser)})},m=v=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xu)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yn(typeof r.accessToken=="string"),new T5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yn(t===null||typeof t=="string"),new Ka(t)}}class Q8{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ka.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Z8{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Q8(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ka.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W8{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ir(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){yn(this.o===void 0);const r=c=>{c.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Zt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>r(c))};const u=c=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new __(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yn(typeof n.token=="string"),this.R=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const u=J8(40);for(let c=0;c<u.length;++c)r.length<20&&u[c]<n&&(r+=t.charAt(u[c]%62))}return r}}function Le(a,t){return a<t?-1:a>t?1:0}function A1(a,t){let n=0;for(;n<a.length&&n<t.length;){const r=a.codePointAt(n),u=t.codePointAt(n);if(r!==u){if(r<128&&u<128)return Le(r,u);{const c=b5(),d=$8(c.encode(S_(a,n)),c.encode(S_(t,n)));return d!==0?d:Le(r,u)}}n+=r>65535?2:1}return Le(a.length,t.length)}function S_(a,t){return a.codePointAt(t)>65535?a.substring(t,t+2):a.substring(t,t+1)}function $8(a,t){for(let n=0;n<a.length&&n<t.length;++n)if(a[n]!==t[n])return Le(a[n],t[n]);return Le(a.length,t.length)}function Wh(a,t,n){return a.length===t.length&&a.every((r,u)=>n(r,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-62135596800,T_=1e6;class Gi{static now(){return Gi.fromMillis(Date.now())}static fromDate(t){return Gi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*T_);return new Gi(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ae(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<E_)throw new ae(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ae(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T_}_compareTo(t){return this.seconds===t.seconds?Le(this.nanoseconds,t.nanoseconds):Le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-E_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(t){return new _e(t)}static min(){return new _e(new Gi(0,0))}static max(){return new _e(new Gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="__name__";class ao{constructor(t,n,r){n===void 0?n=0:n>t.length&&ge(),r===void 0?r=t.length-n:r>t.length-n&&ge(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ao.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ao?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let u=0;u<r;u++){const c=ao.compareSegments(t.get(u),n.get(u));if(c!==0)return c}return Le(t.length,n.length)}static compareSegments(t,n){const r=ao.isNumericId(t),u=ao.isNumericId(n);return r&&!u?-1:!r&&u?1:r&&u?ao.extractNumericId(t).compare(ao.extractNumericId(n)):A1(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Yu.fromString(t.substring(4,t.length-2))}}class jn extends ao{construct(t,n,r){return new jn(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ae(Bt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(u=>u.length>0))}return new jn(n)}static emptyPath(){return new jn([])}}const t7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ca extends ao{construct(t,n,r){return new Ca(t,n,r)}static isValidIdentifier(t){return t7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ca.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b_}static keyField(){return new Ca([b_])}static fromServerFormat(t){const n=[];let r="",u=0;const c=()=>{if(r.length===0)throw new ae(Bt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;u<t.length;){const m=t[u];if(m==="\\"){if(u+1===t.length)throw new ae(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[u+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ae(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=v,u+=2}else m==="`"?(d=!d,u++):m!=="."||d?(r+=m,u++):(c(),u++)}if(c(),d)throw new ae(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ca(n)}static emptyPath(){return new Ca([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.path=t}static fromPath(t){return new re(jn.fromString(t))}static fromName(t){return new re(jn.fromString(t).popFirst(5))}static empty(){return new re(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&jn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return jn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new re(new jn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-1;function e7(a,t){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,u=_e.fromTimestamp(r===1e9?new Gi(n+1,0):new Gi(n,r));return new Zu(u,re.empty(),t)}function n7(a){return new Zu(a.readTime,a.key,d0)}class Zu{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Zu(_e.min(),re.empty(),d0)}static max(){return new Zu(_e.max(),re.empty(),d0)}}function i7(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=re.comparator(a.documentKey,t.documentKey),n!==0?n:Le(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(a){if(a.code!==Bt.FAILED_PRECONDITION||a.message!==a7)throw a;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Mt((r,u)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,u)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Mt?n:Mt.resolve(n)}catch(n){return Mt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Mt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Mt.reject(n)}static resolve(t){return new Mt((n,r)=>{n(t)})}static reject(t){return new Mt((n,r)=>{r(t)})}static waitFor(t){return new Mt((n,r)=>{let u=0,c=0,d=!1;t.forEach(m=>{++u,m.next(()=>{++c,d&&c===u&&n()},v=>r(v))}),d=!0,c===u&&n()})}static or(t){let n=Mt.resolve(!1);for(const r of t)n=n.next(u=>u?Mt.resolve(u):r());return n}static forEach(t,n){const r=[];return t.forEach((u,c)=>{r.push(n.call(this,u,c))}),this.waitFor(r)}static mapArray(t,n){return new Mt((r,u)=>{const c=t.length,d=new Array(c);let m=0;for(let v=0;v<c;v++){const _=v;n(t[_]).next(b=>{d[_]=b,++m,m===c&&r(d)},b=>u(b))}})}static doWhile(t,n){return new Mt((r,u)=>{const c=()=>{t()===!0?n().next(()=>{c()},u):r()};c()})}}function r7(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uf(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}zm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-1;function Bm(a){return a==null}function ym(a){return a===0&&1/a==-1/0}function l7(a){return typeof a=="number"&&Number.isInteger(a)&&!ym(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="";function o7(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=A_(t)),t=u7(a.get(n),t);return A_(t)}function u7(a,t){let n=t;const r=a.length;for(let u=0;u<r;u++){const c=a.charAt(u);switch(c){case"\0":n+="";break;case C5:n+="";break;default:n+=c}}return n}function A_(a){return a+C5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function Zc(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function R5(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,n){this.comparator=t,this.root=n||Aa.EMPTY}insert(t,n){return new ai(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Aa.BLACK,null,null))}remove(t){return new ai(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Aa.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const u=this.comparator(t,r.key);if(u===0)return n+r.left.size;u<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yg(this.root,t,this.comparator,!0)}}class Yg{constructor(t,n,r,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?r(t.key,n):1,n&&u&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Aa{constructor(t,n,r,u,c){this.key=t,this.value=n,this.color=r??Aa.RED,this.left=u??Aa.EMPTY,this.right=c??Aa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,u,c){return new Aa(t??this.key,n??this.value,r??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let u=this;const c=r(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,n,r),null):c===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(t,n,r)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Aa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,u=this;if(n(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(t,u.key)===0){if(u.right.isEmpty())return Aa.EMPTY;r=u.right.min(),u=u.copy(r.key,r.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Aa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Aa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const t=this.left.check();if(t!==this.right.check())throw ge();return t+(this.isRed()?0:1)}}Aa.EMPTY=null,Aa.RED=!0,Aa.BLACK=!1;Aa.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(t,n,r,u,c){return this}insert(t,n,r){return new Aa(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this.comparator=t,this.data=new ai(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const u=r.getNext();if(this.comparator(u.key,t[1])>=0)return;n(u.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(t){return new R_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Hi)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(this.comparator(u,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Hi(this.comparator);return n.data=t,n}}class R_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t){this.fields=t,t.sort(Ca.comparator)}static empty(){return new vl([])}unionWith(t){let n=new Hi(Ca.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new vl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wh(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new w5("Invalid base64 string: "+c):c}}(t);return new Ra(n)}static fromUint8Array(t){const n=function(u){let c="";for(let d=0;d<u.length;++d)c+=String.fromCharCode(u[d]);return c}(t);return new Ra(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let u=0;u<n.length;u++)r[u]=n.charCodeAt(u);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ra.EMPTY_BYTE_STRING=new Ra("");const c7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wu(a){if(yn(!!a),typeof a=="string"){let t=0;const n=c7.exec(a);if(yn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),t=Number(u)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ei(a.seconds),nanos:Ei(a.nanos)}}function Ei(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Ju(a){return typeof a=="string"?Ra.fromBase64String(a):Ra.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="server_timestamp",D5="__type__",x5="__previous_value__",O5="__local_write_time__";function uy(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{})[D5])===null||n===void 0?void 0:n.stringValue)===N5}function km(a){const t=a.mapValue.fields[x5];return uy(t)?km(t):t}function g0(a){const t=Wu(a.mapValue.fields[O5].timestampValue);return new Gi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(t,n,r,u,c,d,m,v,_){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=u,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=_}}const vm="(default)";class m0{constructor(t,n){this.projectId=t,this.database=n||vm}static empty(){return new m0("","")}get isDefaultDatabase(){return this.database===vm}isEqual(t){return t instanceof m0&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5="__type__",f7="__max__",Xg={mapValue:{}},V5="__vector__",_m="value";function $u(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?uy(a)?4:g7(a)?9007199254740991:d7(a)?10:11:ge()}function uo(a,t){if(a===t)return!0;const n=$u(a);if(n!==$u(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return g0(a).isEqual(g0(t));case 3:return function(u,c){if(typeof u.timestampValue=="string"&&typeof c.timestampValue=="string"&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const d=Wu(u.timestampValue),m=Wu(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return function(u,c){return Ju(u.bytesValue).isEqual(Ju(c.bytesValue))}(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,c){return Ei(u.geoPointValue.latitude)===Ei(c.geoPointValue.latitude)&&Ei(u.geoPointValue.longitude)===Ei(c.geoPointValue.longitude)}(a,t);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return Ei(u.integerValue)===Ei(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const d=Ei(u.doubleValue),m=Ei(c.doubleValue);return d===m?ym(d)===ym(m):isNaN(d)&&isNaN(m)}return!1}(a,t);case 9:return Wh(a.arrayValue.values||[],t.arrayValue.values||[],uo);case 10:case 11:return function(u,c){const d=u.mapValue.fields||{},m=c.mapValue.fields||{};if(C_(d)!==C_(m))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(m[v]===void 0||!uo(d[v],m[v])))return!1;return!0}(a,t);default:return ge()}}function p0(a,t){return(a.values||[]).find(n=>uo(n,t))!==void 0}function Jh(a,t){if(a===t)return 0;const n=$u(a),r=$u(t);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(a.booleanValue,t.booleanValue);case 2:return function(c,d){const m=Ei(c.integerValue||c.doubleValue),v=Ei(d.integerValue||d.doubleValue);return m<v?-1:m>v?1:m===v?0:isNaN(m)?isNaN(v)?0:-1:1}(a,t);case 3:return w_(a.timestampValue,t.timestampValue);case 4:return w_(g0(a),g0(t));case 5:return A1(a.stringValue,t.stringValue);case 6:return function(c,d){const m=Ju(c),v=Ju(d);return m.compareTo(v)}(a.bytesValue,t.bytesValue);case 7:return function(c,d){const m=c.split("/"),v=d.split("/");for(let _=0;_<m.length&&_<v.length;_++){const b=Le(m[_],v[_]);if(b!==0)return b}return Le(m.length,v.length)}(a.referenceValue,t.referenceValue);case 8:return function(c,d){const m=Le(Ei(c.latitude),Ei(d.latitude));return m!==0?m:Le(Ei(c.longitude),Ei(d.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return N_(a.arrayValue,t.arrayValue);case 10:return function(c,d){var m,v,_,b;const O=c.fields||{},U=d.fields||{},C=(m=O[_m])===null||m===void 0?void 0:m.arrayValue,R=(v=U[_m])===null||v===void 0?void 0:v.arrayValue,I=Le(((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0,((b=R==null?void 0:R.values)===null||b===void 0?void 0:b.length)||0);return I!==0?I:N_(C,R)}(a.mapValue,t.mapValue);case 11:return function(c,d){if(c===Xg.mapValue&&d===Xg.mapValue)return 0;if(c===Xg.mapValue)return 1;if(d===Xg.mapValue)return-1;const m=c.fields||{},v=Object.keys(m),_=d.fields||{},b=Object.keys(_);v.sort(),b.sort();for(let O=0;O<v.length&&O<b.length;++O){const U=A1(v[O],b[O]);if(U!==0)return U;const C=Jh(m[v[O]],_[b[O]]);if(C!==0)return C}return Le(v.length,b.length)}(a.mapValue,t.mapValue);default:throw ge()}}function w_(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return Le(a,t);const n=Wu(a),r=Wu(t),u=Le(n.seconds,r.seconds);return u!==0?u:Le(n.nanos,r.nanos)}function N_(a,t){const n=a.values||[],r=t.values||[];for(let u=0;u<n.length&&u<r.length;++u){const c=Jh(n[u],r[u]);if(c)return c}return Le(n.length,r.length)}function $h(a){return C1(a)}function C1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(n){const r=Wu(n);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(n){return Ju(n).toBase64()}(a.bytesValue):"referenceValue"in a?function(n){return re.fromName(n).toString()}(a.referenceValue):"geoPointValue"in a?function(n){return`geo(${n.latitude},${n.longitude})`}(a.geoPointValue):"arrayValue"in a?function(n){let r="[",u=!0;for(const c of n.values||[])u?u=!1:r+=",",r+=C1(c);return r+"]"}(a.arrayValue):"mapValue"in a?function(n){const r=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const d of r)c?c=!1:u+=",",u+=`${d}:${C1(n.fields[d])}`;return u+"}"}(a.mapValue):ge()}function am(a){switch($u(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=km(a);return t?16+am(t):16;case 5:return 2*a.stringValue.length;case 6:return Ju(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((u,c)=>u+am(c),0)}(a.arrayValue);case 10:case 11:return function(r){let u=0;return Zc(r.fields,(c,d)=>{u+=c.length+am(d)}),u}(a.mapValue);default:throw ge()}}function R1(a){return!!a&&"integerValue"in a}function cy(a){return!!a&&"arrayValue"in a}function D_(a){return!!a&&"nullValue"in a}function x_(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function sm(a){return!!a&&"mapValue"in a}function d7(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{})[M5])===null||n===void 0?void 0:n.stringValue)===V5}function r0(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Zc(a.mapValue.fields,(n,r)=>t.mapValue.fields[n]=r0(r)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=r0(a.arrayValue.values[n]);return t}return Object.assign({},a)}function g7(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===f7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.value=t}static empty(){return new Ur({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!sm(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=r0(n)}setAll(t){let n=Ca.emptyPath(),r={},u=[];t.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const v=this.getFieldsMap(n);this.applyChanges(v,r,u),r={},u=[],n=m.popLast()}d?r[m.lastSegment()]=r0(d):u.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,u)}delete(t){const n=this.field(t.popLast());sm(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return uo(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let u=n.mapValue.fields[t.get(r)];sm(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=u),n=u}return n.mapValue.fields}applyChanges(t,n,r){Zc(n,(u,c)=>t[u]=c);for(const u of r)delete t[u]}clone(){return new Ur(r0(this.value))}}function U5(a){const t=[];return Zc(a.fields,(n,r)=>{const u=new Ca([n]);if(sm(r)){const c=U5(r.mapValue).fields;if(c.length===0)t.push(u);else for(const d of c)t.push(u.child(d))}else t.push(u)}),new vl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,n,r,u,c,d,m){this.key=t,this.documentType=n,this.version=r,this.readTime=u,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(t){return new Ya(t,0,_e.min(),_e.min(),_e.min(),Ur.empty(),0)}static newFoundDocument(t,n,r,u){return new Ya(t,1,n,_e.min(),r,u,0)}static newNoDocument(t,n){return new Ya(t,2,n,_e.min(),_e.min(),Ur.empty(),0)}static newUnknownDocument(t,n){return new Ya(t,3,n,_e.min(),_e.min(),Ur.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ya&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ya(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,n){this.position=t,this.inclusive=n}}function O_(a,t,n){let r=0;for(let u=0;u<a.position.length;u++){const c=t[u],d=a.position[u];if(c.field.isKeyField()?r=re.comparator(re.fromName(d.referenceValue),n.key):r=Jh(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function M_(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!uo(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,n="asc"){this.field=t,this.dir=n}}function m7(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{}class ki extends I5{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new y7(t,n,r):n==="array-contains"?new S7(t,r):n==="in"?new E7(t,r):n==="not-in"?new T7(t,r):n==="array-contains-any"?new b7(t,r):new ki(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new v7(t,r):new _7(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jh(n,this.value)):n!==null&&$u(this.value)===$u(n)&&this.matchesComparison(Jh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class co extends I5{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new co(t,n)}matches(t){return L5(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function L5(a){return a.op==="and"}function P5(a){return p7(a)&&L5(a)}function p7(a){for(const t of a.filters)if(t instanceof co)return!1;return!0}function w1(a){if(a instanceof ki)return a.field.canonicalString()+a.op.toString()+$h(a.value);if(P5(a))return a.filters.map(t=>w1(t)).join(",");{const t=a.filters.map(n=>w1(n)).join(",");return`${a.op}(${t})`}}function z5(a,t){return a instanceof ki?function(r,u){return u instanceof ki&&r.op===u.op&&r.field.isEqual(u.field)&&uo(r.value,u.value)}(a,t):a instanceof co?function(r,u){return u instanceof co&&r.op===u.op&&r.filters.length===u.filters.length?r.filters.reduce((c,d,m)=>c&&z5(d,u.filters[m]),!0):!1}(a,t):void ge()}function B5(a){return a instanceof ki?function(n){return`${n.field.canonicalString()} ${n.op} ${$h(n.value)}`}(a):a instanceof co?function(n){return n.op.toString()+" {"+n.getFilters().map(B5).join(" ,")+"}"}(a):"Filter"}class y7 extends ki{constructor(t,n,r){super(t,n,r),this.key=re.fromName(r.referenceValue)}matches(t){const n=re.comparator(t.key,this.key);return this.matchesComparison(n)}}class v7 extends ki{constructor(t,n){super(t,"in",n),this.keys=k5("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class _7 extends ki{constructor(t,n){super(t,"not-in",n),this.keys=k5("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function k5(a,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class S7 extends ki{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cy(n)&&p0(n.arrayValue,this.value)}}class E7 extends ki{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&p0(this.value.arrayValue,n)}}class T7 extends ki{constructor(t,n){super(t,"not-in",n)}matches(t){if(p0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!p0(this.value.arrayValue,n)}}class b7 extends ki{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>p0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(t,n=null,r=[],u=[],c=null,d=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=u,this.limit=c,this.startAt=d,this.endAt=m,this.le=null}}function V_(a,t=null,n=[],r=[],u=null,c=null,d=null){return new A7(a,t,n,r,u,c,d)}function hy(a){const t=Te(a);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>w1(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),Bm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>$h(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>$h(r)).join(",")),t.le=n}return t.le}function fy(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!m7(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!z5(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!M_(a.startAt,t.startAt)&&M_(a.endAt,t.endAt)}function N1(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n=null,r=[],u=[],c=null,d="F",m=null,v=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=u,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=v,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function C7(a,t,n,r,u,c,d,m){return new Gm(a,t,n,r,u,c,d,m)}function G5(a){return new Gm(a)}function U_(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function R7(a){return a.collectionGroup!==null}function l0(a){const t=Te(a);if(t.he===null){t.he=[];const n=new Set;for(const c of t.explicitOrderBy)t.he.push(c),n.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Hi(Ca.comparator);return d.filters.forEach(v=>{v.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.he.push(new Em(c,r))}),n.has(Ca.keyField().canonicalString())||t.he.push(new Em(Ca.keyField(),r))}return t.he}function ro(a){const t=Te(a);return t.Pe||(t.Pe=w7(t,l0(a))),t.Pe}function w7(a,t){if(a.limitType==="F")return V_(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>{const c=u.dir==="desc"?"asc":"desc";return new Em(u.field,c)});const n=a.endAt?new Sm(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new Sm(a.startAt.position,a.startAt.inclusive):null;return V_(a.path,a.collectionGroup,t,a.filters,a.limit,n,r)}}function D1(a,t,n){return new Gm(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function Hm(a,t){return fy(ro(a),ro(t))&&a.limitType===t.limitType}function H5(a){return`${hy(ro(a))}|lt:${a.limitType}`}function Hh(a){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(u=>B5(u)).join(", ")}]`),Bm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(u=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(u)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(u=>$h(u)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(u=>$h(u)).join(",")),`Target(${r})`}(ro(a))}; limitType=${a.limitType})`}function jm(a,t){return t.isFoundDocument()&&function(r,u){const c=u.key.path;return r.collectionGroup!==null?u.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):re.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(a,t)&&function(r,u){for(const c of l0(r))if(!c.field.isKeyField()&&u.data.field(c.field)===null)return!1;return!0}(a,t)&&function(r,u){for(const c of r.filters)if(!c.matches(u))return!1;return!0}(a,t)&&function(r,u){return!(r.startAt&&!function(d,m,v){const _=O_(d,m,v);return d.inclusive?_<=0:_<0}(r.startAt,l0(r),u)||r.endAt&&!function(d,m,v){const _=O_(d,m,v);return d.inclusive?_>=0:_>0}(r.endAt,l0(r),u))}(a,t)}function N7(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function j5(a){return(t,n)=>{let r=!1;for(const u of l0(a)){const c=D7(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function D7(a,t,n){const r=a.field.isKeyField()?re.comparator(t.key,n.key):function(c,d,m){const v=d.data.field(c),_=m.data.field(c);return v!==null&&_!==null?Jh(v,_):ge()}(a.field,t,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[u,c]of r)if(this.equalsFn(u,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),u=this.inner[r];if(u===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],t))return void(u[c]=[t,n]);u.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let u=0;u<r.length;u++)if(this.equalsFn(r[u][0],t))return r.length===1?delete this.inner[n]:r.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Zc(this.inner,(n,r)=>{for(const[u,c]of r)t(u,c)})}isEmpty(){return R5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=new ai(re.comparator);function $o(){return x7}const F5=new ai(re.comparator);function i0(...a){let t=F5;for(const n of a)t=t.insert(n.key,n);return t}function q5(a){let t=F5;return a.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function jc(){return o0()}function K5(){return o0()}function o0(){return new Wc(a=>a.toString(),(a,t)=>a.isEqual(t))}const O7=new ai(re.comparator),M7=new Hi(re.comparator);function Xe(...a){let t=M7;for(const n of a)t=t.add(n);return t}const V7=new Hi(Le);function U7(){return V7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(t)?"-0":t}}function Y5(a){return{integerValue:""+a}}function I7(a,t){return l7(t)?Y5(t):dy(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this._=void 0}}function L7(a,t,n){return a instanceof Tm?function(u,c){const d={fields:{[D5]:{stringValue:N5},[O5]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&uy(c)&&(c=km(c)),c&&(d.fields[x5]=c),{mapValue:d}}(n,t):a instanceof y0?Q5(a,t):a instanceof v0?Z5(a,t):function(u,c){const d=X5(u,c),m=I_(d)+I_(u.Ie);return R1(d)&&R1(u.Ie)?Y5(m):dy(u.serializer,m)}(a,t)}function P7(a,t,n){return a instanceof y0?Q5(a,t):a instanceof v0?Z5(a,t):n}function X5(a,t){return a instanceof bm?function(r){return R1(r)||function(c){return!!c&&"doubleValue"in c}(r)}(t)?t:{integerValue:0}:null}class Tm extends Fm{}class y0 extends Fm{constructor(t){super(),this.elements=t}}function Q5(a,t){const n=W5(t);for(const r of a.elements)n.some(u=>uo(u,r))||n.push(r);return{arrayValue:{values:n}}}class v0 extends Fm{constructor(t){super(),this.elements=t}}function Z5(a,t){let n=W5(t);for(const r of a.elements)n=n.filter(u=>!uo(u,r));return{arrayValue:{values:n}}}class bm extends Fm{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function I_(a){return Ei(a.integerValue||a.doubleValue)}function W5(a){return cy(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function z7(a,t){return a.field.isEqual(t.field)&&function(r,u){return r instanceof y0&&u instanceof y0||r instanceof v0&&u instanceof v0?Wh(r.elements,u.elements,uo):r instanceof bm&&u instanceof bm?uo(r.Ie,u.Ie):r instanceof Tm&&u instanceof Tm}(a.transform,t.transform)}class B7{constructor(t,n){this.version=t,this.transformResults=n}}class lo{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new lo}static exists(t){return new lo(void 0,t)}static updateTime(t){return new lo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rm(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class qm{}function J5(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new gy(a.key,lo.none()):new C0(a.key,a.data,lo.none());{const n=a.data,r=Ur.empty();let u=new Hi(Ca.comparator);for(let c of t.fields)if(!u.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),u=u.add(c)}return new Jc(a.key,r,new vl(u.toArray()),lo.none())}}function k7(a,t,n){a instanceof C0?function(u,c,d){const m=u.value.clone(),v=P_(u.fieldTransforms,c,d.transformResults);m.setAll(v),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(a,t,n):a instanceof Jc?function(u,c,d){if(!rm(u.precondition,c))return void c.convertToUnknownDocument(d.version);const m=P_(u.fieldTransforms,c,d.transformResults),v=c.data;v.setAll($5(u)),v.setAll(m),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()}(a,t,n):function(u,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function u0(a,t,n,r){return a instanceof C0?function(c,d,m,v){if(!rm(c.precondition,d))return m;const _=c.value.clone(),b=z_(c.fieldTransforms,v,d);return _.setAll(b),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(a,t,n,r):a instanceof Jc?function(c,d,m,v){if(!rm(c.precondition,d))return m;const _=z_(c.fieldTransforms,v,d),b=d.data;return b.setAll($5(c)),b.setAll(_),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(O=>O.field))}(a,t,n,r):function(c,d,m){return rm(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(a,t,n)}function G7(a,t){let n=null;for(const r of a.fieldTransforms){const u=t.data.field(r.field),c=X5(r.transform,u||null);c!=null&&(n===null&&(n=Ur.empty()),n.set(r.field,c))}return n||null}function L_(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!function(r,u){return r===void 0&&u===void 0||!(!r||!u)&&Wh(r,u,(c,d)=>z7(c,d))}(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class C0 extends qm{constructor(t,n,r,u=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Jc extends qm{constructor(t,n,r,u,c=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $5(a){const t=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=a.data.field(n);t.set(n,r)}}),t}function P_(a,t,n){const r=new Map;yn(a.length===n.length);for(let u=0;u<n.length;u++){const c=a[u],d=c.transform,m=t.data.field(c.field);r.set(c.field,P7(d,m,n[u]))}return r}function z_(a,t,n){const r=new Map;for(const u of a){const c=u.transform,d=n.data.field(u.field);r.set(u.field,L7(c,d,t))}return r}class gy extends qm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H7 extends qm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(t,n,r,u){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=u}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(t.key)&&k7(c,t,r[u])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=u0(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=u0(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=K5();return this.mutations.forEach(u=>{const c=t.get(u.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(u.key)?null:m;const v=J5(d,m);v!==null&&r.set(u.key,v),d.isValidDocument()||d.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Xe())}isEqual(t){return this.batchId===t.batchId&&Wh(this.mutations,t.mutations,(n,r)=>L_(n,r))&&Wh(this.baseMutations,t.baseMutations,(n,r)=>L_(n,r))}}class my{constructor(t,n,r,u){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=u}static from(t,n,r){yn(t.mutations.length===r.length);let u=function(){return O7}();const c=t.mutations;for(let d=0;d<c.length;d++)u=u.insert(c[d].key,r[d].version);return new my(t,n,r,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi,sn;function K7(a){switch(a){case Bt.OK:return ge();case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0;default:return ge()}}function t3(a){if(a===void 0)return Jo("GRPC error has no .code"),Bt.UNKNOWN;switch(a){case xi.OK:return Bt.OK;case xi.CANCELLED:return Bt.CANCELLED;case xi.UNKNOWN:return Bt.UNKNOWN;case xi.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case xi.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case xi.INTERNAL:return Bt.INTERNAL;case xi.UNAVAILABLE:return Bt.UNAVAILABLE;case xi.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case xi.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case xi.NOT_FOUND:return Bt.NOT_FOUND;case xi.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case xi.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case xi.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case xi.ABORTED:return Bt.ABORTED;case xi.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case xi.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case xi.DATA_LOSS:return Bt.DATA_LOSS;default:return ge()}}(sn=xi||(xi={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Yu([4294967295,4294967295],0);function B_(a){const t=b5().encode(a),n=new p5;return n.update(t),new Uint8Array(n.digest())}function k_(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),u=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Yu([n,r],0),new Yu([u,c],0)]}class py{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new a0(`Invalid padding: ${n}`);if(r<0)throw new a0(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new a0(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new a0(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Yu.fromNumber(this.Ee)}Ae(t,n,r){let u=t.add(n.multiply(Yu.fromNumber(r)));return u.compare(Y7)===1&&(u=new Yu([u.getBits(0),u.getBits(1)],0)),u.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=B_(t),[r,u]=k_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(r,u,c);if(!this.Re(d))return!1}return!0}static create(t,n,r){const u=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new py(c,u,n);return r.forEach(m=>d.insert(m)),d}insert(t){if(this.Ee===0)return;const n=B_(t),[r,u]=k_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(r,u,c);this.Ve(d)}}Ve(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class a0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n,r,u,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const u=new Map;return u.set(t,R0.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Km(_e.min(),u,new ai(Le),$o(),Xe())}}class R0{constructor(t,n,r,u,c){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new R0(r,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,n,r,u){this.me=t,this.removedTargetIds=n,this.key=r,this.fe=u}}class e3{constructor(t,n){this.targetId=t,this.ge=n}}class n3{constructor(t,n,r=Ra.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=u}}class G_{constructor(){this.pe=0,this.ye=H_(),this.we=Ra.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Xe(),n=Xe(),r=Xe();return this.ye.forEach((u,c)=>{switch(c){case 0:t=t.add(u);break;case 2:n=n.add(u);break;case 1:r=r.add(u);break;default:ge()}}),new R0(this.we,this.Se,t,n,r)}Me(){this.be=!1,this.ye=H_()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,yn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class X7{constructor(t){this.ke=t,this.qe=new Map,this.Qe=$o(),this.$e=Qg(),this.Ue=Qg(),this.Ke=new ai(Le)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const r=this.He(n);switch(t.state){case 0:this.Je(n)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(t.resumeToken));break;default:ge()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((r,u)=>{this.Je(u)&&n(u)})}Ze(t){const n=t.targetId,r=t.ge.count,u=this.Xe(n);if(u){const c=u.target;if(N1(c))if(r===0){const d=new re(c.path);this.ze(n,d,Ya.newNoDocument(d,_e.min()))}else yn(r===1);else{const d=this.et(n);if(d!==r){const m=this.tt(t),v=m?this.nt(m,t,d):1;if(v!==0){this.Ye(n);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,_)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:u=0},hashCount:c=0}=n;let d,m;try{d=Ju(r).toUint8Array()}catch(v){if(v instanceof w5)return Zh("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{m=new py(d,u,c)}catch(v){return Zh(v instanceof a0?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return m.Ee===0?null:m}nt(t,n,r){return n.ge.count===r-this.st(t,n.targetId)?0:2}st(t,n){const r=this.ke.getRemoteKeysForTarget(n);let u=0;return r.forEach(c=>{const d=this.ke.it(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.ze(n,c,null),u++)}),u}ot(t){const n=new Map;this.qe.forEach((c,d)=>{const m=this.Xe(d);if(m){if(c.current&&N1(m.target)){const v=new re(m.target.path);this._t(v).has(d)||this.ut(d,v)||this.ze(d,v,Ya.newNoDocument(v,t))}c.ve&&(n.set(d,c.Fe()),c.Me())}});let r=Xe();this.Ue.forEach((c,d)=>{let m=!0;d.forEachWhile(v=>{const _=this.Xe(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.Qe.forEach((c,d)=>d.setReadTime(t));const u=new Km(t,n,this.Ke,this.Qe,r);return this.Qe=$o(),this.$e=Qg(),this.Ue=Qg(),this.Ke=new ai(Le),u}Ge(t,n){if(!this.Je(t))return;const r=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}ze(t,n,r){if(!this.Je(t))return;const u=this.He(t);this.ut(t,n)?u.xe(n,1):u.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),this.Ue=this.Ue.insert(n,this.ct(n).add(t)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new G_,this.qe.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new Hi(Le),this.Ue=this.Ue.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Hi(Le),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Zt("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new G_),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function Qg(){return new ai(re.comparator)}function H_(){return new ai(re.comparator)}const Q7={asc:"ASCENDING",desc:"DESCENDING"},Z7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W7={and:"AND",or:"OR"};class J7{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function x1(a,t){return a.useProto3Json||Bm(t)?t:{value:t}}function Am(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function i3(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function $7(a,t){return Am(a,t.toTimestamp())}function oo(a){return yn(!!a),_e.fromTimestamp(function(n){const r=Wu(n);return new Gi(r.seconds,r.nanos)}(a))}function yy(a,t){return O1(a,t).canonicalString()}function O1(a,t){const n=function(u){return new jn(["projects",u.projectId,"databases",u.database])}(a).child("documents");return t===void 0?n:n.child(t)}function a3(a){const t=jn.fromString(a);return yn(u3(t)),t}function M1(a,t){return yy(a.databaseId,t.path)}function l1(a,t){const n=a3(t);if(n.get(1)!==a.databaseId.projectId)throw new ae(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new ae(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new re(r3(n))}function s3(a,t){return yy(a.databaseId,t)}function tA(a){const t=a3(a);return t.length===4?jn.emptyPath():r3(t)}function V1(a){return new jn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function r3(a){return yn(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function j_(a,t,n){return{name:M1(a,t),fields:n.value.mapValue.fields}}function eA(a,t){let n;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ge()}(t.targetChange.targetChangeType||"NO_CHANGE"),u=t.targetChange.targetIds||[],c=function(_,b){return _.useProto3Json?(yn(b===void 0||typeof b=="string"),Ra.fromBase64String(b||"")):(yn(b===void 0||b instanceof Buffer||b instanceof Uint8Array),Ra.fromUint8Array(b||new Uint8Array))}(a,t.targetChange.resumeToken),d=t.targetChange.cause,m=d&&function(_){const b=_.code===void 0?Bt.UNKNOWN:t3(_.code);return new ae(b,_.message||"")}(d);n=new n3(r,u,c,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const u=l1(a,r.document.name),c=oo(r.document.updateTime),d=r.document.createTime?oo(r.document.createTime):_e.min(),m=new Ur({mapValue:{fields:r.document.fields}}),v=Ya.newFoundDocument(u,c,d,m),_=r.targetIds||[],b=r.removedTargetIds||[];n=new lm(_,b,v.key,v)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const u=l1(a,r.document),c=r.readTime?oo(r.readTime):_e.min(),d=Ya.newNoDocument(u,c),m=r.removedTargetIds||[];n=new lm([],m,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const u=l1(a,r.document),c=r.removedTargetIds||[];n=new lm([],c,u,null)}else{if(!("filter"in t))return ge();{t.filter;const r=t.filter;r.targetId;const{count:u=0,unchangedNames:c}=r,d=new q7(u,c),m=r.targetId;n=new e3(m,d)}}return n}function nA(a,t){let n;if(t instanceof C0)n={update:j_(a,t.key,t.value)};else if(t instanceof gy)n={delete:M1(a,t.key)};else if(t instanceof Jc)n={update:j_(a,t.key,t.data),updateMask:hA(t.fieldMask)};else{if(!(t instanceof H7))return ge();n={verify:M1(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof Tm)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof y0)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof v0)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bm)return{fieldPath:d.field.canonicalString(),increment:m.Ie};throw ge()}(0,r))),t.precondition.isNone||(n.currentDocument=function(u,c){return c.updateTime!==void 0?{updateTime:$7(u,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ge()}(a,t.precondition)),n}function iA(a,t){return a&&a.length>0?(yn(t!==void 0),a.map(n=>function(u,c){let d=u.updateTime?oo(u.updateTime):oo(c);return d.isEqual(_e.min())&&(d=oo(c)),new B7(d,u.transformResults||[])}(n,t))):[]}function aA(a,t){return{documents:[s3(a,t.path)]}}function sA(a,t){const n={structuredQuery:{}},r=t.path;let u;t.collectionGroup!==null?(u=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=s3(a,u);const c=function(_){if(_.length!==0)return o3(co.create(_,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(_){if(_.length!==0)return _.map(b=>function(U){return{field:jh(U.field),direction:oA(U.dir)}}(b))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const m=x1(a,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ht:n,parent:u}}function rA(a){let t=tA(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let u=null;if(r>0){yn(r===1);const b=n.from[0];b.allDescendants?u=b.collectionId:t=t.child(b.collectionId)}let c=[];n.where&&(c=function(O){const U=l3(O);return U instanceof co&&P5(U)?U.getFilters():[U]}(n.where));let d=[];n.orderBy&&(d=function(O){return O.map(U=>function(R){return new Em(Fh(R.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(U))}(n.orderBy));let m=null;n.limit&&(m=function(O){let U;return U=typeof O=="object"?O.value:O,Bm(U)?null:U}(n.limit));let v=null;n.startAt&&(v=function(O){const U=!!O.before,C=O.values||[];return new Sm(C,U)}(n.startAt));let _=null;return n.endAt&&(_=function(O){const U=!O.before,C=O.values||[];return new Sm(C,U)}(n.endAt)),C7(t,u,d,c,m,"F",v,_)}function lA(a,t){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function l3(a){return a.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fh(n.unaryFilter.field);return ki.create(r,"==",{doubleValue:NaN});case"IS_NULL":const u=Fh(n.unaryFilter.field);return ki.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fh(n.unaryFilter.field);return ki.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Fh(n.unaryFilter.field);return ki.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(a):a.fieldFilter!==void 0?function(n){return ki.create(Fh(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(n){return co.create(n.compositeFilter.filters.map(r=>l3(r)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(a):ge()}function oA(a){return Q7[a]}function uA(a){return Z7[a]}function cA(a){return W7[a]}function jh(a){return{fieldPath:a.canonicalString()}}function Fh(a){return Ca.fromServerFormat(a.fieldPath)}function o3(a){return a instanceof ki?function(n){if(n.op==="=="){if(x_(n.value))return{unaryFilter:{field:jh(n.field),op:"IS_NAN"}};if(D_(n.value))return{unaryFilter:{field:jh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x_(n.value))return{unaryFilter:{field:jh(n.field),op:"IS_NOT_NAN"}};if(D_(n.value))return{unaryFilter:{field:jh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jh(n.field),op:uA(n.op),value:n.value}}}(a):a instanceof co?function(n){const r=n.getFilters().map(u=>o3(u));return r.length===1?r[0]:{compositeFilter:{op:cA(n.op),filters:r}}}(a):ge()}function hA(a){const t=[];return a.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function u3(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n,r,u,c=_e.min(),d=_e.min(),m=Ra.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(t){return new ju(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t){this.Tt=t}}function dA(a){const t=rA({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?D1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.Tn=new mA}addToCollectionParentIndex(t,n){return this.Tn.add(n),Mt.resolve()}getCollectionParents(t,n){return Mt.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return Mt.resolve()}deleteFieldIndex(t,n){return Mt.resolve()}deleteAllFieldIndexes(t){return Mt.resolve()}createTargetIndexes(t,n){return Mt.resolve()}getDocumentsMatchingTarget(t,n){return Mt.resolve(null)}getIndexType(t,n){return Mt.resolve(0)}getFieldIndexes(t,n){return Mt.resolve([])}getNextCollectionGroupToUpdate(t){return Mt.resolve(null)}getMinOffset(t,n){return Mt.resolve(Zu.min())}getMinOffsetFromCollectionGroup(t,n){return Mt.resolve(Zu.min())}updateCollectionGroup(t,n,r){return Mt.resolve()}updateIndexEntries(t,n){return Mt.resolve()}}class mA{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n]||new Hi(jn.comparator),c=!u.has(r);return this.index[n]=u.add(r),c}has(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n];return u&&u.has(r)}getEntries(t){return(this.index[t]||new Hi(jn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c3=41943040;class Is{static withCacheSize(t){return new Is(t,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(c3,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new tf(0)}static Kn(){return new tf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="LruGarbageCollector",pA=1048576;function K_([a,t],[n,r]){const u=Le(a,n);return u===0?Le(t,r):u}class yA{constructor(t){this.Hn=t,this.buffer=new Hi(K_),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vA{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Zt(q_,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uf(n)?Zt(q_,"Ignoring IndexedDB error during garbage collection: ",n):await of(n)}await this.er(3e5)})}}class _A{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return Mt.resolve(zm.ae);const r=new yA(n);return this.tr.forEachTarget(t,u=>r.Zn(u.sequenceNumber)).next(()=>this.tr.rr(t,u=>r.Zn(u))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.tr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),Mt.resolve(F_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F_):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let r,u,c,d,m,v,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),u=this.params.maximumSequenceNumbersToCollect):u=O,d=Date.now(),this.nthSequenceNumber(t,u))).next(O=>(r=O,m=Date.now(),this.removeTargets(t,r,n))).next(O=>(c=O,v=Date.now(),this.removeOrphanedDocuments(t,r))).next(O=>(_=Date.now(),Gh()<=Ye.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${u} in `+(m-d)+`ms
	Removed ${c} targets in `+(v-m)+`ms
	Removed ${O} documents in `+(_-v)+`ms
Total Duration: ${_-b}ms`),Mt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:O})))}}function SA(a,t){return new _A(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.changes=new Wc(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ya.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Mt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n,r,u){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=u}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(u=>(r=u,this.remoteDocumentCache.getEntry(t,n))).next(u=>(r!==null&&u0(r.mutation,u,vl.empty(),Gi.now()),u))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Xe()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Xe()){const u=jc();return this.populateOverlays(t,u,n).next(()=>this.computeViews(t,n,u,r).next(c=>{let d=i0();return c.forEach((m,v)=>{d=d.insert(m,v.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const r=jc();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Xe()))}populateOverlays(t,n,r){const u=[];return r.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(t,u).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(t,n,r,u){let c=$o();const d=o0(),m=function(){return o0()}();return n.forEach((v,_)=>{const b=r.get(_.key);u.has(_.key)&&(b===void 0||b.mutation instanceof Jc)?c=c.insert(_.key,_):b!==void 0?(d.set(_.key,b.mutation.getFieldMask()),u0(b.mutation,_,b.mutation.getFieldMask(),Gi.now())):d.set(_.key,vl.empty())}),this.recalculateAndSaveOverlays(t,c).next(v=>(v.forEach((_,b)=>d.set(_,b)),n.forEach((_,b)=>{var O;return m.set(_,new TA(b,(O=d.get(_))!==null&&O!==void 0?O:null))}),m))}recalculateAndSaveOverlays(t,n){const r=o0();let u=new ai((d,m)=>d-m),c=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const m of d)m.keys().forEach(v=>{const _=n.get(v);if(_===null)return;let b=r.get(v)||vl.empty();b=m.applyToLocalView(_,b),r.set(v,b);const O=(u.get(m.batchId)||Xe()).add(v);u=u.insert(m.batchId,O)})}).next(()=>{const d=[],m=u.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),_=v.key,b=v.value,O=K5();b.forEach(U=>{if(!c.has(U)){const C=J5(n.get(U),r.get(U));C!==null&&O.set(U,C),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,O))}return Mt.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,u){return function(d){return re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):R7(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,u):this.getDocumentsMatchingCollectionQuery(t,n,r,u)}getNextDocuments(t,n,r,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,u).next(c=>{const d=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,u-c.size):Mt.resolve(jc());let m=d0,v=c;return d.next(_=>Mt.forEach(_,(b,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),c.get(b)?Mt.resolve():this.remoteDocumentCache.getEntry(t,b).next(U=>{v=v.insert(b,U)}))).next(()=>this.populateOverlays(t,_,c)).next(()=>this.computeViews(t,v,_,Xe())).next(b=>({batchId:m,changes:q5(b)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new re(n)).next(r=>{let u=i0();return r.isFoundDocument()&&(u=u.insert(r.key,r)),u})}getDocumentsMatchingCollectionGroupQuery(t,n,r,u){const c=n.collectionGroup;let d=i0();return this.indexManager.getCollectionParents(t,c).next(m=>Mt.forEach(m,v=>{const _=function(O,U){return new Gm(U,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)}(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,r,u).next(b=>{b.forEach((O,U)=>{d=d.insert(O,U)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,r,u){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,c,u))).next(d=>{c.forEach((v,_)=>{const b=_.getKey();d.get(b)===null&&(d=d.insert(b,Ya.newInvalidDocument(b)))});let m=i0();return d.forEach((v,_)=>{const b=c.get(v);b!==void 0&&u0(b.mutation,_,vl.empty(),Gi.now()),jm(n,_)&&(m=m.insert(v,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return Mt.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:oo(u.createTime)}}(n)),Mt.resolve()}getNamedQuery(t,n){return Mt.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(u){return{name:u.name,query:dA(u.bundledQuery),readTime:oo(u.readTime)}}(n)),Mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.overlays=new ai(re.comparator),this.Rr=new Map}getOverlay(t,n){return Mt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=jc();return Mt.forEach(n,u=>this.getOverlay(t,u).next(c=>{c!==null&&r.set(u,c)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((u,c)=>{this.Et(t,n,c)}),Mt.resolve()}removeOverlaysForBatchId(t,n,r){const u=this.Rr.get(r);return u!==void 0&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(r)),Mt.resolve()}getOverlaysForCollection(t,n,r){const u=jc(),c=n.length+1,d=new re(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const v=m.getNext().value,_=v.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&v.largestBatchId>r&&u.set(v.getKey(),v)}return Mt.resolve(u)}getOverlaysForCollectionGroup(t,n,r,u){let c=new ai((_,b)=>_-b);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let b=c.get(_.largestBatchId);b===null&&(b=jc(),c=c.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const m=jc(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((_,b)=>m.set(_,b)),!(m.size()>=u)););return Mt.resolve(m)}Et(t,n,r){const u=this.overlays.get(r.key);if(u!==null){const d=this.Rr.get(u.largestBatchId).delete(r.key);this.Rr.set(u.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new F7(n,r));let c=this.Rr.get(n);c===void 0&&(c=Xe(),this.Rr.set(n,c)),this.Rr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.sessionToken=Ra.EMPTY_BYTE_STRING}getSessionToken(t){return Mt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Mt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.Vr=new Hi(ca.mr),this.gr=new Hi(ca.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const r=new ca(t,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.wr(new ca(t,n))}Sr(t,n){t.forEach(r=>this.removeReference(r,n))}br(t){const n=new re(new jn([])),r=new ca(n,t),u=new ca(n,t+1),c=[];return this.gr.forEachInRange([r,u],d=>{this.wr(d),c.push(d.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new re(new jn([])),r=new ca(n,t),u=new ca(n,t+1);let c=Xe();return this.gr.forEachInRange([r,u],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new ca(t,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ca{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return re.comparator(t.key,n.key)||Le(t.Cr,n.Cr)}static pr(t,n){return Le(t.Cr,n.Cr)||re.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Hi(ca.mr)}checkEmpty(t){return Mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,u){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new j7(c,n,r,u);this.mutationQueue.push(d);for(const m of u)this.Mr=this.Mr.add(new ca(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Mt.resolve(d)}lookupMutationBatch(t,n){return Mt.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,u=this.Nr(r),c=u<0?0:u;return Mt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Mt.resolve(this.mutationQueue.length===0?oy:this.Fr-1)}getAllMutationBatches(t){return Mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ca(n,0),u=new ca(n,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([r,u],d=>{const m=this.Or(d.Cr);c.push(m)}),Mt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Hi(Le);return n.forEach(u=>{const c=new ca(u,0),d=new ca(u,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,d],m=>{r=r.add(m.Cr)})}),Mt.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,u=r.length+1;let c=r;re.isDocumentKey(c)||(c=c.child(""));const d=new ca(new re(c),0);let m=new Hi(Le);return this.Mr.forEachWhile(v=>{const _=v.key.path;return!!r.isPrefixOf(_)&&(_.length===u&&(m=m.add(v.Cr)),!0)},d),Mt.resolve(this.Br(m))}Br(t){const n=[];return t.forEach(r=>{const u=this.Or(r);u!==null&&n.push(u)}),n}removeMutationBatch(t,n){yn(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return Mt.forEach(n.mutations,u=>{const c=new ca(u.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,n){const r=new ca(n,0),u=this.Mr.firstAfterOrEqual(r);return Mt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,Mt.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t){this.kr=t,this.docs=function(){return new ai(re.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,u=this.docs.get(r),c=u?u.size:0,d=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Mt.resolve(r?r.document.mutableCopy():Ya.newInvalidDocument(n))}getEntries(t,n){let r=$o();return n.forEach(u=>{const c=this.docs.get(u);r=r.insert(u,c?c.document.mutableCopy():Ya.newInvalidDocument(u))}),Mt.resolve(r)}getDocumentsMatchingQuery(t,n,r,u){let c=$o();const d=n.path,m=new re(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:_,value:{document:b}}=v.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||i7(n7(b),r)<=0||(u.has(b.key)||jm(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return Mt.resolve(c)}getAllFromCollectionGroup(t,n,r,u){ge()}qr(t,n){return Mt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new DA(this)}getSize(t){return Mt.resolve(this.size)}}class DA extends EA{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((r,u)=>{u.isValidDocument()?n.push(this.Ir.addEntry(t,u)):this.Ir.removeEntry(r)}),Mt.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t){this.persistence=t,this.Qr=new Wc(n=>hy(n),fy),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.$r=0,this.Ur=new vy,this.targetCount=0,this.Kr=tf.Un()}forEachTarget(t,n){return this.Qr.forEach((r,u)=>n(u)),Mt.resolve()}getLastRemoteSnapshotVersion(t){return Mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Mt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Mt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),Mt.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Kr=new tf(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,Mt.resolve()}updateTargetData(t,n){return this.zn(n),Mt.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,Mt.resolve()}removeTargets(t,n,r){let u=0;const c=[];return this.Qr.forEach((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.Qr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),u++)}),Mt.waitFor(c).next(()=>u)}getTargetCount(t){return Mt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Qr.get(n)||null;return Mt.resolve(r)}addMatchingKeys(t,n,r){return this.Ur.yr(n,r),Mt.resolve()}removeMatchingKeys(t,n,r){this.Ur.Sr(n,r);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(d=>{c.push(u.markPotentiallyOrphaned(t,d))}),Mt.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.Ur.br(n),Mt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Ur.vr(n);return Mt.resolve(r)}containsKey(t,n){return Mt.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new zm(0),this.zr=!1,this.zr=!0,this.jr=new RA,this.referenceDelegate=t(this),this.Hr=new xA(this),this.indexManager=new gA,this.remoteDocumentCache=function(u){return new NA(u)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new fA(n),this.Yr=new AA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new CA,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Wr[t.toKey()];return r||(r=new wA(n,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,r){Zt("MemoryPersistence","Starting transaction:",t);const u=new OA(this.Gr.next());return this.referenceDelegate.Zr(),r(u).next(c=>this.referenceDelegate.Xr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}ei(t,n){return Mt.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,n)))}}class OA extends s7{constructor(t){super(),this.currentSequenceNumber=t}}class _y{constructor(t){this.persistence=t,this.ti=new vy,this.ni=null}static ri(t){return new _y(t)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(t,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),Mt.resolve()}removeReference(t,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),Mt.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),Mt.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(u=>this.ii.add(u.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(u=>{u.forEach(c=>this.ii.add(c.toString()))}).next(()=>r.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mt.forEach(this.ii,r=>{const u=re.fromPath(r);return this.si(t,u).next(c=>{c||n.removeEntry(u,_e.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return Mt.or([()=>Mt.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class Cm{constructor(t,n){this.persistence=t,this.oi=new Wc(r=>o7(r.path),(r,u)=>r.isEqual(u)),this.garbageCollector=SA(this,n)}static ri(t,n){return new Cm(t,n)}Zr(){}Xr(t){return Mt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(u=>r+u))}sr(t){let n=0;return this.rr(t,r=>{n++}).next(()=>n)}rr(t,n){return Mt.forEach(this.oi,(r,u)=>this.ar(t,r,u).next(c=>c?Mt.resolve():n(u)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const u=this.persistence.getRemoteDocumentCache(),c=u.newChangeBuffer();return u.qr(t,d=>this.ar(t,d,n).next(m=>{m||(r++,c.removeEntry(d,_e.min()))})).next(()=>c.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),Mt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),Mt.resolve()}removeReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),Mt.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),Mt.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=am(t.data.value)),n}ar(t,n,r){return Mt.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const u=this.oi.get(n);return Mt.resolve(u!==void 0&&u>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,n,r,u){this.targetId=t,this.fromCache=n,this.Hi=r,this.Ji=u}static Yi(t,n){let r=Xe(),u=Xe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new Sy(t,n.fromCache,r,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hT()?8:r7(Xa())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,r,u){const c={result:null};return this.rs(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ss(t,n,u,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new MA;return this._s(t,n,d).next(m=>{if(c.result=m,this.Xi)return this.us(t,n,d,m.size)})}).next(()=>c.result)}us(t,n,r,u){return r.documentReadCount<this.es?(Gh()<=Ye.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",Hh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Mt.resolve()):(Gh()<=Ye.DEBUG&&Zt("QueryEngine","Query:",Hh(n),"scans",r.documentReadCount,"local documents and returns",u,"documents as results."),r.documentReadCount>this.ts*u?(Gh()<=Ye.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",Hh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ro(n))):Mt.resolve())}rs(t,n){if(U_(n))return Mt.resolve(null);let r=ro(n);return this.indexManager.getIndexType(t,r).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=D1(n,null,"F"),r=ro(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(c=>{const d=Xe(...c);return this.ns.getDocuments(t,d).next(m=>this.indexManager.getMinOffset(t,r).next(v=>{const _=this.cs(n,m);return this.ls(n,_,d,v.readTime)?this.rs(t,D1(n,null,"F")):this.hs(t,_,n,v)}))})))}ss(t,n,r,u){return U_(n)||u.isEqual(_e.min())?Mt.resolve(null):this.ns.getDocuments(t,r).next(c=>{const d=this.cs(n,c);return this.ls(n,d,r,u)?Mt.resolve(null):(Gh()<=Ye.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Hh(n)),this.hs(t,d,n,e7(u,d0)).next(m=>m))})}cs(t,n){let r=new Hi(j5(t));return n.forEach((u,c)=>{jm(t,c)&&(r=r.add(c))}),r}ls(t,n,r,u){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}_s(t,n,r){return Gh()<=Ye.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",Hh(n)),this.ns.getDocumentsMatchingQuery(t,n,Zu.min(),r)}hs(t,n,r,u){return this.ns.getDocumentsMatchingQuery(t,r,u).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="LocalStore",UA=3e8;class IA{constructor(t,n,r,u){this.persistence=t,this.Ps=n,this.serializer=u,this.Ts=new ai(Le),this.Is=new Wc(c=>hy(c),fy),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function LA(a,t,n,r){return new IA(a,t,n,r)}async function f3(a,t){const n=Te(a);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let u;return n.mutationQueue.getAllMutationBatches(r).next(c=>(u=c,n.As(t),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let v=Xe();for(const _ of u){d.push(_.batchId);for(const b of _.mutations)v=v.add(b.key)}for(const _ of c){m.push(_.batchId);for(const b of _.mutations)v=v.add(b.key)}return n.localDocuments.getDocuments(r,v).next(_=>({Rs:_,removedBatchIds:d,addedBatchIds:m}))})})}function PA(a,t){const n=Te(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const u=t.batch.keys(),c=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,v,_,b){const O=_.batch,U=O.keys();let C=Mt.resolve();return U.forEach(R=>{C=C.next(()=>b.getEntry(v,R)).next(I=>{const L=_.docVersions.get(R);yn(L!==null),I.version.compareTo(L)<0&&(O.applyToRemoteDocument(I,_),I.isValidDocument()&&(I.setReadTime(_.commitVersion),b.addEntry(I)))})}),C.next(()=>m.mutationQueue.removeMutationBatch(v,O))}(n,r,t,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,u,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let v=Xe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(v=v.add(m.batch.mutations[_].key));return v}(t))).next(()=>n.localDocuments.getDocuments(r,u))})}function d3(a){const t=Te(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function zA(a,t){const n=Te(a),r=t.snapshotVersion;let u=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});u=n.Ts;const m=[];t.targetChanges.forEach((b,O)=>{const U=u.get(O);if(!U)return;m.push(n.Hr.removeMatchingKeys(c,b.removedDocuments,O).next(()=>n.Hr.addMatchingKeys(c,b.addedDocuments,O)));let C=U.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(O)!==null?C=C.withResumeToken(Ra.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,r)),u=u.insert(O,C),function(I,L,F){return I.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=UA?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(U,C,b)&&m.push(n.Hr.updateTargetData(c,C))});let v=$o(),_=Xe();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(BA(c,d,t.documentUpdates).next(b=>{v=b.Vs,_=b.fs})),!r.isEqual(_e.min())){const b=n.Hr.getLastRemoteSnapshotVersion(c).next(O=>n.Hr.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(b)}return Mt.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,v,_)).next(()=>v)}).then(c=>(n.Ts=u,c))}function BA(a,t,n){let r=Xe(),u=Xe();return n.forEach(c=>r=r.add(c)),t.getEntries(a,r).next(c=>{let d=$o();return n.forEach((m,v)=>{const _=c.get(m);v.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(m)),v.isNoDocument()&&v.version.isEqual(_e.min())?(t.removeEntry(m,v.readTime),d=d.insert(m,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(v),d=d.insert(m,v)):Zt(Ey,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",v.version)}),{Vs:d,fs:u}})}function kA(a,t){const n=Te(a);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=oy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function GA(a,t){const n=Te(a);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let u;return n.Hr.getTargetData(r,t).next(c=>c?(u=c,Mt.resolve(u)):n.Hr.allocateTargetId(r).next(d=>(u=new ju(t,d,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,u).next(()=>u))))}).then(r=>{const u=n.Ts.get(r.targetId);return(u===null||r.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(t,r.targetId)),r})}async function U1(a,t,n){const r=Te(a),u=r.Ts.get(t),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,u))}catch(d){if(!uf(d))throw d;Zt(Ey,`Failed to update sequence numbers for target ${t}: ${d}`)}r.Ts=r.Ts.remove(t),r.Is.delete(u.target)}function Y_(a,t,n){const r=Te(a);let u=_e.min(),c=Xe();return r.persistence.runTransaction("Execute query","readwrite",d=>function(v,_,b){const O=Te(v),U=O.Is.get(b);return U!==void 0?Mt.resolve(O.Ts.get(U)):O.Hr.getTargetData(_,b)}(r,d,ro(t)).next(m=>{if(m)return u=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(d,m.targetId).next(v=>{c=v})}).next(()=>r.Ps.getDocumentsMatchingQuery(d,t,n?u:_e.min(),n?c:Xe())).next(m=>(HA(r,N7(t),m),{documents:m,gs:c})))}function HA(a,t,n){let r=a.Es.get(t)||_e.min();n.forEach((u,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),a.Es.set(t,r)}class X_{constructor(){this.activeTargetIds=U7()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jA{constructor(){this.ho=new X_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,r){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new X_,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class Z_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Zt(Q_,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Zt(Q_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg=null;function I1(){return Zg===null?Zg=function(){return 268435456+Math.round(2147483648*Math.random())}():Zg++,"0x"+Zg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="RestConnection",qA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KA{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${r}/databases/${u}`,this.wo=this.databaseId.database===vm?`project_id=${r}`:`project_id=${r}&database_id=${u}`}So(t,n,r,u,c){const d=I1(),m=this.bo(t,n.toUriEncodedString());Zt(o1,`Sending RPC '${t}' ${d}:`,m,r);const v={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(v,u,c),this.vo(t,m,v,r).then(_=>(Zt(o1,`Received RPC '${t}' ${d}: `,_),_),_=>{throw Zh(o1,`RPC '${t}' ${d} failed with error: `,_,"url: ",m,"request:",r),_})}Co(t,n,r,u,c,d){return this.So(t,n,r,u,c)}Do(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lf}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,c)=>t[c]=u),r&&r.headers.forEach((u,c)=>t[c]=u)}bo(t,n){const r=qA[t];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="WebChannelConnection";class XA extends KA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,r,u){const c=I1();return new Promise((d,m)=>{const v=new y5;v.setWithCredentials(!0),v.listenOnce(v5.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case im.NO_ERROR:const b=v.getResponseJson();Zt(Fa,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),d(b);break;case im.TIMEOUT:Zt(Fa,`RPC '${t}' ${c} timed out`),m(new ae(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const O=v.getStatus();if(Zt(Fa,`RPC '${t}' ${c} failed with status:`,O,"response text:",v.getResponseText()),O>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const C=U==null?void 0:U.error;if(C&&C.status&&C.message){const R=function(L){const F=L.toLowerCase().replace(/_/g,"-");return Object.values(Bt).indexOf(F)>=0?F:Bt.UNKNOWN}(C.status);m(new ae(R,C.message))}else m(new ae(Bt.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ae(Bt.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{Zt(Fa,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(u);Zt(Fa,`RPC '${t}' ${c} sending request:`,u),v.send(n,"POST",_,r,15)})}Wo(t,n,r){const u=I1(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=E5(),m=S5(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Do(v.initMessageHeaders,n,r),v.encodeInitMessageHeaders=!0;const b=c.join("");Zt(Fa,`Creating RPC '${t}' stream ${u}: ${b}`,v);const O=d.createWebChannel(b,v);let U=!1,C=!1;const R=new YA({Fo:L=>{C?Zt(Fa,`Not sending because RPC '${t}' stream ${u} is closed:`,L):(U||(Zt(Fa,`Opening RPC '${t}' stream ${u} transport.`),O.open(),U=!0),Zt(Fa,`RPC '${t}' stream ${u} sending:`,L),O.send(L))},Mo:()=>O.close()}),I=(L,F,D)=>{L.listen(F,x=>{try{D(x)}catch(z){setTimeout(()=>{throw z},0)}})};return I(O,n0.EventType.OPEN,()=>{C||(Zt(Fa,`RPC '${t}' stream ${u} transport opened.`),R.Qo())}),I(O,n0.EventType.CLOSE,()=>{C||(C=!0,Zt(Fa,`RPC '${t}' stream ${u} transport closed`),R.Uo())}),I(O,n0.EventType.ERROR,L=>{C||(C=!0,Zh(Fa,`RPC '${t}' stream ${u} transport errored:`,L),R.Uo(new ae(Bt.UNAVAILABLE,"The operation could not be completed")))}),I(O,n0.EventType.MESSAGE,L=>{var F;if(!C){const D=L.data[0];yn(!!D);const x=D,z=(x==null?void 0:x.error)||((F=x[0])===null||F===void 0?void 0:F.error);if(z){Zt(Fa,`RPC '${t}' stream ${u} received error:`,z);const H=z.status;let Y=function(w){const M=xi[w];if(M!==void 0)return t3(M)}(H),j=z.message;Y===void 0&&(Y=Bt.INTERNAL,j="Unknown error status: "+H+" with message "+z.message),C=!0,R.Uo(new ae(Y,j)),O.close()}else Zt(Fa,`RPC '${t}' stream ${u} received:`,D),R.Ko(D)}}),I(m,_5.STAT_EVENT,L=>{L.stat===b1.PROXY?Zt(Fa,`RPC '${t}' stream ${u} detected buffering proxy`):L.stat===b1.NOPROXY&&Zt(Fa,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function u1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(a){return new J7(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(t,n,r=1e3,u=1.5,c=6e4){this.Ti=t,this.timerId=n,this.Go=r,this.zo=u,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),u=Math.max(0,n-r);u>0&&Zt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,u,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="PersistentStream";class m3{constructor(t,n,r,u,c,d,m,v){this.Ti=t,this.n_=r,this.r_=u,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new g3(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===Bt.RESOURCE_EXHAUSTED?(Jo(n.toString()),Jo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,u])=>{this.i_===n&&this.V_(r,u)},r=>{t(()=>{const u=new ae(Bt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(u)})})}V_(t,n){const r=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(u=>{r(()=>this.m_(u))}),this.stream.onMessage(u=>{r(()=>++this.__==1?this.g_(u):this.onNext(u))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Zt(W_,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Zt(W_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QA extends m3{constructor(t,n,r,u,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=eA(this.serializer,t),r=function(c){if(!("targetChange"in c))return _e.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?_e.min():d.readTime?oo(d.readTime):_e.min()}(t);return this.listener.p_(n,r)}y_(t){const n={};n.database=V1(this.serializer),n.addTarget=function(c,d){let m;const v=d.target;if(m=N1(v)?{documents:aA(c,v)}:{query:sA(c,v).ht},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=i3(c,d.resumeToken);const _=x1(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(_e.min())>0){m.readTime=Am(c,d.snapshotVersion.toTimestamp());const _=x1(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const r=lA(this.serializer,t);r&&(n.labels=r),this.I_(n)}w_(t){const n={};n.database=V1(this.serializer),n.removeTarget=t,this.I_(n)}}class ZA extends m3{constructor(t,n,r,u,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return yn(!!t.streamToken),this.lastStreamToken=t.streamToken,yn(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){yn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=iA(t.writeResults,t.commitTime),r=oo(t.commitTime);return this.listener.v_(r,n)}C_(){const t={};t.database=V1(this.serializer),this.I_(t)}b_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>nA(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class JA extends WA{constructor(t,n,r,u){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=u,this.F_=!1}M_(){if(this.F_)throw new ae(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.So(t,O1(n,r),u,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(Bt.UNKNOWN,c.toString())})}Co(t,n,r,u,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Co(t,O1(n,r),u,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ae(Bt.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class $A{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Jo(n),this.N_=!1):Zt("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="RemoteStore";class tC{constructor(t,n,r,u,c){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(d=>{r.enqueueAndForget(async()=>{$c(this)&&(Zt(Qc,"Restarting streams for network reachability change."),await async function(v){const _=Te(v);_.W_.add(4),await w0(_),_.j_.set("Unknown"),_.W_.delete(4),await Xm(_)}(this))})}),this.j_=new $A(r,u)}}async function Xm(a){if($c(a))for(const t of a.G_)await t(!0)}async function w0(a){for(const t of a.G_)await t(!1)}function p3(a,t){const n=Te(a);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Cy(n)?Ay(n):cf(n).c_()&&by(n,t))}function Ty(a,t){const n=Te(a),r=cf(n);n.K_.delete(t),r.c_()&&y3(n,t),n.K_.size===0&&(r.c_()?r.P_():$c(n)&&n.j_.set("Unknown"))}function by(a,t){if(a.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_e.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cf(a).y_(t)}function y3(a,t){a.H_.Ne(t),cf(a).w_(t)}function Ay(a){a.H_=new X7({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>a.K_.get(t)||null,it:()=>a.datastore.serializer.databaseId}),cf(a).start(),a.j_.B_()}function Cy(a){return $c(a)&&!cf(a).u_()&&a.K_.size>0}function $c(a){return Te(a).W_.size===0}function v3(a){a.H_=void 0}async function eC(a){a.j_.set("Online")}async function nC(a){a.K_.forEach((t,n)=>{by(a,t)})}async function iC(a,t){v3(a),Cy(a)?(a.j_.q_(t),Ay(a)):a.j_.set("Unknown")}async function aC(a,t,n){if(a.j_.set("Online"),t instanceof n3&&t.state===2&&t.cause)try{await async function(u,c){const d=c.cause;for(const m of c.targetIds)u.K_.has(m)&&(await u.remoteSyncer.rejectListen(m,d),u.K_.delete(m),u.H_.removeTarget(m))}(a,t)}catch(r){Zt(Qc,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Rm(a,r)}else if(t instanceof lm?a.H_.We(t):t instanceof e3?a.H_.Ze(t):a.H_.je(t),!n.isEqual(_e.min()))try{const r=await d3(a.localStore);n.compareTo(r)>=0&&await function(c,d){const m=c.H_.ot(d);return m.targetChanges.forEach((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const b=c.K_.get(_);b&&c.K_.set(_,b.withResumeToken(v.resumeToken,d))}}),m.targetMismatches.forEach((v,_)=>{const b=c.K_.get(v);if(!b)return;c.K_.set(v,b.withResumeToken(Ra.EMPTY_BYTE_STRING,b.snapshotVersion)),y3(c,v);const O=new ju(b.target,v,_,b.sequenceNumber);by(c,O)}),c.remoteSyncer.applyRemoteEvent(m)}(a,n)}catch(r){Zt(Qc,"Failed to raise snapshot:",r),await Rm(a,r)}}async function Rm(a,t,n){if(!uf(t))throw t;a.W_.add(1),await w0(a),a.j_.set("Offline"),n||(n=()=>d3(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{Zt(Qc,"Retrying IndexedDB access"),await n(),a.W_.delete(1),await Xm(a)})}function _3(a,t){return t().catch(n=>Rm(a,n,t))}async function Qm(a){const t=Te(a),n=tc(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:oy;for(;sC(t);)try{const u=await kA(t.localStore,r);if(u===null){t.U_.length===0&&n.P_();break}r=u.batchId,rC(t,u)}catch(u){await Rm(t,u)}S3(t)&&E3(t)}function sC(a){return $c(a)&&a.U_.length<10}function rC(a,t){a.U_.push(t);const n=tc(a);n.c_()&&n.S_&&n.b_(t.mutations)}function S3(a){return $c(a)&&!tc(a).u_()&&a.U_.length>0}function E3(a){tc(a).start()}async function lC(a){tc(a).C_()}async function oC(a){const t=tc(a);for(const n of a.U_)t.b_(n.mutations)}async function uC(a,t,n){const r=a.U_.shift(),u=my.from(r,t,n);await _3(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),await Qm(a)}async function cC(a,t){t&&tc(a).S_&&await async function(r,u){if(function(d){return K7(d)&&d!==Bt.ABORTED}(u.code)){const c=r.U_.shift();tc(r).h_(),await _3(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,u)),await Qm(r)}}(a,t),S3(a)&&E3(a)}async function J_(a,t){const n=Te(a);n.asyncQueue.verifyOperationInProgress(),Zt(Qc,"RemoteStore received new credentials");const r=$c(n);n.W_.add(3),await w0(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Xm(n)}async function hC(a,t){const n=Te(a);t?(n.W_.delete(2),await Xm(n)):t||(n.W_.add(2),await w0(n),n.j_.set("Unknown"))}function cf(a){return a.J_||(a.J_=function(n,r,u){const c=Te(n);return c.M_(),new QA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{xo:eC.bind(null,a),No:nC.bind(null,a),Lo:iC.bind(null,a),p_:aC.bind(null,a)}),a.G_.push(async t=>{t?(a.J_.h_(),Cy(a)?Ay(a):a.j_.set("Unknown")):(await a.J_.stop(),v3(a))})),a.J_}function tc(a){return a.Y_||(a.Y_=function(n,r,u){const c=Te(n);return c.M_(),new ZA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{xo:()=>Promise.resolve(),No:lC.bind(null,a),Lo:cC.bind(null,a),D_:oC.bind(null,a),v_:uC.bind(null,a)}),a.G_.push(async t=>{t?(a.Y_.h_(),await Qm(a)):(await a.Y_.stop(),a.U_.length>0&&(Zt(Qc,`Stopping write stream with ${a.U_.length} pending writes`),a.U_=[]))})),a.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,n,r,u,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=u,this.removalCallback=c,this.deferred=new Xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,u,c){const d=Date.now()+r,m=new Ry(t,n,d,u,c);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Bt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(a,t){if(Jo("AsyncQueue",`${t}: ${a}`),uf(a))return new ae(Bt.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{static emptySet(t){return new Xh(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=i0(),this.sortedSet=new ai(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Xh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Xh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.Z_=new ai(re.comparator)}track(t){const n=t.doc.key,r=this.Z_.get(n);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(n):t.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):ge():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class ef{constructor(t,n,r,u,c,d,m,v,_){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=u,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(t,n,r,u,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new ef(t,n,Xh.emptySet(n),d,r,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==r[u].type||!n[u].doc.isEqual(r[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class dC{constructor(){this.queries=t4(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const u=Te(n),c=u.queries;u.queries=t4(),c.forEach((d,m)=>{for(const v of m.ta)v.onError(r)})})(this,new ae(Bt.ABORTED,"Firestore shutting down"))}}function t4(){return new Wc(a=>H5(a),Hm)}async function gC(a,t){const n=Te(a);let r=3;const u=t.query;let c=n.queries.get(u);c?!c.na()&&t.ra()&&(r=2):(c=new fC,r=t.ra()?0:1);try{switch(r){case 0:c.ea=await n.onListen(u,!0);break;case 1:c.ea=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(d){const m=wy(d,`Initialization of query '${Hh(t.query)}' failed`);return void t.onError(m)}n.queries.set(u,c),c.ta.push(t),t.sa(n.onlineState),c.ea&&t.oa(c.ea)&&Ny(n)}async function mC(a,t){const n=Te(a),r=t.query;let u=3;const c=n.queries.get(r);if(c){const d=c.ta.indexOf(t);d>=0&&(c.ta.splice(d,1),c.ta.length===0?u=t.ra()?0:1:!c.na()&&t.ra()&&(u=2))}switch(u){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pC(a,t){const n=Te(a);let r=!1;for(const u of t){const c=u.query,d=n.queries.get(c);if(d){for(const m of d.ta)m.oa(u)&&(r=!0);d.ea=u}}r&&Ny(n)}function yC(a,t,n){const r=Te(a),u=r.queries.get(t);if(u)for(const c of u.ta)c.onError(n);r.queries.delete(t)}function Ny(a){a.ia.forEach(t=>{t.next()})}var L1,e4;(e4=L1||(L1={}))._a="default",e4.Cache="cache";class vC{constructor(t,n,r){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const u of t.docChanges)u.type!==3&&r.push(u);t=new ef(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=ef.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==L1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t){this.key=t}}class b3{constructor(t){this.key=t}}class _C{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Xe(),this.mutatedKeys=Xe(),this.ya=j5(t),this.wa=new Xh(this.ya)}get Sa(){return this.fa}ba(t,n){const r=n?n.Da:new $_,u=n?n.wa:this.wa;let c=n?n.mutatedKeys:this.mutatedKeys,d=u,m=!1;const v=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((b,O)=>{const U=u.get(b),C=jm(this.query,O)?O:null,R=!!U&&this.mutatedKeys.has(U.key),I=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;U&&C?U.data.isEqual(C.data)?R!==I&&(r.track({type:3,doc:C}),L=!0):this.va(U,C)||(r.track({type:2,doc:C}),L=!0,(v&&this.ya(C,v)>0||_&&this.ya(C,_)<0)&&(m=!0)):!U&&C?(r.track({type:0,doc:C}),L=!0):U&&!C&&(r.track({type:1,doc:U}),L=!0,(v||_)&&(m=!0)),L&&(C?(d=d.add(C),c=I?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{wa:d,Da:r,ls:m,mutatedKeys:c}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,u){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const d=t.Da.X_();d.sort((b,O)=>function(C,R){const I=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return I(C)-I(R)}(b.type,O.type)||this.ya(b.doc,O.doc)),this.Ca(r),u=u!=null&&u;const m=n&&!u?this.Fa():[],v=this.pa.size===0&&this.current&&!u?1:0,_=v!==this.ga;return this.ga=v,d.length!==0||_?{snapshot:new ef(this.query,t.wa,c,d,t.mutatedKeys,v===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new $_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Xe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return t.forEach(r=>{this.pa.has(r)||n.push(new b3(r))}),this.pa.forEach(r=>{t.has(r)||n.push(new T3(r))}),n}Oa(t){this.fa=t.gs,this.pa=Xe();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return ef.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dy="SyncEngine";class SC{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class EC{constructor(t){this.key=t,this.Ba=!1}}class TC{constructor(t,n,r,u,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Wc(m=>H5(m),Hm),this.qa=new Map,this.Qa=new Set,this.$a=new ai(re.comparator),this.Ua=new Map,this.Ka=new vy,this.Wa={},this.Ga=new Map,this.za=tf.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function bC(a,t,n=!0){const r=D3(a);let u;const c=r.ka.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.Na()):u=await A3(r,t,n,!0),u}async function AC(a,t){const n=D3(a);await A3(n,t,!0,!1)}async function A3(a,t,n,r){const u=await GA(a.localStore,ro(t)),c=u.targetId,d=a.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await CC(a,t,c,d==="current",u.resumeToken)),a.isPrimaryClient&&n&&p3(a.remoteStore,u),m}async function CC(a,t,n,r,u){a.Ha=(O,U,C)=>async function(I,L,F,D){let x=L.view.ba(F);x.ls&&(x=await Y_(I.localStore,L.query,!1).then(({documents:j})=>L.view.ba(j,x)));const z=D&&D.targetChanges.get(L.targetId),H=D&&D.targetMismatches.get(L.targetId)!=null,Y=L.view.applyChanges(x,I.isPrimaryClient,z,H);return i4(I,L.targetId,Y.Ma),Y.snapshot}(a,O,U,C);const c=await Y_(a.localStore,t,!0),d=new _C(t,c.gs),m=d.ba(c.documents),v=R0.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",u),_=d.applyChanges(m,a.isPrimaryClient,v);i4(a,n,_.Ma);const b=new SC(t,n,d);return a.ka.set(t,b),a.qa.has(n)?a.qa.get(n).push(t):a.qa.set(n,[t]),_.snapshot}async function RC(a,t,n){const r=Te(a),u=r.ka.get(t),c=r.qa.get(u.targetId);if(c.length>1)return r.qa.set(u.targetId,c.filter(d=>!Hm(d,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(u.targetId),r.sharedClientState.isActiveQueryTarget(u.targetId)||await U1(r.localStore,u.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(u.targetId),n&&Ty(r.remoteStore,u.targetId),P1(r,u.targetId)}).catch(of)):(P1(r,u.targetId),await U1(r.localStore,u.targetId,!0))}async function wC(a,t){const n=Te(a),r=n.ka.get(t),u=n.qa.get(r.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ty(n.remoteStore,r.targetId))}async function NC(a,t,n){const r=IC(a);try{const u=await function(d,m){const v=Te(d),_=Gi.now(),b=m.reduce((C,R)=>C.add(R.key),Xe());let O,U;return v.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=$o(),I=Xe();return v.ds.getEntries(C,b).next(L=>{R=L,R.forEach((F,D)=>{D.isValidDocument()||(I=I.add(F))})}).next(()=>v.localDocuments.getOverlayedDocuments(C,R)).next(L=>{O=L;const F=[];for(const D of m){const x=G7(D,O.get(D.key).overlayedDocument);x!=null&&F.push(new Jc(D.key,x,U5(x.value.mapValue),lo.exists(!0)))}return v.mutationQueue.addMutationBatch(C,_,F,m)}).next(L=>{U=L;const F=L.applyToLocalDocumentSet(O,I);return v.documentOverlayCache.saveOverlays(C,L.batchId,F)})}).then(()=>({batchId:U.batchId,changes:q5(O)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(u.batchId),function(d,m,v){let _=d.Wa[d.currentUser.toKey()];_||(_=new ai(Le)),_=_.insert(m,v),d.Wa[d.currentUser.toKey()]=_}(r,u.batchId,n),await N0(r,u.changes),await Qm(r.remoteStore)}catch(u){const c=wy(u,"Failed to persist write");n.reject(c)}}async function C3(a,t){const n=Te(a);try{const r=await zA(n.localStore,t);t.targetChanges.forEach((u,c)=>{const d=n.Ua.get(c);d&&(yn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?d.Ba=!0:u.modifiedDocuments.size>0?yn(d.Ba):u.removedDocuments.size>0&&(yn(d.Ba),d.Ba=!1))}),await N0(n,r,t)}catch(r){await of(r)}}function n4(a,t,n){const r=Te(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const u=[];r.ka.forEach((c,d)=>{const m=d.view.sa(t);m.snapshot&&u.push(m.snapshot)}),function(d,m){const v=Te(d);v.onlineState=m;let _=!1;v.queries.forEach((b,O)=>{for(const U of O.ta)U.sa(m)&&(_=!0)}),_&&Ny(v)}(r.eventManager,t),u.length&&r.La.p_(u),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function DC(a,t,n){const r=Te(a);r.sharedClientState.updateQueryState(t,"rejected",n);const u=r.Ua.get(t),c=u&&u.key;if(c){let d=new ai(re.comparator);d=d.insert(c,Ya.newNoDocument(c,_e.min()));const m=Xe().add(c),v=new Km(_e.min(),new Map,new ai(Le),d,m);await C3(r,v),r.$a=r.$a.remove(c),r.Ua.delete(t),xy(r)}else await U1(r.localStore,t,!1).then(()=>P1(r,t,n)).catch(of)}async function xC(a,t){const n=Te(a),r=t.batch.batchId;try{const u=await PA(n.localStore,t);w3(n,r,null),R3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await N0(n,u)}catch(u){await of(u)}}async function OC(a,t,n){const r=Te(a);try{const u=await function(d,m){const v=Te(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return v.mutationQueue.lookupMutationBatch(_,m).next(O=>(yn(O!==null),b=O.keys(),v.mutationQueue.removeMutationBatch(_,O))).next(()=>v.mutationQueue.performConsistencyCheck(_)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(_,b,m)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>v.localDocuments.getDocuments(_,b))})}(r.localStore,t);w3(r,t,n),R3(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await N0(r,u)}catch(u){await of(u)}}function R3(a,t){(a.Ga.get(t)||[]).forEach(n=>{n.resolve()}),a.Ga.delete(t)}function w3(a,t,n){const r=Te(a);let u=r.Wa[r.currentUser.toKey()];if(u){const c=u.get(t);c&&(n?c.reject(n):c.resolve(),u=u.remove(t)),r.Wa[r.currentUser.toKey()]=u}}function P1(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const r of a.qa.get(t))a.ka.delete(r),n&&a.La.Ja(r,n);a.qa.delete(t),a.isPrimaryClient&&a.Ka.br(t).forEach(r=>{a.Ka.containsKey(r)||N3(a,r)})}function N3(a,t){a.Qa.delete(t.path.canonicalString());const n=a.$a.get(t);n!==null&&(Ty(a.remoteStore,n),a.$a=a.$a.remove(t),a.Ua.delete(n),xy(a))}function i4(a,t,n){for(const r of n)r instanceof T3?(a.Ka.addReference(r.key,t),MC(a,r)):r instanceof b3?(Zt(Dy,"Document no longer in limbo: "+r.key),a.Ka.removeReference(r.key,t),a.Ka.containsKey(r.key)||N3(a,r.key)):ge()}function MC(a,t){const n=t.key,r=n.path.canonicalString();a.$a.get(n)||a.Qa.has(r)||(Zt(Dy,"New document in limbo: "+n),a.Qa.add(r),xy(a))}function xy(a){for(;a.Qa.size>0&&a.$a.size<a.maxConcurrentLimboResolutions;){const t=a.Qa.values().next().value;a.Qa.delete(t);const n=new re(jn.fromString(t)),r=a.za.next();a.Ua.set(r,new EC(n)),a.$a=a.$a.insert(n,r),p3(a.remoteStore,new ju(ro(G5(n.path)),r,"TargetPurposeLimboResolution",zm.ae))}}async function N0(a,t,n){const r=Te(a),u=[],c=[],d=[];r.ka.isEmpty()||(r.ka.forEach((m,v)=>{d.push(r.Ha(v,t,n).then(_=>{var b;if((_||n)&&r.isPrimaryClient){const O=_?!_.fromCache:(b=n==null?void 0:n.targetChanges.get(v.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(v.targetId,O?"current":"not-current")}if(_){u.push(_);const O=Sy.Yi(v.targetId,_);c.push(O)}}))}),await Promise.all(d),r.La.p_(u),await async function(v,_){const b=Te(v);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Mt.forEach(_,U=>Mt.forEach(U.Hi,C=>b.persistence.referenceDelegate.addReference(O,U.targetId,C)).next(()=>Mt.forEach(U.Ji,C=>b.persistence.referenceDelegate.removeReference(O,U.targetId,C)))))}catch(O){if(!uf(O))throw O;Zt(Ey,"Failed to update sequence numbers: "+O)}for(const O of _){const U=O.targetId;if(!O.fromCache){const C=b.Ts.get(U),R=C.snapshotVersion,I=C.withLastLimboFreeSnapshotVersion(R);b.Ts=b.Ts.insert(U,I)}}}(r.localStore,c))}async function VC(a,t){const n=Te(a);if(!n.currentUser.isEqual(t)){Zt(Dy,"User change. New user:",t.toKey());const r=await f3(n.localStore,t);n.currentUser=t,function(c,d){c.Ga.forEach(m=>{m.forEach(v=>{v.reject(new ae(Bt.CANCELLED,d))})}),c.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await N0(n,r.Rs)}}function UC(a,t){const n=Te(a),r=n.Ua.get(t);if(r&&r.Ba)return Xe().add(r.key);{let u=Xe();const c=n.qa.get(t);if(!c)return u;for(const d of c){const m=n.ka.get(d);u=u.unionWith(m.view.Sa)}return u}}function D3(a){const t=Te(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=C3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=UC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=DC.bind(null,t),t.La.p_=pC.bind(null,t.eventManager),t.La.Ja=yC.bind(null,t.eventManager),t}function IC(a){const t=Te(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OC.bind(null,t),t}class wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ym(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return LA(this.persistence,new VA,t.initialUser,this.serializer)}Xa(t){return new h3(_y.ri,this.serializer)}Za(t){return new jA}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wm.provider={build:()=>new wm};class LC extends wm{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){yn(this.persistence.referenceDelegate instanceof Cm);const r=this.persistence.referenceDelegate.garbageCollector;return new vA(r,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new h3(r=>Cm.ri(r,n),this.serializer)}}class z1{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VC.bind(null,this.syncEngine),await hC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new dC}()}createDatastore(t){const n=Ym(t.databaseInfo.databaseId),r=function(c){return new XA(c)}(t.databaseInfo);return function(c,d,m,v){return new JA(c,d,m,v)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,u,c,d,m){return new tC(r,u,c,d,m)}(this.localStore,this.datastore,t.asyncQueue,n=>n4(this.syncEngine,n,0),function(){return Z_.D()?new Z_:new FA}())}createSyncEngine(t,n){return function(u,c,d,m,v,_,b){const O=new TC(u,c,d,m,v,_);return b&&(O.ja=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(u){const c=Te(u);Zt(Qc,"RemoteStore shutting down."),c.W_.add(5),await w0(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}z1.provider={build:()=>new z1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Jo("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="FirestoreClient";class zC{constructor(t,n,r,u,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=u,this.user=Ka.UNAUTHENTICATED,this.clientId=A5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{Zt(ec,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(Zt(ec,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function c1(a,t){a.asyncQueue.verifyOperationInProgress(),Zt(ec,"Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let r=n.initialUser;a.setCredentialChangeListener(async u=>{r.isEqual(u)||(await f3(t.localStore,u),r=u)}),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}async function a4(a,t){a.asyncQueue.verifyOperationInProgress();const n=await BC(a);Zt(ec,"Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener(r=>J_(t.remoteStore,r)),a.setAppCheckTokenChangeListener((r,u)=>J_(t.remoteStore,u)),a._onlineComponents=t}async function BC(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Zt(ec,"Using user provided OfflineComponentProvider");try{await c1(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(u){return u.name==="FirebaseError"?u.code===Bt.FAILED_PRECONDITION||u.code===Bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;Zh("Error using user provided cache. Falling back to memory cache: "+n),await c1(a,new wm)}}else Zt(ec,"Using default OfflineComponentProvider"),await c1(a,new LC(void 0));return a._offlineComponents}async function x3(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Zt(ec,"Using user provided OnlineComponentProvider"),await a4(a,a._uninitializedComponentsProvider._online)):(Zt(ec,"Using default OnlineComponentProvider"),await a4(a,new z1))),a._onlineComponents}function kC(a){return x3(a).then(t=>t.syncEngine)}async function GC(a){const t=await x3(a),n=t.eventManager;return n.onListen=bC.bind(null,t.syncEngine),n.onUnlisten=RC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=AC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wC.bind(null,t.syncEngine),n}function HC(a,t,n={}){const r=new Xu;return a.asyncQueue.enqueueAndForget(async()=>function(c,d,m,v,_){const b=new PC({next:U=>{b.su(),d.enqueueAndForget(()=>mC(c,O)),U.fromCache&&v.source==="server"?_.reject(new ae(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(U)},error:U=>_.reject(U)}),O=new vC(m,b,{includeMetadataChanges:!0,Ta:!0});return gC(c,O)}(await GC(a),a.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(a,t,n){if(!n)throw new ae(Bt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function jC(a,t,n,r){if(t===!0&&r===!0)throw new ae(Bt.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function r4(a){if(!re.isDocumentKey(a))throw new ae(Bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function l4(a){if(re.isDocumentKey(a))throw new ae(Bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Oy(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":ge()}function nf(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new ae(Bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oy(a);throw new ae(Bt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="firestore.googleapis.com",o4=!0;class u4{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ae(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V3,this.ssl=o4}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:o4;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=c3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pA)throw new ae(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O3((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ae(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ae(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ae(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,u){return r.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zm{constructor(t,n,r,u){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ae(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u4(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new K8;switch(r.type){case"firstParty":return new Z8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=s4.get(n);r&&(Zt("ComponentProvider","Removing Datastore"),s4.delete(n),r.terminate())}(this),Promise.resolve()}}function FC(a,t,n,r={}){var u;const c=(a=nf(a,Zm))._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:a._getEmulatorOptions()}),m=`${t}:${n}`;c.host!==V3&&c.host!==m&&Zh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:r});if(!Fc(v,d)&&(a._setSettings(v),r.mockUserToken)){let _,b;if(typeof r.mockUserToken=="string")_=r.mockUserToken,b=Ka.MOCK_USER;else{_=aT(r.mockUserToken,(u=a._app)===null||u===void 0?void 0:u.options.projectId);const O=r.mockUserToken.sub||r.mockUserToken.user_id;if(!O)throw new ae(Bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ka(O)}a._authCredentials=new Y8(new T5(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Wm(this.firestore,t,this._query)}}class Ir{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ir(this.firestore,t,this._key)}}class Qu extends Wm{constructor(t,n,r){super(t,n,G5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ir(this.firestore,null,new re(t))}withConverter(t){return new Qu(this.firestore,t,this._path)}}function U3(a,t,...n){if(a=Ls(a),M3("collection","path",t),a instanceof Zm){const r=jn.fromString(t,...n);return l4(r),new Qu(a,null,r)}{if(!(a instanceof Ir||a instanceof Qu))throw new ae(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(jn.fromString(t,...n));return l4(r),new Qu(a.firestore,null,r)}}function I3(a,t,...n){if(a=Ls(a),arguments.length===1&&(t=A5.newId()),M3("doc","path",t),a instanceof Zm){const r=jn.fromString(t,...n);return r4(r),new Ir(a,null,new re(r))}{if(!(a instanceof Ir||a instanceof Qu))throw new ae(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(jn.fromString(t,...n));return r4(r),new Ir(a.firestore,a instanceof Qu?a.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="AsyncQueue";class h4{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new g3(this,"async_queue_retry"),this.Su=()=>{const r=u1();r&&Zt(c4,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const n=u1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=u1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Xu;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!uf(t))throw t;Zt(c4,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const u=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(r);throw Jo("INTERNAL UNHANDLED ERROR: ",u),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(t,n,r){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const u=Ry.createAndSchedule(this,t,n,r,c=>this.Fu(c));return this.fu.push(u),u}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class Jm extends Zm{constructor(t,n,r,u){super(t,n,r,u),this.type="firestore",this._queue=new h4,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new h4(t),this._firestoreClient=void 0,await t}}}function qC(a,t){const n=typeof a=="object"?a:V4(),r=typeof a=="string"?a:vm,u=Q1(n,"firestore").getImmediate({identifier:r});if(!u._initialized){const c=nT("firestore");c&&FC(u,...c)}return u}function L3(a){if(a._terminated)throw new ae(Bt.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||KC(a),a._firestoreClient}function KC(a){var t,n,r;const u=a._freezeSettings(),c=function(m,v,_,b){return new h7(m,v,_,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,O3(b.experimentalLongPollingOptions),b.useFetchStreams)}(a._databaseId,((t=a._app)===null||t===void 0?void 0:t.options.appId)||"",a._persistenceKey,u);a._componentsProvider||!((n=u.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=u.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new zC(a._authCredentials,a._appCheckCredentials,a._queue,c,a._componentsProvider&&function(m){const v=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(v),_online:v}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t){this._byteString=t}static fromBase64String(t){try{return new af(Ra.fromBase64String(t))}catch(n){throw new ae(Bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new af(Ra.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ae(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ca(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ae(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ae(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Le(this._lat,t._lat)||Le(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,u){if(r.length!==u.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==u[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^__.*__$/;class XC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Jc(t,this.data,this.fieldMask,n,this.fieldTransforms):new C0(t,this.data,n,this.fieldTransforms)}}function z3(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Iy{constructor(t,n,r,u,c,d){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=u,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Iy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.ku({path:r,Qu:!1});return u.$u(t),u}Uu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.ku({path:r,Qu:!1});return u.Bu(),u}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Nm(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(z3(this.Lu)&&YC.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class QC{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ym(t)}ju(t,n,r,u=!1){return new Iy({Lu:t,methodName:n,zu:r,path:Ca.emptyPath(),Qu:!1,Gu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZC(a){const t=a._freezeSettings(),n=Ym(a._databaseId);return new QC(a._databaseId,!!t.ignoreUndefinedProperties,n)}function WC(a,t,n,r,u,c={}){const d=a.ju(c.merge||c.mergeFields?2:0,t,n,u);H3("Data must be an object, but it was:",d,r);const m=k3(r,d);let v,_;if(c.merge)v=new vl(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const O of c.mergeFields){const U=JC(t,O,n);if(!d.contains(U))throw new ae(Bt.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);tR(b,U)||b.push(U)}v=new vl(b),_=d.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,_=d.fieldTransforms;return new XC(new Ur(m),v,_)}function B3(a,t){if(G3(a=Ls(a)))return H3("Unsupported field value:",t,a),k3(a,t);if(a instanceof P3)return function(r,u){if(!z3(u.Lu))throw u.Wu(`${r._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Wu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,u){const c=[];let d=0;for(const m of r){let v=B3(m,u.Ku(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}}(a,t)}return function(r,u){if((r=Ls(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I7(u.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Gi.fromDate(r);return{timestampValue:Am(u.serializer,c)}}if(r instanceof Gi){const c=new Gi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Am(u.serializer,c)}}if(r instanceof Vy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof af)return{bytesValue:i3(u.serializer,r._byteString)};if(r instanceof Ir){const c=u.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw u.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yy(r.firestore._databaseId||u.databaseId,r._key.path)}}if(r instanceof Uy)return function(d,m){return{mapValue:{fields:{[M5]:{stringValue:V5},[_m]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw m.Wu("VectorValues must only contain numeric values.");return dy(m.serializer,_)})}}}}}}(r,u);throw u.Wu(`Unsupported field value: ${Oy(r)}`)}(a,t)}function k3(a,t){const n={};return R5(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zc(a,(r,u)=>{const c=B3(u,t.qu(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function G3(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Gi||a instanceof Vy||a instanceof af||a instanceof Ir||a instanceof P3||a instanceof Uy)}function H3(a,t,n){if(!G3(n)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(n)){const r=Oy(n);throw r==="an object"?t.Wu(a+" a custom object"):t.Wu(a+" "+r)}}function JC(a,t,n){if((t=Ls(t))instanceof My)return t._internalPath;if(typeof t=="string")return j3(a,t);throw Nm("Field path arguments must be of type string or ",a,!1,void 0,n)}const $C=new RegExp("[~\\*/\\[\\]]");function j3(a,t,n){if(t.search($C)>=0)throw Nm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new My(...t.split("."))._internalPath}catch{throw Nm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function Nm(a,t,n,r,u){const c=r&&!r.isEmpty(),d=u!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${r}`),d&&(v+=` in document ${u}`),v+=")"),new ae(Bt.INVALID_ARGUMENT,m+a+v)}function tR(a,t){return a.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(t,n,r,u,c){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new eR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(q3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eR extends F3{data(){return super.data()}}function q3(a,t){return typeof t=="string"?j3(a,t):t instanceof My?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new ae(Bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iR{convertValue(t,n="none"){switch($u(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ei(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ju(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ge()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Zc(t,(u,c)=>{r[u]=this.convertValue(c,n)}),r}convertVectorValue(t){var n,r,u;const c=(u=(r=(n=t.fields)===null||n===void 0?void 0:n[_m].arrayValue)===null||r===void 0?void 0:r.values)===null||u===void 0?void 0:u.map(d=>Ei(d.doubleValue));return new Uy(c)}convertGeoPoint(t){return new Vy(Ei(t.latitude),Ei(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=km(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(g0(t));default:return null}}convertTimestamp(t){const n=Wu(t);return new Gi(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=jn.fromString(t);yn(u3(r));const u=new m0(r.get(1),r.get(3)),c=new re(r.popFirst(5));return u.isEqual(n)||Jo(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(a,t,n){let r;return r=a?a.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sR extends F3{constructor(t,n,r,u,c,d){super(t,n,r,u,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(q3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class om extends sR{data(t={}){return super.data(t)}}class rR{constructor(t,n,r,u){this._firestore=t,this._userDataWriter=n,this._snapshot=u,this.metadata=new Wg(u.hasPendingWrites,u.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new om(this._firestore,this._userDataWriter,r.key,r,new Wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let d=0;return u._snapshot.docChanges.map(m=>{const v=new om(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Wg(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);return m.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}})}{let d=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const v=new om(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Wg(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,b=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:lR(m.type),doc:v,oldIndex:_,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lR(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}class oR extends iR{constructor(t){super(),this.firestore=t}convertBytes(t){return new af(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,n)}}function uR(a){a=nf(a,Wm);const t=nf(a.firestore,Jm),n=L3(t),r=new oR(t);return nR(a._query),HC(n,a._query).then(u=>new rR(t,r,a,u))}function cR(a,t,n){a=nf(a,Ir);const r=nf(a.firestore,Jm),u=aR(a.converter,t);return K3(r,[WC(ZC(r),"setDoc",a._key,u,a.converter!==null,n).toMutation(a._key,lo.none())])}function hR(a){return K3(nf(a.firestore,Jm),[new gy(a._key,lo.none())])}function K3(a,t){return function(r,u){const c=new Xu;return r.asyncQueue.enqueueAndForget(async()=>NC(await kC(r),u,c)),c.promise}(L3(a),t)}(function(t,n=!0){(function(u){lf=u})(sf),Qh(new qc("firestore",(r,{instanceIdentifier:u,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Jm(new X8(r.getProvider("auth-internal")),new W8(d,r.getProvider("app-check-internal")),function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ae(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new m0(_.options.projectId,b)}(d,u),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ku(y_,v_,t),Ku(y_,v_,"esm2017")})();const fR={apiKey:"AIzaSyCa-qKXECagC4jNvLdw7MnVWWqitAJ3z-U",authDomain:"football-tactics-board-d5405.firebaseapp.com",projectId:"football-tactics-board-d5405",storageBucket:"football-tactics-board-d5405.appspot.com",messagingSenderId:"456088278412",appId:"1:456088278412:web:67965a307d9a84783632a9"},Y3=M4(fR),D0=F8(Y3),Ly=qC(Y3),dR=new qo,gR=async(a,t)=>{try{return await N9(D0,a,t)}catch(n){throw console.error("Error registering with email and password:",n),n}},mR=async(a,t)=>{try{return await D9(D0,a,t)}catch(n){throw console.error("Error logging in with email and password:",n),n}},pR=async()=>{try{return await $9(D0,dR)}catch(a){throw console.error("Error signing in with Google:",a),a}},yR=async()=>{try{await V9(D0)}catch(a){throw console.error("Error signing out:",a),a}},vR=async(a,t)=>{try{console.log("Saving board for user:",a,t);const n=U3(Ly,"users",a,"boards");return await cR(I3(n,t.name),{...t,updatedAt:new Date().toISOString()}),!0}catch(n){throw console.error("Error saving tactics board:",n),n}},h1=async a=>{try{console.log("Getting boards for user:",a);const t=U3(Ly,"users",a,"boards"),n=await uR(t),r=[];return n.forEach(u=>{r.push(u.data())}),console.log("Fetched boards:",r),r}catch(t){throw console.error("Error getting user tactics boards:",t),t}},_R=async(a,t)=>{try{return console.log("Deleting board:",a,t),await hR(I3(Ly,"users",a,"boards",t)),!0}catch(n){throw console.error("Error deleting tactics board:",n),n}},SR=a=>M9(D0,a),X3=Gt.createContext(),$m=()=>Gt.useContext(X3),ER=({children:a})=>{const[t,n]=Gt.useState(null),[r,u]=Gt.useState(!0),[c,d]=Gt.useState(null),m=async(C,R)=>{try{d(null),await gR(C,R)}catch(I){throw d(I.message),I}},v=async(C,R)=>{try{d(null),await mR(C,R)}catch(I){throw d(I.message),I}},_=async()=>{try{d(null),await pR()}catch(C){throw d(C.message),C}},b=async()=>{try{d(null),await yR()}catch(C){throw d(C.message),C}},O=()=>{d(null)};Gt.useEffect(()=>SR(R=>{n(R),u(!1)}),[]);const U={currentUser:t,loading:r,error:c,signup:m,login:v,loginWithGoogle:_,logout:b,clearError:O};return $.jsx(X3.Provider,{value:U,children:!r&&a})},TR=({onClose:a})=>{const[t,n]=Gt.useState(""),[r,u]=Gt.useState(""),[c,d]=Gt.useState(!1),{login:m,loginWithGoogle:v,error:_,clearError:b}=$m(),O=async C=>{C.preventDefault();try{d(!0),b(),await m(t,r),a()}catch(R){console.error(R)}finally{d(!1)}},U=async()=>{try{d(!0),b(),await v(),a()}catch(C){console.error(C)}finally{d(!1)}};return $.jsxs("div",{className:"auth-container",children:[$.jsxs("div",{className:"auth-header",children:[$.jsx("h2",{children:"Login"}),$.jsx("button",{className:"close-button",onClick:a,children:"×"})]}),_&&$.jsx("div",{className:"auth-error",children:_}),$.jsxs("form",{onSubmit:O,className:"auth-form",children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"email",children:"Email"}),$.jsx("input",{type:"email",id:"email",value:t,onChange:C=>n(C.target.value),required:!0,disabled:c})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"password",children:"Password"}),$.jsx("input",{type:"password",id:"password",value:r,onChange:C=>u(C.target.value),required:!0,disabled:c})]}),$.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?"Logging in...":"Login"})]}),$.jsx("div",{className:"social-login",children:$.jsxs("button",{className:"google-button",onClick:U,disabled:c,children:[$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[$.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),$.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),$.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),$.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),$.jsx("span",{children:"Continue with Google"})]})})]})},bR=({onClose:a})=>{const[t,n]=Gt.useState(""),[r,u]=Gt.useState(""),[c,d]=Gt.useState(""),[m,v]=Gt.useState(!1),[_,b]=Gt.useState(""),{signup:O,loginWithGoogle:U,error:C,clearError:R}=$m(),I=async F=>{if(F.preventDefault(),r!==c){b("Passwords do not match");return}else b("");try{v(!0),R(),await O(t,r),a()}catch(D){console.error(D)}finally{v(!1)}},L=async()=>{try{v(!0),R(),await U(),a()}catch(F){console.error(F)}finally{v(!1)}};return $.jsxs("div",{className:"auth-container",children:[$.jsxs("div",{className:"auth-header",children:[$.jsx("h2",{children:"Create Account"}),$.jsx("button",{className:"close-button",onClick:a,children:"×"})]}),C&&$.jsx("div",{className:"auth-error",children:C}),_&&$.jsx("div",{className:"auth-error",children:_}),$.jsxs("form",{onSubmit:I,className:"auth-form",children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"email",children:"Email"}),$.jsx("input",{type:"email",id:"email",value:t,onChange:F=>n(F.target.value),required:!0,disabled:m})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"password",children:"Password"}),$.jsx("input",{type:"password",id:"password",value:r,onChange:F=>u(F.target.value),required:!0,disabled:m})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),$.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:F=>d(F.target.value),required:!0,disabled:m})]}),$.jsx("button",{type:"submit",className:"auth-button",disabled:m,children:m?"Creating Account...":"Create Account"})]}),$.jsxs("div",{className:"social-login",children:[$.jsx("p",{className:"or-divider",children:"or"}),$.jsxs("button",{className:"google-button",onClick:L,disabled:m,children:[$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[$.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),$.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),$.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),$.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),$.jsx("span",{children:"Sign up with Google"})]})]})]})},AR=({onClose:a,initialView:t="login"})=>{const[n,r]=Gt.useState(t),u=()=>{r(n==="login"?"register":"login")};return $.jsx("div",{className:"auth-modal-overlay",onClick:a,children:$.jsx("div",{className:"auth-modal",onClick:c=>c.stopPropagation(),children:n==="login"?$.jsxs($.Fragment,{children:[$.jsx(TR,{onClose:a}),$.jsx("div",{className:"auth-toggle",children:$.jsxs("p",{children:["Don't have an account? ",$.jsx("button",{onClick:u,children:"Sign Up"})]})})]}):$.jsxs($.Fragment,{children:[$.jsx(bR,{onClose:a}),$.jsx("div",{className:"auth-toggle",children:$.jsxs("p",{children:["Already have an account? ",$.jsx("button",{onClick:u,children:"Log In"})]})})]})})})},CR=({onClose:a})=>{var u,c;const{currentUser:t,logout:n}=$m(),r=async()=>{try{await n(),a()}catch(d){console.error("Error logging out:",d)}};return $.jsxs("div",{className:"user-profile",children:[$.jsxs("div",{className:"profile-header",children:[$.jsx("h3",{children:"User Profile"}),$.jsx("button",{className:"close-button",onClick:a,children:"×"})]}),$.jsxs("div",{className:"profile-content",children:[$.jsx("div",{className:"profile-avatar",children:t!=null&&t.photoURL?$.jsx("img",{src:t.photoURL,alt:"User Avatar"}):$.jsx("div",{className:"avatar-placeholder",children:((u=t==null?void 0:t.email)==null?void 0:u.charAt(0).toUpperCase())||"U"})}),$.jsxs("div",{className:"profile-info",children:[$.jsx("p",{className:"profile-email",children:(t==null?void 0:t.email)||"No email available"}),$.jsxs("p",{className:"profile-id",children:["User ID: ",((c=t==null?void 0:t.uid)==null?void 0:c.substring(0,8))||"Unknown"]})]}),$.jsx("button",{className:"logout-button",onClick:r,children:"Sign Out"})]})]})};function RR(){const[a,t]=Gt.useState(null),[n,r]=Gt.useState("#FF0000"),[u,c]=Gt.useState([]),[d,m]=Gt.useState([]),[v,_]=Gt.useState(!1),[b,O]=Gt.useState(null),[U,C]=Gt.useState(null),[R,I]=Gt.useState([]),[L,F]=Gt.useState(null),[D,x]=Gt.useState(!1),[z,H]=Gt.useState({}),[Y,j]=Gt.useState(!1),[V,w]=Gt.useState(null),[M,k]=Gt.useState(""),[K,T]=Gt.useState(""),[q,G]=Gt.useState(!1),[Q,et]=Gt.useState(""),[rt,pt]=Gt.useState([]),[X,st]=Gt.useState([{shapes:[],players:[],playerNumbers:{}}]),[Tt,lt]=Gt.useState(0),[dt,Nt]=Gt.useState(!1),[Vt,nt]=Gt.useState(!1),[ht,Dt]=Gt.useState({width:window.innerWidth,height:window.innerHeight}),[xt,jt]=Gt.useState(!1),[Kt,le]=Gt.useState(!0),[de,ne]=Gt.useState(null),[Fe,me]=Gt.useState(null),[Ze,Oi]=Gt.useState(!1),[rn,bi]=Gt.useState(null),[He,Ln]=Gt.useState(null),[De,Mi]=Gt.useState(!1),[Ae,qe]=Gt.useState(!1),[Fn,Vi]=Gt.useState(!1),[Ce,qn]=Gt.useState({numbers:Array(11).fill("").map((tt,yt)=>(yt+1).toString()),names:Array(11).fill(""),formation:"442",side:"left",teamColor:"#FF0000"}),[vn,We]=Gt.useState(null),[Me,ji]=Gt.useState(!1),[vi,Pn]=Gt.useState({id:"",number:"",name:""}),[Ps,Pr]=Gt.useState(!1),[zr,Fi]=Gt.useState(""),[ls,qi]=Gt.useState({x:0,y:0}),[Kn,Ui]=Gt.useState("board"),[zn,Ki]=Gt.useState([]),[Ai,wa]=Gt.useState(""),[be,zs]=Gt.useState(-1),[Qa,Ii]=Gt.useState(!1),[Na,ar]=Gt.useState(!1),[Li,Mn]=Gt.useState(!1),[Vn,Se]=Gt.useState(!1),[Yi,Da]=Gt.useState(""),{currentUser:Bn,loading:xa}=$m(),sr=105/68,os=De?0:240,Bs=60,Ci=()=>{const tt=ht.width-(De?0:os)-40,yt=ht.height-Bs-40,Ut=De?!0:dt;let Ct;if(Ut){const Ht=tt*sr;Ht<=yt?Ct={width:tt,height:Ht}:Ct={width:yt/sr,height:yt}}else{const Ht=tt/sr;Ht<=yt?Ct={width:tt,height:Ht}:Ct={width:yt*sr,height:yt}}return Ct},[ln,cn]=Gt.useState(Ci()),Jt=ln.width,Xt=ln.height;Gt.useEffect(()=>{const tt=Ci();cn(tt)},[ht,dt]),Gt.useEffect(()=>{kn.current.width===0&&(kn.current={...ln})},[ln]);const Za=15,Xi=Gt.useRef(null),si=Gt.useRef(null),kn=Gt.useRef({width:0,height:0});Gt.useEffect(()=>{const tt=()=>{const yt=window.innerWidth,Ut=window.innerHeight;Dt({width:yt,height:Ut});const Ct=yt<768;Ct!==De&&(Mi(Ct),Ct?(qe(!1),dt||Nt(!0)):dt&&Nt(!1)),Ct&&!dt&&Nt(!0)};return window.addEventListener("resize",tt),tt(),()=>window.removeEventListener("resize",tt)},[De,dt]),Gt.useEffect(()=>{const tt=kn.current,{width:yt,height:Ut}=ln;if(tt.width>0&&tt.height>0&&(yt!==tt.width||Ut!==tt.height)&&(d.length>0||u.length>0)){const Ct=yt/tt.width,Ht=Ut/tt.height;if(Ct!==1||Ht!==1){if(console.log("Scaling elements to match new pitch size",Ct,Ht),d.length>0){const ee=d.map(Lt=>({...Lt,x:Lt.x*Ct,y:Lt.y*Ht}));m(ee)}if(u.length>0){const ee=u.map(Lt=>{if(Lt.type==="line"||Lt.type==="arrow"){const Ft=[];for(let Qt=0;Qt<Lt.points.length;Qt+=2)Ft.push(Lt.points[Qt]*Ct,Lt.points[Qt+1]*Ht);return{...Lt,points:Ft}}else{if(Lt.type==="box")return{...Lt,x:Lt.x*Ct,y:Lt.y*Ht,width:Lt.width*Ct,height:Lt.height*Ht};if(Lt.type==="circle")return{...Lt,x:Lt.x*Ct,y:Lt.y*Ht,width:Lt.width*Ct,height:Lt.height*Ht};if(Lt.type==="football"||Lt.type==="cone")return{...Lt,x:Lt.x*Ct,y:Lt.y*Ht,radius:Lt.radius*Math.min(Ct,Ht)}}return Lt});c(ee)}}}kn.current={...ln}},[ln]),Gt.useEffect(()=>{if(d.length>0||u.length>0){const tt=Ci();kn.current={...tt}}},[dt]),Gt.useEffect(()=>{if(u.length===0){const tt=Ci(),yt=`football-default-${Date.now()}`,Ut={id:yt,x:tt.width/2,y:tt.height/2,radius:10,color:"#FFFFFF",type:"football",isDefault:!0};c([Ut]),Ln(yt),nt(!0)}},[]),Gt.useEffect(()=>{if(Vt){const tt={shapes:[...u],players:[...d],playerNumbers:{...z}};if(Tt<X.length-1){const yt=X.slice(0,Tt+1);st([...yt,tt])}else st([...X,tt]);lt(Tt+1),nt(!1)}},[Vt]),Gt.useEffect(()=>{q&&si.current&&si.current.focus()},[q]);const Pi=tt=>{const Ut=d.filter(Ht=>Ht.color===tt).map(Ht=>z[Ht.id]||0);let Ct=1;for(;Ut.includes(Ct);)Ct++;return Ct},fa=tt=>{a===tt?(t(null),tt==="select"&&I([])):(t(tt),a==="select"&&tt!=="select"&&I([])),We(null),C(null)},Br=tt=>{vn===tt?We(null):(We(tt),t(null))},Qi=tt=>{r(tt),Kt&&!de?ne(tt):!Kt&&!Fe&&me(tt)},Sl=tt=>{var Ht,ee;const yt=tt.target===tt.target.getStage(),Ut=tt.target.getStage();let Ct=Ut.getPointerPosition();if(!Ct&&tt.evt.touches&&tt.evt.touches.length>0){const Lt=tt.evt.touches[0],Ft=Ut.container().getBoundingClientRect();Ct={x:Lt.clientX-Ft.left,y:Lt.clientY-Ft.top}}if(Ct){if(yt){if(!a){C(null),I([]);return}if(a==="select"){x(!0),F({x:Ct.x,y:Ct.y,width:0,height:0}),tt.evt.shiftKey||(I([]),C(null));return}if(Ze&&!v){const Lt=d.filter(Ft=>Ft.color===(rn==="home"?de:Fe));I(Lt.map(Ft=>Ft.id)),_(!0);return}}else{const Lt=tt.target.id(),Qt=((ee=(Ht=tt.target.getParent())==null?void 0:Ht.attrs)==null?void 0:ee.id)||Lt;if(a==="delete"&&Qt){ks(Qt);return}if(vn==="team"&&Qt&&Qt.startsWith("player")){const he=d.find(li=>li.id===Qt);if(he){fr(he.color);return}}if(vn==="player"&&Qt&&Qt.startsWith("player")){const he=d.find(li=>li.id===Qt);if(he){Ja(he);return}}if(a==="select"){tt.evt.shiftKey?R.includes(Qt)&&I(R.filter(he=>he!==Qt)):R.includes(Qt)||I([...R,Qt]),C(Qt);return}if(!a||a==="delete"||a==="select"){C(Qt),a==="select"?tt.evt.shiftKey?R.includes(Qt)||I([...R,Qt]):I([Qt]):I([]);return}}if(a&&(yt||a!=="delete")){if(a==="player"){const Lt=Pi(n),Ft={id:`player-${d.length}-${Date.now()}`,x:Ct.x,y:Ct.y,radius:Za,color:n,type:"player"};m([...d,Ft]),H({...z,[Ft.id]:Lt}),nt(!0);return}if(a==="football"){const Lt={id:`football-${u.length}-${Date.now()}`,x:Ct.x,y:Ct.y,radius:10,color:"#FFFFFF",type:"football"};c([...u,Lt]),nt(!0);return}if(a==="cone"){const Lt={id:`cone-${u.length}-${Date.now()}`,x:Ct.x,y:Ct.y,color:"#FFFF00",strokeColor:"#000000",type:"cone"};c([...u,Lt]),nt(!0);return}if(a==="text"){qi({x:Ct.x,y:Ct.y}),Fi(""),Pr(!0);return}if(_(!0),a==="line"||a==="arrow"){const Lt={id:`${a}-${u.length}-${Date.now()}`,points:[Ct.x,Ct.y,Ct.x,Ct.y],color:n,type:a};O(Lt)}else if(a==="box"){const Lt={id:`box-${u.length}-${Date.now()}`,x:Ct.x,y:Ct.y,width:0,height:0,color:n,type:"box"};O(Lt)}else if(a==="circle"){const Lt={id:`circle-${u.length}-${Date.now()}`,x:Ct.x,y:Ct.y,width:0,height:0,color:n,type:"circle"};O(Lt)}}}},us=tt=>{const yt=tt.target.getStage();let Ut=yt.getPointerPosition();if(!Ut&&tt.evt.touches&&tt.evt.touches.length>0){const Ct=tt.evt.touches[0],Ht=yt.container().getBoundingClientRect();Ut={x:Ct.clientX-Ht.left,y:Ct.clientY-Ht.top}}if(Ut){if(D&&a==="select"){F({...L,width:Ut.x-L.x,height:Ut.y-L.y});return}if(v){if(a==="line"||a==="arrow"){const Ct={...b,points:[b.points[0],b.points[1],Ut.x,Ut.y]};O(Ct)}else if(a==="box"){const Ct={...b,width:Ut.x-b.x,height:Ut.y-b.y};O(Ct)}else if(a==="circle"){const Ct={...b,width:Ut.x-b.x,height:Ut.y-b.y};O(Ct)}}}},cs=tt=>{const yt=tt.target.getStage();let Ut=yt.getPointerPosition();if(!Ut&&tt.evt.changedTouches&&tt.evt.changedTouches.length>0){const Ct=tt.evt.changedTouches[0],Ht=yt.container().getBoundingClientRect();Ut={x:Ct.clientX-Ht.left,y:Ct.clientY-Ht.top}}if(Ut){if(D){const Ct=Zi(L),Ht=d.filter(he=>ri(he.x,he.y,Ct)),ee=u.filter(he=>{if(he.type==="line"||he.type==="arrow"){for(let li=0;li<he.points.length;li+=2)if(ri(he.points[li],he.points[li+1],Ct))return!0;return!1}else{const li=he.x+(he.width?he.width/2:0),Fs=he.y+(he.height?he.height/2:0);return ri(li,Fs,Ct)}}),Lt=Ht.map(he=>he.id),Ft=ee.map(he=>he.id),Qt=[...Lt,...Ft];I(Qt),F(null),x(!1);return}v&&(c([...u,b]),O(null),nt(!0))}},Zi=tt=>({x:tt.width>=0?tt.x:tt.x+tt.width,y:tt.height>=0?tt.y:tt.y+tt.height,width:Math.abs(tt.width),height:Math.abs(tt.height)}),ri=(tt,yt,Ut)=>tt>=Ut.x&&tt<=Ut.x+Ut.width&&yt>=Ut.y&&yt<=Ut.y+Ut.height,Wa=tt=>{const yt=tt.target.id();if(C(yt),a==="select"&&!R.includes(yt)&&I([...R,yt]),Ze&&yt.startsWith("player")){const Ut=d.find(Ht=>Ht.id===yt);if(!Ut)return;const Ct=Kt?de:Fe;if(Ut.color===Ct&&Ut.isGoalkeeper)return}},hs=tt=>{const yt=tt.target.id();if(yt.startsWith("player")){const Ut=d.find(ee=>ee.id===yt);if(!Ut)return;const Ct=tt.target.x()-Ut.x,Ht=tt.target.y()-Ut.y;if(Ze){const ee=Kt?de:Fe;if(Ut.color===ee){if(Ut.isGoalkeeper){const Ft=d.map(Qt=>Qt.id===yt?{...Qt,x:Qt.x,y:Qt.y}:Qt);m(Ft);return}const Lt=d.map(Ft=>Ft.color===Ut.color&&!Ft.isGoalkeeper?{...Ft,x:Ft.x+Ct,y:Ft.y+Ht}:Ft);m(Lt),nt(!0)}else{const Lt=d.map(Ft=>Ft.id===yt?{...Ft,x:tt.target.x(),y:tt.target.y()}:Ft);m(Lt),nt(!0)}}else if(a==="select"&&R.length>1&&R.includes(yt)){const ee=d.map(Ft=>R.includes(Ft.id)?{...Ft,x:Ft.x+Ct,y:Ft.y+Ht}:Ft),Lt=u.map(Ft=>{if(R.includes(Ft.id))if(Ft.type==="line"||Ft.type==="arrow"){const Qt=[...Ft.points];for(let he=0;he<Qt.length;he+=2)Qt[he]+=Ct,Qt[he+1]+=Ht;return{...Ft,points:Qt}}else{if(Ft.type==="box"||Ft.type==="football")return{...Ft,x:tt.target.x(),y:tt.target.y()};if(Ft.type==="circle")return{...Ft,x:tt.target.x()-Ft.width/2,y:tt.target.y()-Ft.height/2}}return Ft});m(ee),c(Lt),nt(!0)}else{const ee=d.map(Lt=>Lt.id===yt?{...Lt,x:tt.target.x(),y:tt.target.y()}:Lt);m(ee),nt(!0)}}else{const Ut=u.find(ee=>ee.id===yt);if(!Ut)return;let Ct,Ht;if(Ut.type==="line"||Ut.type==="arrow"?(Ct=tt.target.points()[0]-Ut.points[0],Ht=tt.target.points()[1]-Ut.points[1]):(Ct=tt.target.x()-Ut.x,Ht=tt.target.y()-Ut.y),a==="select"&&R.length>1&&R.includes(yt)){const ee=d.map(Ft=>R.includes(Ft.id)?{...Ft,x:Ft.x+Ct,y:Ft.y+Ht}:Ft),Lt=u.map(Ft=>{if(R.includes(Ft.id))if(Ft.type==="line"||Ft.type==="arrow"){const Qt=[...Ft.points];for(let he=0;he<Qt.length;he+=2)Qt[he]+=Ct,Qt[he+1]+=Ht;return{...Ft,points:Qt}}else{if(Ft.type==="box"||Ft.type==="football")return{...Ft,x:tt.target.x(),y:tt.target.y()};if(Ft.type==="circle")return{...Ft,x:tt.target.x()-Ft.width/2,y:tt.target.y()-Ft.height/2}}return Ft});m(ee),c(Lt),nt(!0)}else{const ee=u.map(Lt=>{if(Lt.id===yt)if(Lt.type==="line"||Lt.type==="arrow"){const Ft=[...Lt.points];for(let Qt=0;Qt<Ft.length;Qt+=2)Ft[Qt]+=Ct,Ft[Qt+1]+=Ht;return{...Lt,points:Ft}}else{if(Lt.type==="box"||Lt.type==="football")return{...Lt,x:tt.target.x(),y:tt.target.y()};if(Lt.type==="circle")return{...Lt,x:tt.target.x()-Lt.width/2,y:tt.target.y()-Lt.height/2}}return Lt});c(ee),nt(!0)}}},ks=tt=>{if(tt&&tt!==He){if(tt.startsWith("player")){const yt=d.filter(Ut=>Ut.id!==tt);m(yt)}else{const yt=u.filter(Ut=>Ut.id!==tt);c(yt)}C(null),nt(!0)}},El=()=>{fa("delete")},rr=()=>{const tt=u.find(yt=>yt.id===He);c(tt?[tt]:[]),m([]),H({}),C(null),nt(!0)},fs=()=>{if(Tt>0){const tt=Tt-1,yt=X[tt];let Ut=[...yt.shapes];if(!Ut.find(Ht=>Ht.id===He)&&He){const Ht=u.find(ee=>ee.id===He);Ht&&Ut.push(Ht)}c(Ut),m(yt.players),H(yt.playerNumbers),lt(tt),C(null)}},An=()=>{if(Tt<X.length-1){const tt=Tt+1,yt=X[tt];let Ut=[...yt.shapes];if(!Ut.find(Ht=>Ht.id===He)&&He){const Ht=u.find(ee=>ee.id===He);Ht&&Ut.push(Ht)}c(Ut),m(yt.players),H(yt.playerNumbers),lt(tt),C(null)}},Gs=tt=>{const yt=tt.target.value.replace(/[^0-9]/g,"");k(yt)},lr=tt=>{T(tt.target.value)},kr=tt=>{tt.preventDefault(),V&&M&&(typeof z[V.id]=="object"?H({...z,[V.id]:{...z[V.id],number:M,name:K}}):H({...z,[V.id]:{number:M,name:K}}),nt(!0)),j(!1),w(null)},Ke=tt=>{(tt.key==="Delete"||tt.key==="Backspace")&&U&&ks(U),tt.key==="`"&&!Y&&(G(yt=>!yt),tt.preventDefault())},or=tt=>{et(tt.target.value)},da=tt=>{if(tt.preventDefault(),Q.trim()){const yt={type:"feedback",text:Q,timestamp:new Date().toLocaleTimeString()};console.log("User Feedback:",Q),pt(Ut=>[...Ut,yt]),et("")}},ga=(tt,yt,Ut)=>{let Ct;switch(tt){case"442":Ct=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.4,y:.2},{x:.4,y:.4},{x:.4,y:.6},{x:.4,y:.8},{x:.6,y:.4},{x:.6,y:.6}];break;case"433":Ct=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.4,y:.35},{x:.4,y:.5},{x:.4,y:.65},{x:.65,y:.25},{x:.65,y:.5},{x:.65,y:.75}];break;case"4231":Ct=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.4},{x:.2,y:.6},{x:.2,y:.8},{x:.35,y:.4},{x:.35,y:.6},{x:.5,y:.25},{x:.5,y:.5},{x:.5,y:.75},{x:.65,y:.5}];break;case"532":Ct=[{x:.08,y:.5},{x:.2,y:.2},{x:.2,y:.35},{x:.2,y:.5},{x:.2,y:.65},{x:.2,y:.8},{x:.4,y:.3},{x:.4,y:.5},{x:.4,y:.7},{x:.65,y:.4},{x:.65,y:.6}];break;default:Ct=[]}return yt&&(Ct=Ct.map(Ht=>({x:Ht.x,y:1-Ht.y}))),yt||(Ct=Ct.map(Ht=>({x:1-Ht.x,y:Ht.y}))),Ut&&(yt?Ct=Ct.map(Ht=>({x:Ht.y,y:1-Ht.x})):Ct=Ct.map(Ht=>({x:Ht.y,y:Ht.x}))),Ct};Gt.useEffect(()=>{xa||(async()=>{if(Bn)try{const yt=await h1(Bn.uid);Ki(yt)}catch(yt){console.error("Error loading boards from Firebase:",yt)}else{const yt=localStorage.getItem("footballTacticsBoards");if(yt)try{const Ut=JSON.parse(yt);Ki(Ut)}catch(Ut){console.error("Error loading saved boards from localStorage:",Ut)}}})()},[Bn,xa]);const Tl=()=>{if(!Bn){Da("save"),Mn(!0);return}Ui(Kn==="save"?"board":"save"),wa(""),zs(-1),Ii(!1)},ur=()=>{if(!Bn){Da("load"),Mn(!0);return}Ui(Kn==="load"?"board":"load"),wa(""),zs(-1)},bl=async()=>{if(!Ai.trim())return;if(be!==-1&&!Qa){Ii(!0);return}const tt={name:Ai.trim(),date:new Date().toISOString(),shapes:u,players:d,playerNumbers:z,homeTeamColor:de,awayTeamColor:Fe,verticalOrientation:dt};try{if(Bn){await vR(Bn.uid,tt);const yt=await h1(Bn.uid);Ki(yt)}else{let yt;be!==-1?(yt=[...zn],yt[be]=tt):yt=[...zn,tt],Ki(yt),localStorage.setItem("footballTacticsBoards",JSON.stringify(yt))}Ui("board"),Ii(!1)}catch(yt){console.error("Error saving board:",yt),alert("Failed to save your board. Please try again.")}},Gr=()=>{if(be===-1)return;const tt=zn[be];c(tt.shapes||[]),m(tt.players||[]),H(tt.playerNumbers||{}),ne(tt.homeTeamColor||null),me(tt.awayTeamColor||null),Nt(tt.verticalOrientation||!1);const yt=tt.shapes.find(Ut=>Ut.isDefault===!0);yt&&Ln(yt.id),Ui("board"),nt(!0)},ho=tt=>{zs(tt),wa(zn[tt].name),Ii(!1)},fo=async()=>{if(be!==-1){if(!Na){ar(!0);return}try{if(Bn){await _R(Bn.uid,zn[be].name);const tt=await h1(Bn.uid);Ki(tt)}else{const tt=[...zn];tt.splice(be,1),Ki(tt),localStorage.setItem("footballTacticsBoards",JSON.stringify(tt))}zs(-1),wa(""),ar(!1)}catch(tt){console.error("Error deleting board:",tt),alert("Failed to delete your board. Please try again.")}}},Oa=()=>{Ui("board"),wa(""),zs(-1),Ii(!1),ar(!1)},ma=()=>{Mn(!1),Da("")};Gt.useEffect(()=>{Bn&&Yi&&(Yi==="save"?Ui("save"):Yi==="load"&&Ui("load"),Da(""))},[Bn,Yi]);const cr=(tt,yt)=>{switch(tt){case"442":return["GK","RB","RCB","LCB","LB","RM","RCM","LCM","LM","RS","LS"][yt];case"433":return["GK","RB","RCB","LCB","LB","RDM","CDM","LDM","RW","CF","LW"][yt];case"4231":return["GK","RB","RCB","LCB","LB","RDM","LDM","RAM","CAM","LAM","ST"][yt];case"532":return["GK","RWB","RCB","CB","LCB","LWB","RCM","CM","LCM","RS","LS"][yt];default:return`P${yt}`}},ds=()=>{qn({numbers:Array(11).fill("").map((tt,yt)=>(yt+1).toString()),names:Array(11).fill(""),formation:"442",side:"left",teamColor:n}),Vi(!0)},Ma=()=>{Vi(!1),We(null)},Va=(tt,yt,Ut)=>{const Ct={...Ce};Ct[Ut][yt]=tt.target.value,qn(Ct)},Hs=tt=>{qn({...Ce,formation:tt})},Al=tt=>{qn({...Ce,side:tt})},hr=tt=>{qn({...Ce,teamColor:tt})},Wi=()=>{if(Ce.numbers.some(ee=>!ee)){alert("Please enter numbers for all players");return}const tt=d.filter(ee=>ee.color!==Ce.teamColor),yt=Ce.side==="left",Ct=ga(Ce.formation,yt,dt).map((ee,Lt)=>({id:`player-${tt.length+Lt}-${Date.now()+Lt}`,x:ee.x*Jt,y:ee.y*Xt,radius:Za,color:Ce.teamColor,type:"player",team:yt?"home":"away",isGoalkeeper:Lt===0})),Ht={};Ct.forEach((ee,Lt)=>{Ht[ee.id]={number:Ce.numbers[Lt],name:Ce.names[Lt]}}),m([...tt,...Ct]),H({...z,...Ht}),yt?(ne(Ce.teamColor),le(!0)):(me(Ce.teamColor),le(!1)),nt(!0),Ma()},fr=tt=>{const yt=d.filter(Lt=>Lt.color===tt);if(yt.length===0)return;const Ut=yt[0].team==="home",Ct="442",Ht=Array(11).fill("").map((Lt,Ft)=>(Ft+1).toString()),ee=Array(11).fill("");yt.forEach(Lt=>{var Qt,he,li;const Ft=yt.findIndex(Fs=>Fs.id===Lt.id);Ft>=0&&Ft<11&&(typeof z[Lt.id]=="object"?(Ht[Ft]=((Qt=z[Lt.id])==null?void 0:Qt.number)||"",ee[Ft]=((he=z[Lt.id])==null?void 0:he.name)||""):Ht[Ft]=((li=z[Lt.id])==null?void 0:li.toString())||"")}),qn({numbers:Ht,names:ee,formation:Ct,side:Ut?"left":"right",teamColor:tt}),Vi(!0)},Ja=tt=>{var Ct,Ht,ee;if(!tt)return;let yt="",Ut="";typeof z[tt.id]=="object"?(yt=((Ct=z[tt.id])==null?void 0:Ct.number)||"",Ut=((Ht=z[tt.id])==null?void 0:Ht.name)||""):yt=((ee=z[tt.id])==null?void 0:ee.toString())||"",Pn({id:tt.id,number:yt,name:Ut}),ji(!0)},gs=()=>{ji(!1),We(null)},js=()=>{const{id:tt,number:yt,name:Ut}=vi;tt&&yt&&(H({...z,[tt]:{number:yt,name:Ut}}),nt(!0)),gs()},Hr=(tt,yt)=>{Pn({...vi,[yt]:tt.target.value})},[Ji,$i]=Gt.useState(!1),dr=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),$i(!1)):(document.documentElement.requestFullscreen().catch(tt=>{console.log(`Error attempting to enable fullscreen: ${tt.message}`)}),$i(!0))};Gt.useEffect(()=>{const tt=()=>{$i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",tt),()=>{document.removeEventListener("fullscreenchange",tt)}},[]);const Yn=()=>{qe(!Ae)},Je=tt=>{if(tt==null||tt.preventDefault(),zr.trim()){const yt={id:`text-${u.length}-${Date.now()}`,x:ls.x,y:ls.y,text:zr.trim(),color:n,type:"text"};c([...u,yt]),nt(!0)}Pr(!1)},gr=()=>{Pr(!1)},mr=tt=>{Fi(tt.target.value)};return $.jsxs("div",{className:"tactics-board",tabIndex:0,onKeyDown:Ke,children:[$.jsx("h1",{children:"Football Tactics Board"}),$.jsxs("div",{className:`main-container ${De?"mobile-view":""}`,children:[De&&$.jsx("button",{className:`mobile-menu-toggle ${Ae?"open":""}`,onClick:Yn,"aria-label":"Toggle menu",children:$.jsxs("div",{className:"menu-icon",children:[$.jsx("span",{}),$.jsx("span",{}),$.jsx("span",{})]})}),De&&Ae&&$.jsx("div",{className:"mobile-menu-overlay",onClick:()=>qe(!1)}),$.jsxs("div",{className:`sidebar-toolbar ${De?"mobile":""} ${Ae?"open":""}`,children:[$.jsxs("div",{className:"toolbar-section color-section",children:[De&&$.jsx("button",{className:"mobile-menu-close",onClick:()=>qe(!1),"aria-label":"Close menu",children:"×"}),$.jsx("div",{className:"current-color-display",children:$.jsx("div",{className:"color-circle",style:{backgroundColor:n}})}),$.jsxs("div",{className:"colors-grid",children:[$.jsx("button",{className:n==="#FF0000"?"active":"",onClick:()=>Qi("#FF0000"),style:{backgroundColor:"#FF0000"}}),$.jsx("button",{className:n==="#0000FF"?"active":"",onClick:()=>Qi("#0000FF"),style:{backgroundColor:"#0000FF"}}),$.jsx("button",{className:n==="#00FF00"?"active":"",onClick:()=>Qi("#00FF00"),style:{backgroundColor:"#00FF00"}}),$.jsx("button",{className:n==="#FFFF00"?"active":"",onClick:()=>Qi("#FFFF00"),style:{backgroundColor:"#FFFF00"}}),$.jsx("button",{className:n==="#000000"?"active":"",onClick:()=>Qi("#000000"),style:{backgroundColor:"#000000"}}),$.jsx("button",{className:n==="#FFFFFF"?"active":"",onClick:()=>Qi("#FFFFFF"),style:{backgroundColor:"#FFFFFF",border:"1px solid #333"}}),$.jsx("button",{className:n==="#FFA500"?"active":"",onClick:()=>Qi("#FFA500"),style:{backgroundColor:"#FFA500"}}),$.jsx("button",{className:n==="#800080"?"active":"",onClick:()=>Qi("#800080"),style:{backgroundColor:"#800080"}}),$.jsx("button",{className:"color-picker-button",title:"Color Picker",children:$.jsx("input",{type:"color",value:n,onChange:tt=>Qi(tt.target.value)})})]})]}),$.jsxs("div",{className:"toolbar-section",children:[$.jsx("h3",{children:"Draw"}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="line"?"active":"",onClick:()=>fa("line"),children:"Line"}),$.jsx("button",{className:a==="arrow"?"active":"",onClick:()=>fa("arrow"),children:"Arrow"})]}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="box"?"active":"",onClick:()=>fa("box"),children:"Rectangle"}),$.jsx("button",{className:a==="circle"?"active":"",onClick:()=>fa("circle"),children:"Circle"})]}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="cone"?"active":"",onClick:()=>fa("cone"),children:"Cone"}),$.jsx("button",{className:a==="text"?"active":"",onClick:()=>fa("text"),children:"Text"})]})]}),$.jsxs("div",{className:"toolbar-section",children:[$.jsx("h3",{children:"Tools"}),$.jsx("div",{className:"category-label",children:"Team"}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{onClick:ds,children:"Add"}),$.jsx("button",{className:vn==="team"?"active":"",onClick:()=>Br("team"),children:"Edit"})]}),$.jsx("div",{className:"category-label",children:"Player"}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="player"?"active":"",onClick:()=>fa("player"),children:"Add"}),$.jsx("button",{className:vn==="player"?"active":"",onClick:()=>Br("player"),children:"Edit"})]}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="football"?"active":"",onClick:()=>fa("football"),children:"Ball"}),$.jsx("button",{className:a==="select"?"active":"",onClick:()=>fa("select"),children:"Select"})]})]}),$.jsxs("div",{className:"toolbar-section",children:[$.jsx("h3",{children:"Edit"}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{className:a==="delete"?"active":"",onClick:El,children:"Delete"}),$.jsx("button",{onClick:rr,children:"Clear"})]}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{onClick:fs,disabled:Tt<=0,className:Tt<=0?"disabled":"",children:"Undo"}),$.jsx("button",{onClick:An,disabled:Tt>=X.length-1,className:Tt>=X.length-1?"disabled":"",children:"Redo"})]})]}),$.jsxs("div",{className:"toolbar-section",children:[$.jsx("h3",{children:"Options"}),$.jsxs("div",{className:"button-row",children:[$.jsx("button",{onClick:Tl,className:Kn==="save"?"active":"",children:"Save"}),$.jsx("button",{onClick:ur,className:Kn==="load"?"active":"",children:"Load"})]}),$.jsx("div",{className:"button-row",children:Bn?$.jsx("button",{onClick:()=>Se(!0),children:"Profile"}):$.jsx("button",{onClick:()=>Mn(!0),children:"Login / Sign Up"})})]})]}),$.jsx("div",{className:`canvas-container ${De?"mobile-view":""}`,style:{width:Jt,height:Xt},children:Kn==="board"?$.jsxs($.Fragment,{children:[$.jsx(Y6,{ref:Xi,width:Jt,height:Xt,onMouseDown:Sl,onMouseMove:us,onMouseUp:cs,onTouchStart:Sl,onTouchMove:us,onTouchEnd:cs,children:$.jsxs(K6,{children:[$.jsx(Vr,{x:0,y:0,width:Jt,height:Xt,fill:"#4CAF50",stroke:"#FFFFFF",strokeWidth:2}),dt?$.jsxs($.Fragment,{children:[$.jsx(zu,{x:Jt/2,y:Xt/2,radius:Jt/5,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Jd,{points:[0,Xt/2,Jt,Xt/2],stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:(Jt-Jt*.275)/2,y:0,width:Jt*.275,height:Xt*.055,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:(Jt-Jt*.275)/2,y:Xt-Xt*.055,width:Jt*.275,height:Xt*.055,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:(Jt-Jt*.6)/2,y:0,width:Jt*.6,height:Xt*.16,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:(Jt-Jt*.6)/2,y:Xt-Xt*.16,width:Jt*.6,height:Xt*.16,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(zu,{x:Jt/2,y:Xt*.11,radius:Jt/150,fill:"#FFFFFF"}),$.jsx(zu,{x:Jt/2,y:Xt-Xt*.11,radius:Jt/150,fill:"#FFFFFF"}),$.jsx(Fg,{x:Jt/2,y:Xt*.905,innerRadius:Jt*.2,outerRadius:Jt*.2,angle:120,rotation:210,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Fg,{x:Jt/2,y:Xt-Xt*.905,innerRadius:Jt*.2,outerRadius:Jt*.2,angle:120,rotation:30,stroke:"#FFFFFF",strokeWidth:2})]}):$.jsxs($.Fragment,{children:[$.jsx(zu,{x:Jt/2,y:Xt/2,radius:Xt/5,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Jd,{points:[Jt/2,0,Jt/2,Xt],stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:0,y:(Xt-Xt*.275)/2,width:Jt*.055,height:Xt*.275,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:Jt-Jt*.055,y:(Xt-Xt*.275)/2,width:Jt*.055,height:Xt*.275,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:0,y:(Xt-Xt*.6)/2,width:Jt*.16,height:Xt*.6,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Vr,{x:Jt-Jt*.16,y:(Xt-Xt*.6)/2,width:Jt*.16,height:Xt*.6,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(zu,{x:Jt*.11,y:Xt/2,radius:Xt/150,fill:"#FFFFFF"}),$.jsx(zu,{x:Jt-Jt*.11,y:Xt/2,radius:Xt/150,fill:"#FFFFFF"}),$.jsx(Fg,{x:Jt*.095,y:Xt/2,innerRadius:Xt*.2,outerRadius:Xt*.2,angle:120,rotation:300,stroke:"#FFFFFF",strokeWidth:2}),$.jsx(Fg,{x:Jt-Jt*.095,y:Xt/2,innerRadius:Xt*.2,outerRadius:Xt*.2,angle:120,rotation:120,stroke:"#FFFFFF",strokeWidth:2})]}),u.map(tt=>tt.type==="line"?$.jsx(Jd,{id:tt.id,points:tt.points,stroke:tt.color,strokeWidth:3,onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs},tt.id):tt.type==="arrow"?$.jsx(kv,{id:tt.id,points:tt.points,pointerLength:10,pointerWidth:10,stroke:tt.color,strokeWidth:3,onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs},tt.id):tt.type==="box"?$.jsx(Vr,{id:tt.id,x:tt.x,y:tt.y,width:tt.width,height:tt.height,stroke:tt.color,strokeWidth:3,fill:"transparent",onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs},tt.id):tt.type==="circle"?$.jsx(Bv,{id:tt.id,x:tt.x+tt.width/2,y:tt.y+tt.height/2,radiusX:Math.abs(tt.width/2),radiusY:Math.abs(tt.height/2),stroke:tt.color,strokeWidth:3,fill:"transparent",onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs,dragBoundFunc:yt=>({x:yt.x,y:yt.y})},tt.id):tt.type==="football"?$.jsx(zu,{id:tt.id,x:tt.x,y:tt.y,radius:tt.radius,fill:"#FFFFFF",stroke:"#000000",strokeWidth:1,onClick:()=>!a&&C(tt.id),opacity:U===tt.id?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:yt=>{const Ut=yt.target.id(),Ct=u.map(Ht=>Ht.id===Ut?{...Ht,x:yt.target.x(),y:yt.target.y()}:Ht);c(Ct),nt(!0)}},tt.id):tt.type==="cone"?$.jsx(Jp,{id:tt.id,x:tt.x,y:tt.y,onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs,children:$.jsx(Jd,{points:[0,-15,10,10,-10,10],closed:!0,fill:tt.color,stroke:tt.strokeColor,strokeWidth:2})},tt.id):tt.type==="text"?$.jsx(Jp,{id:tt.id,x:tt.x,y:tt.y,onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,draggable:!0,onDragStart:Wa,onDragEnd:hs,children:$.jsx($p,{text:tt.text,fill:tt.color,fontSize:16,fontStyle:"bold"})},tt.id):null),b&&(b.type==="line"?$.jsx(Jd,{points:b.points,stroke:b.color,strokeWidth:3,dashEnabled:!0,dash:[5,5]}):b.type==="arrow"?$.jsx(kv,{points:b.points,pointerLength:10,pointerWidth:10,stroke:b.color,strokeWidth:3,dashEnabled:!0,dash:[5,5]}):b.type==="box"?$.jsx(Vr,{x:b.x,y:b.y,width:b.width,height:b.height,stroke:b.color,strokeWidth:3,dashEnabled:!0,dash:[5,5],fill:"transparent"}):b.type==="circle"?$.jsx(Bv,{x:b.x+b.width/2,y:b.y+b.height/2,radiusX:Math.abs(b.width/2),radiusY:Math.abs(b.height/2),stroke:b.color,strokeWidth:3,dashEnabled:!0,dash:[5,5],fill:"transparent"}):null),L?$.jsx(Vr,{x:L.x,y:L.y,width:L.width,height:L.height,fill:"rgba(0, 150, 255, 0.1)",stroke:"rgba(0, 150, 255, 0.8)",strokeWidth:1,dash:[5,5]}):null,d.map(tt=>{var yt,Ut,Ct;return $.jsxs(Jp,{id:tt.id,x:tt.x,y:tt.y,draggable:!0,onDragStart:Wa,onDragEnd:hs,onClick:()=>!a&&C(tt.id),opacity:U===tt.id||R.includes(tt.id)?.7:1,children:[$.jsx(zu,{id:tt.id,x:0,y:0,radius:Za,fill:tt.color,stroke:"#000000",strokeWidth:2}),$.jsx($p,{x:-4,y:-6,text:typeof z[tt.id]=="object"?((yt=z[tt.id])==null?void 0:yt.number)||"":((Ut=z[tt.id])==null?void 0:Ut.toString())||"",fill:"#FFFFFF",fontSize:12,fontStyle:"bold"}),((Ct=z[tt.id])==null?void 0:Ct.name)&&$.jsx($p,{x:-15,y:Za+5,text:z[tt.id].name,fill:"#000000",fontSize:10,width:Za*2,align:"center"})]},tt.id)})]})}),$.jsx("div",{className:"fullscreen-button",onClick:dr,children:$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:Ji?$.jsx("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}):$.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]}):Kn==="save"?$.jsxs("div",{className:"save-load-container",children:[$.jsx("h2",{children:"Save Tactics Board"}),$.jsxs("div",{className:"save-input-row",children:[$.jsx("input",{type:"text",value:Ai,onChange:tt=>wa(tt.target.value),placeholder:"Enter a name for this save",className:"save-name-input"}),$.jsx("button",{onClick:bl,disabled:!Ai.trim(),className:Ai.trim()?"":"disabled",children:be!==-1?"Update":"Save New"}),$.jsx("button",{onClick:fo,disabled:be===-1,className:be===-1?"disabled":"",children:"Delete"}),$.jsx("button",{onClick:Oa,children:"Cancel"})]}),Qa&&$.jsxs("div",{className:"overwrite-confirm",children:[$.jsxs("p",{children:['Are you sure you want to overwrite "',zn[be].name,'"?']}),$.jsxs("div",{className:"confirm-buttons",children:[$.jsx("button",{onClick:bl,children:"Yes, Overwrite"}),$.jsx("button",{onClick:()=>Ii(!1),children:"Cancel"})]})]}),Na&&$.jsxs("div",{className:"overwrite-confirm delete-confirm",children:[$.jsxs("p",{children:['Are you sure you want to delete "',zn[be].name,'"?']}),$.jsxs("div",{className:"confirm-buttons",children:[$.jsx("button",{onClick:fo,children:"Yes, Delete"}),$.jsx("button",{onClick:()=>ar(!1),children:"Cancel"})]})]}),$.jsxs("div",{className:"saved-boards-list",children:[$.jsx("h3",{children:"Existing Saves"}),zn.length===0?$.jsx("p",{className:"no-saves-message",children:"No saved boards yet. Create your first one!"}):$.jsx("div",{className:"board-items",children:zn.map((tt,yt)=>$.jsxs("div",{className:`board-item ${be===yt?"selected":""}`,onClick:()=>ho(yt),children:[$.jsx("div",{className:"board-name",children:tt.name}),$.jsx("div",{className:"board-date",children:new Date(tt.date).toLocaleString()})]},yt))})]})]}):Kn==="load"?$.jsxs("div",{className:"save-load-container",children:[$.jsx("h2",{children:"Load Tactics Board"}),$.jsxs("div",{className:"save-input-row",children:[$.jsx("input",{type:"text",value:Ai,placeholder:"Select a save to load",readOnly:!0,className:"save-name-input"}),$.jsx("button",{onClick:Gr,disabled:be===-1,className:be===-1?"disabled":"",children:"Load"}),$.jsx("button",{onClick:Oa,children:"Cancel"})]}),$.jsxs("div",{className:"saved-boards-list",children:[$.jsx("h3",{children:"Available Boards"}),zn.length===0?$.jsx("p",{className:"no-saves-message",children:"No saved boards available to load."}):$.jsx("div",{className:"board-items",children:zn.map((tt,yt)=>$.jsxs("div",{className:`board-item ${be===yt?"selected":""}`,onClick:()=>ho(yt),children:[$.jsx("div",{className:"board-name",children:tt.name}),$.jsx("div",{className:"board-date",children:new Date(tt.date).toLocaleString()})]},yt))})]})]}):null})]}),Fn&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"team-dialog",children:[$.jsxs("div",{className:"team-dialog-header",children:[$.jsx("h2",{children:"Create Team"}),$.jsx("button",{className:"close-button",onClick:Ma,children:"×"})]}),$.jsxs("div",{className:"team-dialog-body",children:[$.jsxs("div",{className:"team-options",children:[$.jsxs("div",{className:"formation-options",children:[$.jsx("label",{children:"Formation:"}),$.jsxs("div",{className:"formation-buttons",children:[$.jsx("button",{className:Ce.formation==="442"?"active":"",onClick:()=>Hs("442"),children:"4-4-2"}),$.jsx("button",{className:Ce.formation==="433"?"active":"",onClick:()=>Hs("433"),children:"4-3-3"}),$.jsx("button",{className:Ce.formation==="4231"?"active":"",onClick:()=>Hs("4231"),children:"4-2-3-1"}),$.jsx("button",{className:Ce.formation==="532"?"active":"",onClick:()=>Hs("532"),children:"5-3-2"})]})]}),$.jsxs("div",{className:"side-options",children:[$.jsx("label",{children:"Side:"}),$.jsxs("div",{className:"side-buttons",children:[$.jsx("button",{className:Ce.side==="left"?"active":"",onClick:()=>Al("left"),children:"Left"}),$.jsx("button",{className:Ce.side==="right"?"active":"",onClick:()=>Al("right"),children:"Right"})]})]}),$.jsxs("div",{className:"color-option",children:[$.jsx("label",{children:"Team Color:"}),$.jsxs("div",{className:"color-picker",children:[$.jsx("div",{className:"color-preview",style:{backgroundColor:Ce.teamColor}}),$.jsx("input",{type:"color",value:Ce.teamColor,onChange:tt=>hr(tt.target.value)})]})]})]}),$.jsxs("div",{className:"player-inputs",children:[$.jsxs("div",{className:"player-input-headers",children:[$.jsx("div",{className:"player-number-header",children:"Number"}),$.jsx("div",{className:"player-name-header",children:"Name"})]}),Ce.numbers.map((tt,yt)=>$.jsxs("div",{className:"player-input-row",children:[$.jsx("div",{className:"player-position",children:yt===0?"GK":cr(Ce.formation,yt)}),$.jsx("input",{type:"text",className:"player-number-input",value:tt,onChange:Ut=>Va(Ut,yt,"numbers"),placeholder:`#${yt+1}`}),$.jsx("input",{type:"text",className:"player-name-input",value:Ce.names[yt],onChange:Ut=>Va(Ut,yt,"names"),placeholder:"Player name"})]},yt))]})]}),$.jsxs("div",{className:"team-dialog-footer",children:[$.jsx("button",{className:"cancel-button",onClick:Ma,children:"Cancel"}),$.jsx("button",{className:"confirm-button",onClick:Wi,children:"Confirm"})]})]})}),Y&&V&&$.jsx("div",{className:"number-editor-overlay",children:$.jsxs("div",{className:"number-editor",children:[$.jsx("h3",{children:"Edit Player Number"}),$.jsxs("form",{onSubmit:kr,children:[$.jsx("input",{type:"text",value:M,onChange:Gs,placeholder:"Number",pattern:"[0-9]*",inputMode:"numeric",autoFocus:!0}),$.jsx("input",{type:"text",value:K,onChange:lr,placeholder:"Player name"}),$.jsxs("div",{className:"buttons",children:[$.jsx("button",{type:"submit",children:"Save"}),$.jsx("button",{type:"button",onClick:()=>j(!1),children:"Cancel"})]})]})]})}),Me&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"player-edit-dialog",children:[$.jsxs("div",{className:"player-edit-header",children:[$.jsx("h2",{children:"Edit Player"}),$.jsx("button",{className:"close-button",onClick:gs,children:"×"})]}),$.jsx("div",{className:"player-edit-body",children:$.jsxs("div",{className:"player-edit-form",children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Number:"}),$.jsx("input",{type:"text",value:vi.number,onChange:tt=>Hr(tt,"number"),placeholder:"Player number"})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Name:"}),$.jsx("input",{type:"text",value:vi.name,onChange:tt=>Hr(tt,"name"),placeholder:"Player name"})]})]})}),$.jsxs("div",{className:"player-edit-footer",children:[$.jsx("button",{className:"cancel-button",onClick:gs,children:"Cancel"}),$.jsx("button",{className:"confirm-button",onClick:js,children:"Confirm"})]})]})}),q&&$.jsx("div",{className:"console-overlay",children:$.jsxs("div",{className:"console-container",children:[$.jsxs("div",{className:"console-header",children:[$.jsx("h3",{children:"Feedback Console"}),$.jsx("button",{className:"close-button",onClick:()=>G(!1),children:"×"})]}),$.jsx("div",{className:"console-output",children:rt.length>0?rt.map((tt,yt)=>$.jsxs("div",{className:"console-entry",children:[$.jsxs("span",{className:"console-timestamp",children:["[",tt.timestamp,"]"]}),$.jsx("span",{className:"console-message",children:tt.text})]},yt)):$.jsx("div",{className:"console-placeholder",children:"Type your feedback for the developer"})}),$.jsxs("form",{className:"console-input-container",onSubmit:da,children:[$.jsx("input",{ref:si,type:"text",className:"console-input",value:Q,onChange:or,placeholder:"Type your feedback here..."}),$.jsx("button",{type:"submit",className:"console-send-button",children:"Send"})]})]})}),Ps&&$.jsx("div",{className:"number-editor-overlay",children:$.jsxs("div",{className:"number-editor",children:[$.jsx("h3",{children:"Add Text"}),$.jsxs("form",{onSubmit:Je,children:[$.jsx("input",{type:"text",value:zr,onChange:mr,placeholder:"Enter text",autoFocus:!0}),$.jsxs("div",{className:"buttons",children:[$.jsx("button",{type:"submit",children:"Confirm"}),$.jsx("button",{type:"button",onClick:gr,children:"Cancel"})]})]})]})}),Li&&$.jsx(AR,{onClose:ma}),Vn&&$.jsx(CR,{onClose:()=>Se(!1)})]})}kS.createRoot(document.getElementById("root")).render($.jsx(Gt.StrictMode,{children:$.jsx(ER,{children:$.jsx(RR,{})})}));
